"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(typeof self !== 'undefined' ? self : this)["webpackHotUpdateapp"]("app",{

/***/ "./node_modules/babel-loader/lib/index.js??clonedRuleSet-37[0].rules[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/adc-core/fields/collaborative-editor/CollaborativeEditor2.vue?vue&type=script&lang=js&":
/*!******************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib/index.js??clonedRuleSet-37[0].rules[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/adc-core/fields/collaborative-editor/CollaborativeEditor2.vue?vue&type=script&lang=js& ***!
  \******************************************************************************************************************************************************************************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es.array.includes.js */ \"./node_modules/core-js/modules/es.array.includes.js\");\n/* harmony import */ var core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_includes_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/es.array.push.js */ \"./node_modules/core-js/modules/es.array.push.js\");\n/* harmony import */ var core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var core_js_modules_es_string_replace_all_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! core-js/modules/es.string.replace-all.js */ \"./node_modules/core-js/modules/es.string.replace-all.js\");\n/* harmony import */ var core_js_modules_es_string_replace_all_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_replace_all_js__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _TextVersioning_vue__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./TextVersioning.vue */ \"./src/adc-core/fields/collaborative-editor/TextVersioning.vue\");\n/* harmony import */ var reconnectingwebsocket__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! reconnectingwebsocket */ \"./node_modules/reconnectingwebsocket/reconnecting-websocket.js\");\n/* harmony import */ var reconnectingwebsocket__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(reconnectingwebsocket__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var sharedb_lib_client__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! sharedb/lib/client */ \"./node_modules/sharedb/lib/client/index.js\");\n/* harmony import */ var quill__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! quill */ \"./node_modules/quill/dist/quill.js\");\n/* harmony import */ var quill__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(quill__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _imports_defaults_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./imports/defaults.js */ \"./src/adc-core/fields/collaborative-editor/imports/defaults.js\");\n/* harmony import */ var _imports_MediaBlot__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./imports/MediaBlot */ \"./src/adc-core/fields/collaborative-editor/imports/MediaBlot.js\");\n/* harmony import */ var _imports_CardEditableModule__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./imports/CardEditableModule */ \"./src/adc-core/fields/collaborative-editor/imports/CardEditableModule.js\");\n\n\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n\n\nsharedb_lib_client__WEBPACK_IMPORTED_MODULE_5__.types.register((__webpack_require__(/*! rich-text */ \"./node_modules/rich-text/index.js\").type));\n\nvar Parchment = quill__WEBPACK_IMPORTED_MODULE_6___default()[\"import\"](\"parchment\");\nvar lineHeightConfig = {\n  scope: Parchment.Scope.BLOCK,\n  whitelist: _imports_defaults_js__WEBPACK_IMPORTED_MODULE_7__.lineHeightArr\n};\nvar lineHeightClass = new Parchment.Attributor.Class(\"lineheight\", \"ql-line-height\", lineHeightConfig);\nvar lineHeightStyle = new Parchment.Attributor.Style(\"lineheight\", \"line-height\", lineHeightConfig);\nParchment.register(lineHeightClass);\nParchment.register(lineHeightStyle);\nvar Size = quill__WEBPACK_IMPORTED_MODULE_6___default()[\"import\"](\"attributors/style/size\");\nSize.whitelist = _imports_defaults_js__WEBPACK_IMPORTED_MODULE_7__.fontSizeArr;\nquill__WEBPACK_IMPORTED_MODULE_6___default().register(Size, true);\nconst FontAttributor = quill__WEBPACK_IMPORTED_MODULE_6___default()[\"import\"](\"attributors/style/font\");\nconst custom_fonts_titles = window.app_infos.custom_fonts.map(cf => cf.title);\nconst all_fonts = _imports_defaults_js__WEBPACK_IMPORTED_MODULE_7__.fonts.concat(custom_fonts_titles);\nFontAttributor.whitelist = all_fonts;\nquill__WEBPACK_IMPORTED_MODULE_6___default().register(FontAttributor, true);\nvar BlockEmbed = quill__WEBPACK_IMPORTED_MODULE_6___default()[\"import\"](\"blots/block/embed\");\nclass DividerBlot extends BlockEmbed {}\nDividerBlot.blotName = \"divider\";\nDividerBlot.tagName = \"hr\";\nquill__WEBPACK_IMPORTED_MODULE_6___default().register(DividerBlot);\n\n\nquill__WEBPACK_IMPORTED_MODULE_6___default().register(\"formats/media\", _imports_MediaBlot__WEBPACK_IMPORTED_MODULE_8__[\"default\"]);\nquill__WEBPACK_IMPORTED_MODULE_6___default().register(\"modules/cardEditable\", _imports_CardEditableModule__WEBPACK_IMPORTED_MODULE_9__[\"default\"]);\n\n// how it works:\n// -> disabled by default\n// -> if is_collaborative is true, it uses sharedb on the server to handle conflict-free editing\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  props: {\n    path: String,\n    content: String,\n    scrollingContainer: HTMLElement,\n    custom_formats: Array,\n    line_selected: [Boolean, Number],\n    edit_on_mounted: Boolean,\n    can_edit: Boolean\n    // enabled for page_by_page, this means that the edit button is located in the top right corner in absolute,\n    // and that the toolbar moves to the closest parent dedicated container after creation\n  },\n\n  components: {\n    TextVersioning: _TextVersioning_vue__WEBPACK_IMPORTED_MODULE_3__[\"default\"]\n  },\n  data() {\n    return {\n      editor: null,\n      text_deltas: null,\n      toolbar_el: null,\n      rtc: {\n        socket: null,\n        connection_state: null\n      },\n      show_archives: false,\n      debounce_textUpdate: undefined,\n      is_collaborative: true,\n      collaborative_is_loaded: false,\n      autosave: true,\n      editor_is_enabled: false,\n      doc: undefined,\n      is_loading_or_saving: false,\n      is_disabling_editor: false,\n      show_saved_icon: false,\n      currently_selected_eles: false,\n      editor_id: (Math.random().toString(36) + \"00000000000000000\").slice(2, 5 + 5)\n    };\n  },\n  created() {},\n  async mounted() {\n    await this.initEditor();\n    this.toolbar_el = this.$el.querySelector(\".ql-toolbar\");\n    if (this.edit_on_mounted === true) this.enableEditor();\n  },\n  beforeDestroy() {\n    this.disableEditor();\n  },\n  watch: {\n    content() {\n      if (!this.is_collaborative || this.is_collaborative && !this.editor_is_enabled) {\n        this.$nextTick(() => {\n          this.editor.root.innerHTML = this.content;\n        });\n      }\n    },\n    line_selected: {\n      handler() {\n        if (this.line_selected) {\n          // let [line, offset] = quill.getLine(this.line_selected);\n          this.$nextTick(() => {\n            const selected_line = this.editor.container.querySelector(`.ql-editor > *:nth-child(${this.line_selected})`);\n            this.currently_selected_eles = [selected_line];\n            this.$nextTick(() => {\n              selected_line.scrollIntoView({\n                behavior: \"smooth\",\n                block: \"center\",\n                inline: \"nearest\"\n              });\n            });\n          });\n        }\n        this.currently_selected_eles = false;\n      },\n      immediate: true\n    },\n    can_edit() {\n      if (!this.can_edit && this.editor_is_enabled) this.disableEditor();\n    },\n    currently_selected_eles(newEles) {\n      this.editor.container.querySelectorAll(\".is--selected\").forEach(el => el.classList && el.classList.remove(\"is--selected\"));\n      if (newEles) newEles.forEach(el => el.classList && el.classList.add(\"is--selected\"));\n    }\n  },\n  computed: {\n    quill_styles() {\n      let css = \"\";\n      for (const font of all_fonts) {\n        css += `\n.ql-picker.ql-font .ql-picker-label[data-value=\"${font}\"]::before,\n.ql-picker.ql-font .ql-picker-item[data-value=\"${font}\"]::before {\n  content: \"${font}\";\n  font-family: \"${font}\";\n}\n        `;\n      }\n      return css;\n    }\n  },\n  methods: {\n    async initEditor() {\n      const toolbar = this.makeToolbar();\n      this.editor = new (quill__WEBPACK_IMPORTED_MODULE_6___default())(this.$refs.editor, {\n        // debug: \"info\",\n        modules: {\n          cardEditable: true,\n          toolbar: toolbar\n        },\n        bounds: this.$refs.editor,\n        theme: \"snow\",\n        formats: this.custom_formats || _imports_defaults_js__WEBPACK_IMPORTED_MODULE_7__.formats,\n        placeholder: \"\",\n        readOnly: !this.editor_is_enabled,\n        scrollingContainer: this.scrollingContainer\n      });\n      if (this.content) this.editor.root.innerHTML = this.content;\n      this.setStatusButton();\n      this.editor.on(\"selection-change\", () => {\n        console.log(`CollaborativeEditor / selection-change`);\n        this.updateSelectedLines();\n      });\n      this.editor.on(\"text-change\", (delta, oldDelta, source) => {\n        delta, oldDelta, source;\n        console.log(`CollaborativeEditor / text-change w source ${source}`);\n        this.$nextTick(() => {\n          // todo : only update if possibly changing line (backspace and enter)\n          this.updateSelectedLines();\n        });\n      });\n    },\n    makeToolbar() {\n      let container = [];\n      let reference_formats = this.custom_formats || _imports_defaults_js__WEBPACK_IMPORTED_MODULE_7__.formats;\n      if (reference_formats.includes(\"font\")) container.push([{\n        font: all_fonts\n      }]);\n      if (reference_formats.includes(\"header\")) container.push([{\n        header: [false, 1, 2, 3]\n      }]);\n      if (reference_formats.includes(\"size\")) container.push([{\n        size: _imports_defaults_js__WEBPACK_IMPORTED_MODULE_7__.fontSizeArr\n      }]);\n      if (reference_formats.includes(\"lineheight\")) container.push([{\n        lineheight: _imports_defaults_js__WEBPACK_IMPORTED_MODULE_7__.lineHeightArr\n      }]);\n      let formatting_opt = [];\n      const basic_formatting = [\"bold\", \"italic\", \"underline\", \"strike\", \"link\", \"blockquote\"];\n      basic_formatting.map(bf => {\n        if (reference_formats.includes(bf)) formatting_opt.push(bf);\n      });\n      container.push(formatting_opt);\n      if (reference_formats.includes(\"color\")) container.push([{\n        color: [\"#000000\", \"#353535\", \"#b9b9b9\", \"#fff\", \"#1d327f\", \"#52c5b9\", \"#ffbe32\", \"#fc4b60\", \"#ff3333\", \"#08cc11\", \"#1c52ee\", \"#ff9c33\", \"#000000\", \"#bdb3b3\", \"#ae1cee\", \"#fff933\", \"#a54a0f\"]\n      }]);\n      if (reference_formats.includes(\"background\")) container.push([{\n        background: [\"transparent\", \"#f1f1f1\", \"#b9b9b9\", \"#bec6e5\", \"#a5e5da\", \"#ffd892\", \"#ff808c\", \"#ff3333\", \"#08cc11\", \"#1c52ee\", \"#ff9c33\", \"#000000\", \"#bdb3b3\", \"#ae1cee\", \"#fff933\", \"#a54a0f\"]\n      }]);\n      if (reference_formats.includes(\"list\")) container.push([{\n        list: \"ordered\"\n      }, {\n        list: \"bullet\"\n      }]);\n      if (reference_formats.includes(\"align\")) container.push([{\n        align: \"\"\n      }, {\n        align: \"center\"\n      }, {\n        align: \"right\"\n      }, {\n        align: \"justify\"\n      }]);\n      if (reference_formats.includes(\"code-block\")) container.push([\"code-block\"]);\n\n      // todo divider\n      container.push([\"clean\"]);\n      let handlers = {\n        divider: function () {\n          var range = this.quill.getSelection();\n          if (range) {\n            this.quill.insertEmbed(range.index, \"divider\", \"null\", (quill__WEBPACK_IMPORTED_MODULE_6___default().sources.USER));\n          }\n        },\n        line_height_select: function (new_line_height) {\n          new_line_height;\n          // var range = this.quill.getSelection();\n          // if (range) {\n          //   debugger;\n          //   this.quill.format(\n          //     range.index,\n          //     range.length,\n          //     \"line-height\",\n          //     +new_line_height,\n          //     \"user\"\n          //   );\n          // }\n        }\n      };\n\n      return {\n        container,\n        handlers\n      };\n    },\n    getEditorContent() {\n      console.log(`CollaborativeEditor • getEditorContent`);\n      if (!this.editor.getText() || this.editor.getText() === \"\\n\") return \"\";\n      let html = this.editor.root.innerHTML;\n      html = this.cleanEditorContent(html);\n      return html;\n    },\n    cleanEditorContent(html) {\n      console.log(`CollaborativeEditor • cleanEditorContent`);\n      var t = document.createElement(\"template\");\n      t.innerHTML = html;\n\n      // used to make sure we don’t get weird stuff such as <p style=\"font-family: \"Avada\";\">plop</p>\n      // content = content.replace(/&quot;/g, \"'\");\n      // todo : remove status class like is--selected or is--dragover\n      t.content.querySelectorAll(\".is--selected\").forEach(el => el.classList && el.classList.remove(\"is--selected\"));\n      return t.innerHTML;\n    },\n    setStatusButton() {\n      if (this.$refs.editBtn) this.$el.querySelector(\".ql-toolbar\").appendChild(this.$refs.editBtn);\n    },\n    toggleEdit() {\n      if (!this.editor_is_enabled) this.enableEditor();else this.disableEditor();\n    },\n    async enableEditor() {\n      if (this.editor_is_enabled || !this.can_edit) return false;\n      console.log(`CollaborativeEditor2 • enableEditor`);\n      if (this.is_collaborative) await this.startCollaborative();\n      this.editor.enable();\n      this.editor.focus();\n\n      // todo select latest used font as selected font\n      if (this.editor.getLength() <= 1) {\n        const fontLastUsed = localStorage.getItem(\"fontLastUsed\");\n        this.editor.format(\"font\", fontLastUsed);\n      }\n      this.editor.setSelection(this.editor.getLength(), (quill__WEBPACK_IMPORTED_MODULE_6___default().sources.SILENT));\n      this.$emit(`contentIsEdited`, this.toolbar_el);\n      this.editor_is_enabled = true;\n    },\n    async disableEditor() {\n      if (!this.editor_is_enabled) return false;\n      console.log(`CollaborativeEditor2 • disableEditor`);\n      this.is_disabling_editor = true;\n      this.editor.setSelection(null);\n      this.editor.blur();\n      this.updateSelectedLines();\n      if (this.is_collaborative) this.endCollaborative();\n      await this.saveText();\n\n      // check if toolbar is away, get it back if it is\n      this.getToolbarBack();\n      this.$emit(`contentIsNotEdited`);\n      this.$nextTick(() => {\n        this.editor.disable();\n        this.editor_is_enabled = false;\n        this.is_disabling_editor = false;\n      });\n    },\n    getToolbarBack() {\n      if (!this.toolbar_el.parentElement.classList.contains(\"_toolbarAndEditorContainer\")) this.$el.querySelector(\"._toolbarAndEditorContainer\").prepend(this.toolbar_el);\n    },\n    restoreVersion(content) {\n      // TODO : with delta to allow for undo\n      // this.editor.root.innerHTML = content;\n      const value = content;\n      const delta = this.editor.clipboard.convert(value);\n      this.editor.setContents(delta, \"user\");\n      this.show_archives = false;\n    },\n    editorClick($event) {\n      // $event.preventDefault();\n      if ($event.target.parentElement && $event.target.parentElement.classList && $event.target.parentElement.classList.contains(\"ql-editor\")) {\n        // click on the left of the element\n        if ($event.offsetX < 0) {\n          const line_number = Array.from($event.target.parentElement.children).findIndex(c => c === $event.target);\n          this.$emit(\"lineClicked\", line_number + 1);\n        }\n      }\n    },\n    updateSelectedLines() {\n      // console.log(`CollaborativeEditor • updateSelectedLines`);\n      if (!this.editor_is_enabled) return;\n      const range = this.editor.getSelection();\n      if (range && range.index) {\n        // console.log(\n        //   `CollaborativeEditor • updateSelectedLines / range.index = ${range.index} et range.length = ${range.length} `\n        // );\n\n        let blots = [];\n        if (range.length === 0) blots = [this.editor.getLine(range.index)[0]];else blots = this.editor.getLines(range.index, range.length);\n        if (blots) {\n          this.currently_selected_eles = blots.map(b => b.domNode);\n          return;\n        }\n      }\n      this.currently_selected_eles = false;\n    },\n    async saveText() {\n      const new_meta = {\n        $content: this.getEditorContent()\n      };\n      try {\n        this.is_loading_or_saving = true;\n        await this.$api.updateMeta({\n          path: this.path,\n          new_meta\n        });\n        this.is_loading_or_saving = false;\n        this.show_saved_icon = true;\n        await new Promise(r => setTimeout(r, 1500));\n        this.show_saved_icon = false;\n      } catch (err) {\n        if (err.message === \"content not changed\") err;\n        this.is_loading_or_saving = false;\n      }\n    },\n    async startCollaborative() {\n      return new Promise((resolve, reject) => {\n        // const params = new URLSearchParams({\n        //   folder_type: this.folder_type,\n        //   folder_slug: this.folder_slug,\n        //   meta_slug: this.meta_slug,\n        // });\n\n        // const requested_querystring = \"?\" + params.toString();\n        const path_to_meta = this.path.replaceAll(\"/\", \"*\");\n        const requested_resource_url = (location.protocol === \"https:\" ? \"wss\" : \"ws\") + \"://\" + window.location.host + \"/isSharedb\" + `?path_to_meta=${path_to_meta}`;\n        console.log(`CollaborativeEditor / startCollaborative : will connect to ws server with ${requested_resource_url}`);\n        this.rtc.socket = new (reconnectingwebsocket__WEBPACK_IMPORTED_MODULE_4___default())(requested_resource_url);\n        const connection = new sharedb_lib_client__WEBPACK_IMPORTED_MODULE_5__.Connection(this.rtc.socket);\n        connection.on(\"state\", state => {\n          this.rtc.connection_state = state.toString();\n        });\n        console.log(`CollaborativeEditor / connecting to doc ${path_to_meta}`);\n        this.doc = connection.get(\"collaborative_texts\", path_to_meta);\n        this.doc.subscribe(err => {\n          if (err) console.error(`CollaborativeEditor / err ${err}`);\n          console.log(`CollaborativeEditor / doc subscribe`);\n          if (this.doc.type) {\n            console.log(`CollaborativeEditor / doc already exists and doc.data = ${JSON.stringify(this.doc.data)}`);\n            this.editor.setContents(this.doc.data, \"init\");\n          } else {\n            this.doc.create(this.editor.getContents(), \"rich-text\");\n          }\n          this.editor.history.clear();\n          this.editor.on(\"text-change\", this.submitOPAndSave);\n          this.doc.on(\"op\", (op, source) => {\n            console.log(`CollaborativeEditor / op applied`);\n            this.text_deltas = this.doc.data;\n            if (source === this.editor_id) return;\n            console.log(`CollaborativeEditor / outside op applied`);\n            this.editor.updateContents(op);\n          });\n          this.collaborative_is_loaded = true;\n          return resolve();\n        });\n        this.doc.on(\"error\", err => {\n          // err;\n          // soucis : les situations ou le serveur a été fermé et en le rouvrant il ne possède plus d’instance du doc dans sharedb…\n          console.error(`CollaborativeEditor / doc err ${err}`);\n          this.$alertify.delay(4000).error(err);\n          this.collaborative_is_loaded = true;\n          return reject(err);\n        });\n      });\n    },\n    endCollaborative() {\n      if (this.rtc.socket) this.rtc.socket.close();\n      if (this.doc) {\n        this.doc.unsubscribe();\n        this.doc = null;\n      }\n      this.editor.off(\"text-change\", this.submitOPAndSave);\n      this.collaborative_is_loaded = false;\n    },\n    submitOPAndSave(delta, oldDelta, source) {\n      console.log(`CollaborativeEditor / submitOPAndSave w source ${source}`);\n      if (source === \"user\") {\n        this.doc.submitOp(delta, {\n          source: this.editor_id\n        });\n        console.log(`CollaborativeEditor / submitted op to server ${JSON.stringify(delta)}`);\n        this.updateTextMedia();\n      }\n    },\n    updateTextMedia() {\n      if (this.debounce_textUpdate) clearTimeout(this.debounce_textUpdate);\n      this.is_loading_or_saving = true;\n      this.debounce_textUpdate = setTimeout(async () => {\n        console.log(`CollaborativeEditor • updateTextMedia: saving new snapshot`);\n        await this.saveText();\n        const {\n          font\n        } = this.editor.getFormat();\n        localStorage.setItem(\"fontLastUsed\", font);\n      }, 1000);\n    },\n    addMediaAtTheEnd(media) {\n      this.addMediaAtIndex(this.editor.getLength() - 1, media);\n    },\n    addMediaAtCaretPosition(media) {\n      const selection = this.editor.getSelection(true);\n      if (selection && selection.index) {\n        this.addMediaAtIndex(selection.index, media);\n        return;\n      }\n      this.addMediaAtTheEnd(media);\n    },\n    addMediaAtIndex(index, media) {\n      console.log(`CollaborativeEditor • addMediaAtIndex ${index}`);\n      // TODO fix\n      const mediaURL = `./${this.folder_slug}/${media.media_filename}`;\n      // const mediaURL =\n      //   this.$root.state.mode === \"export_publication\"\n      //     ? `./${this.folder_slug}/${media.media_filename}`\n      //     : `/${this.folder_slug}/${media.media_filename}`;\n\n      // setting editor focus and selection can cause the scroll to \"jump\"\n      // not exactly a good idea…\n      // this.editor.setSelection(index, Quill.sources.SILENT);\n      // this.editor.focus();\n\n      this.editor.blur();\n      const {\n        $type,\n        caption,\n        $path\n      } = media;\n      $path;\n      if ($type === \"image\") {\n        const thumb_path = media.$thumbs[1600];\n        if (thumb_path) {\n          // this.editor.insertText(index, \"\\n\", Quill.sources.USER);\n          this.editor.insertEmbed(index, \"media\", {\n            type: $type,\n            caption\n            // TODO update with $path\n            // meta_filename: $slug,\n            // src: `/thumbs/${this.folder_type}/${this.folder_slug}/${thumb_path}`,\n          }, (quill__WEBPACK_IMPORTED_MODULE_6___default().sources.USER));\n          // this.editor.setSelection(index + 1, Quill.sources.SILENT);\n        }\n      } else if ($type === \"video\") {\n        // this.editor.insertText(index, \"\\n\", Quill.sources.USER);\n        this.editor.insertEmbed(index, \"media\", {\n          type: $type,\n          caption,\n          // TODO update with $path\n          meta_filename: $path,\n          src: mediaURL\n        }, (quill__WEBPACK_IMPORTED_MODULE_6___default().sources.USER));\n        // this.editor.setSelection(index + 1, Quill.sources.SILENT);\n      } else if ($type === \"audio\") {\n        this.editor.insertEmbed(index, \"media\", {\n          type: $type,\n          caption,\n          // TODO update with $path\n          meta_filename: $path,\n          src: mediaURL\n        }, (quill__WEBPACK_IMPORTED_MODULE_6___default().sources.USER));\n      } else {\n        this.$alertify.closeLogOnClick(true).delay(4000).error(this.$t(\"notifications.media_type_not_handled\"));\n      }\n    },\n    onDragover($event) {\n      if (!this.editor_is_enabled) return;\n      console.log(`CollaborativeEditor2 / onDragover`);\n      $event.preventDefault();\n      // todo debounce dragover to trigger only a handful of times per seconds\n      // const el = $event.target;\n      let _blot = this.getBlockFromElement($event.target);\n      if (!_blot) return false;\n\n      // do nothing if dragover on\n      // if (el.classList.contains(\"ql-editor\")) return;\n\n      // if (el.parentElement.classList.contains(\"ql-editor\")) {\n      if (!_blot.domNode.classList.contains(\"is--dragover\")) {\n        _blot.domNode.classList.add(\"is--dragover\");\n        _blot.domNode.addEventListener(\"dragleave\", () => {\n          console.log(`CollaborativeEditor2 / dragleave`);\n          _blot.domNode.classList.remove(\"is--dragover\");\n        });\n      }\n    },\n    // onDragLeave($event) {},\n    onDrop($event) {\n      if (!this.editor_is_enabled) return;\n      console.log(`CollaborativeEditor2 / onDrop`);\n\n      // Prevent default behavior (Prevent file from being opened)\n      $event.preventDefault();\n      $event.dataTransfer.dropEffect = \"move\";\n      this.removeDragoverFromBlots();\n      if ($event.dataTransfer.getData(\"text/plain\") === \"media_in_quill\") {\n        console.log(`CollaborativeEditor2 / onDrop : : drag and dropped a media from quill`);\n        let _blot = this.getBlockFromElement($event.target);\n        const index = this.editor.getIndex(_blot);\n\n        // find which blot was dragged (A)\n        // find where it was dropped (B)\n        // move delta from A to B\n\n        console.log(`_blot is currently at index ${index}`);\n      } else if ($event.dataTransfer.getData(\"text/plain\")) {\n        console.log(`CollaborativeEditor2 / onDrop : : dropped a media from the library`);\n        const media = JSON.parse($event.dataTransfer.getData(\"text/plain\"));\n        console.log(media);\n        if (media.media_filename) {\n          // drop sur l’éditor et pas sur une ligne\n          if ($event.target.classList.contains(\"ql-editor\")) {\n            console.log(\"dropped on editor and not on line, will insert at the end of doc\");\n            this.addMediaAtIndex(this.editor.getLength() - 1, media);\n            return;\n          }\n          let _blot = this.getBlockFromElement($event.target);\n          if (!_blot) {\n            this.$alertify.closeLogOnClick(true).delay(4000).error(this.$t(\"notifications.failed_to_find_block_line\"));\n            return;\n          }\n          _blot = _blot.next !== null && _blot.next.domNode ? _blot.next : _blot;\n          const index = this.editor.getIndex(_blot);\n          this.addMediaAtIndex(index - 1, media);\n        }\n      } else {\n        console.log(`CollaborativeEditor2 / onDrop : missing meta for drop to occur`);\n      }\n    },\n    removeDragoverFromBlots() {\n      this.editor.getLines().map(b => {\n        while (b.parent !== b.scroll) {\n          b = b.parent;\n          if (b === b.scroll) {\n            break;\n          }\n        }\n        if (b !== b.scroll && b.domNode) {\n          b.domNode.classList.remove(\"is--dragover\");\n        }\n      });\n    },\n    getBlockFromElement(_target) {\n      while (!_target.parentElement.classList.contains(\"ql-editor\")) {\n        _target = _target.parentElement;\n        if (_target === null || !_target.parentElement) break;\n      }\n      let _blot = quill__WEBPACK_IMPORTED_MODULE_6___default().find(_target);\n      if (_blot) return _blot;\n      return false;\n    }\n  }\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvYmFiZWwtbG9hZGVyL2xpYi9pbmRleC5qcz8/Y2xvbmVkUnVsZVNldC0zN1swXS5ydWxlc1swXS51c2VbMF0hLi9ub2RlX21vZHVsZXMvQHZ1ZS92dWUtbG9hZGVyLXYxNS9saWIvaW5kZXguanM/P3Z1ZS1sb2FkZXItb3B0aW9ucyEuL3NyYy9hZGMtY29yZS9maWVsZHMvY29sbGFib3JhdGl2ZS1lZGl0b3IvQ29sbGFib3JhdGl2ZUVkaXRvcjIudnVlP3Z1ZSZ0eXBlPXNjcmlwdCZsYW5nPWpzJi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBdUZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUdBO0FBb0JBO0FBRUE7QUFHQTtBQW1CQTtBQUdBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFHQTs7QUFHQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBUUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUVBO0FBT0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUlBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBSUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBSUE7QUFDQTtBQUVBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hcHAvc3JjL2FkYy1jb3JlL2ZpZWxkcy9jb2xsYWJvcmF0aXZlLWVkaXRvci9Db2xsYWJvcmF0aXZlRWRpdG9yMi52dWU/ZTIyZSJdLCJzb3VyY2VzQ29udGVudCI6WyI8dGVtcGxhdGU+XG4gIDxkaXZcbiAgICBjbGFzcz1cIl9jb2xsYWJvcmF0aXZlRWRpdG9yXCJcbiAgICA6Y2xhc3M9XCJ7XG4gICAgICAnaXMtLWVkaXRhYmxlJzogY2FuX2VkaXQsXG4gICAgICAnaXMtLWVkaXRpbmdfaXNfZW5hYmxlZCc6IGVkaXRvcl9pc19lbmFibGVkLFxuICAgIH1cIlxuICAgIEBjbGljaz1cImVkaXRvckNsaWNrXCJcbiAgPlxuICAgIDxUZXh0VmVyc2lvbmluZ1xuICAgICAgdi1pZj1cInNob3dfYXJjaGl2ZXNcIlxuICAgICAgOnBhdGg9XCJwYXRoXCJcbiAgICAgIDpjdXJyZW50X2NvbnRlbnQ9XCJjb250ZW50XCJcbiAgICAgIEBjbG9zZT1cInNob3dfYXJjaGl2ZXMgPSBmYWxzZVwiXG4gICAgICBAcmVzdG9yZT1cInJlc3RvcmVWZXJzaW9uXCJcbiAgICAvPlxuXG4gICAgPGNvbXBvbmVudCA6aXM9XCJgc3R5bGVgXCI+XG4gICAgICB7eyBxdWlsbF9zdHlsZXMgfX1cbiAgICA8L2NvbXBvbmVudD5cblxuICAgIDxkaXZcbiAgICAgIHJlZj1cImVkaXRCdG5cIlxuICAgICAgY2xhc3M9XCJfVEVidG5Db250YWluZXJcIlxuICAgICAgdi1zaG93PVwiY2FuX2VkaXQgJiYgZWRpdG9yX2lzX2VuYWJsZWRcIlxuICAgID5cbiAgICAgIDxkaXYgY2xhc3M9XCJcIj5cbiAgICAgICAgPHRlbXBsYXRlIHYtaWY9XCJlZGl0b3JfaXNfZW5hYmxlZCAmJiAhaXNfZGlzYWJsaW5nX2VkaXRvclwiPlxuICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiX2VkaXRCdG5cIiBAY2xpY2s9XCJ0b2dnbGVFZGl0XCI+XG4gICAgICAgICAgICA8c2wtaWNvbiBuYW1lPVwiY2hlY2stY2lyY2xlLWZpbGxcIiA6bGFiZWw9XCIkdCgnc3RvcF9lZGl0JylcIiAvPlxuICAgICAgICAgICAge3sgJHQoXCJzdG9wX2VkaXRcIikgfX1cbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICAgIGNsYXNzPVwidS1idXR0b24gX2FyY2hpdmVzQnRuXCJcbiAgICAgICAgICAgIHYtaWY9XCJlZGl0b3JfaXNfZW5hYmxlZFwiXG4gICAgICAgICAgICBAY2xpY2s9XCJzaG93X2FyY2hpdmVzID0gIXNob3dfYXJjaGl2ZXNcIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxzbC1pY29uIHNsb3Q9XCJwcmVmaXhcIiBuYW1lPVwiYXJjaGl2ZVwiIC8+XG4gICAgICAgICAgICB7eyAkdChcImFyY2hpdmVzXCIpIH19XG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgIDwvdGVtcGxhdGU+XG5cbiAgICAgICAgPGRpdiBjbGFzcz1cIl9jb2xsYWJFZGl0b3JTdGF0dXNcIiB2LWlmPVwiZWRpdG9yX2lzX2VuYWJsZWRcIj5cbiAgICAgICAgICA8dHJhbnNpdGlvbiBuYW1lPVwiZmFkZV9mYXN0XCIgbW9kZT1cIm91dC1pblwiPlxuICAgICAgICAgICAgPHNwYW4gdi1pZj1cImlzX2xvYWRpbmdfb3Jfc2F2aW5nXCIga2V5PVwic2F2aW5nXCI+XG4gICAgICAgICAgICAgIDxzbC1zcGlubmVyIHN0eWxlPVwiLS1pbmRpY2F0b3ItY29sb3I6IGN1cnJlbnRDb2xvclwiIC8+XG4gICAgICAgICAgICAgIHt7ICR0KFwic2F2aW5nXCIpIH19XG4gICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICA8c3BhbiB2LWVsc2UtaWY9XCJzaG93X3NhdmVkX2ljb25cIiBrZXk9XCJzYXZlZFwiPlxuICAgICAgICAgICAgICA8c2wtaWNvbiBuYW1lPVwiY2hlY2stY2lyY2xlXCIgLz5cbiAgICAgICAgICAgICAge3sgJHQoXCJzYXZlZFwiKSB9fVxuICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgPHNwYW4gdi1lbHNlIGtleT1cImNvbm5lY3RlZFwiPlxuICAgICAgICAgICAgICA8Yj57eyAkdChydGMuY29ubmVjdGlvbl9zdGF0ZSkgfX08L2I+XG4gICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgPC90cmFuc2l0aW9uPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICAgPCEtLSA8c2wtYnV0dG9uIHYtc2hvdz1cImVkaXRvcl9pc19lbmFibGVkXCIgQGNsaWNrPVwic2F2ZVRleHRcIiBzaXplPVwic21hbGxcIj5cbiAgICAgICAgICBFbnJlZ2lzdHJlclxuICAgICAgICA8L3NsLWJ1dHRvbj4gLS0+XG4gICAgPC9kaXY+XG5cbiAgICA8ZGl2IGNsYXNzPVwiX2Zsb2F0aW5nRWRpdEJ0blwiIHYtaWY9XCJjYW5fZWRpdFwiPlxuICAgICAgPHNsLWJ1dHRvblxuICAgICAgICB2YXJpYW50PVwiZWRpdFwiXG4gICAgICAgIDpkYXRhLWFjdGlvbj1cImVkaXRvcl9pc19lbmFibGVkID8gJ2Rpc2FibGUnIDogJ2VuYWJsZSdcIlxuICAgICAgICBzaXplPVwic21hbGxcIlxuICAgICAgICBjaXJjbGVcbiAgICAgICAgQGNsaWNrPVwidG9nZ2xlRWRpdFwiXG4gICAgICA+XG4gICAgICAgIDxzbC1pY29uXG4gICAgICAgICAgdi1pZj1cIiFlZGl0b3JfaXNfZW5hYmxlZFwiXG4gICAgICAgICAgbmFtZT1cInBlbmNpbC1maWxsXCJcbiAgICAgICAgICA6bGFiZWw9XCIkdCgnZWRpdCcpXCJcbiAgICAgICAgLz5cbiAgICAgICAgPHNsLWljb24gdi1lbHNlIG5hbWU9XCJjaGVjay1jaXJjbGUtZmlsbFwiIC8+XG4gICAgICA8L3NsLWJ1dHRvbj5cbiAgICA8L2Rpdj5cblxuICAgIDxkaXYgY2xhc3M9XCJfdG9vbGJhckFuZEVkaXRvckNvbnRhaW5lclwiPlxuICAgICAgPGRpdiByZWY9XCJlZGl0b3JcIiBAZHJhZ292ZXI9XCJvbkRyYWdvdmVyXCIgQGRyb3A9XCJvbkRyb3BcIiAvPlxuICAgIDwvZGl2PlxuICA8L2Rpdj5cbjwvdGVtcGxhdGU+XG48c2NyaXB0PlxuaW1wb3J0IFRleHRWZXJzaW9uaW5nIGZyb20gXCIuL1RleHRWZXJzaW9uaW5nLnZ1ZVwiO1xuaW1wb3J0IFJlY29ubmVjdGluZ1dlYlNvY2tldCBmcm9tIFwicmVjb25uZWN0aW5nd2Vic29ja2V0XCI7XG5pbXBvcnQgU2hhcmVEQiBmcm9tIFwic2hhcmVkYi9saWIvY2xpZW50XCI7XG5pbXBvcnQgUXVpbGwgZnJvbSBcInF1aWxsXCI7XG5TaGFyZURCLnR5cGVzLnJlZ2lzdGVyKHJlcXVpcmUoXCJyaWNoLXRleHRcIikudHlwZSk7XG5cbmltcG9ydCB7XG4gIGZvbnRzIGFzIGRlZmF1bHRfZm9udHMsXG4gIGZvcm1hdHMgYXMgZGVmYXVsdF9mb3JtYXRzLFxuICBmb250U2l6ZUFycixcbiAgbGluZUhlaWdodEFycixcbn0gZnJvbSBcIi4vaW1wb3J0cy9kZWZhdWx0cy5qc1wiO1xuXG52YXIgUGFyY2htZW50ID0gUXVpbGwuaW1wb3J0KFwicGFyY2htZW50XCIpO1xudmFyIGxpbmVIZWlnaHRDb25maWcgPSB7XG4gIHNjb3BlOiBQYXJjaG1lbnQuU2NvcGUuQkxPQ0ssXG4gIHdoaXRlbGlzdDogbGluZUhlaWdodEFycixcbn07XG52YXIgbGluZUhlaWdodENsYXNzID0gbmV3IFBhcmNobWVudC5BdHRyaWJ1dG9yLkNsYXNzKFxuICBcImxpbmVoZWlnaHRcIixcbiAgXCJxbC1saW5lLWhlaWdodFwiLFxuICBsaW5lSGVpZ2h0Q29uZmlnXG4pO1xudmFyIGxpbmVIZWlnaHRTdHlsZSA9IG5ldyBQYXJjaG1lbnQuQXR0cmlidXRvci5TdHlsZShcbiAgXCJsaW5laGVpZ2h0XCIsXG4gIFwibGluZS1oZWlnaHRcIixcbiAgbGluZUhlaWdodENvbmZpZ1xuKTtcblBhcmNobWVudC5yZWdpc3RlcihsaW5lSGVpZ2h0Q2xhc3MpO1xuUGFyY2htZW50LnJlZ2lzdGVyKGxpbmVIZWlnaHRTdHlsZSk7XG52YXIgU2l6ZSA9IFF1aWxsLmltcG9ydChcImF0dHJpYnV0b3JzL3N0eWxlL3NpemVcIik7XG5TaXplLndoaXRlbGlzdCA9IGZvbnRTaXplQXJyO1xuUXVpbGwucmVnaXN0ZXIoU2l6ZSwgdHJ1ZSk7XG5cbmNvbnN0IEZvbnRBdHRyaWJ1dG9yID0gUXVpbGwuaW1wb3J0KFwiYXR0cmlidXRvcnMvc3R5bGUvZm9udFwiKTtcbmNvbnN0IGN1c3RvbV9mb250c190aXRsZXMgPSB3aW5kb3cuYXBwX2luZm9zLmN1c3RvbV9mb250cy5tYXAoKGNmKSA9PiBjZi50aXRsZSk7XG5jb25zdCBhbGxfZm9udHMgPSBkZWZhdWx0X2ZvbnRzLmNvbmNhdChjdXN0b21fZm9udHNfdGl0bGVzKTtcbkZvbnRBdHRyaWJ1dG9yLndoaXRlbGlzdCA9IGFsbF9mb250cztcblF1aWxsLnJlZ2lzdGVyKEZvbnRBdHRyaWJ1dG9yLCB0cnVlKTtcblxudmFyIEJsb2NrRW1iZWQgPSBRdWlsbC5pbXBvcnQoXCJibG90cy9ibG9jay9lbWJlZFwiKTtcbmNsYXNzIERpdmlkZXJCbG90IGV4dGVuZHMgQmxvY2tFbWJlZCB7fVxuRGl2aWRlckJsb3QuYmxvdE5hbWUgPSBcImRpdmlkZXJcIjtcbkRpdmlkZXJCbG90LnRhZ05hbWUgPSBcImhyXCI7XG5RdWlsbC5yZWdpc3RlcihEaXZpZGVyQmxvdCk7XG5cbmltcG9ydCBNZWRpYUJsb3QgZnJvbSBcIi4vaW1wb3J0cy9NZWRpYUJsb3RcIjtcbmltcG9ydCBDYXJkRWRpdGFibGVNb2R1bGUgZnJvbSBcIi4vaW1wb3J0cy9DYXJkRWRpdGFibGVNb2R1bGVcIjtcblxuUXVpbGwucmVnaXN0ZXIoXCJmb3JtYXRzL21lZGlhXCIsIE1lZGlhQmxvdCk7XG5RdWlsbC5yZWdpc3RlcihcIm1vZHVsZXMvY2FyZEVkaXRhYmxlXCIsIENhcmRFZGl0YWJsZU1vZHVsZSk7XG5cbi8vIGhvdyBpdCB3b3Jrczpcbi8vIC0+IGRpc2FibGVkIGJ5IGRlZmF1bHRcbi8vIC0+IGlmIGlzX2NvbGxhYm9yYXRpdmUgaXMgdHJ1ZSwgaXQgdXNlcyBzaGFyZWRiIG9uIHRoZSBzZXJ2ZXIgdG8gaGFuZGxlIGNvbmZsaWN0LWZyZWUgZWRpdGluZ1xuXG5leHBvcnQgZGVmYXVsdCB7XG4gIHByb3BzOiB7XG4gICAgcGF0aDogU3RyaW5nLFxuICAgIGNvbnRlbnQ6IFN0cmluZyxcbiAgICBzY3JvbGxpbmdDb250YWluZXI6IEhUTUxFbGVtZW50LFxuICAgIGN1c3RvbV9mb3JtYXRzOiBBcnJheSxcbiAgICBsaW5lX3NlbGVjdGVkOiBbQm9vbGVhbiwgTnVtYmVyXSxcbiAgICBlZGl0X29uX21vdW50ZWQ6IEJvb2xlYW4sXG4gICAgY2FuX2VkaXQ6IEJvb2xlYW4sXG4gICAgLy8gZW5hYmxlZCBmb3IgcGFnZV9ieV9wYWdlLCB0aGlzIG1lYW5zIHRoYXQgdGhlIGVkaXQgYnV0dG9uIGlzIGxvY2F0ZWQgaW4gdGhlIHRvcCByaWdodCBjb3JuZXIgaW4gYWJzb2x1dGUsXG4gICAgLy8gYW5kIHRoYXQgdGhlIHRvb2xiYXIgbW92ZXMgdG8gdGhlIGNsb3Nlc3QgcGFyZW50IGRlZGljYXRlZCBjb250YWluZXIgYWZ0ZXIgY3JlYXRpb25cbiAgfSxcbiAgY29tcG9uZW50czoge1xuICAgIFRleHRWZXJzaW9uaW5nLFxuICB9LFxuICBkYXRhKCkge1xuICAgIHJldHVybiB7XG4gICAgICBlZGl0b3I6IG51bGwsXG4gICAgICB0ZXh0X2RlbHRhczogbnVsbCxcbiAgICAgIHRvb2xiYXJfZWw6IG51bGwsXG5cbiAgICAgIHJ0Yzoge1xuICAgICAgICBzb2NrZXQ6IG51bGwsXG4gICAgICAgIGNvbm5lY3Rpb25fc3RhdGU6IG51bGwsXG4gICAgICB9LFxuXG4gICAgICBzaG93X2FyY2hpdmVzOiBmYWxzZSxcblxuICAgICAgZGVib3VuY2VfdGV4dFVwZGF0ZTogdW5kZWZpbmVkLFxuXG4gICAgICBpc19jb2xsYWJvcmF0aXZlOiB0cnVlLFxuICAgICAgY29sbGFib3JhdGl2ZV9pc19sb2FkZWQ6IGZhbHNlLFxuXG4gICAgICBhdXRvc2F2ZTogdHJ1ZSxcbiAgICAgIGVkaXRvcl9pc19lbmFibGVkOiBmYWxzZSxcbiAgICAgIGRvYzogdW5kZWZpbmVkLFxuXG4gICAgICBpc19sb2FkaW5nX29yX3NhdmluZzogZmFsc2UsXG4gICAgICBpc19kaXNhYmxpbmdfZWRpdG9yOiBmYWxzZSxcbiAgICAgIHNob3dfc2F2ZWRfaWNvbjogZmFsc2UsXG5cbiAgICAgIGN1cnJlbnRseV9zZWxlY3RlZF9lbGVzOiBmYWxzZSxcblxuICAgICAgZWRpdG9yX2lkOiAoTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikgKyBcIjAwMDAwMDAwMDAwMDAwMDAwXCIpLnNsaWNlKFxuICAgICAgICAyLFxuICAgICAgICA1ICsgNVxuICAgICAgKSxcbiAgICB9O1xuICB9LFxuICBjcmVhdGVkKCkge30sXG4gIGFzeW5jIG1vdW50ZWQoKSB7XG4gICAgYXdhaXQgdGhpcy5pbml0RWRpdG9yKCk7XG4gICAgdGhpcy50b29sYmFyX2VsID0gdGhpcy4kZWwucXVlcnlTZWxlY3RvcihcIi5xbC10b29sYmFyXCIpO1xuICAgIGlmICh0aGlzLmVkaXRfb25fbW91bnRlZCA9PT0gdHJ1ZSkgdGhpcy5lbmFibGVFZGl0b3IoKTtcbiAgfSxcbiAgYmVmb3JlRGVzdHJveSgpIHtcbiAgICB0aGlzLmRpc2FibGVFZGl0b3IoKTtcbiAgfSxcbiAgd2F0Y2g6IHtcbiAgICBjb250ZW50KCkge1xuICAgICAgaWYgKFxuICAgICAgICAhdGhpcy5pc19jb2xsYWJvcmF0aXZlIHx8XG4gICAgICAgICh0aGlzLmlzX2NvbGxhYm9yYXRpdmUgJiYgIXRoaXMuZWRpdG9yX2lzX2VuYWJsZWQpXG4gICAgICApIHtcbiAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4ge1xuICAgICAgICAgIHRoaXMuZWRpdG9yLnJvb3QuaW5uZXJIVE1MID0gdGhpcy5jb250ZW50O1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGxpbmVfc2VsZWN0ZWQ6IHtcbiAgICAgIGhhbmRsZXIoKSB7XG4gICAgICAgIGlmICh0aGlzLmxpbmVfc2VsZWN0ZWQpIHtcbiAgICAgICAgICAvLyBsZXQgW2xpbmUsIG9mZnNldF0gPSBxdWlsbC5nZXRMaW5lKHRoaXMubGluZV9zZWxlY3RlZCk7XG4gICAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWRfbGluZSA9IHRoaXMuZWRpdG9yLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFxuICAgICAgICAgICAgICBgLnFsLWVkaXRvciA+ICo6bnRoLWNoaWxkKCR7dGhpcy5saW5lX3NlbGVjdGVkfSlgXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50bHlfc2VsZWN0ZWRfZWxlcyA9IFtzZWxlY3RlZF9saW5lXTtcbiAgICAgICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgc2VsZWN0ZWRfbGluZS5zY3JvbGxJbnRvVmlldyh7XG4gICAgICAgICAgICAgICAgYmVoYXZpb3I6IFwic21vb3RoXCIsXG4gICAgICAgICAgICAgICAgYmxvY2s6IFwiY2VudGVyXCIsXG4gICAgICAgICAgICAgICAgaW5saW5lOiBcIm5lYXJlc3RcIixcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmN1cnJlbnRseV9zZWxlY3RlZF9lbGVzID0gZmFsc2U7XG4gICAgICB9LFxuICAgICAgaW1tZWRpYXRlOiB0cnVlLFxuICAgIH0sXG4gICAgY2FuX2VkaXQoKSB7XG4gICAgICBpZiAoIXRoaXMuY2FuX2VkaXQgJiYgdGhpcy5lZGl0b3JfaXNfZW5hYmxlZCkgdGhpcy5kaXNhYmxlRWRpdG9yKCk7XG4gICAgfSxcbiAgICBjdXJyZW50bHlfc2VsZWN0ZWRfZWxlcyhuZXdFbGVzKSB7XG4gICAgICB0aGlzLmVkaXRvci5jb250YWluZXJcbiAgICAgICAgLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuaXMtLXNlbGVjdGVkXCIpXG4gICAgICAgIC5mb3JFYWNoKChlbCkgPT4gZWwuY2xhc3NMaXN0ICYmIGVsLmNsYXNzTGlzdC5yZW1vdmUoXCJpcy0tc2VsZWN0ZWRcIikpO1xuXG4gICAgICBpZiAobmV3RWxlcylcbiAgICAgICAgbmV3RWxlcy5mb3JFYWNoKFxuICAgICAgICAgIChlbCkgPT4gZWwuY2xhc3NMaXN0ICYmIGVsLmNsYXNzTGlzdC5hZGQoXCJpcy0tc2VsZWN0ZWRcIilcbiAgICAgICAgKTtcbiAgICB9LFxuICB9LFxuICBjb21wdXRlZDoge1xuICAgIHF1aWxsX3N0eWxlcygpIHtcbiAgICAgIGxldCBjc3MgPSBcIlwiO1xuICAgICAgZm9yIChjb25zdCBmb250IG9mIGFsbF9mb250cykge1xuICAgICAgICBjc3MgKz0gYFxuLnFsLXBpY2tlci5xbC1mb250IC5xbC1waWNrZXItbGFiZWxbZGF0YS12YWx1ZT1cIiR7Zm9udH1cIl06OmJlZm9yZSxcbi5xbC1waWNrZXIucWwtZm9udCAucWwtcGlja2VyLWl0ZW1bZGF0YS12YWx1ZT1cIiR7Zm9udH1cIl06OmJlZm9yZSB7XG4gIGNvbnRlbnQ6IFwiJHtmb250fVwiO1xuICBmb250LWZhbWlseTogXCIke2ZvbnR9XCI7XG59XG4gICAgICAgIGA7XG4gICAgICB9XG4gICAgICByZXR1cm4gY3NzO1xuICAgIH0sXG4gIH0sXG4gIG1ldGhvZHM6IHtcbiAgICBhc3luYyBpbml0RWRpdG9yKCkge1xuICAgICAgY29uc3QgdG9vbGJhciA9IHRoaXMubWFrZVRvb2xiYXIoKTtcblxuICAgICAgdGhpcy5lZGl0b3IgPSBuZXcgUXVpbGwodGhpcy4kcmVmcy5lZGl0b3IsIHtcbiAgICAgICAgLy8gZGVidWc6IFwiaW5mb1wiLFxuICAgICAgICBtb2R1bGVzOiB7XG4gICAgICAgICAgY2FyZEVkaXRhYmxlOiB0cnVlLFxuICAgICAgICAgIHRvb2xiYXI6IHRvb2xiYXIsXG4gICAgICAgIH0sXG4gICAgICAgIGJvdW5kczogdGhpcy4kcmVmcy5lZGl0b3IsXG4gICAgICAgIHRoZW1lOiBcInNub3dcIixcbiAgICAgICAgZm9ybWF0czogdGhpcy5jdXN0b21fZm9ybWF0cyB8fCBkZWZhdWx0X2Zvcm1hdHMsXG4gICAgICAgIHBsYWNlaG9sZGVyOiBcIlwiLFxuICAgICAgICByZWFkT25seTogIXRoaXMuZWRpdG9yX2lzX2VuYWJsZWQsXG4gICAgICAgIHNjcm9sbGluZ0NvbnRhaW5lcjogdGhpcy5zY3JvbGxpbmdDb250YWluZXIsXG4gICAgICB9KTtcbiAgICAgIGlmICh0aGlzLmNvbnRlbnQpIHRoaXMuZWRpdG9yLnJvb3QuaW5uZXJIVE1MID0gdGhpcy5jb250ZW50O1xuXG4gICAgICB0aGlzLnNldFN0YXR1c0J1dHRvbigpO1xuXG4gICAgICB0aGlzLmVkaXRvci5vbihcInNlbGVjdGlvbi1jaGFuZ2VcIiwgKCkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhgQ29sbGFib3JhdGl2ZUVkaXRvciAvIHNlbGVjdGlvbi1jaGFuZ2VgKTtcbiAgICAgICAgdGhpcy51cGRhdGVTZWxlY3RlZExpbmVzKCk7XG4gICAgICB9KTtcbiAgICAgIHRoaXMuZWRpdG9yLm9uKFwidGV4dC1jaGFuZ2VcIiwgKGRlbHRhLCBvbGREZWx0YSwgc291cmNlKSA9PiB7XG4gICAgICAgIGRlbHRhLCBvbGREZWx0YSwgc291cmNlO1xuICAgICAgICBjb25zb2xlLmxvZyhgQ29sbGFib3JhdGl2ZUVkaXRvciAvIHRleHQtY2hhbmdlIHcgc291cmNlICR7c291cmNlfWApO1xuICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7XG4gICAgICAgICAgLy8gdG9kbyA6IG9ubHkgdXBkYXRlIGlmIHBvc3NpYmx5IGNoYW5naW5nIGxpbmUgKGJhY2tzcGFjZSBhbmQgZW50ZXIpXG4gICAgICAgICAgdGhpcy51cGRhdGVTZWxlY3RlZExpbmVzKCk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSxcblxuICAgIG1ha2VUb29sYmFyKCkge1xuICAgICAgbGV0IGNvbnRhaW5lciA9IFtdO1xuICAgICAgbGV0IHJlZmVyZW5jZV9mb3JtYXRzID0gdGhpcy5jdXN0b21fZm9ybWF0cyB8fCBkZWZhdWx0X2Zvcm1hdHM7XG5cbiAgICAgIGlmIChyZWZlcmVuY2VfZm9ybWF0cy5pbmNsdWRlcyhcImZvbnRcIikpXG4gICAgICAgIGNvbnRhaW5lci5wdXNoKFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBmb250OiBhbGxfZm9udHMsXG4gICAgICAgICAgfSxcbiAgICAgICAgXSk7XG4gICAgICBpZiAocmVmZXJlbmNlX2Zvcm1hdHMuaW5jbHVkZXMoXCJoZWFkZXJcIikpXG4gICAgICAgIGNvbnRhaW5lci5wdXNoKFt7IGhlYWRlcjogW2ZhbHNlLCAxLCAyLCAzXSB9XSk7XG4gICAgICBpZiAocmVmZXJlbmNlX2Zvcm1hdHMuaW5jbHVkZXMoXCJzaXplXCIpKVxuICAgICAgICBjb250YWluZXIucHVzaChbeyBzaXplOiBmb250U2l6ZUFyciB9XSk7XG4gICAgICBpZiAocmVmZXJlbmNlX2Zvcm1hdHMuaW5jbHVkZXMoXCJsaW5laGVpZ2h0XCIpKVxuICAgICAgICBjb250YWluZXIucHVzaChbeyBsaW5laGVpZ2h0OiBsaW5lSGVpZ2h0QXJyIH1dKTtcblxuICAgICAgbGV0IGZvcm1hdHRpbmdfb3B0ID0gW107XG4gICAgICBjb25zdCBiYXNpY19mb3JtYXR0aW5nID0gW1xuICAgICAgICBcImJvbGRcIixcbiAgICAgICAgXCJpdGFsaWNcIixcbiAgICAgICAgXCJ1bmRlcmxpbmVcIixcbiAgICAgICAgXCJzdHJpa2VcIixcbiAgICAgICAgXCJsaW5rXCIsXG4gICAgICAgIFwiYmxvY2txdW90ZVwiLFxuICAgICAgXTtcbiAgICAgIGJhc2ljX2Zvcm1hdHRpbmcubWFwKChiZikgPT4ge1xuICAgICAgICBpZiAocmVmZXJlbmNlX2Zvcm1hdHMuaW5jbHVkZXMoYmYpKSBmb3JtYXR0aW5nX29wdC5wdXNoKGJmKTtcbiAgICAgIH0pO1xuICAgICAgY29udGFpbmVyLnB1c2goZm9ybWF0dGluZ19vcHQpO1xuXG4gICAgICBpZiAocmVmZXJlbmNlX2Zvcm1hdHMuaW5jbHVkZXMoXCJjb2xvclwiKSlcbiAgICAgICAgY29udGFpbmVyLnB1c2goW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIGNvbG9yOiBbXG4gICAgICAgICAgICAgIFwiIzAwMDAwMFwiLFxuICAgICAgICAgICAgICBcIiMzNTM1MzVcIixcbiAgICAgICAgICAgICAgXCIjYjliOWI5XCIsXG4gICAgICAgICAgICAgIFwiI2ZmZlwiLFxuICAgICAgICAgICAgICBcIiMxZDMyN2ZcIixcbiAgICAgICAgICAgICAgXCIjNTJjNWI5XCIsXG4gICAgICAgICAgICAgIFwiI2ZmYmUzMlwiLFxuICAgICAgICAgICAgICBcIiNmYzRiNjBcIixcblxuICAgICAgICAgICAgICBcIiNmZjMzMzNcIixcbiAgICAgICAgICAgICAgXCIjMDhjYzExXCIsXG4gICAgICAgICAgICAgIFwiIzFjNTJlZVwiLFxuICAgICAgICAgICAgICBcIiNmZjljMzNcIixcbiAgICAgICAgICAgICAgXCIjMDAwMDAwXCIsXG4gICAgICAgICAgICAgIFwiI2JkYjNiM1wiLFxuICAgICAgICAgICAgICBcIiNhZTFjZWVcIixcbiAgICAgICAgICAgICAgXCIjZmZmOTMzXCIsXG4gICAgICAgICAgICAgIFwiI2E1NGEwZlwiLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICB9LFxuICAgICAgICBdKTtcbiAgICAgIGlmIChyZWZlcmVuY2VfZm9ybWF0cy5pbmNsdWRlcyhcImJhY2tncm91bmRcIikpXG4gICAgICAgIGNvbnRhaW5lci5wdXNoKFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kOiBbXG4gICAgICAgICAgICAgIFwidHJhbnNwYXJlbnRcIixcbiAgICAgICAgICAgICAgXCIjZjFmMWYxXCIsXG4gICAgICAgICAgICAgIFwiI2I5YjliOVwiLFxuICAgICAgICAgICAgICBcIiNiZWM2ZTVcIixcbiAgICAgICAgICAgICAgXCIjYTVlNWRhXCIsXG4gICAgICAgICAgICAgIFwiI2ZmZDg5MlwiLFxuICAgICAgICAgICAgICBcIiNmZjgwOGNcIixcblxuICAgICAgICAgICAgICBcIiNmZjMzMzNcIixcbiAgICAgICAgICAgICAgXCIjMDhjYzExXCIsXG4gICAgICAgICAgICAgIFwiIzFjNTJlZVwiLFxuICAgICAgICAgICAgICBcIiNmZjljMzNcIixcbiAgICAgICAgICAgICAgXCIjMDAwMDAwXCIsXG4gICAgICAgICAgICAgIFwiI2JkYjNiM1wiLFxuICAgICAgICAgICAgICBcIiNhZTFjZWVcIixcbiAgICAgICAgICAgICAgXCIjZmZmOTMzXCIsXG4gICAgICAgICAgICAgIFwiI2E1NGEwZlwiLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICB9LFxuICAgICAgICBdKTtcblxuICAgICAgaWYgKHJlZmVyZW5jZV9mb3JtYXRzLmluY2x1ZGVzKFwibGlzdFwiKSlcbiAgICAgICAgY29udGFpbmVyLnB1c2goW3sgbGlzdDogXCJvcmRlcmVkXCIgfSwgeyBsaXN0OiBcImJ1bGxldFwiIH1dKTtcblxuICAgICAgaWYgKHJlZmVyZW5jZV9mb3JtYXRzLmluY2x1ZGVzKFwiYWxpZ25cIikpXG4gICAgICAgIGNvbnRhaW5lci5wdXNoKFtcbiAgICAgICAgICB7IGFsaWduOiBcIlwiIH0sXG4gICAgICAgICAgeyBhbGlnbjogXCJjZW50ZXJcIiB9LFxuICAgICAgICAgIHsgYWxpZ246IFwicmlnaHRcIiB9LFxuICAgICAgICAgIHsgYWxpZ246IFwianVzdGlmeVwiIH0sXG4gICAgICAgIF0pO1xuXG4gICAgICBpZiAocmVmZXJlbmNlX2Zvcm1hdHMuaW5jbHVkZXMoXCJjb2RlLWJsb2NrXCIpKVxuICAgICAgICBjb250YWluZXIucHVzaChbXCJjb2RlLWJsb2NrXCJdKTtcblxuICAgICAgLy8gdG9kbyBkaXZpZGVyXG4gICAgICBjb250YWluZXIucHVzaChbXCJjbGVhblwiXSk7XG5cbiAgICAgIGxldCBoYW5kbGVycyA9IHtcbiAgICAgICAgZGl2aWRlcjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHZhciByYW5nZSA9IHRoaXMucXVpbGwuZ2V0U2VsZWN0aW9uKCk7XG4gICAgICAgICAgaWYgKHJhbmdlKSB7XG4gICAgICAgICAgICB0aGlzLnF1aWxsLmluc2VydEVtYmVkKFxuICAgICAgICAgICAgICByYW5nZS5pbmRleCxcbiAgICAgICAgICAgICAgXCJkaXZpZGVyXCIsXG4gICAgICAgICAgICAgIFwibnVsbFwiLFxuICAgICAgICAgICAgICBRdWlsbC5zb3VyY2VzLlVTRVJcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBsaW5lX2hlaWdodF9zZWxlY3Q6IGZ1bmN0aW9uIChuZXdfbGluZV9oZWlnaHQpIHtcbiAgICAgICAgICBuZXdfbGluZV9oZWlnaHQ7XG4gICAgICAgICAgLy8gdmFyIHJhbmdlID0gdGhpcy5xdWlsbC5nZXRTZWxlY3Rpb24oKTtcbiAgICAgICAgICAvLyBpZiAocmFuZ2UpIHtcbiAgICAgICAgICAvLyAgIGRlYnVnZ2VyO1xuICAgICAgICAgIC8vICAgdGhpcy5xdWlsbC5mb3JtYXQoXG4gICAgICAgICAgLy8gICAgIHJhbmdlLmluZGV4LFxuICAgICAgICAgIC8vICAgICByYW5nZS5sZW5ndGgsXG4gICAgICAgICAgLy8gICAgIFwibGluZS1oZWlnaHRcIixcbiAgICAgICAgICAvLyAgICAgK25ld19saW5lX2hlaWdodCxcbiAgICAgICAgICAvLyAgICAgXCJ1c2VyXCJcbiAgICAgICAgICAvLyAgICk7XG4gICAgICAgICAgLy8gfVxuICAgICAgICB9LFxuICAgICAgfTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgY29udGFpbmVyLFxuICAgICAgICBoYW5kbGVycyxcbiAgICAgIH07XG4gICAgfSxcbiAgICBnZXRFZGl0b3JDb250ZW50KCkge1xuICAgICAgY29uc29sZS5sb2coYENvbGxhYm9yYXRpdmVFZGl0b3Ig4oCiIGdldEVkaXRvckNvbnRlbnRgKTtcbiAgICAgIGlmICghdGhpcy5lZGl0b3IuZ2V0VGV4dCgpIHx8IHRoaXMuZWRpdG9yLmdldFRleHQoKSA9PT0gXCJcXG5cIikgcmV0dXJuIFwiXCI7XG4gICAgICBsZXQgaHRtbCA9IHRoaXMuZWRpdG9yLnJvb3QuaW5uZXJIVE1MO1xuXG4gICAgICBodG1sID0gdGhpcy5jbGVhbkVkaXRvckNvbnRlbnQoaHRtbCk7XG5cbiAgICAgIHJldHVybiBodG1sO1xuICAgIH0sXG4gICAgY2xlYW5FZGl0b3JDb250ZW50KGh0bWwpIHtcbiAgICAgIGNvbnNvbGUubG9nKGBDb2xsYWJvcmF0aXZlRWRpdG9yIOKAoiBjbGVhbkVkaXRvckNvbnRlbnRgKTtcblxuICAgICAgdmFyIHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGVtcGxhdGVcIik7XG4gICAgICB0LmlubmVySFRNTCA9IGh0bWw7XG5cbiAgICAgIC8vIHVzZWQgdG8gbWFrZSBzdXJlIHdlIGRvbuKAmXQgZ2V0IHdlaXJkIHN0dWZmIHN1Y2ggYXMgPHAgc3R5bGU9XCJmb250LWZhbWlseTogXCJBdmFkYVwiO1wiPnBsb3A8L3A+XG4gICAgICAvLyBjb250ZW50ID0gY29udGVudC5yZXBsYWNlKC8mcXVvdDsvZywgXCInXCIpO1xuICAgICAgLy8gdG9kbyA6IHJlbW92ZSBzdGF0dXMgY2xhc3MgbGlrZSBpcy0tc2VsZWN0ZWQgb3IgaXMtLWRyYWdvdmVyXG4gICAgICB0LmNvbnRlbnRcbiAgICAgICAgLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuaXMtLXNlbGVjdGVkXCIpXG4gICAgICAgIC5mb3JFYWNoKChlbCkgPT4gZWwuY2xhc3NMaXN0ICYmIGVsLmNsYXNzTGlzdC5yZW1vdmUoXCJpcy0tc2VsZWN0ZWRcIikpO1xuXG4gICAgICByZXR1cm4gdC5pbm5lckhUTUw7XG4gICAgfSxcblxuICAgIHNldFN0YXR1c0J1dHRvbigpIHtcbiAgICAgIGlmICh0aGlzLiRyZWZzLmVkaXRCdG4pXG4gICAgICAgIHRoaXMuJGVsLnF1ZXJ5U2VsZWN0b3IoXCIucWwtdG9vbGJhclwiKS5hcHBlbmRDaGlsZCh0aGlzLiRyZWZzLmVkaXRCdG4pO1xuICAgIH0sXG4gICAgdG9nZ2xlRWRpdCgpIHtcbiAgICAgIGlmICghdGhpcy5lZGl0b3JfaXNfZW5hYmxlZCkgdGhpcy5lbmFibGVFZGl0b3IoKTtcbiAgICAgIGVsc2UgdGhpcy5kaXNhYmxlRWRpdG9yKCk7XG4gICAgfSxcbiAgICBhc3luYyBlbmFibGVFZGl0b3IoKSB7XG4gICAgICBpZiAodGhpcy5lZGl0b3JfaXNfZW5hYmxlZCB8fCAhdGhpcy5jYW5fZWRpdCkgcmV0dXJuIGZhbHNlO1xuXG4gICAgICBjb25zb2xlLmxvZyhgQ29sbGFib3JhdGl2ZUVkaXRvcjIg4oCiIGVuYWJsZUVkaXRvcmApO1xuXG4gICAgICBpZiAodGhpcy5pc19jb2xsYWJvcmF0aXZlKSBhd2FpdCB0aGlzLnN0YXJ0Q29sbGFib3JhdGl2ZSgpO1xuXG4gICAgICB0aGlzLmVkaXRvci5lbmFibGUoKTtcblxuICAgICAgdGhpcy5lZGl0b3IuZm9jdXMoKTtcblxuICAgICAgLy8gdG9kbyBzZWxlY3QgbGF0ZXN0IHVzZWQgZm9udCBhcyBzZWxlY3RlZCBmb250XG4gICAgICBpZiAodGhpcy5lZGl0b3IuZ2V0TGVuZ3RoKCkgPD0gMSkge1xuICAgICAgICBjb25zdCBmb250TGFzdFVzZWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImZvbnRMYXN0VXNlZFwiKTtcbiAgICAgICAgdGhpcy5lZGl0b3IuZm9ybWF0KFwiZm9udFwiLCBmb250TGFzdFVzZWQpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmVkaXRvci5zZXRTZWxlY3Rpb24odGhpcy5lZGl0b3IuZ2V0TGVuZ3RoKCksIFF1aWxsLnNvdXJjZXMuU0lMRU5UKTtcblxuICAgICAgdGhpcy4kZW1pdChgY29udGVudElzRWRpdGVkYCwgdGhpcy50b29sYmFyX2VsKTtcbiAgICAgIHRoaXMuZWRpdG9yX2lzX2VuYWJsZWQgPSB0cnVlO1xuICAgIH0sXG4gICAgYXN5bmMgZGlzYWJsZUVkaXRvcigpIHtcbiAgICAgIGlmICghdGhpcy5lZGl0b3JfaXNfZW5hYmxlZCkgcmV0dXJuIGZhbHNlO1xuXG4gICAgICBjb25zb2xlLmxvZyhgQ29sbGFib3JhdGl2ZUVkaXRvcjIg4oCiIGRpc2FibGVFZGl0b3JgKTtcbiAgICAgIHRoaXMuaXNfZGlzYWJsaW5nX2VkaXRvciA9IHRydWU7XG5cbiAgICAgIHRoaXMuZWRpdG9yLnNldFNlbGVjdGlvbihudWxsKTtcbiAgICAgIHRoaXMuZWRpdG9yLmJsdXIoKTtcbiAgICAgIHRoaXMudXBkYXRlU2VsZWN0ZWRMaW5lcygpO1xuXG4gICAgICBpZiAodGhpcy5pc19jb2xsYWJvcmF0aXZlKSB0aGlzLmVuZENvbGxhYm9yYXRpdmUoKTtcblxuICAgICAgYXdhaXQgdGhpcy5zYXZlVGV4dCgpO1xuXG4gICAgICAvLyBjaGVjayBpZiB0b29sYmFyIGlzIGF3YXksIGdldCBpdCBiYWNrIGlmIGl0IGlzXG4gICAgICB0aGlzLmdldFRvb2xiYXJCYWNrKCk7XG4gICAgICB0aGlzLiRlbWl0KGBjb250ZW50SXNOb3RFZGl0ZWRgKTtcblxuICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4ge1xuICAgICAgICB0aGlzLmVkaXRvci5kaXNhYmxlKCk7XG4gICAgICAgIHRoaXMuZWRpdG9yX2lzX2VuYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5pc19kaXNhYmxpbmdfZWRpdG9yID0gZmFsc2U7XG4gICAgICB9KTtcbiAgICB9LFxuXG4gICAgZ2V0VG9vbGJhckJhY2soKSB7XG4gICAgICBpZiAoXG4gICAgICAgICF0aGlzLnRvb2xiYXJfZWwucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoXG4gICAgICAgICAgXCJfdG9vbGJhckFuZEVkaXRvckNvbnRhaW5lclwiXG4gICAgICAgIClcbiAgICAgIClcbiAgICAgICAgdGhpcy4kZWxcbiAgICAgICAgICAucXVlcnlTZWxlY3RvcihcIi5fdG9vbGJhckFuZEVkaXRvckNvbnRhaW5lclwiKVxuICAgICAgICAgIC5wcmVwZW5kKHRoaXMudG9vbGJhcl9lbCk7XG4gICAgfSxcblxuICAgIHJlc3RvcmVWZXJzaW9uKGNvbnRlbnQpIHtcbiAgICAgIC8vIFRPRE8gOiB3aXRoIGRlbHRhIHRvIGFsbG93IGZvciB1bmRvXG4gICAgICAvLyB0aGlzLmVkaXRvci5yb290LmlubmVySFRNTCA9IGNvbnRlbnQ7XG4gICAgICBjb25zdCB2YWx1ZSA9IGNvbnRlbnQ7XG4gICAgICBjb25zdCBkZWx0YSA9IHRoaXMuZWRpdG9yLmNsaXBib2FyZC5jb252ZXJ0KHZhbHVlKTtcblxuICAgICAgdGhpcy5lZGl0b3Iuc2V0Q29udGVudHMoZGVsdGEsIFwidXNlclwiKTtcblxuICAgICAgdGhpcy5zaG93X2FyY2hpdmVzID0gZmFsc2U7XG4gICAgfSxcblxuICAgIGVkaXRvckNsaWNrKCRldmVudCkge1xuICAgICAgLy8gJGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBpZiAoXG4gICAgICAgICRldmVudC50YXJnZXQucGFyZW50RWxlbWVudCAmJlxuICAgICAgICAkZXZlbnQudGFyZ2V0LnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0ICYmXG4gICAgICAgICRldmVudC50YXJnZXQucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoXCJxbC1lZGl0b3JcIilcbiAgICAgICkge1xuICAgICAgICAvLyBjbGljayBvbiB0aGUgbGVmdCBvZiB0aGUgZWxlbWVudFxuICAgICAgICBpZiAoJGV2ZW50Lm9mZnNldFggPCAwKSB7XG4gICAgICAgICAgY29uc3QgbGluZV9udW1iZXIgPSBBcnJheS5mcm9tKFxuICAgICAgICAgICAgJGV2ZW50LnRhcmdldC5wYXJlbnRFbGVtZW50LmNoaWxkcmVuXG4gICAgICAgICAgKS5maW5kSW5kZXgoKGMpID0+IGMgPT09ICRldmVudC50YXJnZXQpO1xuICAgICAgICAgIHRoaXMuJGVtaXQoXCJsaW5lQ2xpY2tlZFwiLCBsaW5lX251bWJlciArIDEpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgIHVwZGF0ZVNlbGVjdGVkTGluZXMoKSB7XG4gICAgICAvLyBjb25zb2xlLmxvZyhgQ29sbGFib3JhdGl2ZUVkaXRvciDigKIgdXBkYXRlU2VsZWN0ZWRMaW5lc2ApO1xuICAgICAgaWYgKCF0aGlzLmVkaXRvcl9pc19lbmFibGVkKSByZXR1cm47XG5cbiAgICAgIGNvbnN0IHJhbmdlID0gdGhpcy5lZGl0b3IuZ2V0U2VsZWN0aW9uKCk7XG5cbiAgICAgIGlmIChyYW5nZSAmJiByYW5nZS5pbmRleCkge1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhcbiAgICAgICAgLy8gICBgQ29sbGFib3JhdGl2ZUVkaXRvciDigKIgdXBkYXRlU2VsZWN0ZWRMaW5lcyAvIHJhbmdlLmluZGV4ID0gJHtyYW5nZS5pbmRleH0gZXQgcmFuZ2UubGVuZ3RoID0gJHtyYW5nZS5sZW5ndGh9IGBcbiAgICAgICAgLy8gKTtcblxuICAgICAgICBsZXQgYmxvdHMgPSBbXTtcbiAgICAgICAgaWYgKHJhbmdlLmxlbmd0aCA9PT0gMCkgYmxvdHMgPSBbdGhpcy5lZGl0b3IuZ2V0TGluZShyYW5nZS5pbmRleClbMF1dO1xuICAgICAgICBlbHNlIGJsb3RzID0gdGhpcy5lZGl0b3IuZ2V0TGluZXMocmFuZ2UuaW5kZXgsIHJhbmdlLmxlbmd0aCk7XG5cbiAgICAgICAgaWYgKGJsb3RzKSB7XG4gICAgICAgICAgdGhpcy5jdXJyZW50bHlfc2VsZWN0ZWRfZWxlcyA9IGJsb3RzLm1hcCgoYikgPT4gYi5kb21Ob2RlKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdGhpcy5jdXJyZW50bHlfc2VsZWN0ZWRfZWxlcyA9IGZhbHNlO1xuICAgIH0sXG5cbiAgICBhc3luYyBzYXZlVGV4dCgpIHtcbiAgICAgIGNvbnN0IG5ld19tZXRhID0ge1xuICAgICAgICAkY29udGVudDogdGhpcy5nZXRFZGl0b3JDb250ZW50KCksXG4gICAgICB9O1xuXG4gICAgICB0cnkge1xuICAgICAgICB0aGlzLmlzX2xvYWRpbmdfb3Jfc2F2aW5nID0gdHJ1ZTtcbiAgICAgICAgYXdhaXQgdGhpcy4kYXBpLnVwZGF0ZU1ldGEoe1xuICAgICAgICAgIHBhdGg6IHRoaXMucGF0aCxcbiAgICAgICAgICBuZXdfbWV0YSxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuaXNfbG9hZGluZ19vcl9zYXZpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5zaG93X3NhdmVkX2ljb24gPSB0cnVlO1xuICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZSgocikgPT4gc2V0VGltZW91dChyLCAxNTAwKSk7XG4gICAgICAgIHRoaXMuc2hvd19zYXZlZF9pY29uID0gZmFsc2U7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgaWYgKGVyci5tZXNzYWdlID09PSBcImNvbnRlbnQgbm90IGNoYW5nZWRcIikgZXJyO1xuICAgICAgICB0aGlzLmlzX2xvYWRpbmdfb3Jfc2F2aW5nID0gZmFsc2U7XG4gICAgICB9XG4gICAgfSxcblxuICAgIGFzeW5jIHN0YXJ0Q29sbGFib3JhdGl2ZSgpIHtcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIC8vIGNvbnN0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoe1xuICAgICAgICAvLyAgIGZvbGRlcl90eXBlOiB0aGlzLmZvbGRlcl90eXBlLFxuICAgICAgICAvLyAgIGZvbGRlcl9zbHVnOiB0aGlzLmZvbGRlcl9zbHVnLFxuICAgICAgICAvLyAgIG1ldGFfc2x1ZzogdGhpcy5tZXRhX3NsdWcsXG4gICAgICAgIC8vIH0pO1xuXG4gICAgICAgIC8vIGNvbnN0IHJlcXVlc3RlZF9xdWVyeXN0cmluZyA9IFwiP1wiICsgcGFyYW1zLnRvU3RyaW5nKCk7XG4gICAgICAgIGNvbnN0IHBhdGhfdG9fbWV0YSA9IHRoaXMucGF0aC5yZXBsYWNlQWxsKFwiL1wiLCBcIipcIik7XG5cbiAgICAgICAgY29uc3QgcmVxdWVzdGVkX3Jlc291cmNlX3VybCA9XG4gICAgICAgICAgKGxvY2F0aW9uLnByb3RvY29sID09PSBcImh0dHBzOlwiID8gXCJ3c3NcIiA6IFwid3NcIikgK1xuICAgICAgICAgIFwiOi8vXCIgK1xuICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ob3N0ICtcbiAgICAgICAgICBcIi9pc1NoYXJlZGJcIiArXG4gICAgICAgICAgYD9wYXRoX3RvX21ldGE9JHtwYXRoX3RvX21ldGF9YDtcblxuICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICBgQ29sbGFib3JhdGl2ZUVkaXRvciAvIHN0YXJ0Q29sbGFib3JhdGl2ZSA6IHdpbGwgY29ubmVjdCB0byB3cyBzZXJ2ZXIgd2l0aCAke3JlcXVlc3RlZF9yZXNvdXJjZV91cmx9YFxuICAgICAgICApO1xuXG4gICAgICAgIHRoaXMucnRjLnNvY2tldCA9IG5ldyBSZWNvbm5lY3RpbmdXZWJTb2NrZXQocmVxdWVzdGVkX3Jlc291cmNlX3VybCk7XG4gICAgICAgIGNvbnN0IGNvbm5lY3Rpb24gPSBuZXcgU2hhcmVEQi5Db25uZWN0aW9uKHRoaXMucnRjLnNvY2tldCk7XG4gICAgICAgIGNvbm5lY3Rpb24ub24oXCJzdGF0ZVwiLCAoc3RhdGUpID0+IHtcbiAgICAgICAgICB0aGlzLnJ0Yy5jb25uZWN0aW9uX3N0YXRlID0gc3RhdGUudG9TdHJpbmcoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc29sZS5sb2coYENvbGxhYm9yYXRpdmVFZGl0b3IgLyBjb25uZWN0aW5nIHRvIGRvYyAke3BhdGhfdG9fbWV0YX1gKTtcbiAgICAgICAgdGhpcy5kb2MgPSBjb25uZWN0aW9uLmdldChcImNvbGxhYm9yYXRpdmVfdGV4dHNcIiwgcGF0aF90b19tZXRhKTtcblxuICAgICAgICB0aGlzLmRvYy5zdWJzY3JpYmUoKGVycikgPT4ge1xuICAgICAgICAgIGlmIChlcnIpIGNvbnNvbGUuZXJyb3IoYENvbGxhYm9yYXRpdmVFZGl0b3IgLyBlcnIgJHtlcnJ9YCk7XG4gICAgICAgICAgY29uc29sZS5sb2coYENvbGxhYm9yYXRpdmVFZGl0b3IgLyBkb2Mgc3Vic2NyaWJlYCk7XG5cbiAgICAgICAgICBpZiAodGhpcy5kb2MudHlwZSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICAgIGBDb2xsYWJvcmF0aXZlRWRpdG9yIC8gZG9jIGFscmVhZHkgZXhpc3RzIGFuZCBkb2MuZGF0YSA9ICR7SlNPTi5zdHJpbmdpZnkoXG4gICAgICAgICAgICAgICAgdGhpcy5kb2MuZGF0YVxuICAgICAgICAgICAgICApfWBcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICB0aGlzLmVkaXRvci5zZXRDb250ZW50cyh0aGlzLmRvYy5kYXRhLCBcImluaXRcIik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZG9jLmNyZWF0ZSh0aGlzLmVkaXRvci5nZXRDb250ZW50cygpLCBcInJpY2gtdGV4dFwiKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0aGlzLmVkaXRvci5oaXN0b3J5LmNsZWFyKCk7XG5cbiAgICAgICAgICB0aGlzLmVkaXRvci5vbihcInRleHQtY2hhbmdlXCIsIHRoaXMuc3VibWl0T1BBbmRTYXZlKTtcbiAgICAgICAgICB0aGlzLmRvYy5vbihcIm9wXCIsIChvcCwgc291cmNlKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgQ29sbGFib3JhdGl2ZUVkaXRvciAvIG9wIGFwcGxpZWRgKTtcbiAgICAgICAgICAgIHRoaXMudGV4dF9kZWx0YXMgPSB0aGlzLmRvYy5kYXRhO1xuICAgICAgICAgICAgaWYgKHNvdXJjZSA9PT0gdGhpcy5lZGl0b3JfaWQpIHJldHVybjtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBDb2xsYWJvcmF0aXZlRWRpdG9yIC8gb3V0c2lkZSBvcCBhcHBsaWVkYCk7XG4gICAgICAgICAgICB0aGlzLmVkaXRvci51cGRhdGVDb250ZW50cyhvcCk7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICB0aGlzLmNvbGxhYm9yYXRpdmVfaXNfbG9hZGVkID0gdHJ1ZTtcblxuICAgICAgICAgIHJldHVybiByZXNvbHZlKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuZG9jLm9uKFwiZXJyb3JcIiwgKGVycikgPT4ge1xuICAgICAgICAgIC8vIGVycjtcbiAgICAgICAgICAvLyBzb3VjaXMgOiBsZXMgc2l0dWF0aW9ucyBvdSBsZSBzZXJ2ZXVyIGEgw6l0w6kgZmVybcOpIGV0IGVuIGxlIHJvdXZyYW50IGlsIG5lIHBvc3PDqGRlIHBsdXMgZOKAmWluc3RhbmNlIGR1IGRvYyBkYW5zIHNoYXJlZGLigKZcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGBDb2xsYWJvcmF0aXZlRWRpdG9yIC8gZG9jIGVyciAke2Vycn1gKTtcbiAgICAgICAgICB0aGlzLiRhbGVydGlmeS5kZWxheSg0MDAwKS5lcnJvcihlcnIpO1xuXG4gICAgICAgICAgdGhpcy5jb2xsYWJvcmF0aXZlX2lzX2xvYWRlZCA9IHRydWU7XG5cbiAgICAgICAgICByZXR1cm4gcmVqZWN0KGVycik7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBlbmRDb2xsYWJvcmF0aXZlKCkge1xuICAgICAgaWYgKHRoaXMucnRjLnNvY2tldCkgdGhpcy5ydGMuc29ja2V0LmNsb3NlKCk7XG4gICAgICBpZiAodGhpcy5kb2MpIHtcbiAgICAgICAgdGhpcy5kb2MudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgdGhpcy5kb2MgPSBudWxsO1xuICAgICAgfVxuICAgICAgdGhpcy5lZGl0b3Iub2ZmKFwidGV4dC1jaGFuZ2VcIiwgdGhpcy5zdWJtaXRPUEFuZFNhdmUpO1xuXG4gICAgICB0aGlzLmNvbGxhYm9yYXRpdmVfaXNfbG9hZGVkID0gZmFsc2U7XG4gICAgfSxcbiAgICBzdWJtaXRPUEFuZFNhdmUoZGVsdGEsIG9sZERlbHRhLCBzb3VyY2UpIHtcbiAgICAgIGNvbnNvbGUubG9nKGBDb2xsYWJvcmF0aXZlRWRpdG9yIC8gc3VibWl0T1BBbmRTYXZlIHcgc291cmNlICR7c291cmNlfWApO1xuICAgICAgaWYgKHNvdXJjZSA9PT0gXCJ1c2VyXCIpIHtcbiAgICAgICAgdGhpcy5kb2Muc3VibWl0T3AoZGVsdGEsIHsgc291cmNlOiB0aGlzLmVkaXRvcl9pZCB9KTtcbiAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgYENvbGxhYm9yYXRpdmVFZGl0b3IgLyBzdWJtaXR0ZWQgb3AgdG8gc2VydmVyICR7SlNPTi5zdHJpbmdpZnkoXG4gICAgICAgICAgICBkZWx0YVxuICAgICAgICAgICl9YFxuICAgICAgICApO1xuICAgICAgICB0aGlzLnVwZGF0ZVRleHRNZWRpYSgpO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICB1cGRhdGVUZXh0TWVkaWEoKSB7XG4gICAgICBpZiAodGhpcy5kZWJvdW5jZV90ZXh0VXBkYXRlKSBjbGVhclRpbWVvdXQodGhpcy5kZWJvdW5jZV90ZXh0VXBkYXRlKTtcbiAgICAgIHRoaXMuaXNfbG9hZGluZ19vcl9zYXZpbmcgPSB0cnVlO1xuICAgICAgdGhpcy5kZWJvdW5jZV90ZXh0VXBkYXRlID0gc2V0VGltZW91dChhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgIGBDb2xsYWJvcmF0aXZlRWRpdG9yIOKAoiB1cGRhdGVUZXh0TWVkaWE6IHNhdmluZyBuZXcgc25hcHNob3RgXG4gICAgICAgICk7XG4gICAgICAgIGF3YWl0IHRoaXMuc2F2ZVRleHQoKTtcblxuICAgICAgICBjb25zdCB7IGZvbnQgfSA9IHRoaXMuZWRpdG9yLmdldEZvcm1hdCgpO1xuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcImZvbnRMYXN0VXNlZFwiLCBmb250KTtcbiAgICAgIH0sIDEwMDApO1xuICAgIH0sXG5cbiAgICBhZGRNZWRpYUF0VGhlRW5kKG1lZGlhKSB7XG4gICAgICB0aGlzLmFkZE1lZGlhQXRJbmRleCh0aGlzLmVkaXRvci5nZXRMZW5ndGgoKSAtIDEsIG1lZGlhKTtcbiAgICB9LFxuICAgIGFkZE1lZGlhQXRDYXJldFBvc2l0aW9uKG1lZGlhKSB7XG4gICAgICBjb25zdCBzZWxlY3Rpb24gPSB0aGlzLmVkaXRvci5nZXRTZWxlY3Rpb24odHJ1ZSk7XG4gICAgICBpZiAoc2VsZWN0aW9uICYmIHNlbGVjdGlvbi5pbmRleCkge1xuICAgICAgICB0aGlzLmFkZE1lZGlhQXRJbmRleChzZWxlY3Rpb24uaW5kZXgsIG1lZGlhKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdGhpcy5hZGRNZWRpYUF0VGhlRW5kKG1lZGlhKTtcbiAgICB9LFxuICAgIGFkZE1lZGlhQXRJbmRleChpbmRleCwgbWVkaWEpIHtcbiAgICAgIGNvbnNvbGUubG9nKGBDb2xsYWJvcmF0aXZlRWRpdG9yIOKAoiBhZGRNZWRpYUF0SW5kZXggJHtpbmRleH1gKTtcbiAgICAgIC8vIFRPRE8gZml4XG4gICAgICBjb25zdCBtZWRpYVVSTCA9IGAuLyR7dGhpcy5mb2xkZXJfc2x1Z30vJHttZWRpYS5tZWRpYV9maWxlbmFtZX1gO1xuICAgICAgLy8gY29uc3QgbWVkaWFVUkwgPVxuICAgICAgLy8gICB0aGlzLiRyb290LnN0YXRlLm1vZGUgPT09IFwiZXhwb3J0X3B1YmxpY2F0aW9uXCJcbiAgICAgIC8vICAgICA/IGAuLyR7dGhpcy5mb2xkZXJfc2x1Z30vJHttZWRpYS5tZWRpYV9maWxlbmFtZX1gXG4gICAgICAvLyAgICAgOiBgLyR7dGhpcy5mb2xkZXJfc2x1Z30vJHttZWRpYS5tZWRpYV9maWxlbmFtZX1gO1xuXG4gICAgICAvLyBzZXR0aW5nIGVkaXRvciBmb2N1cyBhbmQgc2VsZWN0aW9uIGNhbiBjYXVzZSB0aGUgc2Nyb2xsIHRvIFwianVtcFwiXG4gICAgICAvLyBub3QgZXhhY3RseSBhIGdvb2QgaWRlYeKAplxuICAgICAgLy8gdGhpcy5lZGl0b3Iuc2V0U2VsZWN0aW9uKGluZGV4LCBRdWlsbC5zb3VyY2VzLlNJTEVOVCk7XG4gICAgICAvLyB0aGlzLmVkaXRvci5mb2N1cygpO1xuXG4gICAgICB0aGlzLmVkaXRvci5ibHVyKCk7XG5cbiAgICAgIGNvbnN0IHsgJHR5cGUsIGNhcHRpb24sICRwYXRoIH0gPSBtZWRpYTtcbiAgICAgICRwYXRoO1xuXG4gICAgICBpZiAoJHR5cGUgPT09IFwiaW1hZ2VcIikge1xuICAgICAgICBjb25zdCB0aHVtYl9wYXRoID0gbWVkaWEuJHRodW1ic1sxNjAwXTtcbiAgICAgICAgaWYgKHRodW1iX3BhdGgpIHtcbiAgICAgICAgICAvLyB0aGlzLmVkaXRvci5pbnNlcnRUZXh0KGluZGV4LCBcIlxcblwiLCBRdWlsbC5zb3VyY2VzLlVTRVIpO1xuICAgICAgICAgIHRoaXMuZWRpdG9yLmluc2VydEVtYmVkKFxuICAgICAgICAgICAgaW5kZXgsXG4gICAgICAgICAgICBcIm1lZGlhXCIsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHR5cGU6ICR0eXBlLFxuICAgICAgICAgICAgICBjYXB0aW9uLFxuICAgICAgICAgICAgICAvLyBUT0RPIHVwZGF0ZSB3aXRoICRwYXRoXG4gICAgICAgICAgICAgIC8vIG1ldGFfZmlsZW5hbWU6ICRzbHVnLFxuICAgICAgICAgICAgICAvLyBzcmM6IGAvdGh1bWJzLyR7dGhpcy5mb2xkZXJfdHlwZX0vJHt0aGlzLmZvbGRlcl9zbHVnfS8ke3RodW1iX3BhdGh9YCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBRdWlsbC5zb3VyY2VzLlVTRVJcbiAgICAgICAgICApO1xuICAgICAgICAgIC8vIHRoaXMuZWRpdG9yLnNldFNlbGVjdGlvbihpbmRleCArIDEsIFF1aWxsLnNvdXJjZXMuU0lMRU5UKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICgkdHlwZSA9PT0gXCJ2aWRlb1wiKSB7XG4gICAgICAgIC8vIHRoaXMuZWRpdG9yLmluc2VydFRleHQoaW5kZXgsIFwiXFxuXCIsIFF1aWxsLnNvdXJjZXMuVVNFUik7XG4gICAgICAgIHRoaXMuZWRpdG9yLmluc2VydEVtYmVkKFxuICAgICAgICAgIGluZGV4LFxuICAgICAgICAgIFwibWVkaWFcIixcbiAgICAgICAgICB7XG4gICAgICAgICAgICB0eXBlOiAkdHlwZSxcbiAgICAgICAgICAgIGNhcHRpb24sXG4gICAgICAgICAgICAvLyBUT0RPIHVwZGF0ZSB3aXRoICRwYXRoXG4gICAgICAgICAgICBtZXRhX2ZpbGVuYW1lOiAkcGF0aCxcbiAgICAgICAgICAgIHNyYzogbWVkaWFVUkwsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBRdWlsbC5zb3VyY2VzLlVTRVJcbiAgICAgICAgKTtcbiAgICAgICAgLy8gdGhpcy5lZGl0b3Iuc2V0U2VsZWN0aW9uKGluZGV4ICsgMSwgUXVpbGwuc291cmNlcy5TSUxFTlQpO1xuICAgICAgfSBlbHNlIGlmICgkdHlwZSA9PT0gXCJhdWRpb1wiKSB7XG4gICAgICAgIHRoaXMuZWRpdG9yLmluc2VydEVtYmVkKFxuICAgICAgICAgIGluZGV4LFxuICAgICAgICAgIFwibWVkaWFcIixcbiAgICAgICAgICB7XG4gICAgICAgICAgICB0eXBlOiAkdHlwZSxcbiAgICAgICAgICAgIGNhcHRpb24sXG4gICAgICAgICAgICAvLyBUT0RPIHVwZGF0ZSB3aXRoICRwYXRoXG4gICAgICAgICAgICBtZXRhX2ZpbGVuYW1lOiAkcGF0aCxcbiAgICAgICAgICAgIHNyYzogbWVkaWFVUkwsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBRdWlsbC5zb3VyY2VzLlVTRVJcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuJGFsZXJ0aWZ5XG4gICAgICAgICAgLmNsb3NlTG9nT25DbGljayh0cnVlKVxuICAgICAgICAgIC5kZWxheSg0MDAwKVxuICAgICAgICAgIC5lcnJvcih0aGlzLiR0KFwibm90aWZpY2F0aW9ucy5tZWRpYV90eXBlX25vdF9oYW5kbGVkXCIpKTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgb25EcmFnb3ZlcigkZXZlbnQpIHtcbiAgICAgIGlmICghdGhpcy5lZGl0b3JfaXNfZW5hYmxlZCkgcmV0dXJuO1xuICAgICAgY29uc29sZS5sb2coYENvbGxhYm9yYXRpdmVFZGl0b3IyIC8gb25EcmFnb3ZlcmApO1xuICAgICAgJGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAvLyB0b2RvIGRlYm91bmNlIGRyYWdvdmVyIHRvIHRyaWdnZXIgb25seSBhIGhhbmRmdWwgb2YgdGltZXMgcGVyIHNlY29uZHNcbiAgICAgIC8vIGNvbnN0IGVsID0gJGV2ZW50LnRhcmdldDtcbiAgICAgIGxldCBfYmxvdCA9IHRoaXMuZ2V0QmxvY2tGcm9tRWxlbWVudCgkZXZlbnQudGFyZ2V0KTtcbiAgICAgIGlmICghX2Jsb3QpIHJldHVybiBmYWxzZTtcblxuICAgICAgLy8gZG8gbm90aGluZyBpZiBkcmFnb3ZlciBvblxuICAgICAgLy8gaWYgKGVsLmNsYXNzTGlzdC5jb250YWlucyhcInFsLWVkaXRvclwiKSkgcmV0dXJuO1xuXG4gICAgICAvLyBpZiAoZWwucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoXCJxbC1lZGl0b3JcIikpIHtcbiAgICAgIGlmICghX2Jsb3QuZG9tTm9kZS5jbGFzc0xpc3QuY29udGFpbnMoXCJpcy0tZHJhZ292ZXJcIikpIHtcbiAgICAgICAgX2Jsb3QuZG9tTm9kZS5jbGFzc0xpc3QuYWRkKFwiaXMtLWRyYWdvdmVyXCIpO1xuICAgICAgICBfYmxvdC5kb21Ob2RlLmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnbGVhdmVcIiwgKCkgPT4ge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGBDb2xsYWJvcmF0aXZlRWRpdG9yMiAvIGRyYWdsZWF2ZWApO1xuICAgICAgICAgIF9ibG90LmRvbU5vZGUuY2xhc3NMaXN0LnJlbW92ZShcImlzLS1kcmFnb3ZlclwiKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSxcbiAgICAvLyBvbkRyYWdMZWF2ZSgkZXZlbnQpIHt9LFxuICAgIG9uRHJvcCgkZXZlbnQpIHtcbiAgICAgIGlmICghdGhpcy5lZGl0b3JfaXNfZW5hYmxlZCkgcmV0dXJuO1xuICAgICAgY29uc29sZS5sb2coYENvbGxhYm9yYXRpdmVFZGl0b3IyIC8gb25Ecm9wYCk7XG5cbiAgICAgIC8vIFByZXZlbnQgZGVmYXVsdCBiZWhhdmlvciAoUHJldmVudCBmaWxlIGZyb20gYmVpbmcgb3BlbmVkKVxuICAgICAgJGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAkZXZlbnQuZGF0YVRyYW5zZmVyLmRyb3BFZmZlY3QgPSBcIm1vdmVcIjtcblxuICAgICAgdGhpcy5yZW1vdmVEcmFnb3ZlckZyb21CbG90cygpO1xuXG4gICAgICBpZiAoJGV2ZW50LmRhdGFUcmFuc2Zlci5nZXREYXRhKFwidGV4dC9wbGFpblwiKSA9PT0gXCJtZWRpYV9pbl9xdWlsbFwiKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgIGBDb2xsYWJvcmF0aXZlRWRpdG9yMiAvIG9uRHJvcCA6IDogZHJhZyBhbmQgZHJvcHBlZCBhIG1lZGlhIGZyb20gcXVpbGxgXG4gICAgICAgICk7XG5cbiAgICAgICAgbGV0IF9ibG90ID0gdGhpcy5nZXRCbG9ja0Zyb21FbGVtZW50KCRldmVudC50YXJnZXQpO1xuICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuZWRpdG9yLmdldEluZGV4KF9ibG90KTtcblxuICAgICAgICAvLyBmaW5kIHdoaWNoIGJsb3Qgd2FzIGRyYWdnZWQgKEEpXG4gICAgICAgIC8vIGZpbmQgd2hlcmUgaXQgd2FzIGRyb3BwZWQgKEIpXG4gICAgICAgIC8vIG1vdmUgZGVsdGEgZnJvbSBBIHRvIEJcblxuICAgICAgICBjb25zb2xlLmxvZyhgX2Jsb3QgaXMgY3VycmVudGx5IGF0IGluZGV4ICR7aW5kZXh9YCk7XG4gICAgICB9IGVsc2UgaWYgKCRldmVudC5kYXRhVHJhbnNmZXIuZ2V0RGF0YShcInRleHQvcGxhaW5cIikpIHtcbiAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgYENvbGxhYm9yYXRpdmVFZGl0b3IyIC8gb25Ecm9wIDogOiBkcm9wcGVkIGEgbWVkaWEgZnJvbSB0aGUgbGlicmFyeWBcbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBtZWRpYSA9IEpTT04ucGFyc2UoJGV2ZW50LmRhdGFUcmFuc2Zlci5nZXREYXRhKFwidGV4dC9wbGFpblwiKSk7XG4gICAgICAgIGNvbnNvbGUubG9nKG1lZGlhKTtcblxuICAgICAgICBpZiAobWVkaWEubWVkaWFfZmlsZW5hbWUpIHtcbiAgICAgICAgICAvLyBkcm9wIHN1ciBs4oCZw6lkaXRvciBldCBwYXMgc3VyIHVuZSBsaWduZVxuICAgICAgICAgIGlmICgkZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInFsLWVkaXRvclwiKSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICAgIFwiZHJvcHBlZCBvbiBlZGl0b3IgYW5kIG5vdCBvbiBsaW5lLCB3aWxsIGluc2VydCBhdCB0aGUgZW5kIG9mIGRvY1wiXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgdGhpcy5hZGRNZWRpYUF0SW5kZXgodGhpcy5lZGl0b3IuZ2V0TGVuZ3RoKCkgLSAxLCBtZWRpYSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgbGV0IF9ibG90ID0gdGhpcy5nZXRCbG9ja0Zyb21FbGVtZW50KCRldmVudC50YXJnZXQpO1xuXG4gICAgICAgICAgaWYgKCFfYmxvdCkge1xuICAgICAgICAgICAgdGhpcy4kYWxlcnRpZnlcbiAgICAgICAgICAgICAgLmNsb3NlTG9nT25DbGljayh0cnVlKVxuICAgICAgICAgICAgICAuZGVsYXkoNDAwMClcbiAgICAgICAgICAgICAgLmVycm9yKHRoaXMuJHQoXCJub3RpZmljYXRpb25zLmZhaWxlZF90b19maW5kX2Jsb2NrX2xpbmVcIikpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIF9ibG90ID1cbiAgICAgICAgICAgIF9ibG90Lm5leHQgIT09IG51bGwgJiYgX2Jsb3QubmV4dC5kb21Ob2RlID8gX2Jsb3QubmV4dCA6IF9ibG90O1xuXG4gICAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmVkaXRvci5nZXRJbmRleChfYmxvdCk7XG4gICAgICAgICAgdGhpcy5hZGRNZWRpYUF0SW5kZXgoaW5kZXggLSAxLCBtZWRpYSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgIGBDb2xsYWJvcmF0aXZlRWRpdG9yMiAvIG9uRHJvcCA6IG1pc3NpbmcgbWV0YSBmb3IgZHJvcCB0byBvY2N1cmBcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgcmVtb3ZlRHJhZ292ZXJGcm9tQmxvdHMoKSB7XG4gICAgICB0aGlzLmVkaXRvci5nZXRMaW5lcygpLm1hcCgoYikgPT4ge1xuICAgICAgICB3aGlsZSAoYi5wYXJlbnQgIT09IGIuc2Nyb2xsKSB7XG4gICAgICAgICAgYiA9IGIucGFyZW50O1xuICAgICAgICAgIGlmIChiID09PSBiLnNjcm9sbCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChiICE9PSBiLnNjcm9sbCAmJiBiLmRvbU5vZGUpIHtcbiAgICAgICAgICBiLmRvbU5vZGUuY2xhc3NMaXN0LnJlbW92ZShcImlzLS1kcmFnb3ZlclwiKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSxcblxuICAgIGdldEJsb2NrRnJvbUVsZW1lbnQoX3RhcmdldCkge1xuICAgICAgd2hpbGUgKCFfdGFyZ2V0LnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicWwtZWRpdG9yXCIpKSB7XG4gICAgICAgIF90YXJnZXQgPSBfdGFyZ2V0LnBhcmVudEVsZW1lbnQ7XG4gICAgICAgIGlmIChfdGFyZ2V0ID09PSBudWxsIHx8ICFfdGFyZ2V0LnBhcmVudEVsZW1lbnQpIGJyZWFrO1xuICAgICAgfVxuICAgICAgbGV0IF9ibG90ID0gUXVpbGwuZmluZChfdGFyZ2V0KTtcbiAgICAgIGlmIChfYmxvdCkgcmV0dXJuIF9ibG90O1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0sXG4gIH0sXG59O1xuPC9zY3JpcHQ+XG48c3R5bGUgc3JjPVwicXVpbGwvZGlzdC9xdWlsbC5zbm93LmNzc1wiPjwvc3R5bGU+XG48c3R5bGUgbGFuZz1cInNjc3NcIiBzY29wZWQ+XG4uX2NvbGxhYm9yYXRpdmVFZGl0b3Ige1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIGZvbnQtc2l6ZTogMTAwJTtcblxuICAmOm5vdCguaXMtLWVkaXRhYmxlKSB7XG4gICAgYm9yZGVyOiBub25lO1xuICAgIDo6di1kZWVwIC5xbC10b29sYmFyIHtcbiAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgfVxuICB9XG5cbiAgOjp2LWRlZXAge1xuICAgIC5xbC1jb250YWluZXIge1xuICAgICAgZm9udC1zaXplOiAxNnB4O1xuICAgICAgZm9udC1mYW1pbHk6IGluaGVyaXQ7XG4gICAgICBmb250LXdlaWdodDogbm9ybWFsO1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XG4gICAgICBib3JkZXI6IDA7XG5cbiAgICAgICY6bm90KC5xbC1kaXNhYmxlZCkge1xuICAgICAgICAucWwtZWRpdG9yIHtcbiAgICAgICAgICA+ICoge1xuICAgICAgICAgICAgJjo6YmVmb3JlIHtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAucWwtZWRpdG9yIHtcbiAgICAgIGNvdW50ZXItcmVzZXQ6IGxpc3RDb3VudGVyO1xuICAgICAgaGVpZ2h0OiBhdXRvO1xuICAgICAgb3ZlcmZsb3c6IHZpc2libGU7XG4gICAgICBjb2xvcjogaW5oZXJpdDtcblxuICAgICAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XG5cbiAgICAgIHBhZGRpbmc6IDBweDtcblxuICAgICAgQGltcG9ydCBcIi4vaW1wb3J0cy9tYWluVGV4dC5zY3NzXCI7XG5cbiAgICAgICZbY29udGVudGVkaXRhYmxlPVwidHJ1ZVwiXSB7XG4gICAgICAgIC8vIHBhZGRpbmc6IDJweDtcbiAgICAgICAgLy8gcGFkZGluZy1ib3R0b206IGNhbGModmFyKC0tc3BhY2luZykgKiAxKTtcbiAgICAgIH1cblxuICAgICAgPiAqIHtcbiAgICAgICAgLy8gY291bnRlci1pbmNyZW1lbnQ6IGxpc3RDb3VudGVyO1xuICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgIHBhZGRpbmc6IDA7XG5cbiAgICAgICAgJjo6YmVmb3JlIHtcbiAgICAgICAgICAvLyBjb250ZW50OiBjb3VudGVyKGxpc3RDb3VudGVyKTtcbiAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG5cbiAgICAgICAgICAvKiBvbGQgd2F5IDogcG9zIGFicyAqL1xuICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgICAvLyBwYWRkaW5nLXRvcDogMC44NWVtO1xuICAgICAgICAgIHJpZ2h0OiAxMDAlO1xuICAgICAgICAgIHRleHQtYWxpZ246IHJpZ2h0O1xuICAgICAgICAgIGhlaWdodDogMTAwJTtcblxuICAgICAgICAgIGZvbnQtc2l6ZTogMC42cmVtO1xuICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcbiAgICAgICAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgICAgbGluZS1oZWlnaHQ6IDM7XG4gICAgICAgICAgd2lkdGg6IGNhbGModmFyKC0tc3BhY2luZykgKiAyKTtcbiAgICAgICAgICBtYXgtd2lkdGg6IDEwMHB4O1xuICAgICAgICAgIGxpbmUtaGVpZ2h0OiAyLjU7XG4gICAgICAgICAgY29sb3I6IHRyYW5zcGFyZW50O1xuICAgICAgICAgIGNvbG9yOiBoc2woMjEwLCAxMSUsIDE4JSk7XG5cbiAgICAgICAgICAvLyBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgICAgLy8gZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgICAgIC8vIGZvbnQtc2l6ZTogMC42cmVtO1xuICAgICAgICAgIC8vIHZlcnRpY2FsLWFsaWduOiBiYXNlbGluZTtcbiAgICAgICAgICAvLyB3aWR0aDogY2FsYyh2YXIoLS1zcGFjaW5nKSAqIDIpO1xuICAgICAgICAgIC8vIG1hcmdpbi1sZWZ0OiBjYWxjKHZhcigtLXNwYWNpbmcpICogMiAqIC0xKTtcblxuICAgICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjI1cyBjdWJpYy1iZXppZXIoMC4xOSwgMSwgMC4yMiwgMSk7XG4gICAgICAgIH1cblxuICAgICAgICAmLmlzLS1zZWxlY3RlZCB7XG4gICAgICAgICAgJjo6YmVmb3JlIHtcbiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWFjdGl2ZS1jb2xvcik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgJjo6YWZ0ZXIge1xuICAgICAgICAgIGNvbnRlbnQ6IFwiXCI7XG4gICAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgaGVpZ2h0OiAwO1xuICAgICAgICAgIG1hcmdpbjogMDtcbiAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1hY3RpdmUtY29sb3IpO1xuICAgICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjI1cyBjdWJpYy1iZXppZXIoMC4xOSwgMSwgMC4yMiwgMSk7XG4gICAgICAgIH1cblxuICAgICAgICAmLmlzLS1kcmFnb3ZlciB7XG4gICAgICAgICAgJjo6YWZ0ZXIge1xuICAgICAgICAgICAgbWFyZ2luOiA0cHggMDtcbiAgICAgICAgICAgIGhlaWdodDogNHB4O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC5xbC10b29sdGlwIHtcbiAgICAgIHotaW5kZXg6IDEwO1xuICAgIH1cblxuICAgIC5xbC1jb250YWluZXIucWwtZGlzYWJsZWQge1xuICAgICAgLnFsLWVkaXRvciA+ICoge1xuICAgICAgICBjdXJzb3I6IGluaGVyaXQ7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG4uX2NvbGxhYm9yYXRpdmVFZGl0b3I6bm90KC5pcy0tZWRpdGluZ19pc19lbmFibGVkKSB7XG4gIDo6di1kZWVwIHtcbiAgICAucWwtdG9vbGJhciB7XG4gICAgICBwYWRkaW5nOiAwO1xuICAgIH1cbiAgICAucWwtZm9ybWF0cyB7XG4gICAgICBkaXNwbGF5OiBub25lO1xuICAgIH1cbiAgfVxufVxuXG4uX2Zsb2F0aW5nRWRpdEJ0biB7XG4gIHBvc2l0aW9uOiBzdGlja3k7XG4gIHotaW5kZXg6IDEwMTtcbiAgdG9wOiBjYWxjKHZhcigtLXNwYWNpbmcpIC8gNCk7XG4gIG1hcmdpbi1sZWZ0OiBhdXRvO1xuICBtYXJnaW4tcmlnaHQ6IGNhbGModmFyKC0tc3BhY2luZykgLyA0KTtcblxuICA+ICoge1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB0b3A6IDA7XG4gICAgcmlnaHQ6IDA7XG4gIH1cbn1cbjwvc3R5bGU+XG48c3R5bGUgbGFuZz1cInNjc3NcIj5cbi5xbC10b29sYmFyLnFsLXRvb2xiYXIge1xuICAtLXRvb2xiYXItYmc6IHZhcigtLWVkaXRvci1iZyk7XG4gIC0tZWRpdG9yLWJnOiAjZWVlO1xuICAtLWJ1dHRvbi1zaXplOiAzMnB4O1xuICAtLWJvcmRlci1zaXplOiA0cHg7XG4gIC0tcXVpbGwtYnV0dG9ucy1zaXplOiAyMHB4O1xuICAtLXF1aWxsLW9wdGlvbnMtc2l6ZTogMzRweDtcblxuICBwb3NpdGlvbjogc3RpY2t5O1xuICB0b3A6IDA7XG4gIHotaW5kZXg6IDI7XG4gIHBhZGRpbmc6IGNhbGModmFyKC0tc3BhY2luZykgLyA0KTtcbiAgYm9yZGVyLXJhZGl1czogMTZweDtcbiAgLy8gaGlkZXMgc2VsZWN0LCBkbyBub3QgdXNlXG4gIC8vIG92ZXJmbG93OiBoaWRkZW47XG5cbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1mbG93OiByb3cgd3JhcDtcbiAgLy8gZ2FwOiBjYWxjKHZhcigtLXNwYWNpbmcpIC8gNCk7XG4gIGp1c3RpZnktY29udGVudDogZmxleC1zdGFydDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcblxuICBmb250LXNpemU6IGluaGVyaXQ7XG4gIGZvbnQtZmFtaWx5OiBpbmhlcml0O1xuICBmb250LXdlaWdodDogbm9ybWFsO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS10b29sYmFyLWJnKTtcbiAgY29sb3I6ICMzMzMgIWltcG9ydGFudDtcblxuICAvLyBib3JkZXItcmFkaXVzOiAwLjVlbTtcbiAgYm9yZGVyOiBub25lO1xuICAvLyBib3JkZXItYm90dG9tOiB2YXIoLS1ib3JkZXItc2l6ZSkgZG90dGVkIHZhcigtLWVkaXRvci1iZyk7XG4gIC8vIGJvcmRlci1ib3R0b20tc3R5bGU6IGRvdWJsZTtcblxuICAmOjphZnRlciB7XG4gICAgZGlzcGxheTogbm9uZTtcbiAgfVxuICBidXR0b24sXG4gIHN2ZyB7XG4gICAgY29sb3I6IGN1cnJlbnRDb2xvcjtcbiAgfVxuXG4gIGJ1dHRvbixcbiAgLl9jb2xsYWJFZGl0b3JTdGF0dXMge1xuICAgIG1pbi13aWR0aDogdmFyKC0tYnV0dG9uLXNpemUpO1xuICAgIHdpZHRoOiBhdXRvO1xuICAgIGhlaWdodDogdmFyKC0tYnV0dG9uLXNpemUpO1xuICAgIHBhZGRpbmc6IDZweDtcbiAgfVxuXG4gIC5xbC1maWxsLFxuICAucWwtc3Ryb2tlLnFsLWZpbGwge1xuICAgIGZpbGw6IGN1cnJlbnRDb2xvcjtcbiAgfVxuXG4gIC5xbC1zdHJva2Uge1xuICAgIHN0cm9rZTogY3VycmVudENvbG9yO1xuICB9XG5cbiAgLnFsLWNvbG9yLXBpY2tlciAucWwtcGlja2VyLW9wdGlvbnMge1xuICAgIC8vIHRvIHByZXZlbnQgb3ZlcmZsb3cgaXNzdWVzIHdpdGggcGFnZW1lbnUgb3ZlcmZsb3dcbiAgICB3aWR0aDogdmFyKC0tcXVpbGwtb3B0aW9ucy1zaXplKTtcbiAgfVxuXG4gIC5xbC1waWNrZXIge1xuICAgIGNvbG9yOiBjdXJyZW50Q29sb3I7XG5cbiAgICAmLnFsLWxpbmVoZWlnaHQge1xuICAgICAgd2lkdGg6IDc4cHg7XG4gICAgICAucWwtcGlja2VyLWxhYmVsLFxuICAgICAgLnFsLXBpY2tlci1pdGVtIHtcbiAgICAgICAgJjo6YmVmb3JlIHtcbiAgICAgICAgICBjb250ZW50OiBcIk5vcm1hbCAoMS40MilcIiAhaW1wb3J0YW50O1xuICAgICAgICB9XG4gICAgICAgICZbZGF0YS12YWx1ZV0sXG4gICAgICAgICZbZGF0YS12YWx1ZV0ge1xuICAgICAgICAgICY6OmJlZm9yZSB7XG4gICAgICAgICAgICBjb250ZW50OiBhdHRyKGRhdGEtdmFsdWUpICFpbXBvcnRhbnQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLnFsLXBpY2tlci5xbC1mb250IHtcbiAgICB3aWR0aDogMTQwcHg7XG4gIH1cbiAgLnFsLWNvbG9yLXBpY2tlcixcbiAgLnFsLWljb24tcGlja2VyIHtcbiAgICB3aWR0aDogdmFyKC0tcXVpbGwtb3B0aW9ucy1zaXplKTtcbiAgfVxuXG4gIC5xbC1mb3JtYXRzIHtcbiAgICAvLyBtYXJnaW4tcmlnaHQ6IGNhbGModmFyKC0tc3BhY2luZykgLyAyKTtcbiAgICAvLyBtYXJnaW4tYm90dG9tOiBjYWxjKHZhcigtLXNwYWNpbmcpIC8gMik7XG4gICAgbWFyZ2luOiAwO1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleC1mbG93OiByb3cgbm93cmFwO1xuICAgIGJvcmRlcjogMnB4IHNvbGlkIHZhcigtLXRvb2xiYXItYmcpO1xuICAgIGJvcmRlci1yYWRpdXM6IDEycHg7XG4gICAgYmFja2dyb3VuZDogI2ZmZjtcblxuICAgIGJ1dHRvbixcbiAgICA+ICo6bm90KC5xbC1zaXplKTpub3QoLnFsLWxpbmVoZWlnaHQpOm5vdCgucWwtaGVhZGVyKTpub3QoLnFsLWZvbnQpXG4gICAgICAucWwtcGlja2VyLWxhYmVsIHtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICBzdmcge1xuICAgICAgICB3aWR0aDogdmFyKC0tcXVpbGwtYnV0dG9ucy1zaXplKTtcbiAgICAgICAgaGVpZ2h0OiB2YXIoLS1xdWlsbC1idXR0b25zLXNpemUpO1xuICAgICAgICBmbGV4OiAwIDAgYXV0bztcbiAgICAgIH1cbiAgICB9XG5cbiAgICAucWwtZm9udCB7XG4gICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1lZGl0b3ItYmcpO1xuICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gICAgfVxuICAgIC5xbC1oZWFkZXIge1xuICAgICAgYmFja2dyb3VuZDogdmFyKC0tZWRpdG9yLWJnKTtcbiAgICAgIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xuICAgIH1cbiAgICAucWwtcGlja2VyIHtcbiAgICAgIGhlaWdodDogdmFyKC0tYnV0dG9uLXNpemUpO1xuXG4gICAgICAmLnFsLXNpemUge1xuICAgICAgICB3aWR0aDogMTE1cHg7XG4gICAgICAgIC5xbC1waWNrZXItbGFiZWwsXG4gICAgICAgIC5xbC1waWNrZXItaXRlbSB7XG4gICAgICAgICAgJjo6YmVmb3JlIHtcbiAgICAgICAgICAgIGNvbnRlbnQ6IFwiUGFyIGTDqWZhdXRcIiAhaW1wb3J0YW50O1xuICAgICAgICAgIH1cbiAgICAgICAgICAmW2RhdGEtdmFsdWVdLFxuICAgICAgICAgICZbZGF0YS12YWx1ZV0ge1xuICAgICAgICAgICAgJjo6YmVmb3JlIHtcbiAgICAgICAgICAgICAgY29udGVudDogYXR0cihkYXRhLXZhbHVlKSAhaW1wb3J0YW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgJi5xbC1saW5laGVpZ2h0IHtcbiAgICAgICAgd2lkdGg6IDExNXB4O1xuICAgICAgICAucWwtcGlja2VyLWxhYmVsLFxuICAgICAgICAucWwtcGlja2VyLWl0ZW0ge1xuICAgICAgICAgICY6OmJlZm9yZSB7XG4gICAgICAgICAgICBjb250ZW50OiBcIk5vcm1hbCAoMS40MilcIiAhaW1wb3J0YW50O1xuICAgICAgICAgIH1cbiAgICAgICAgICAmW2RhdGEtdmFsdWVdLFxuICAgICAgICAgICZbZGF0YS12YWx1ZV0ge1xuICAgICAgICAgICAgJjo6YmVmb3JlIHtcbiAgICAgICAgICAgICAgY29udGVudDogYXR0cihkYXRhLXZhbHVlKSAhaW1wb3J0YW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICAucWwtcGlja2VyLWxhYmVsIHtcbiAgICAgIHRleHQtYWxpZ246IGxlZnQ7XG4gICAgICBwYWRkaW5nOiA0cHg7XG4gICAgICAvLyBiYWNrZ3JvdW5kOiB3aGl0ZTtcbiAgICB9XG5cbiAgICAucWwtcGlja2VyLWxhYmVsOjpiZWZvcmUge1xuICAgICAgLy8gbGluZS1oZWlnaHQ6IHZhcigtLWJ1dHRvbi1zaXplKTtcbiAgICB9XG4gIH1cblxuICAucWwtcGlja2VyLnFsLWhlYWRlciB7XG4gICAgd2lkdGg6IDExNXB4ICFpbXBvcnRhbnQ7XG4gIH1cbiAgLnFsLXBpY2tlci5xbC1mb250IHtcbiAgICB3aWR0aDogMTYwcHggIWltcG9ydGFudDtcblxuICAgICY6OmJlZm9yZSB7XG4gICAgfVxuICB9XG5cbiAgaHRtbCAmIC5xbC1waWNrZXIucWwtaGVhZGVyIHtcbiAgICAucWwtcGlja2VyLWxhYmVsLFxuICAgIC5xbC1waWNrZXItaXRlbSB7XG4gICAgICAmOjpiZWZvcmUge1xuICAgICAgICBjb250ZW50OiBcIlJlZ3VsYXIgdGV4dFwiO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBodG1sW2xhbmc9XCJmclwiXSAmIC5xbC1waWNrZXIucWwtaGVhZGVyIHtcbiAgICAucWwtcGlja2VyLWxhYmVsLFxuICAgIC5xbC1waWNrZXItaXRlbSB7XG4gICAgICAmOjpiZWZvcmUge1xuICAgICAgICBjb250ZW50OiBcIlRleHRlIGNvdXJhbnRcIjtcbiAgICAgIH1cblxuICAgICAgJltkYXRhLXZhbHVlPVwiMVwiXTo6YmVmb3JlIHtcbiAgICAgICAgY29udGVudDogXCJUaXRyZSAxXCI7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA3MDA7XG4gICAgICB9XG4gICAgICAmW2RhdGEtdmFsdWU9XCIyXCJdOjpiZWZvcmUge1xuICAgICAgICBjb250ZW50OiBcIlRpdHJlIDJcIjtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDcwMDtcbiAgICAgIH1cbiAgICAgICZbZGF0YS12YWx1ZT1cIjNcIl06OmJlZm9yZSB7XG4gICAgICAgIGNvbnRlbnQ6IFwiVGl0cmUgM1wiO1xuICAgICAgICBmb250LXdlaWdodDogNzAwO1xuICAgICAgfVxuICAgICAgJltkYXRhLXZhbHVlPVwiNFwiXTo6YmVmb3JlIHtcbiAgICAgICAgY29udGVudDogXCJUaXRyZSA0XCI7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA3MDA7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gLnFsLXBpY2tlci5xbC1zaXplIC5xbC1waWNrZXItbGFiZWxbZGF0YS12YWx1ZT1cIjc1JVwiXTo6YmVmb3JlLFxuICAvLyAucWwtcGlja2VyLnFsLXNpemUgLnFsLXBpY2tlci1pdGVtW2RhdGEtdmFsdWU9XCI3NSVcIl06OmJlZm9yZSB7XG4gIC8vICAgY29udGVudDogXCJTbWFsbFwiO1xuICAvLyAgIGZvbnQtc2l6ZTogNzAlICFpbXBvcnRhbnQ7XG5cbiAgLy8gICBodG1sW2xhbmc9XCJmclwiXSAmIHtcbiAgLy8gICAgIGNvbnRlbnQ6IFwiUGV0aXRcIjtcbiAgLy8gICB9XG4gIC8vIH1cbiAgLy8gLnFsLXBpY2tlci5xbC1zaXplIC5xbC1waWNrZXItbGFiZWw6bm90KFtkYXRhLXZhbHVlXSk6OmJlZm9yZSxcbiAgLy8gLnFsLXBpY2tlci5xbC1zaXplIC5xbC1waWNrZXItaXRlbTpub3QoW2RhdGEtdmFsdWVdKTo6YmVmb3JlIHtcbiAgLy8gICBjb250ZW50OiBcIlJlZ3VsYXJcIjtcbiAgLy8gICBmb250LXNpemU6IDEwMCUgIWltcG9ydGFudDtcblxuICAvLyAgIGh0bWxbbGFuZz1cImZyXCJdICYge1xuICAvLyAgICAgY29udGVudDogXCJOb3JtYWxcIjtcbiAgLy8gICB9XG4gIC8vIH1cbiAgLy8gLnFsLXBpY2tlci5xbC1zaXplIC5xbC1waWNrZXItbGFiZWxbZGF0YS12YWx1ZT1cIjE1MCVcIl06OmJlZm9yZSxcbiAgLy8gLnFsLXBpY2tlci5xbC1zaXplIC5xbC1waWNrZXItaXRlbVtkYXRhLXZhbHVlPVwiMTUwJVwiXTo6YmVmb3JlIHtcbiAgLy8gICBjb250ZW50OiBcIkxhcmdlXCI7XG4gIC8vICAgZm9udC1zaXplOiAxNTAlICFpbXBvcnRhbnQ7XG5cbiAgLy8gICBodG1sW2xhbmc9XCJmclwiXSAmIHtcbiAgLy8gICAgIGNvbnRlbnQ6IFwiR3JhbmRcIjtcbiAgLy8gICB9XG4gIC8vIH1cbiAgLy8gLnFsLXBpY2tlci5xbC1zaXplIC5xbC1waWNrZXItbGFiZWxbZGF0YS12YWx1ZT1cIjMwMCVcIl06OmJlZm9yZSxcbiAgLy8gLnFsLXBpY2tlci5xbC1zaXplIC5xbC1waWNrZXItaXRlbVtkYXRhLXZhbHVlPVwiMzAwJVwiXTo6YmVmb3JlIHtcbiAgLy8gICBjb250ZW50OiBcIkh1Z2VcIjtcbiAgLy8gICBmb250LXNpemU6IDMwMCUgIWltcG9ydGFudDtcblxuICAvLyAgIGh0bWxbbGFuZz1cImZyXCJdICYge1xuICAvLyAgICAgY29udGVudDogXCLDiW5vcm1lXCI7XG4gIC8vICAgfVxuICAvLyB9XG5cbiAgLnFsLXBpY2tlci5xbC1zaXplIC5xbC1waWNrZXItbGFiZWxbZGF0YS12YWx1ZV06OmJlZm9yZSB7XG4gICAgZm9udC1zaXplOiAxMDAlICFpbXBvcnRhbnQ7XG4gIH1cbn1cblxuLl9URWJ0bkNvbnRhaW5lciB7XG4gIHdpZHRoOiAxMDAlO1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWZsb3c6IHJvdyB3cmFwO1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcblxuICA+ICoge1xuICAgIGJvcmRlcjogMnB4IHNvbGlkIHZhcigtLXRvb2xiYXItYmcpO1xuICAgIGJvcmRlci1yYWRpdXM6IDEycHg7XG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICBiYWNrZ3JvdW5kOiAjZmZmO1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleC1mbG93OiByb3cgd3JhcDtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcblxuICAgIC5fZWRpdEJ0biB7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1jLWJsZXV2ZXJ0KTtcbiAgICB9XG5cbiAgICAuX2NvbGxhYkVkaXRvclN0YXR1cyB7XG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1jLXZlcnQpO1xuICAgIH1cbiAgfVxuICAvLyBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1lZGl0b3ItYmcpO1xufVxuPC9zdHlsZT5cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/babel-loader/lib/index.js??clonedRuleSet-37[0].rules[0].use[0]!./node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./src/adc-core/fields/collaborative-editor/CollaborativeEditor2.vue?vue&type=script&lang=js&\n");

/***/ })

},
/******/ function(__webpack_require__) { // webpackRuntimeModules
/******/ /* webpack/runtime/getFullHash */
/******/ !function() {
/******/ 	__webpack_require__.h = function() { return "5cc412df0afc83f5"; }
/******/ }();
/******/ 
/******/ }
);