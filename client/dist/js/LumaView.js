(self["webpackChunkapp"]=self["webpackChunkapp"]||[]).push([[947],{314:function(t,e,s){"use strict";s.r(e),s.d(e,{default:function(){return Mt}});var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"_lumaView"},[t.shared_folder_path?[s("splitpanes",{staticClass:"_panes"},[s("pane",{key:"myContent",staticClass:"_myContent",attrs:{"min-size":"5"}},[t.show_authors_modal?s("AuthorList",{on:{close:function(e){t.show_authors_modal=!1}}}):t._e(),t.connected_as?s("MyChutier",{attrs:{shared_space_path:t.shared_folder_path},on:{showAuthorModal:t.showAuthorModal}}):t._e()],1),s("pane",{key:"sharedContent",staticClass:"_sharedContent",attrs:{"min-size":"5"}},[s("SharedFolder",{attrs:{shared_folder_path:t.shared_folder_path}})],1)],1)]:s("LoaderSpinner")],2)},a=[],n=(s(5827),s(6699),s(7658),Object.defineProperty),o=Object.defineProperties,r=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,d=(t,e,s)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,h=(t,e)=>{for(var s in e||(e={}))c.call(e,s)&&d(t,s,e[s]);if(l)for(var s of l(e))u.call(e,s)&&d(t,s,e[s]);return t},p=(t,e)=>o(t,r(e)),m=(t,e)=>{var s={};for(var i in t)c.call(t,i)&&e.indexOf(i)<0&&(s[i]=t[i]);if(null!=t&&l)for(var i of l(t))e.indexOf(i)<0&&u.call(t,i)&&(s[i]=t[i]);return s};function _(t,e,s,i,a,n,o,r){var l,c="function"===typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=s,c._compiled=!0),i&&(c.functional=!0),n&&(c._scopeId="data-v-"+n),o?(l=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),a&&a.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},c._ssrRegister=l):a&&(l=r?function(){a.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:a),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(t,e){return l.call(e),u(t,e)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,l):[l]}return{exports:t,options:c}}const f={name:"splitpanes",props:{horizontal:{type:Boolean},pushOtherPanes:{type:Boolean,default:!0},dblClickSplitter:{type:Boolean,default:!0},rtl:{type:Boolean,default:!1},firstSplitter:{type:Boolean}},provide(){return{requestUpdate:this.requestUpdate,onPaneAdd:this.onPaneAdd,onPaneRemove:this.onPaneRemove,onPaneClick:this.onPaneClick}},data:()=>({container:null,ready:!1,panes:[],touch:{mouseDown:!1,dragging:!1,activeSplitter:null},splitterTaps:{splitter:null,timeoutId:null}}),computed:{panesCount(){return this.panes.length},indexedPanes(){return this.panes.reduce(((t,e)=>(t[e.id]=e)&&t),{})}},methods:{updatePaneComponents(){this.panes.forEach((t=>{t.update&&t.update({[this.horizontal?"height":"width"]:`${this.indexedPanes[t.id].size}%`})}))},bindEvents(){document.addEventListener("mousemove",this.onMouseMove,{passive:!1}),document.addEventListener("mouseup",this.onMouseUp),"ontouchstart"in window&&(document.addEventListener("touchmove",this.onMouseMove,{passive:!1}),document.addEventListener("touchend",this.onMouseUp))},unbindEvents(){document.removeEventListener("mousemove",this.onMouseMove,{passive:!1}),document.removeEventListener("mouseup",this.onMouseUp),"ontouchstart"in window&&(document.removeEventListener("touchmove",this.onMouseMove,{passive:!1}),document.removeEventListener("touchend",this.onMouseUp))},onMouseDown(t,e){this.bindEvents(),this.touch.mouseDown=!0,this.touch.activeSplitter=e},onMouseMove(t){this.touch.mouseDown&&(t.preventDefault(),this.touch.dragging=!0,this.calculatePanesSize(this.getCurrentMouseDrag(t)),this.$emit("resize",this.panes.map((t=>({min:t.min,max:t.max,size:t.size})))))},onMouseUp(){this.touch.dragging&&this.$emit("resized",this.panes.map((t=>({min:t.min,max:t.max,size:t.size})))),this.touch.mouseDown=!1,setTimeout((()=>{this.touch.dragging=!1,this.unbindEvents()}),100)},onSplitterClick(t,e){"ontouchstart"in window&&(t.preventDefault(),this.dblClickSplitter&&(this.splitterTaps.splitter===e?(clearTimeout(this.splitterTaps.timeoutId),this.splitterTaps.timeoutId=null,this.onSplitterDblClick(t,e),this.splitterTaps.splitter=null):(this.splitterTaps.splitter=e,this.splitterTaps.timeoutId=setTimeout((()=>{this.splitterTaps.splitter=null}),500)))),this.touch.dragging||this.$emit("splitter-click",this.panes[e])},onSplitterDblClick(t,e){let s=0;this.panes=this.panes.map(((t,i)=>(t.size=i===e?t.max:t.min,i!==e&&(s+=t.min),t))),this.panes[e].size-=s,this.$emit("pane-maximize",this.panes[e])},onPaneClick(t,e){this.$emit("pane-click",this.indexedPanes[e])},getCurrentMouseDrag(t){const e=this.container.getBoundingClientRect(),{clientX:s,clientY:i}="ontouchstart"in window&&t.touches?t.touches[0]:t;return{x:s-e.left,y:i-e.top}},getCurrentDragPercentage(t){t=t[this.horizontal?"y":"x"];const e=this.container[this.horizontal?"clientHeight":"clientWidth"];return this.rtl&&!this.horizontal&&(t=e-t),100*t/e},calculatePanesSize(t){const e=this.touch.activeSplitter;let s={prevPanesSize:this.sumPrevPanesSize(e),nextPanesSize:this.sumNextPanesSize(e),prevReachedMinPanes:0,nextReachedMinPanes:0};const i=0+(this.pushOtherPanes?0:s.prevPanesSize),a=100-(this.pushOtherPanes?0:s.nextPanesSize),n=Math.max(Math.min(this.getCurrentDragPercentage(t),a),i);let o=[e,e+1],r=this.panes[o[0]]||null,l=this.panes[o[1]]||null;const c=r.max<100&&n>=r.max+s.prevPanesSize,u=l.max<100&&n<=100-(l.max+this.sumNextPanesSize(e+1));if(c||u)c?(r.size=r.max,l.size=Math.max(100-r.max-s.prevPanesSize-s.nextPanesSize,0)):(r.size=Math.max(100-l.max-s.prevPanesSize-this.sumNextPanesSize(e+1),0),l.size=l.max);else{if(this.pushOtherPanes){const t=this.doPushOtherPanes(s,n);if(!t)return;({sums:s,panesToResize:o}=t),r=this.panes[o[0]]||null,l=this.panes[o[1]]||null}null!==r&&(r.size=Math.min(Math.max(n-s.prevPanesSize-s.prevReachedMinPanes,r.min),r.max)),null!==l&&(l.size=Math.min(Math.max(100-n-s.nextPanesSize-s.nextReachedMinPanes,l.min),l.max))}},doPushOtherPanes(t,e){const s=this.touch.activeSplitter,i=[s,s+1];return e<t.prevPanesSize+this.panes[i[0]].min&&(i[0]=this.findPrevExpandedPane(s).index,t.prevReachedMinPanes=0,i[0]<s&&this.panes.forEach(((e,a)=>{a>i[0]&&a<=s&&(e.size=e.min,t.prevReachedMinPanes+=e.min)})),t.prevPanesSize=this.sumPrevPanesSize(i[0]),void 0===i[0])?(t.prevReachedMinPanes=0,this.panes[0].size=this.panes[0].min,this.panes.forEach(((e,i)=>{i>0&&i<=s&&(e.size=e.min,t.prevReachedMinPanes+=e.min)})),this.panes[i[1]].size=100-t.prevReachedMinPanes-this.panes[0].min-t.prevPanesSize-t.nextPanesSize,null):e>100-t.nextPanesSize-this.panes[i[1]].min&&(i[1]=this.findNextExpandedPane(s).index,t.nextReachedMinPanes=0,i[1]>s+1&&this.panes.forEach(((e,a)=>{a>s&&a<i[1]&&(e.size=e.min,t.nextReachedMinPanes+=e.min)})),t.nextPanesSize=this.sumNextPanesSize(i[1]-1),void 0===i[1])?(t.nextReachedMinPanes=0,this.panes[this.panesCount-1].size=this.panes[this.panesCount-1].min,this.panes.forEach(((e,i)=>{i<this.panesCount-1&&i>=s+1&&(e.size=e.min,t.nextReachedMinPanes+=e.min)})),this.panes[i[0]].size=100-t.prevPanesSize-t.nextReachedMinPanes-this.panes[this.panesCount-1].min-t.nextPanesSize,null):{sums:t,panesToResize:i}},sumPrevPanesSize(t){return this.panes.reduce(((e,s,i)=>e+(i<t?s.size:0)),0)},sumNextPanesSize(t){return this.panes.reduce(((e,s,i)=>e+(i>t+1?s.size:0)),0)},findPrevExpandedPane(t){const e=[...this.panes].reverse().find((e=>e.index<t&&e.size>e.min));return e||{}},findNextExpandedPane(t){const e=this.panes.find((e=>e.index>t+1&&e.size>e.min));return e||{}},checkSplitpanesNodes(){const t=Array.from(this.container.children);t.forEach((t=>{const e=t.classList.contains("splitpanes__pane"),s=t.classList.contains("splitpanes__splitter");if(!e&&!s)return t.parentNode.removeChild(t),void console.warn("Splitpanes: Only <pane> elements are allowed at the root of <splitpanes>. One of your DOM nodes was removed.")}))},addSplitter(t,e,s=!1){const i=t-1,a=document.createElement("div");a.classList.add("splitpanes__splitter"),s||(a.onmousedown=t=>this.onMouseDown(t,i),"undefined"!==typeof window&&"ontouchstart"in window&&(a.ontouchstart=t=>this.onMouseDown(t,i)),a.onclick=t=>this.onSplitterClick(t,i+1)),this.dblClickSplitter&&(a.ondblclick=t=>this.onSplitterDblClick(t,i+1)),e.parentNode.insertBefore(a,e)},removeSplitter(t){t.onmousedown=void 0,t.onclick=void 0,t.ondblclick=void 0,t.parentNode.removeChild(t)},redoSplitters(){const t=Array.from(this.container.children);t.forEach((t=>{t.className.includes("splitpanes__splitter")&&this.removeSplitter(t)}));let e=0;t.forEach((t=>{t.className.includes("splitpanes__pane")&&(!e&&this.firstSplitter?this.addSplitter(e,t,!0):e&&this.addSplitter(e,t),e++)}))},requestUpdate(t){var e=t,{target:s}=e,i=m(e,["target"]);const a=this.indexedPanes[s._uid];Object.entries(i).forEach((([t,e])=>a[t]=e))},onPaneAdd(t){let e=-1;Array.from(t.$el.parentNode.children).some((s=>(s.className.includes("splitpanes__pane")&&e++,s===t.$el)));const s=parseFloat(t.minSize),i=parseFloat(t.maxSize);this.panes.splice(e,0,{id:t._uid,index:e,min:isNaN(s)?0:s,max:isNaN(i)?100:i,size:null===t.size?null:parseFloat(t.size),givenSize:t.size,update:t.update}),this.panes.forEach(((t,e)=>t.index=e)),this.ready&&this.$nextTick((()=>{this.redoSplitters(),this.resetPaneSizes({addedPane:this.panes[e]}),this.$emit("pane-add",{index:e,panes:this.panes.map((t=>({min:t.min,max:t.max,size:t.size})))})}))},onPaneRemove(t){const e=this.panes.findIndex((e=>e.id===t._uid)),s=this.panes.splice(e,1)[0];this.panes.forEach(((t,e)=>t.index=e)),this.$nextTick((()=>{this.redoSplitters(),this.resetPaneSizes({removedPane:p(h({},s),{index:e})}),this.$emit("pane-remove",{removed:s,panes:this.panes.map((t=>({min:t.min,max:t.max,size:t.size})))})}))},resetPaneSizes(t={}){t.addedPane||t.removedPane?this.panes.some((t=>null!==t.givenSize||t.min||t.max<100))?this.equalizeAfterAddOrRemove(t):this.equalize():this.initialPanesSizing(),this.ready&&this.$emit("resized",this.panes.map((t=>({min:t.min,max:t.max,size:t.size}))))},equalize(){const t=100/this.panesCount;let e=0,s=[],i=[];this.panes.forEach((a=>{a.size=Math.max(Math.min(t,a.max),a.min),e-=a.size,a.size>=a.max&&s.push(a.id),a.size<=a.min&&i.push(a.id)})),e>.1&&this.readjustSizes(e,s,i)},initialPanesSizing(){this.panesCount;let t=100,e=[],s=[],i=0;this.panes.forEach((a=>{t-=a.size,null!==a.size&&i++,a.size>=a.max&&e.push(a.id),a.size<=a.min&&s.push(a.id)}));let a=100;t>.1&&(this.panes.forEach((e=>{null===e.size&&(e.size=Math.max(Math.min(t/(this.panesCount-i),e.max),e.min)),a-=e.size})),a>.1&&this.readjustSizes(t,e,s))},equalizeAfterAddOrRemove({addedPane:t,removedPane:e}={}){let s=100/this.panesCount,i=0,a=[],n=[];t&&null!==t.givenSize&&(s=(100-t.givenSize)/(this.panesCount-1)),this.panes.forEach((t=>{i-=t.size,t.size>=t.max&&a.push(t.id),t.size<=t.min&&n.push(t.id)})),Math.abs(i)<.1||(this.panes.forEach((e=>{t&&null!==t.givenSize&&t.id===e.id||(e.size=Math.max(Math.min(s,e.max),e.min)),i-=e.size,e.size>=e.max&&a.push(e.id),e.size<=e.min&&n.push(e.id)})),i>.1&&this.readjustSizes(i,a,n))},readjustSizes(t,e,s){let i;i=t>0?t/(this.panesCount-e.length):t/(this.panesCount-s.length),this.panes.forEach(((a,n)=>{if(t>0&&!e.includes(a.id)){const e=Math.max(Math.min(a.size+i,a.max),a.min),s=e-a.size;t-=s,a.size=e}else if(!s.includes(a.id)){const e=Math.max(Math.min(a.size+i,a.max),a.min),s=e-a.size;t-=s,a.size=e}a.update({[this.horizontal?"height":"width"]:`${this.indexedPanes[a.id].size}%`})})),Math.abs(t)>.1&&this.$nextTick((()=>{this.ready&&console.warn("Splitpanes: Could not resize panes correctly due to their constraints.")}))}},watch:{panes:{deep:!0,immediate:!1,handler(){this.updatePaneComponents()}},horizontal(){this.updatePaneComponents()},firstSplitter(){this.redoSplitters()},dblClickSplitter(t){const e=[...this.container.querySelectorAll(".splitpanes__splitter")];e.forEach(((e,s)=>{e.ondblclick=t?t=>this.onSplitterDblClick(t,s):void 0}))}},beforeDestroy(){this.ready=!1},mounted(){this.container=this.$refs.container,this.checkSplitpanesNodes(),this.redoSplitters(),this.resetPaneSizes(),this.$emit("ready"),this.ready=!0},render(t){return t("div",{ref:"container",class:["splitpanes","splitpanes--"+(this.horizontal?"horizontal":"vertical"),{"splitpanes--dragging":this.touch.dragging}]},this.$slots.default)}};let v,g;const b={};var x=_(f,v,g,!1,w,null,null,null);function w(t){for(let e in b)this[e]=b[e]}var y=function(){return x.exports}(),z=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"splitpanes__pane",style:t.style,on:{click:function(e){return t.onPaneClick(e,t._uid)}}},[t._t("default")],2)},$=[];const C={name:"pane",inject:["requestUpdate","onPaneAdd","onPaneRemove","onPaneClick"],props:{size:{type:[Number,String],default:null},minSize:{type:[Number,String],default:0},maxSize:{type:[Number,String],default:100}},data:()=>({style:{}}),mounted(){this.onPaneAdd(this)},beforeDestroy(){this.onPaneRemove(this)},methods:{update(t){this.style=t}},computed:{sizeNumber(){return this.size||0===this.size?parseFloat(this.size):null},minSizeNumber(){return parseFloat(this.minSize)},maxSizeNumber(){return parseFloat(this.maxSize)}},watch:{sizeNumber(t){this.requestUpdate({target:this,size:t})},minSizeNumber(t){this.requestUpdate({target:this,min:t})},maxSizeNumber(t){this.requestUpdate({target:this,max:t})}}},S={};var P=_(C,z,$,!1,M,null,null,null);function M(t){for(let e in S)this[e]=S[e]}var k=function(){return P.exports}(),E=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("BaseModal2",{attrs:{title:t.$t("contributors")},on:{close:function(e){return t.$emit("close")}}},[s("div",[t.connected_as?t.connected_as?s("fieldset",[s("legend",{staticClass:"u-label"},[t._v(t._s(t.$t("your_account")))]),s("AuthorCard",{key:t.connected_as.$path,attrs:{author:t.connected_as}})],1):t._e():[s("RadioSwitch",{attrs:{content:t.current_mode,options:[{label:t.$t("login"),value:"login"},{label:t.$t("create_account"),value:"create"}]},on:{"update:content":function(e){t.current_mode=e}}}),s("br"),"login"===t.current_mode?s("LoginAs",{attrs:{authors:t.authors},on:{close:function(e){return t.$emit("close")}}}):"create"===t.current_mode?s("CreateAuthor",{on:{close:function(e){return t.$emit("close")}}}):t._e(),s("br")],s("br"),t.connected_as?[s("button",{staticClass:"u-button u-button_red",attrs:{type:"button"},on:{click:t.logout}},[t._v(" "+t._s(t.$t("logout"))+" ")]),s("br"),s("br")]:t._e(),s("DLabel",{attrs:{str:t.$t("list_of_contributors")}}),0===t.authors.length?s("small",[t._v(" "+t._s(t.$t("no_accounts_yet"))+" ")]):s("button",{staticClass:"u-button",attrs:{type:"button"},on:{click:function(e){t.show_authors_list=!t.show_authors_list}}},[t._v(" "+t._s(t.$t("show_list"))+" ("+t._s(t.authors_except_self.length)+") ")]),t.show_authors_list?s("div",{staticClass:"_listOfAuthors"},t._l(t.authors_except_self,(function(t){return s("AuthorCard",{key:t.$path,attrs:{author:t}})})),1):t._e()],2)])},j=[],F=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"_createAuthor"},[s("form",{staticClass:"input-validation-required",on:{submit:function(e){return e.preventDefault(),t.createAuthor.apply(null,arguments)}}},[s("fieldset",[s("legend",{staticClass:"u-label"},[t._v(t._s(t.$t("new_account")))]),s("TextInput",{attrs:{content:t.new_author_name,label_str:"name_or_pseudonym",required:!0,maxlength:40,autocomplete:"username"},on:{"update:content":function(e){t.new_author_name=e},toggleValidity:function(e){return t.allow_save=e}}}),s("br"),s("TextInput",{attrs:{content:t.new_author_email,label_str:"email",required:!1,input_type:"email",autocomplete:"email"},on:{"update:content":function(e){t.new_author_email=e},toggleValidity:function(e){return t.allow_save=e}}}),s("br"),s("TextInput",{attrs:{content:t.new_author_password,label_str:t.$t("password"),minlength:3,maxlength:20,required:!0,input_type:"password",autocomplete:"new-password"},on:{"update:content":function(e){t.new_author_password=e},toggleValidity:function(e){return t.allow_save=e}}}),s("br"),s("DLabel",{attrs:{str:t.$t("role")}}),s("select",{directives:[{name:"model",rawName:"v-model",value:t.new_author_role,expression:"new_author_role"}],on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.new_author_role=e.target.multiple?s:s[0]}}},t._l(t.author_roles,(function(e){return s("option",{key:e,domProps:{value:e,textContent:t._s(t.$t(e))}})})),0),s("br"),s("button",{staticClass:"u-button u-button_bleuvert",attrs:{slot:"footer",loading:t.is_creating_author,type:"submit"},slot:"footer"},[t._v(" "+t._s(t.$t("create"))+" ")])],1),t.error_msg?[s("div",{staticClass:"u-errorMsg",domProps:{textContent:t._s(t.error_msg)}})]:t._e()],2)])},A=[],D={props:{},components:{},data(){return{new_author_email:"",new_author_name:"",new_author_password:"",new_author_role:"contributor",author_roles:["contributor","admin"],is_creating_author:!1,error_msg:""}},created(){},mounted(){},beforeDestroy(){},watch:{},computed:{},methods:{async createAuthor(){this.is_creating_author=!0;try{const t=await this.$api.createFolder({path:"/authors",additional_meta:{email:this.new_author_email,name:this.new_author_name,requested_slug:this.new_author_name,role:this.new_author_role,$status:"public",$password:this.new_author_password}});this.new_author_name="",await this.$api.loginToFolder({path:"authors/"+t,auth_infos:{$password:this.new_author_password}}),this.$emit("close")}catch(t){this.error_msg="Error: "+t.message,setTimeout((()=>{this.error_msg=""}),5e3)}this.is_creating_author=!1}}},N=D,O=(s(7880),s(1001)),T=(0,O.Z)(N,F,A,!1,null,"3d4180e5",null),I=T.exports,R=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"_authorCard"},[s("TitleField",{attrs:{field_name:"name",label:t.$t("name"),content:t.author.name,path:t.author.$path,required:!0,minlength:3,maxlength:40,tag:"h2",can_edit:t.is_self}}),s("small",[t._v(" "+t._s(t.author.$path)+" ")]),s("br"),s("SelectField",{attrs:{field_name:"role",content:t.author.role,path:t.author.$path,can_edit:t.is_self,options:[{key:"contributor",text:t.$t("contributor"),instruction:t.$t("contributor_instructions")},{key:"admin",text:t.$t("admin"),instruction:t.$t("admin_instructions")}]}}),s("br"),t.is_self||t.is_admin?s("RemoveMenu",{attrs:{remove_text:t.$t("remove")},on:{remove:t.removeAuthor}}):t._e()],1)},q=[],L={props:{author:Object},components:{},data(){return{}},created(){},mounted(){},beforeDestroy(){},watch:{},computed:{is_self(){return!!this.connected_as&&this.connected_as.$path===this.author.$path}},methods:{async removeAuthor(){await this.$api.deleteItem({path:this.author.$path}),this.is_self&&await this.$api.logoutFromFolder()}}},B=L,U=(s(2744),(0,O.Z)(B,R,q,!1,null,"8c54b0c8",null)),Z=U.exports,V=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.connected_as?t._e():s("form",{on:{submit:function(e){return e.preventDefault(),t.login.apply(null,arguments)}}},[s("fieldset",[s("legend",{staticClass:"u-label"},[t._v(t._s(t.$t("your_account")))]),s("TextInput",{ref:"nameField",attrs:{content:t.name_of_account,label_str:"name_or_pseudonym",required:!0,input_type:"text",autocomplete:"username"},on:{"update:content":function(e){t.name_of_account=e},toggleValidity:function(e){return t.allow_save=e}}}),s("br"),s("TextInput",{ref:"passwordField",attrs:{label_str:t.$t("password"),content:t.input_password,required:!0,input_type:"password",autocomplete:"current-password"},on:{"update:content":function(e){t.input_password=e},toggleValidity:function(e){return t.allow_save=e}}}),s("button",{staticClass:"u-buttonLink",attrs:{type:"button"}},[t._v(" "+t._s(t.$t("recover_password"))+" ")]),s("br"),s("br"),s("button",{staticClass:"u-button u-button_bleuvert",attrs:{type:"submit"}},[t._v(" "+t._s(t.$t("login"))+" ")])],1)])])},J=[],X={props:{authors:Array},components:{},data(){return{name_of_account:"",input_password:""}},created(){},mounted(){},beforeDestroy(){},watch:{},computed:{},methods:{async login(){const t=this.authors.find((t=>t.name===this.name_of_account));if(!t)return this.$refs.nameField.$el.querySelector("input").select(),void this.$alertify.delay(4e3).error(this.$t("account_doesnt_exist"));const e=t.$path;this.$api.loginToFolder({path:e,auth_infos:{$password:this.input_password}}).then((()=>{this.$alertify.delay(4e3).success(this.$t("logged_in")),this.$emit("close")})).catch((t=>{"submitted_password_is_wrong"===t&&(this.$refs.passwordField.$el.querySelector("input").select(),this.$alertify.delay(4e4).error(this.$t("submitted_password_is_wrong")))}))}}},Y=X,H=(0,O.Z)(Y,V,J,!1,null,"5d3cb9d8",null),W=H.exports,G={props:{},components:{CreateAuthor:I,AuthorCard:Z,LoginAs:W},data(){return{current_mode:"login",show_authors_list:!1,authors:[]}},created(){},async mounted(){this.authors=await this.$api.getFolders({path:"authors"}),0===this.authors.length&&(this.current_mode="create")},beforeDestroy(){},watch:{},computed:{authors_except_self(){return this.connected_as?this.authors.filter((t=>t.$path!==this.connected_as.$path)):this.authors}},methods:{async logout(){try{this.reponse=await this.$api.logoutFromFolder()}catch(t){return this.response=t,this.$alertify.delay(4e3).error(t),!1}}}},K=G,Q=(s(6093),(0,O.Z)(K,E,j,!1,null,"d03d2a68",null)),tt=Q.exports,et=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.chutier?s("div",{staticClass:"_myChutier"},[s("div",{staticClass:"_topContent"},[s("div",{staticClass:"_subscribeBtn"},[s("button",{staticClass:"u-button u-button_bleumarine _authorBtn",attrs:{type:"button"},on:{click:function(e){return t.$emit("showAuthorModal")}}},[t.connected_as?[t._v(" "+t._s(t.connected_as.name)+" ")]:[t._v(t._s(t.$t("login")))]],2)]),s("div",{staticClass:"_importBtn"},[s("input",{staticClass:"inputfile-2",attrs:{type:"file",multiple:"multiple",id:t.id+"-add_file",name:"file",accept:""},on:{change:function(e){return t.updateInputFiles(e)}}}),s("label",{attrs:{for:t.id+"-add_file"}},[t._v(" "+t._s(t.$t("import"))+" ")]),t.selected_files.length>0?s("UploadFiles",{attrs:{selected_files:t.selected_files,path:t.path},on:{close:function(e){t.selected_files=[]},importedMedias:t.importedMedias}}):t._e()],1)]),s("div",{staticClass:"_middleContent"},[s("label",{attrs:{for:""}},[t._v("Éléments à traiter : "+t._s(t.chutier_items.length)+" ")]),s("br"),t.chutier_items.length>0?s("button",{staticClass:"u-buttonLink",attrs:{type:"button"},on:{click:t.selectAll}},[t._v(" Sélectionner tout ")]):t._e()]),s("div",{staticClass:"_items"},t._l(t.chutier_items_grouped,(function(e){return s("div",{key:e.label,staticClass:"_item"},[s("div",{staticClass:"_item--label"},[s("DateField",{attrs:{date:e.label,show_detail_initially:!1}}),s("button",{staticClass:"u-buttonLink",attrs:{type:"button"},on:{click:function(s){t.selectRange(e.files.map((function(t){return t.$path})))}}},[t._v(" Sélectionner ")])],1),s("transition-group",{attrs:{tag:"div",name:"listComplete"}},t._l(e.files,(function(e){return s("div",{key:e.$path,staticClass:"_item--files"},[s("ChutierItem",{attrs:{file:e,is_selected:t.selected_items.includes(e.$path),shared_space_path:t.shared_space_path},on:{toggleSelect:function(s){return t.toggleSelect(e.$path)},focus:function(s){return t.focusItem(e.$path)}}})],1)})),0)],1)})),0),t.selected_items.length>0?s("div",{staticClass:"_selectionBar"},[s("button",{staticClass:"u-button u-button_bleuvert",attrs:{type:"button"},on:{click:t.setSelectionAsFocus}},[t._v(" "+t._s(t.$t("create_stack"))+" ")]),s("button",{staticClass:"u-buttonLink",attrs:{type:"button"},on:{click:t.removeItemsInSelection}},[t._v(" Supprimer la sélection ")]),s("button",{staticClass:"u-buttonLink",attrs:{type:"button"},on:{click:t.deselectAll}},[t._v(" Déselectionner tout ")])]):t._e(),t.focused_items.length>0?s("MediaFocus",{staticClass:"_mediaFocusInPane",attrs:{files:t.focused_items},on:{close:function(e){t.focused_items_slugs=[]}}}):t._e()],1):t._e()},st=[],it=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"_chutierItem"},[s("div",{staticClass:"_rows"},[s("div",{staticClass:"u-sameRow"},[s("input",{staticClass:"_selectBox",attrs:{type:"checkbox"},domProps:{checked:t.is_selected},on:{change:function(e){return t.$emit("toggleSelect")}}}),s("MediaContent",{staticClass:"_chutierItem--preview",attrs:{file:t.file,context:"preview"}})],1),s("input",{directives:[{name:"model",rawName:"v-model",value:t.text_title,expression:"text_title"}],attrs:{type:"text",placeholder:"Remplir pour partager"},domProps:{value:t.text_title},on:{click:t.setFocus,input:function(e){e.target.composing||(t.text_title=e.target.value)}}}),s("transition",{attrs:{name:"scaleInFade",mode:"out-in"}},[s("button",{key:t.text_title.length>0,staticClass:"u-button u-button_transparent",attrs:{type:"button",disabled:0===t.text_title.length},on:{click:function(e){return t.$emit("focus")}}},[t._v(" "+t._s(t.$t("share"))+"  "),s("sl-icon",{attrs:{name:"arrow-right-square"}})],1)])],1),t.is_focused?s("div",{staticClass:"_paneSelector"},[s("div",{},[t._v("Indiquez aussi au moins l'un de ces trois champs")]),t._m(0)]):t._e()])},at=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"_paneSelector--btns"},[s("button",{staticClass:"u-button",attrs:{type:"button"}},[t._v("Matériaux")]),s("button",{staticClass:"u-button",attrs:{type:"button"}},[t._v("Techniques")]),s("button",{staticClass:"u-button",attrs:{type:"button"}},[t._v("Implémentation")])])}],nt={props:{file:Object,is_selected:Boolean,shared_space_path:String},components:{},data(){return{is_focused:!1,text_title:"",categories:["abjection","abjections","abjectly","abjectness","abjectnesses","abjects","abjoint","abjointed","abjointing","abjoints","abjunction","abjunctions","abjuration","abjurations","abjure","abjured","abjurer","abjurers","abjures","abjuring"]}},created(){},mounted(){},beforeDestroy(){},watch:{},computed:{},methods:{async moveToSharedSpace(){const t=this.shared_space_path;await this.$api.copyFile({path:this.file.$path,destination_path_to_folder:t}),await this.remove()},async remove(){this.$api.deleteItem({path:this.file.$path})},setFocus(){this.is_focused=!0}}},ot=nt,rt=(s(6587),(0,O.Z)(ot,it,at,!1,null,"0c6c1b28",null)),lt=rt.exports,ct=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"_mediaFocus"},[t._v(" Document à compléter "),t.files.length>1?[t._v(" "+t._s(t.files.length)+" documents à compléter dans cette pile ")]:t._e(),s("sl-button",{staticClass:"_closeBtn",attrs:{variant:"default",size:"medium",circle:""},on:{click:function(e){return t.$emit("close")}}},[s("sl-icon",{attrs:{name:"x-lg",label:t.$t("close")}})],1),s("div",{staticClass:"_itemsList"},t._l(t.files,(function(t){return s("div",{key:t.$path},[s("MediaContent",{attrs:{file:t,context:"preview"}}),s("input",{attrs:{type:"text"}})],1)})),0),s("TitleField",{staticClass:"_title",attrs:{field_name:"title",content:t.files[0].$media_filename,required:!0,maxlength:40,can_edit:!0}})],2)},ut=[],dt={props:{files:Array},components:{},data(){return{}},created(){},mounted(){},beforeDestroy(){},watch:{},computed:{},methods:{}},ht=dt,pt=(s(435),(0,O.Z)(ht,ct,ut,!1,null,"4305bc7c",null)),mt=pt.exports,_t={props:{shared_space_path:String},components:{ChutierItem:lt,MediaFocus:mt},data(){return{chutier:void 0,selected_files:[],id:`image_select_${(Math.random().toString(36)+"00000000000000000").slice(2,5)}`,selected_items:[],focused_items_slugs:[]}},created(){},mounted(){this.listChutier(),this.$api.join({room:this.path})},beforeDestroy(){this.$api.leave({room:this.path})},watch:{chutier_items(){this.selected_items=this.selected_items.filter((t=>this.chutier_items.find((e=>e.$path===t))))}},computed:{path(){return this.connected_as.$path},focused_items(){return this.focused_items_slugs.map((t=>this.chutier_items.find((e=>e.$path===t))))},chutier_items(){if(!this.chutier||!this.chutier.$files)return[];const t=JSON.parse(JSON.stringify(this.chutier.$files));return t.sort(((t,e)=>+new Date(e.$date_uploaded)-+new Date(t.$date_uploaded))),t},chutier_items_grouped(){const t=this.chutier_items.reduce(((t,e)=>{var s=new Date(e.$date_created),i=s.getUTCMonth()+1,a=s.getUTCDate(),n=s.getUTCFullYear();const o=n+"/"+i+"/"+a;return Object.prototype.hasOwnProperty.call(t,o)||(t[o]=[]),t[o].push(e),t}),{});let e=[];for(const s in t)Object.prototype.hasOwnProperty.call(e,s)||e.push(s);return e.sort(),e.reverse(),e.map((e=>({label:e,files:t[e]})))}},methods:{async listChutier(){this.chutier=await this.$api.getFolder({path:this.path}).catch((t=>{this.fetch_project_error=t.response,this.is_loading=!1}))},toggleSelect(t){this.selected_items.includes(t)?this.selected_items=this.selected_items.filter((e=>e!==t)):this.selected_items.push(t)},focusItem(t){this.focused_items_slugs=[t]},setSelectionAsFocus(){this.focused_items_slugs=JSON.parse(JSON.stringify(this.selected_items))},updateInputFiles(t){this.selected_files=Array.from(t.target.files),t.target.value=""},async importedMedias(t){this.selected_items=t.map((t=>this.connected_as.$path+"/"+t))},selectAll(){this.selected_items=this.chutier_items.map((t=>t.$path))},deselectAll(){this.selected_items=[]},selectRange(t){this.selected_items=t},async removeItemsInSelection(){for(const t of this.selected_items)await this.$api.deleteItem({path:t})}}},ft=_t,vt=(s(2650),(0,O.Z)(ft,et,st,!1,null,"187786e5",null)),gt=vt.exports,bt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.shared_folder?s("div",[t._m(0),s("div",{staticClass:"_grid"},t._l(t.shared_items,(function(e){return s("div",{key:e.$path,staticClass:"_item"},[s("MediaContent",{attrs:{file:e,context:"preview"}}),s("button",{staticClass:"u-button u-button_transparent _removeBtn",attrs:{type:"button"},on:{click:function(s){return t.removeMedia(e.$path)}}},[s("sl-icon",{attrs:{name:"trash3"}})],1)],1)})),0)]):t._e()},xt=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"_floatingTopBtn"},[s("div",{},[t._v("Espace partagé")])])}],wt={props:{shared_folder_path:String},components:{},data(){return{shared_folder:void 0}},created(){},async mounted(){this.shared_folder=await this.$api.getFolder({path:this.shared_folder_path}),this.$api.join({room:this.shared_folder_path})},beforeDestroy(){},watch:{},computed:{shared_items(){var t;if(null===(t=this.shared_folder)||void 0===t||!t.$files)return[];const e=JSON.parse(JSON.stringify(this.shared_folder.$files));return e.sort(((t,e)=>+new Date(e.$date_uploaded)-+new Date(t.$date_uploaded))),e}},methods:{removeMedia(t){this.$api.deleteItem({path:t})}}},yt=wt,zt=(s(2843),(0,O.Z)(yt,bt,xt,!1,null,"3f37c5ce",null)),$t=zt.exports,Ct={props:{},components:{Splitpanes:y,Pane:k,AuthorList:tt,MyChutier:gt,SharedFolder:$t},data(){return{path:"folders",folders:void 0,shared_folder_path:void 0,show_authors_modal:!1}},created(){},async mounted(){await this.loadFolder(),this.connected_as||this.showAuthorModal()},beforeDestroy(){},watch:{connected_as(){}},computed:{},methods:{async loadFolder(){this.folders=await this.$api.getFolders({path:this.path}).catch((t=>{this.fetch_spaces_error=t.response})),0===this.folders.length?(await this.createFolder(),window.location.reload()):this.shared_folder_path=this.folders[0].$path},async createFolder(){try{const t=await this.$api.createFolder({path:this.path});return t}catch(t){}},showAuthorModal(){this.show_authors_modal=!0}}},St=Ct,Pt=(s(3797),(0,O.Z)(St,i,a,!1,null,"9b0185fe",null)),Mt=Pt.exports},9376:function(t,e,s){"use strict";s.r(e);var i=s(8081),a=s.n(i),n=s(3645),o=s.n(n),r=o()(a());r.push([t.id,"._authorCard[data-v-8c54b0c8]{padding:calc(var(--spacing)/2)}",""]),e["default"]=r},2673:function(t,e,s){"use strict";s.r(e);var i=s(8081),a=s.n(i),n=s(3645),o=s.n(n),r=o()(a());r.push([t.id,"._listOfAuthors[data-v-d03d2a68]{display:flex;flex-flow:column nowrap;gap:calc(var(--spacing)/4);margin:calc(var(--spacing)/4) 0}",""]),e["default"]=r},2748:function(t,e,s){"use strict";s.r(e);var i=s(8081),a=s.n(i),n=s(3645),o=s.n(n),r=o()(a());r.push([t.id,"",""]),e["default"]=r},8512:function(t,e,s){"use strict";s.r(e);var i=s(8081),a=s.n(i),n=s(3645),o=s.n(n),r=o()(a());r.push([t.id,"._chutierItem[data-v-0c6c1b28]{width:100%;padding:2px;margin:2px;background:#fff;box-shadow:0 0 5px rgba(0,0,0,.06);border:2px solid #fff;border-radius:5px}._rows[data-v-0c6c1b28]{display:flex;flex-flow:row nowrap;justify-content:space-between;align-items:center;gap:calc(var(--spacing)/2)}._chutierItem--preview[data-v-0c6c1b28]{height:70px;border-radius:2px;width:70px;flex:0 0 auto;overflow:hidden}._chutierItem--preview[data-v-0c6c1b28]  ._mediaContent--image{width:100%;height:100%;-o-object-fit:cover;object-fit:cover;-o-object-position:center;object-position:center}._catBtn[data-v-0c6c1b28]{background:#ffbe32;border-radius:5px;margin:2px;padding:2px}._paneSelector--btns[data-v-0c6c1b28]{min-height:60px;display:flex;justify-content:center;align-items:center;gap:calc(var(--spacing)/4)}",""]),e["default"]=r},5316:function(t,e,s){"use strict";s.r(e);var i=s(8081),a=s.n(i),n=s(3645),o=s.n(n),r=o()(a());r.push([t.id,"._mediaFocus[data-v-4305bc7c]{margin:2px;background:#fff;box-shadow:0 0 5px rgba(0,0,0,.06);border:2px solid #fff;border-radius:5px}._itemsList[data-v-4305bc7c],._mediaFocus[data-v-4305bc7c]{padding:calc(var(--spacing)/2)}._itemsList[data-v-4305bc7c]{background:#eee}._closeBtn[data-v-4305bc7c]{position:absolute;top:0;right:0}",""]),e["default"]=r},9419:function(t,e,s){"use strict";s.r(e);var i=s(8081),a=s.n(i),n=s(3645),o=s.n(n),r=o()(a());r.push([t.id,"._myChutier[data-v-187786e5]{height:100%;overflow:auto;background:#f9f9f9}._topContent[data-v-187786e5]{position:sticky;display:flex;gap:calc(var(--spacing)/1);top:0;padding:calc(var(--spacing)/1)}._middleContent[data-v-187786e5]{padding:0 calc(var(--spacing)/1)}._items[data-v-187786e5]{padding:calc(var(--spacing)/1)}._item[data-v-187786e5]{margin-bottom:calc(var(--spacing)/1)}._item--label[data-v-187786e5]{font-weight:500;display:flex;gap:calc(var(--spacing)/4)}._selectionBar[data-v-187786e5]{position:sticky;bottom:0;width:100%;display:flex;flex-flow:column nowrap;justify-content:center;align-items:center;gap:calc(var(--spacing)/2);border-top:1px solid #000;background:hsla(0,0%,100%,.94);padding:calc(var(--spacing)/1)}._mediaFocusInPane[data-v-187786e5]{position:absolute;top:0;width:100%;height:100%;background:#fff}",""]),e["default"]=r},8852:function(t,e,s){"use strict";s.r(e);var i=s(8081),a=s.n(i),n=s(3645),o=s.n(n),r=o()(a());r.push([t.id,"._grid[data-v-3f37c5ce]{display:grid;grid-template-columns:repeat(auto-fill,minmax(100px,1fr));gap:2px;padding:2px}._item[data-v-3f37c5ce]{position:relative;aspect-ratio:1/1;border:1px solid #000;padding:calc(var(--spacing)/2);overflow:hidden}._item[data-v-3f37c5ce]  ._mediaContent--image{width:100%;height:100%;-o-object-fit:cover;object-fit:cover;-o-object-position:center;object-position:center}._removeBtn[data-v-3f37c5ce]{position:absolute;top:0;right:0;z-index:1}._floatingTopBtn[data-v-3f37c5ce]{position:sticky;top:0;z-index:1;width:100%;display:flex;justify-content:center;padding:calc(var(--spacing)/1);pointer-events:none}._floatingTopBtn>*[data-v-3f37c5ce]{border-radius:25px;padding:calc(var(--spacing)/1) calc(var(--spacing)*2);background:#000;color:#fff;pointer-events:auto}",""]),e["default"]=r},6732:function(t,e,s){"use strict";s.r(e);var i=s(8081),a=s.n(i),n=s(3645),o=s.n(n),r=o()(a());r.push([t.id,"._lumaView[data-v-9b0185fe],._panes[data-v-9b0185fe]{height:100%}._myContent[data-v-9b0185fe]{height:100%;background:#fff;box-shadow:0 0 5px rgba(0,0,0,.12)}",""]),e["default"]=r},2744:function(t,e,s){var i=s(9376);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var a=s(1982).Z;a("9487f366",i,!0,{sourceMap:!1,shadowMode:!1})},6093:function(t,e,s){var i=s(2673);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var a=s(1982).Z;a("4f10f38e",i,!0,{sourceMap:!1,shadowMode:!1})},7880:function(t,e,s){var i=s(2748);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var a=s(1982).Z;a("121c10f6",i,!0,{sourceMap:!1,shadowMode:!1})},6587:function(t,e,s){var i=s(8512);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var a=s(1982).Z;a("1b7b7ca1",i,!0,{sourceMap:!1,shadowMode:!1})},435:function(t,e,s){var i=s(5316);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var a=s(1982).Z;a("9966e22e",i,!0,{sourceMap:!1,shadowMode:!1})},2650:function(t,e,s){var i=s(9419);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var a=s(1982).Z;a("6c8e683f",i,!0,{sourceMap:!1,shadowMode:!1})},2843:function(t,e,s){var i=s(8852);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var a=s(1982).Z;a("52cee62d",i,!0,{sourceMap:!1,shadowMode:!1})},3797:function(t,e,s){var i=s(6732);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var a=s(1982).Z;a("5cfdcabe",i,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=LumaView.js.map