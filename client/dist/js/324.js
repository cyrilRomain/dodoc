(self["webpackChunkapp"]=self["webpackChunkapp"]||[]).push([[324],{887:function(t,e,a){"use strict";a.d(e,{Z:function(){return D}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"_singlePage",class:{"is--preview":"preview"===t.context,"is--editable":t.can_edit}},[a("div",{staticClass:"_pagecontainer",style:t.page_styles},[a("div",{staticClass:"_pagecontent"},[t.can_edit&&t.show_grid?a("svg",{staticClass:"_grid",attrs:{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg"}},[a("defs",[a("pattern",{attrs:{id:"gridSmall",width:t.gridstep,height:t.gridstep,patternUnits:"userSpaceOnUse"}},[a("path",{attrs:{d:"M "+t.gridstep+" 0 L 0 0 0 "+t.gridstep,fill:"none",stroke:"var(--c-gridlines)",strokeWidth:"1"}})]),a("pattern",{attrs:{id:"grid",width:5*t.gridstep,height:5*t.gridstep,patternUnits:"userSpaceOnUse"}},[a("rect",{attrs:{width:5*t.gridstep,height:5*t.gridstep,fill:"url(#gridSmall)"}}),a("path",{attrs:{d:"M "+5*t.gridstep+" 0 L 0 0 0 "+5*t.gridstep,fill:"none",stroke:"var(--c-gridfiveslines)",strokeWidth:"1"}})])]),a("rect",{attrs:{width:"100%",height:"100%",fill:"url(#grid)"}})]):t._e(),t._l(t.page_modules,(function(e){return a("MoveableItem",{key:e.$path,staticClass:"_item",attrs:{context:t.context,publimodule:e,magnification:t.magnification,gridstep:t.show_grid&&t.snap_to_grid?t.gridstep:1,scale:t.scale,can_edit:t.can_edit,is_active:t.active_module.$path===e.$path}})})),t.can_edit&&t.l_margins?a("svg",{staticClass:"_margins",attrs:{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",fill:"transparent"}},[a("rect",{attrs:{x:t.magnify(t.l_margins.left),y:t.magnify(t.l_margins.top),width:t.magnify(t.page_width-t.l_margins.left-t.l_margins.right),height:t.magnify(t.page_height-t.l_margins.top-t.l_margins.bottom)}})]):t._e(),t.pagination&&!t.hide_pagination&&t.page_number_corrected>0?a("div",{staticClass:"_pagination",style:t.pagination_styles},[t._v(" "+t._s(t.page_number_corrected)+" ")]):t._e(),t.can_edit&&t.l_margins?a("svg",{staticClass:"_pageBorders",attrs:{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",fill:"transparent"}},[a("rect",{attrs:{x:"0",y:"0",width:t.magnify(t.page_width),height:t.magnify(t.page_height),stroke:"black"}})]):t._e()],2)])])},o=[],n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("DDR",{key:t.component_key,staticClass:"_moveableItem",class:{"is--locked":!0===t.publimodule.locked,"is--editable":t.can_edit,"is--active":t.can_edit&&t.is_active,"is--beingEdited":t.content_is_edited,"panzoom-exclude":t.can_edit},style:t.module_z_index,attrs:{active:t.can_edit&&t.is_active&&!0!==t.publimodule.locked&&!0!==t.content_is_edited,value:t.transform,parent:!1,acceptRatio:t.aspect_ratio,handlerSize:15,grid:t.grid,id:t.publimodule.$path,zoom:t.scale},on:{dragstart:t.dragStart,drag:t.onDrag,dragend:t.dragEnd,resizestart:t.resizeStart,resizeend:t.resizeEnd,rotateend:t.rotateEnd}},[a("span",{staticClass:"_activator",on:{mousedown:t.setActive,dblclick:t.dblClick}},[a("PublicationModule",{staticClass:"_moveableItem--content",style:t.module_styles,attrs:{publimodule:t.publimodule,can_edit:t.can_edit&&t.is_active,borderRadius:t.turnCMtoPX(t.publimodule.border_radius)||0,context:t.context,page_template:"page_by_page",number_of_max_medias:1,magnification:t.magnification},on:{duplicate:t.onDuplicateModule,contentIsEdited:t.contentIsEdited,contentIsNotEdited:t.contentIsNotEdited}})],1),t.can_edit?a("div",{staticClass:"_unlockBtn"},[!0===t.publimodule.locked?a("button",{staticClass:"u-button u-button_orange u-button_small u-button_round u-colorBlack",attrs:{type:"button"},on:{click:function(e){return t.unlock()}}},[a("sl-icon",{attrs:{name:"lock"}})],1):t._e(),!t.can_edit||!t.is_active||t.content_is_edited||t.publimodule.locked&&!1!==t.publimodule.locked?t._e():a("button",{staticClass:"u-button u-button_orange u-button_small u-button_round u-colorBlack",attrs:{type:"button"},on:{click:function(e){return t.lock()}}},[a("sl-icon",{attrs:{name:"unlock"}})],1)]):t._e()])},s=[];a(2262),a(4506),a(6699),a(7658),a(1703),a(5827);class r{constructor(t){this._values=t}toString(){return`Vector(${this._values.join(", ")})`}get length(){return this._values.length}dot(t){if(t instanceof r&&this.length===t.length)return this._values.map(((e,a)=>e*t._values[a])).reduce(((t,e)=>t+e));throw Error("The param `vector` must instance of Vector")}get(t){return this._values[t]}}var d=r;class l{constructor(t){this._values=t}static zeros(t){return new l(new Array(t[0]).fill(null).map((()=>new Array(t[1]).fill(0))))}valueOf(){return JSON.parse(JSON.stringify(this._values))}toString(){return"Matrix ( "+this._values.map((t=>t.join(" "))).join(", ")+" )"}rows(){return this._values.length}cols(){return this._values[0].length}rowVector(t){return new d(this._values[t].slice(0))}colVector(t){let e=new Array(this.rows()).fill(0);return this._values.forEach(((a,i)=>{e[i]=a[t]})),new d(e)}dot(t){if(t instanceof d&&this.cols()===t.length)return new d(new Array(t.length).fill(null).map(((e,a)=>this.rowVector(a).dot(t))));if(t instanceof l&&this.cols()===t.rows()){let e,a=t.cols(),i=t.rows(),o=l.zeros([i,a]);for(let n=0;n<a;n++){e=this.dot(t.colVector(n));for(let t=0;t<i;t++)o._values[t][n]=e.get(t)}return o}throw Error("expected a Vector or Matrix but got "+typeof t)}get(t,e){return this._values[t][e]}T(){return new l(new Array(this.cols()).fill(null).map(((t,e)=>new Array(this.rows()).fill(0).map(((t,a)=>this.get(a,e))))))}}var c=l;const u={br:0,bm:1,bl:2,l:3,tl:4,tm:5,tr:6,r:7},p={tl:0,tm:1,tr:2,r:3,br:4,bm:5,bl:6,l:7},h={br:0,bm:0,bl:2,l:2,tl:4,tm:4,tr:6,r:6},_={l:1,r:1},m={tm:1,bm:1},g={tr:1,bl:1,r:1,l:1};function v(t){return t*Math.PI/180}function b(t){return 180*t/Math.PI}function f({x:t,y:e,width:a,height:i,rotation:o},n){let s=o*Math.PI/180,r=a/2*n,d=i/2*n,l=new c([[Math.cos(s),Math.sin(s)],[-Math.sin(s),Math.cos(s)]]),u=new c([[-r,d],[0,d],[r,d],[r,0],[r,-d],[0,-d],[-r,-d],[-r,0]]);return l.dot(u.T()).T().valueOf().map((a=>({x:a[0]+r+t*n,y:-(a[1]-d)+e*n})))}function y({type:t,x:e,y:a,dis:i,pressAngle:o,startAngle:n}){let s,r,d=b(Math.atan2(a,e)),l=v(o+d-n);return g[t]?(r=Math.cos(l)*i,s=Math.sin(l)*i):(r=Math.sin(l)*i,s=Math.cos(l)*i),{w:s,h:r}}const w=["nw","n","ne","e","se","s","sw","w"],x={tl:0,tm:1,tr:2,r:3,br:4,bm:5,bl:6,l:7};function $(t,e){let a=x[t],i=(a+Math.floor(e/45))%8;return w[i]}var M,k,P={name:"ddr",props:{value:{default:function(){return{x:0,y:0,width:100,height:100,rotation:0}},type:Object},handlerSize:{type:Number,default:11},active:{default:!0,type:Boolean},resizeHandler:{default:function(){return["tl","tm","tr","r","br","bm","bl","l"]},type:Array},resizable:{default:!0,type:Boolean},rotatable:{default:!0,type:Boolean},draggable:{default:!0,type:Boolean},acceptRatio:{default:!1,type:Boolean},minWidth:{type:Number,default:1},minHeight:{type:Number,default:1},maxWidth:{type:Number,default:1e8},maxHeight:{type:Number,default:1e8},parent:{type:Boolean,default:!1},beforeActive:{type:Function,default:()=>!1},id:[Number,String],renderContent:Function,grid:{type:Array,default:()=>[1,1]},stop:{default:!0,type:Boolean},prevent:{default:!0,type:Boolean},zoom:{default:1,type:Number},axis:{type:String,default:"xy"}},data(){return{transform:Object.assign({},this.value),currentRatio:1,isInitialRatio:!1,isDragging:!1,isResizing:!1,isRotating:!1,isReadyToDrag:!1,isReadyToResize:!1,isReadyToRotate:!1}},created(){this.localeTransform={...this.transform}},watch:{value(t){this.transform={...t}}},computed:{rotateHandler(){let t=Math.ceil(this.handlerSize/this.zoom)+"px";return`width:${t};height:${t};top:-25px;margin-left:${-Math.floor(this.handlerSize/2)}px`},style(){let t=this.transform;return`left:${t.x}px;top:${t.y}px;width:${t.width}px;height:${t.height}px;transform:rotate(${t.rotation}deg)`}},methods:{handleDefaultEvent(t){this.stop&&t.stopPropagation(),this.prevent&&t.preventDefault()},getNewHandler(t){let e=$(t,this.transform.rotation),{handlerSize:a}=this,i={},o=-Math.floor(a/2)+"px";switch(t){case"tl":i={top:o,left:o};break;case"tm":i={top:o,"margin-left":o};break;case"tr":i={right:o,top:o};break;case"r":i={right:o,"margin-top":o};break;case"br":i={bottom:o,right:o};break;case"bm":i={"margin-left":o,bottom:o};break;case"bl":i={left:o,bottom:o};break;case"l":i={"margin-top":o,left:o};break}let n={cursor:e+"-resize",width:Math.ceil(a/this.zoom)+"px",height:Math.ceil(a/this.zoom)+"px",...i};return Object.keys(n).map((t=>`${t}:${n[t]}`)).join(";")},emitChange(){this.$emit("input",{...this.transform})},handleMouseDown(t){if(!this.active&&!this.beforeActive(this.id))return;this.handleDefaultEvent(t);let e=t.touches?t.touches[0]:t,{clientX:a,clientY:i}=e;if(this._lastX=a,this._lastY=i,this._activeTarget=t.target,this._parentRect=this.$refs.wrapper.parentNode.getBoundingClientRect(),this._resizeHandler=t.target.dataset.resizetype,this.localeTransform={...this.transform},this.parent){let t=0,e=this._parentRect.width/this.zoom-this.transform.width,a=0,i=this._parentRect.height/this.zoom-this.transform.height,o=this.transform.x+this.transform.width,n=this._parentRect.width/this.zoom-this.transform.x,s=this.transform.y+this.transform.height,r=this._parentRect.height/this.zoom-this.transform.y;this.bounday={minLeft:t,maxLeft:e,minTop:a,maxTop:i,maxLeftWidth:o,maxRightWidth:n,maxTopHeight:s,maxBottomHeight:r}}document.addEventListener("mousemove",this.handleMouseMove,!1),document.addEventListener("touchmove",this.handleMouseMove,!1),document.addEventListener("touchend",this.handleMouseUp,!1),document.addEventListener("mouseup",this.handleMouseUp,!1),"rotate"===t.target.dataset.type?(this._handlerType="rotate",this.isReadyToRotate=!0,this.handleRotateStart(t),this.$emit("rotatestart",t,this.transform)):this._activeTarget.dataset.resizetype?(this._handlerType="resize",this.isReadyToResize=!0,this.handleResizeStart(t),this.$emit("resizestart",t,this.transform)):(this._handlerType="drag",this.isReadyToDrag=!0,this.draggable&&this.$emit("dragstart",t,this.transform))},handleMouseMove(t){this.handleDefaultEvent(t);let{clientX:e,clientY:a}=t.touches?t.touches[0]:t;this.isReadyToDrag=!1,this.isReadyToResize=!1,this.isReadyToRotate=!1,this._deltaX=e-this._lastX,this._deltaY=a-this._lastY,this._lastX=e,this._lastY=a,"resize"===this._handlerType?(this.isResizing=!0,this.handleResizeMove(t),this.$emit("resize",t,this.transform)):"drag"===this._handlerType&&this.draggable?(this.isDragging=!0,this.doMove(t),this.$emit("drag",t,this.transform)):"rotate"===this._handlerType&&(this.isRotating=!0,this.handleRotateMove(t),this.$emit("rotate",t,this.transform)),this.emitChange()},doMove(){let[t,e]=this.grid,a=this._deltaX/this.zoom,i=this._deltaY/this.zoom,o=this.localeTransform.x=Math.round(this.localeTransform.x+a),n=this.localeTransform.y=Math.round(this.localeTransform.y+i);this.axis.includes("x")&&(o>this.transform.x?this.transform.x=this.restrictToLeftOfParent(o-o%t):o<this.transform.x&&(this.transform.x=this.restrictToLeftOfParent(o-(o%t-t)))),this.axis.includes("y")&&(n>this.transform.y?this.transform.y=this.restrictToTopOfParent(n-n%e):n<this.transform.y&&(this.transform.y=this.restrictToTopOfParent(n-(n%e-e))))},restrictToLeftOfParent(t){return this.parent?(t=Math.max(this.bounday.minLeft,t),t=Math.min(this.bounday.maxLeft,t),t):t},restrictToTopOfParent(t){return this.parent?(t=Math.max(this.bounday.minTop,t),t=Math.min(this.bounday.maxTop,t),t):t},restrictHeight(t,e){return!this.parent||this.transform.rotation>0?t:["bl","bm","br"].includes(e)?Math.min(this.bounday.maxBottomHeight,t):["tl","tm","tr"].includes(e)?Math.min(this.bounday.maxTopHeight,t):t},restrictWidth(t,e){return!this.parent||this.transform.rotation>0?t:["tl","l","bl"].includes(e)?Math.min(this.bounday.maxLeftWidth,t):["tr","r","br"].includes(e)?Math.min(this.bounday.maxRightWidth,t):t},handleMouseUp(t){this.handleDefaultEvent(t),document.removeEventListener("mousemove",this.handleMouseMove,!1),document.removeEventListener("mouseup",this.handleMouseUp,!1),document.removeEventListener("touchmove",this.handleMouseMove,!1),document.removeEventListener("touchend",this.handleMouseUp,!1);let e={drag:"draggable",resize:"resizable",rotate:"rotatable"};this.isInitialRatio=this.isDragging=this.isResizing=this.isRotating=!1,this.isReadyToDrag=this.isReadyToResize=this.isReadyToRotate=!1,this[e[this._handlerType]]&&this.$emit(this._handlerType+"end",t,this.transform)},handleResizeStart(t){let e,a=this._resizeHandler,i=this.transform,o=f(i,this.zoom),n=o[u[a]],s=o[h[a]],{clientX:r,clientY:d}=t.touches?t.touches[0]:t,l=o[p[a]],c=r-l.x,v=d-l.y,y=r-s.x-c,w=d-s.y-v,x=i.width,$=i.height;e=g[a]?b(Math.atan2(x,_[a]?$/2:$)):b(Math.atan2($,m[a]?x/2:x));let M=b(Math.atan2(w,y));this._resizeOpt={matrix:o,rect:i,type:a,opposite:n,opp2:s,pressAngle:e,startAngle:M,offsetX:c,offsetY:v}},handleResizeMove(t){let{clientX:e,clientY:a}=t.touches?t.touches[0]:t,{opposite:i,opp2:o,type:n,pressAngle:s,startAngle:r,offsetX:d,offsetY:l}=this._resizeOpt,c=e-o.x-d,p=a-o.y-l,h=Math.hypot(p,c),g=t.shiftKey||this.acceptRatio,[v,b]=this.grid;!this.isInitialRatio&&g&&(this.currentRatio=this.transform.width/this.transform.height,this.isInitialRatio=!0),g||(this.isInitialRatio=!1);let{w:w,h:x}=y({type:n,dis:h,x:c,y:p,startAngle:r,pressAngle:s}),$={...this.localeTransform};this.isInitialRatio&&(_[n]?x=w/this.currentRatio:w=x*this.currentRatio),w/=this.zoom,x/=this.zoom,w=Math.min(Math.max(Math.round(w),this.minWidth),this.maxWidth),x=Math.min(Math.max(Math.round(x),this.minHeight),this.maxHeight),_[n]&&!g?$.width=w:(m[n]&&!g||($.width=w),$.height=x);let M=this._resizeHandler;$.width%v>0&&($.width>this.localeTransform.width?$.width=$.width-$.width%v:$.width=$.width-($.width%v-v)),$.height%b>0&&($.height>this.localeTransform.height?$.height=$.height-$.height%b:$.height=$.height-($.height%b-b)),$.height=this.restrictHeight($.height,M),$.width=this.restrictWidth($.width,M);let k=f($,this.zoom),P=k[u[n]],C=-(P.x-i.x)/this.zoom,z=-(P.y-i.y)/this.zoom;$.x=Math.round($.x+C),$.y=Math.round($.y+z),this.transform=$},handleRotateStart(t){let{clientX:e,clientY:a}=t.touches?t.touches[0]:t,i=this.$refs.wrapper.getBoundingClientRect(),o=i.left+i.width/2,n=i.top+i.height/2,s=180/Math.PI*Math.atan2(a-n,e-o),r=this.transform.rotation;this._rotateOpt={cx:o,cy:n,startAngle:s,rotation:r}},handleRotateMove(t){let{cx:e,cy:a,startAngle:i,rotation:o}=this._rotateOpt,{clientX:n,clientY:s}=t.touches?t.touches[0]:t,r=n-e,d=s-a,l=180/Math.PI*Math.atan2(d,r),c=l-i,u=o+c;u%=360,u=u<0?u+360:u,u=this.roundRotate(u),this.transform.rotation=Math.floor(u)},roundRotate(t){const e=5;return t>360-e||t<0+e?0:t>90-e&&t<90+e?90:t>180-e&&t<180+e?180:t>270-e&&t<270+e?270:t},getClassNames(){const t=["yoyoo-ddr"];return this.active&&t.push("active"),this.isDragging&&t.push("ddr-dragging"),this.isResizing&&t.push("ddr-resizing"),this.isRotating&&t.push("ddr-rotating"),this.isReadyToDrag&&t.push("ddr-ready-drag"),this.isReadyToResize&&t.push("ddr-ready-resize"),this.isReadyToRotate&&t.push("ddr-ready-rotate"),t}},render(){const t=arguments[0];return t("div",{ref:"wrapper",style:this.style,class:this.getClassNames(),on:{touchstart:this.handleMouseDown,mousedown:this.handleMouseDown}},[this.renderContent?this.renderContent(this):this.$slots.default,this.resizable&&t("div",{class:"resize-handler-wrapper"},[this.resizeHandler.map((e=>t("span",{attrs:{"data-resizetype":e},key:e,style:this.getNewHandler(e),class:`resize-handler ${e}`})))]),this.rotatable&&t("span",{style:this.rotateHandler,attrs:{"data-type":"rotate"},class:"rotate-handler"})])}},C=P,z=(a(2046),a(1001)),T=(0,z.Z)(C,M,k,!1,null,null,null),S=T.exports,E=(a(3382),a(9731)),N={name:"app",props:{context:String,publimodule:Object,can_edit:Boolean,magnification:Number,gridstep:Number,scale:Number,is_active:Boolean},components:{DDR:S,PublicationModule:E.Z},data(){return{transform:{x:0,y:0,width:300,height:300,rotation:0},component_key:1,aspect_ratio:!0,content_is_edited:!1}},created(){this.setTransformFromPubli(),this.setNewComponentKey()},mounted(){this.$eventHub.$on(`module.panTo.${this.module_meta_filename}`,this.panTo),this.$eventHub.$on(`module.enable_edit.${this.module_meta_filename}`,this.setActive)},beforeDestroy(){this.$eventHub.$off(`module.panTo.${this.module_meta_filename}`,this.panTo),this.$eventHub.$off(`module.enable_edit.${this.module_meta_filename}`,this.setActive)},watch:{publimodule:{handler(){const t=this.setTransformFromPubli();t&&this.setNewComponentKey()},deep:!0},magnification(){const t=this.setTransformFromPubli();t&&this.setNewComponentKey()},is_active(){this.is_active||this.contentIsNotEdited()}},computed:{module_meta_filename(){return this.publimodule.$path.split("/").at(-1)},grid(){return[this.gridstep,this.gridstep]},module_z_index(){return`\n        z-index: ${this.publimodule.z_index?this.publimodule.z_index:0}\n      `},module_styles(){return{"--set-fontSize":(this.publimodule.text_size||100)+"%","--set-margins":(this.turnCMtoPX(this.publimodule.margins)||0)+"px","--set-opacity":this.publimodule.opacity||1,"--set-borderRadius":(this.turnCMtoPX(this.publimodule.border_radius)||0)+"px","--set-backgroundColor":this.publimodule.background_color||"transparent","--set-outlineColor":this.publimodule.outline_color||"black","--set-outlineWidth":(this.turnCMtoPX(this.publimodule.outline_width)||0)+"px"}}},methods:{setNewComponentKey(){this.component_key=(new Date).getTime()},setTransformFromPubli(){let t=!1;return Object.keys(this.transform).map((e=>{if("number"===typeof this.publimodule[e])if(["x","y","width","height"].includes(e)){const a=this.turnCMtoPX(this.publimodule[e]);this.transform[e]!==a&&(this.transform[e]=a,t=!0)}else"rotation"===e&&this.transform[e]!==this.publimodule[e]&&(this.transform[e]=this.publimodule[e],t=!0)})),t},turnCMtoPX(t){return!!t&&this.roundToDec(t*this.magnification)},turnPXtoCM(t){return this.roundToDec(t/this.magnification)},contentIsEdited(t){this.$eventHub.$emit("module.text_editing_enabled",t),this.content_is_edited=!0},contentIsNotEdited(){this.$eventHub.$emit("module.text_editing_disabled"),this.content_is_edited=!1},roundToDec(t){return Math.round(100*(t+Number.EPSILON))/100},firstMedia(t){if(!t)return!1;try{const e=t.source_medias[0],a=this.getParent(t.$path);return this.getSourceMedia({source_media:e,publication_path:a})}catch(e){return!1}},dragStart(){},onDrag(t){},dragEnd(t,e){return JSON.stringify(e)!==JSON.stringify(this.transform)&&((this.turnPXtoCM(e.x)!==this.turnPXtoCM(this.transform.x)||this.turnPXtoCM(e.y)!==this.turnPXtoCM(this.transform.y))&&(this.updateTransform(e),void t.stopPropagation()))},resizeStart(t,e){return t.target.classList.contains("br")||t.target.classList.contains("bl")||t.target.classList.contains("tl")||t.target.classList.contains("tr")?this.aspect_ratio=!0:this.aspect_ratio=!1},resizeEnd(t,e){if(JSON.stringify(e)===JSON.stringify(this.transform))return!1;this.updateTransform(e),t.stopPropagation()},rotateEnd(t,e){if(JSON.stringify(e)===JSON.stringify(this.transform))return!1;this.updateTransform(e),t.stopPropagation()},async updateTransform(t){let e=JSON.parse(JSON.stringify(t));Object.keys(e).map((t=>{e[t]!==this.transform[t]?["x","y","width","height"].includes(t)?(e[t]=this.turnPXtoCM(e[t]),this.transform[t]=this.turnCMtoPX(e[t])):this.transform[t]=this.turnCMtoPX(this.turnPXtoCM(e[t])):delete e[t]})),await this.updateModuleMeta({new_meta:e})},panTo(){this.$eventHub.$emit("panzoom.panTo",{x:this.transform.x,y:this.transform.y})},setActive(t){return!this.is_active&&(this.content_is_edited?t.stopPropagation():void(this.can_edit&&!this.is_active&&!0!==this.publimodule.locked&&this.$eventHub.$emit("module.setActive",this.publimodule.$path)))},async dblClick(){if(!this.is_active)return;const t=this.firstMedia(this.publimodule);if(t)if("text"===t.$type)this.editText();else{var e;const a=null===(e=t.$infos)||void 0===e?void 0:e.ratio,i=this.publimodule.width*a;await this.updateModuleMeta({new_meta:{height:i}})}},editText(){const t=this.publimodule.$path.substring(this.publimodule.$path.lastIndexOf("/")+1);this.$eventHub.$emit(`module.enable_edit.${t}`)},async lock(){const t={locked:!0};await this.updateModuleMeta({new_meta:t}),this.$eventHub.$emit("module.setActive",!1)},async unlock(){const t={locked:!1};await this.updateModuleMeta({new_meta:t}),setTimeout((()=>{this.setActive()}),100)},async updateModuleMeta({new_meta:t}){await this.$api.updateMeta({path:this.publimodule.$path,new_meta:t}).catch((t=>{throw this.$alertify.delay(4e3).error(t),t}))},onDuplicateModule(t){const e=this.publimodule.$path.substring(0,this.publimodule.$path.lastIndexOf("/")+1)+t;setTimeout((()=>{this.$eventHub.$emit("module.setActive",e)}),100)}}},R=N,A=(a(5406),(0,z.Z)(R,n,s,!1,null,"2ccd65f4",null)),O=A.exports,I={props:{context:String,page_modules:Array,page_width:Number,page_height:Number,layout_mode:{type:String,default:"print"},page_color:String,hide_pagination:Boolean,zoom:{type:Number,default:1},scale:{type:Number,default:1},show_grid:{type:Boolean,default:!1},snap_to_grid:{type:Boolean,default:!1},gridstep_in_mm:Number,margins:Object,page_number:Number,pagination:[Boolean,Object],active_module:[Boolean,Object],page_is_left:Boolean,can_edit:Boolean},components:{MoveableItem:O},data(){return{}},created(){},mounted(){},beforeDestroy(){},watch:{},computed:{l_margins(){return 0!==Object.keys(this.margins).length&&(!0===this.page_is_left?{left:this.margins.right,right:this.margins.left,top:this.margins.top,bottom:this.margins.bottom}:this.margins)},gridstep(){return this.gridstep_in_mm?this.magnify(this.gridstep_in_mm):0},magnification(){return"screen"===this.layout_mode?1:this.$root.page_magnification},page_styles(){const t={};return this.page_width&&this.page_height&&(t["--page-width"]=`${this.magnify(this.page_width)}px`,t["--page-height"]=`${this.magnify(this.page_height)}px`),t["--zoom"]=this.zoom,t["--page-color"]=this.page_color||"#fff",t},page_number_corrected(){return this.page_number-this.pagination.pagination_start_on_page+1},pagination_styles(){const t={};return!0===this.page_is_left?t["--pagination-left"]=`${this.magnify(this.pagination.right)}px`:t["--pagination-right"]=`${this.magnify(this.pagination.right)}px`,t["--pagination-bottom"]=`${this.magnify(this.pagination.bottom)}px`,t}},methods:{magnify(t){return t*this.magnification}}},B=I,L=(a(2627),(0,z.Z)(B,i,o,!1,null,"799340e8",null)),D=L.exports},4324:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return Qt}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"_pageTemplate"},[t.can_edit?a("RadioSwitch",{attrs:{content:t.current_view,options:[{label:t.$t("settings"),value:"settings"},{label:!0===t.publication.page_spreads?t.$t("list_of_spreads"):t.$t("list_of_pages"),value:"pages"}]},on:{"update:content":function(e){t.current_view=e}}}):t._e(),a("br"),"settings"===t.current_view&&t.can_edit?a("PageSettings",{attrs:{publication:t.publication}}):a("PagesList",{attrs:{publication:t.publication,page_opened_id:t.page_opened_id,can_edit:t.can_edit},on:{togglePage:function(e){return t.$emit("togglePage",e)},closePublication:function(e){return t.$emit("closePublication")}}})],1)},o=[],n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"_pageSettings"},[a("WidthHeightField",{attrs:{publication:t.publication}}),a("br"),a("ToggleField",{attrs:{label:t.$t("page_spreads"),field_name:"page_spreads",content:t.publication.page_spreads,path:t.publication.$path,can_edit:!0}}),a("br"),a("SetMargins",{attrs:{publication:t.publication,is_spread:!0===t.publication.page_spreads}}),a("br"),a("PaginationOption",{attrs:{publication:t.publication,is_spread:!0===t.publication.page_spreads}})],1)},s=[],r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"_widthHeightField"},[a("fieldset",[a("legend",{staticClass:"u-label"},[t._v(t._s(t.$t("format")))]),a("DLabel",{staticClass:"_label",attrs:{str:t.$t("document_type"),tag:"h3"}}),a("br"),t._l([{key:"print",label:t.$t("print"),instructions:t.$t("print_instr")},{key:"screen",label:t.$t("screen"),instructions:t.$t("screen_instr")}],(function(e){return a("div",{key:e.key},[a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.new_layout_mode,expression:"new_layout_mode"}],attrs:{type:"radio",name:e.key,id:"radioi-lmode-"+e.key,disabled:!t.edit_mode},domProps:{value:e.key,checked:t._q(t.new_layout_mode,e.key)},on:{change:function(a){t.new_layout_mode=e.key}}}),a("label",{attrs:{for:"radioi-lmode-"+e.key}},[t._v(" "+t._s(e.label)),a("br"),a("small",{domProps:{innerHTML:t._s(e.instructions)}})])]),a("br")])})),a("DLabel",{staticClass:"_label",attrs:{str:t.$t("format"),tag:"h3",instructions:t.$t("format_instructions")}}),a("br"),"print"===t.new_layout_mode?[a("select",{attrs:{disabled:!t.edit_mode},domProps:{value:t.predefined_format_from_width},on:{change:t.setSizeFromFormat}},t._l(t.format_options,(function(e){return a("option",{key:e.key,domProps:{value:e.key,textContent:t._s(e.text)}})})),0),a("br")]:t._e(),a("div",{staticClass:"u-sameRow"},[a("div",{},[a("DLabel",{attrs:{str:t.$t("width")}}),a("div",{staticClass:"u-inputGroup"},[a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.new_page_width,expression:"new_page_width",modifiers:{number:!0}}],attrs:{type:"number",disabled:!t.edit_mode},domProps:{value:t.new_page_width},on:{input:function(e){e.target.composing||(t.new_page_width=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),a("span",{staticClass:"u-suffix",domProps:{textContent:t._s(t.unit)}})])],1),a("div",{},[a("DLabel",{attrs:{str:t.$t("height")}}),a("div",{staticClass:"u-inputGroup"},[a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.new_page_height,expression:"new_page_height",modifiers:{number:!0}}],attrs:{type:"number",disabled:!t.edit_mode},domProps:{value:t.new_page_height},on:{input:function(e){e.target.composing||(t.new_page_height=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),a("span",{staticClass:"u-suffix",domProps:{textContent:t._s(t.unit)}})])],1)]),a("br"),t.can_edit&&!t.edit_mode?a("EditBtn",{on:{click:t.enableEditMode}}):t._e(),t.edit_mode?a("div",{staticClass:"_footer"},[a("SaveCancelButtons",{staticClass:"_scb",attrs:{is_saving:t.is_saving},on:{save:t.updateSize,cancel:t.cancel}})],1):t._e()],2)])},d=[],l={props:{publication:Object},components:{},data(){return{edit_mode:!1,is_saving:!1,can_edit:!0,new_layout_mode:void 0,new_page_width:void 0,new_page_height:void 0,format_options:[{key:"A4_portrait",text:this.$t("A4_portrait"),width:210,height:297},{key:"A4_landscape",text:this.$t("A4_landscape"),width:297,height:210},{key:"A5_portrait",text:this.$t("A5_portrait"),width:148,height:210},{key:"A5_landscape",text:this.$t("A5_landscape"),width:210,height:148},{key:"custom",text:this.$t("custom")}]}},created(){},mounted(){this.initValues()},beforeDestroy(){},watch:{new_layout_mode(){}},computed:{predefined_format_from_width(){const t=this.format_options.find((t=>t.width===this.new_page_width&&t.height===this.new_page_height));return t?t.key:"custom"},unit(){return"screen"===this.new_layout_mode?"px":"mm"}},methods:{initValues(){this.new_layout_mode=this.publication.layout_mode||"print",this.new_page_width=this.publication.page_width||210,this.new_page_height=this.publication.page_height||297},enableEditMode(){this.edit_mode=!0},setSizeFromFormat(t){const e=t.target.value;if("custom"===e)return;const a=this.format_options.find((t=>t.key===e));this.new_page_width=a.width,this.new_page_height=a.height},cancel(){this.edit_mode=!1,this.is_saving=!1,this.initValues()},async updateSize(){this.is_saving=!0;try{const t={layout_mode:this.new_layout_mode,page_width:this.new_page_width,page_height:this.new_page_height};await this.$api.updateMeta({path:this.publication.$path,new_meta:t}),this.edit_mode=!1,this.is_saving=!1}catch(t){this.is_saving=!1,this.edit_mode=!1,this.$alertify.closeLogOnClick(!0).delay(4e3).error(this.$t("notifications.couldntbesaved")),this.$alertify.closeLogOnClick(!0).error(t.response.data)}}}},c=l,u=a(1001),p=(0,u.Z)(c,r,d,!1,null,"43151a6b",null),h=p.exports,_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("fieldset",[a("legend",{staticClass:"u-label"},[t._v(t._s(t.$t("margins")))]),a("div",{staticClass:"u-instructions"},[a("small",[t._v(t._s(t.$t("margins_instructions")))])]),a("br"),a("div",{staticClass:"u-sameRow"},[a("div",{},[a("DLabel",{attrs:{str:t.$t("top")}}),a("div",{staticClass:"u-inputGroup"},[a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.top,expression:"top",modifiers:{number:!0}}],attrs:{type:"number",disabled:!t.edit_mode},domProps:{value:t.top},on:{input:function(e){e.target.composing||(t.top=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),a("span",{staticClass:"u-suffix",domProps:{textContent:t._s(t.unit)}})])],1),a("div",{},[a("DLabel",{attrs:{str:t.$t("bottom")}}),a("div",{staticClass:"u-inputGroup"},[a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.bottom,expression:"bottom",modifiers:{number:!0}}],attrs:{type:"number",disabled:!t.edit_mode},domProps:{value:t.bottom},on:{input:function(e){e.target.composing||(t.bottom=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),a("span",{staticClass:"u-suffix",domProps:{textContent:t._s(t.unit)}})])],1)]),a("br"),a("div",{staticClass:"u-sameRow"},[a("div",{},[a("DLabel",{attrs:{str:t.is_spread?t.$t("margins_inside"):t.$t("left")}}),a("div",{staticClass:"u-inputGroup"},[a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.left,expression:"left",modifiers:{number:!0}}],attrs:{type:"number",disabled:!t.edit_mode},domProps:{value:t.left},on:{input:function(e){e.target.composing||(t.left=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),a("span",{staticClass:"u-suffix",domProps:{textContent:t._s(t.unit)}})])],1),a("br"),a("div",{},[a("DLabel",{attrs:{str:t.is_spread?t.$t("margins_outside"):t.$t("right")}}),a("div",{staticClass:"u-inputGroup"},[a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.right,expression:"right",modifiers:{number:!0}}],attrs:{type:"number",disabled:!t.edit_mode},domProps:{value:t.right},on:{input:function(e){e.target.composing||(t.right=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),a("span",{staticClass:"u-suffix",domProps:{textContent:t._s(t.unit)}})])],1)]),a("br"),t.can_edit&&!t.edit_mode?a("EditBtn",{on:{click:t.enableEditMode}}):t._e(),t.edit_mode?a("div",{staticClass:"_footer"},[a("SaveCancelButtons",{staticClass:"_scb",attrs:{is_saving:t.is_saving},on:{save:t.updateMargins,cancel:t.cancel}})],1):t._e()],1)])},m=[],g={props:{publication:Object,is_spread:Boolean},components:{},data(){return{edit_mode:!1,is_saving:!1,can_edit:!0,top:this.publication.page_margin_top||0,bottom:this.publication.page_margin_bottom||0,left:this.publication.page_margin_left||0,right:this.publication.page_margin_right||0}},created(){},mounted(){},beforeDestroy(){},watch:{},computed:{unit(){return"screen"===this.publication.layout_mode?"px":"mm"}},methods:{enableEditMode(){this.edit_mode=!0},cancel(){this.edit_mode=!1,this.is_saving=!1},async updateMargins(){this.is_saving=!0;try{const t={page_margin_top:this.top,page_margin_bottom:this.bottom,page_margin_left:this.left,page_margin_right:this.right};await this.$api.updateMeta({path:this.publication.$path,new_meta:t}),this.edit_mode=!1,this.is_saving=!1}catch(t){this.is_saving=!1,this.edit_mode=!1,this.$alertify.closeLogOnClick(!0).delay(4e3).error(this.$t("notifications.couldntbesaved")),this.$alertify.closeLogOnClick(!0).error(t.response.data)}}}},v=g,b=(0,u.Z)(v,_,m,!1,null,"ed233974",null),f=b.exports,y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("fieldset",[a("legend",{staticClass:"u-label"},[t._v(t._s(t.$t("pagination")))]),a("div",{staticClass:"u-instructions"},[a("small",[t._v(t._s(t.$t("pagination_instructions")))]),t.is_spread?a("small",[t._v(" "+t._s(t.$t("pagination_instructions_spread")))]):t._e()]),a("div",{staticClass:"u-sameRow"},[a("ToggleInput",{attrs:{content:t.enable_pagination,label:t.$t("enable"),disabled:!t.edit_mode},on:{"update:content":function(e){t.enable_pagination=e}}})],1),a("br"),a("div",{},[a("DLabel",{attrs:{str:t.$t("pagn_starts_on_page")}}),a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.pagn_starts_on_page,expression:"pagn_starts_on_page",modifiers:{number:!0}}],attrs:{type:"number",disabled:!t.edit_mode},domProps:{value:t.pagn_starts_on_page},on:{input:function(e){e.target.composing||(t.pagn_starts_on_page=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})],1),a("br"),a("div",{staticClass:"u-sameRow"},[a("div",{},[a("DLabel",{attrs:{str:t.is_spread?t.$t("distance_to_outside"):t.$t("distance_to_right")}}),a("div",{staticClass:"u-inputGroup"},[a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.right,expression:"right",modifiers:{number:!0}}],attrs:{type:"number",disabled:!t.edit_mode},domProps:{value:t.right},on:{input:function(e){e.target.composing||(t.right=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),a("span",{staticClass:"u-suffix",domProps:{textContent:t._s(t.unit)}})])],1),a("div",{},[a("DLabel",{attrs:{str:t.$t("distance_to_bottom")}}),a("div",{staticClass:"u-inputGroup"},[a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.bottom,expression:"bottom",modifiers:{number:!0}}],attrs:{type:"number",disabled:!t.edit_mode},domProps:{value:t.bottom},on:{input:function(e){e.target.composing||(t.bottom=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),a("span",{staticClass:"u-suffix",domProps:{textContent:t._s(t.unit)}})])],1)]),a("br"),t.can_edit&&!t.edit_mode?a("EditBtn",{on:{click:t.enableEditMode}}):t._e(),t.edit_mode?a("div",{staticClass:"_footer"},[a("SaveCancelButtons",{staticClass:"_scb",attrs:{is_saving:t.is_saving},on:{save:t.updatePagination,cancel:t.cancel}})],1):t._e()],1)])},w=[],x={props:{publication:Object,is_spread:Boolean},components:{},data(){return{edit_mode:!1,is_saving:!1,can_edit:!0,enable_pagination:this.publication.enable_pagination||!1,pagn_starts_on_page:this.publication.pagn_starts_on_page||1,right:this.publication.pagn_right||2,bottom:this.publication.pagn_bottom||2}},created(){},mounted(){},beforeDestroy(){},watch:{},computed:{unit(){return"screen"===this.publication.layout_mode?"px":"mm"}},methods:{enableEditMode(){this.edit_mode=!0},cancel(){this.edit_mode=!1,this.is_saving=!1,this.enable_pagination=this.publication.enable_pagination,this.pagn_starts_on_page=this.publication.pagn_starts_on_page,this.right=this.publication.pagn_right||2,this.bottom=this.publication.pagn_bottom||2},async updatePagination(){this.is_saving=!0;try{const t={enable_pagination:this.enable_pagination,pagn_starts_on_page:this.pagn_starts_on_page,pagn_right:this.right,pagn_bottom:this.bottom};await this.$api.updateMeta({path:this.publication.$path,new_meta:t}),this.edit_mode=!1,this.is_saving=!1}catch(t){this.is_saving=!1,this.edit_mode=!1,this.$alertify.closeLogOnClick(!0).delay(4e3).error(this.$t("notifications.couldntbesaved")),this.$alertify.closeLogOnClick(!0).error(t.response.data)}}}},$=x,M=(0,u.Z)($,y,w,!1,null,"6869aba0",null),k=M.exports,P={props:{publication:Object},components:{WidthHeightField:h,SetMargins:f,PaginationOption:k},data(){return{}},created(){},mounted(){},beforeDestroy(){},watch:{},computed:{},methods:{}},C=P,z=(a(7145),(0,u.Z)(C,n,s,!1,null,"6793dcf2",null)),T=z.exports,S=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("transition",{attrs:{name:"slideup"}},[t.page_opened_id?a("OpenedPageOrSpread",{key:"openedpage",attrs:{page_opened_id:t.page_opened_id,publication_title:t.publication.title,publication_path:t.publication.$path,pages:t.pages,spreads:t.spreads,modules:t.modules,is_spread:t.is_spread,page_width:t.publication.page_width,page_height:t.publication.page_height,layout_mode:t.publication.layout_mode,margins:t.margins,pagination:t.pagination,can_edit:t.can_edit},on:{togglePage:function(e){return t.$emit("togglePage",e)},updatePageOptions:t.updatePageOptions,closePublication:function(e){return t.$emit("closePublication")}}}):a("transition-group",{key:"allpages",staticClass:"_allPages",attrs:{tag:"div",name:"listComplete"}},[t.is_spread?t._l(t.spreads,(function(e,i){return a("div",{key:"spread-"+i,staticClass:"_spread"},t._l(e,(function(e,o){return a("div",{key:e?e.id:o},[e&&e.id?[a("div",{staticClass:"_preview"},[a("SinglePage",{attrs:{context:"preview",zoom:t.page_preview_zoom,page_modules:t.getModulesForPage({modules:t.modules,page_id:e.id}),page_width:t.publication.page_width,page_height:t.publication.page_height,layout_mode:t.publication.layout_mode,page_color:e.page_color,page_number:2*i+o,pagination:t.pagination,hide_pagination:!0===e.hide_pagination,page_is_left:0===o,can_edit:!1}}),a("button",{staticClass:"u-button _openPage",attrs:{type:"button"},domProps:{innerHTML:t._s(t.$t("open"))},on:{click:function(a){return t.$emit("togglePage",e.id)}}})],1),a("PageLabel",{attrs:{index:2*i+o-1,number_of_pages:t.pages.length,can_edit:t.can_edit},on:{movePage:function(e){return t.movePage({old_position:e.old_position,new_position:e.new_position})},duplicatePage:function(a){return t.duplicatePage(e.id)},removePage:function(a){return t.removePage(e.id)}}})]:t._e()],2)})),0)})):t._l(t.pages,(function(e,i){return a("div",{key:"page-"+e.id,staticClass:"_page"},[a("div",{staticClass:"_preview"},[a("SinglePage",{attrs:{context:"preview",zoom:t.page_preview_zoom,page_modules:t.getModulesForPage({modules:t.modules,page_id:e.id}),page_width:t.publication.page_width,page_height:t.publication.page_height,layout_mode:t.publication.layout_mode,page_color:e.page_color,page_number:i,pagination:t.pagination,hide_pagination:!0===e.hide_pagination,can_edit:!1}}),a("button",{staticClass:"u-button _openPage",attrs:{type:"button"},domProps:{innerHTML:t._s(t.$t("open"))},on:{click:function(a){return t.$emit("togglePage",e.id)}}})],1),a("PageLabel",{attrs:{index:i,number_of_pages:t.pages.length,can_edit:t.can_edit},on:{movePage:function(e){return t.movePage({old_position:e.old_position,new_position:e.new_position})},duplicatePage:function(a){return t.duplicatePage(e.id)},removePage:function(a){return t.removePage(e.id)}}})],1)})),t.can_edit?a("button",{key:"createPage",staticClass:"u-button u-button_bleuvert",attrs:{type:"button"},on:{click:t.createPage}},[t._v(" "+t._s(t.$t("create_page"))+" ")]):t._e()],2)],1)],1)},E=[],N=(a(7658),a(5827),a(887)),R=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"_openedPage",class:{"is--editable":t.can_edit}},[a("div",{staticClass:"_spreadNavigator"},[a("div",{staticClass:"_spreadNavigator--content",on:{click:function(e){return e.target!==e.currentTarget?null:t.setActiveModule(!1)}}},[a("div",{staticClass:"_sideCont"},[a("div",{staticClass:"_content"},[a("PageMenu",{attrs:{can_edit:t.can_edit,pages:t.pages,active_page_number:t.active_page_number,active_spread_index:t.active_spread_index,scale:t.scale,show_grid:t.show_grid,snap_to_grid:t.snap_to_grid,gridstep_in_mm:t.gridstep_in_mm,layout_mode:t.layout_mode,page_color:t.current_page.page_color,pagination:t.pagination,publication_path:t.publication_path,page_opened_id:t.page_opened_id,page_modules:t.getModulesForPage({modules:t.modules,page_id:t.page_opened_id}),active_module:t.active_module},on:{"update:show_grid":function(e){t.show_grid=e},"update:snap_to_grid":function(e){t.snap_to_grid=e},"update:gridstep_in_mm":function(e){t.gridstep_in_mm=e},updatePageOptions:function(e){return t.$emit("updatePageOptions",e)},"update:scale":function(e){t.scale=e},prevPage:function(e){return t.prevPage()},nextPage:function(e){return t.nextPage()},close:function(e){return t.setPageActive(!1)}}})],1)]),a("div",{staticClass:"_pagePan"},[a("PanZoom",{attrs:{scale:t.scale,page_opened_id:t.page_opened_id},on:{"update:scale":function(e){t.scale=e}}},[a("transition",{attrs:{name:"fade_fast",mode:"out-in"}},[a("div",{key:t.is_spread?"spread-"+JSON.stringify(t.active_spread.map((function(t){return t.id}))):"page-"+t.page_opened_id,staticClass:"_pageCont",on:{click:function(e){return e.target!==e.currentTarget?null:t.setActiveModule(!1)}}},[t.is_spread?t._l(t.active_spread,(function(e,i){return a("div",{key:e.id?e.id:i,staticClass:"_spreadNavigator--page",class:{"is--active":e.id===t.page_opened_id}},[e?[a("SinglePage",{attrs:{context:"full",page_modules:t.getModulesForPage({modules:t.modules,page_id:e.id}),page_width:t.page_width,page_height:t.page_height,layout_mode:t.layout_mode,page_color:e.page_color,scale:t.scale,show_grid:t.show_grid,snap_to_grid:t.snap_to_grid,gridstep_in_mm:t.gridstep_in_mm,margins:t.margins,page_number:2*t.active_spread_index+i,pagination:t.pagination,hide_pagination:!0===t.current_page.hide_pagination,active_module:t.active_module,page_is_left:0===i,can_edit:t.can_edit&&e.id===t.page_opened_id},on:{close:function(e){return t.setPageActive(!1)}}}),e.id!==t.page_opened_id?[a("button",{staticClass:"_openAdjacentPageBtn panzoom-exclude",attrs:{type:"button"},on:{mousedown:function(a){return a.target!==a.currentTarget?null:t.setPageActive(e.id)}}})]:t._e()]:a("div",{staticClass:"_noPage"})],2)})):a("SinglePage",{staticClass:"_spreadNavigator--page is--active",attrs:{context:"full",page_modules:t.getModulesForPage({modules:t.modules,page_id:t.page_opened_id}),page_width:t.page_width,page_height:t.page_height,layout_mode:t.layout_mode,page_color:t.current_page.page_color,scale:t.scale,show_grid:t.show_grid,snap_to_grid:t.snap_to_grid,gridstep_in_mm:t.gridstep_in_mm,margins:t.margins,page_number:t.active_page_number,pagination:t.pagination,hide_pagination:!0===t.current_page.hide_pagination,active_module:t.active_module,can_edit:t.can_edit},on:{close:function(e){return t.setPageActive(!1)}}})],2)])],1)],1)])])])},A=[],O=(a(6699),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"_pageMenu"},[a("div",{staticClass:"_pageMenu--pane"},[a("button",{staticClass:"u-buttonLink",attrs:{type:"button"},on:{click:function(e){return t.$emit("close")}}},[a("sl-icon",{attrs:{name:"arrow-left-short",label:""}}),t._v(" "+t._s(t.$t("close"))+" ")],1),a("div",{staticClass:"u-spacingBottom _titleRow"},[a("div",[a("button",{staticClass:"u-button u-button_transparent",attrs:{type:"button",disabled:t.active_page_number<=0},on:{click:function(e){return t.$emit("prevPage")}}},[a("sl-icon",{attrs:{name:"arrow-left-circle"}})],1)]),a("div",[a("transition",{attrs:{name:"fade_fast",mode:"out-in"}},[a("b",{key:t.active_page_number},[t._v(t._s(t.$t("page"))+" "+t._s(t.active_page_number+1))])]),!1!==t.active_spread_index?a("transition",{attrs:{name:"fade_fast",mode:"out-in"}},[a("span",{key:t.active_spread_index},[0===t.active_page_number?[t._v(" ("+t._s(t.$t("cover"))+") ")]:[t._v(" ("+t._s(t.$t("spread").toLowerCase())+" "+t._s(t.active_spread_index)+") ")]],2)]):t._e()],1),a("div",[a("button",{staticClass:"u-button u-button_transparent",attrs:{type:"button",disabled:t.active_page_number>=t.pages.length-1},on:{click:function(e){return t.$emit("nextPage")}}},[a("sl-icon",{attrs:{name:"arrow-right-circle"}})],1)])]),a("div",{staticClass:"_scale"},[a("RangeValueInput",{staticClass:"u-spacingBottom",attrs:{label:t.$t("scale"),value:Math.round(100*t.scale),min:10,max:200,step:1,ticks:[10,25,50,100,200],default_value:100,suffix:"%"},on:{save:function(e){return t.$emit("update:scale",e/100)}}})],1)]),t.can_edit?[a("transition",{attrs:{name:"fade_fast",mode:"out-in"}},[t.has_editor_toolbar||t.active_module?!t.has_editor_toolbar&&t.active_module?a("div",{key:"media-"+t.active_module.$path,staticClass:"_pageMenu--pane"},[a("DLabel",{attrs:{str:t.$t("media"),instructions:t.$t("active_media_instr")}}),"mosaic"===t.active_module.module_type?a("MediaContent",{staticClass:"_activeModulePreview",attrs:{file:t.firstMedia(t.active_module),resolution:50,context:"preview"}}):"text"===t.active_module.module_type?a("span",{staticClass:"u-textEllipsis _textExtract"},[a("CollaborativeEditor2",{ref:"textBloc",attrs:{path:t.firstMedia(t.active_module).$path,content:t.firstMedia(t.active_module).$content,can_edit:!1}})],1):a("span",[t._v(" "+t._s(t.$t(t.active_module.module_type))+" ")]),a("div",{staticClass:"u-mediaOptions"},[a("MoveToPage",{attrs:{pages:t.pages,current_page_id:t.pages[t.active_page_number].id},on:{submit:function(e){t.updateMediaPubliMeta({page_id:e}),t.setActive(!1)}}}),a("div",{},[a("button",{staticClass:"u-buttonLink",attrs:{type:"button"},on:{click:t.duplicateModule}},[a("sl-icon",{attrs:{name:"file-plus"}}),t._v(" "+t._s(t.$t("duplicate"))+" ")],1)]),a("div",{},[!0===t.active_module.locked?a("button",{staticClass:"u-buttonLink",attrs:{type:"button"},on:{click:function(e){return t.updateMediaPubliMeta({locked:!1})}}},[a("sl-icon",{attrs:{name:"unlock"}}),t._v(" "+t._s(t.$t("unlock"))+" ")],1):a("button",{staticClass:"u-buttonLink",attrs:{type:"button"},on:{click:function(e){return t.updateMediaPubliMeta({locked:!0})}}},[a("sl-icon",{attrs:{name:"lock"}}),t._v(" "+t._s(t.$t("lock"))+" ")],1)]),a("div",{},[a("button",{staticClass:"u-buttonLink",attrs:{type:"button"},on:{click:function(e){return t.setActive(!1)}}},[a("sl-icon",{attrs:{name:"dash-square-dotted"}}),t._v(" "+t._s(t.$t("unselect"))+" ")],1)]),a("RemoveMenu",{ref:"removeMenu",attrs:{remove_text:t.$t("withdraw_from_page")},on:{remove:t.removeModule}})],1),a("div",{staticClass:"u-sameRow"},[a("NumberInput",{staticClass:"u-spacingBottom",attrs:{label:t.$t("position")+"→",value:t.active_module.x,suffix:t.unit},on:{save:function(e){return t.updateMediaPubliMeta({x:e})}}}),a("NumberInput",{staticClass:"u-spacingBottom",attrs:{label:t.$t("position")+"↓",value:t.active_module.y,suffix:t.unit},on:{save:function(e){return t.updateMediaPubliMeta({y:e})}}})],1),a("div",{staticClass:"u-sameRow"},[a("NumberInput",{staticClass:"u-spacingBottom",attrs:{label:t.$t("width")+"↔",value:t.active_module.width,min:0,suffix:t.unit},on:{save:function(e){return t.updateMediaPubliMeta({width:e})}}}),a("NumberInput",{staticClass:"u-spacingBottom",attrs:{label:t.$t("height")+"↕",value:t.active_module.height,min:0,suffix:t.unit},on:{save:function(e){return t.updateMediaPubliMeta({height:e})}}})],1),a("RangeValueInput",{staticClass:"u-spacingBottom",attrs:{label:t.$t("angle"),value:t.active_module.rotation,min:0,max:360,step:1,ticks:[0,90,180,270,360],default_value:0,suffix:"°"},on:{save:function(e){return t.updateMediaPubliMeta({rotation:e})}}}),a("br"),"text"===t.firstMedia(t.active_module).$type?a("RangeValueInput",{staticClass:"u-spacingBottom",attrs:{label:t.$t("text_size"),value:t.active_module.text_size,min:1,max:400,step:1,ticks:[1,100,200,300,400],default_value:100,suffix:"%"},on:{save:function(e){return t.updateMediaPubliMeta({text_size:e})}}}):t._e(),a("RangeValueInput",{staticClass:"u-spacingBottom",attrs:{label:t.$t("margins"),value:t.active_module.margins,min:0,max:50,step:1,default_value:0,suffix:t.unit},on:{save:function(e){return t.updateMediaPubliMeta({margins:e})}}}),"ellipsis"!==t.active_module.module_type&&"text"!==t.active_module.module_type?a("RangeValueInput",{staticClass:"u-spacingBottom",attrs:{label:t.$t("border_radius"),value:t.active_module.border_radius,min:0,max:50,step:1,default_value:0,suffix:t.unit},on:{save:function(e){return t.updateMediaPubliMeta({border_radius:e})}}}):t._e(),a("RangeValueInput",{staticClass:"u-spacingBottom",attrs:{label:t.$t("opacity"),value:Math.round(100*t.active_module.opacity),min:1,max:100,step:1,ticks:[1,100],default_value:100,suffix:"%"},on:{save:function(e){return t.updateMediaPubliMeta({opacity:e/100})}}}),a("br"),a("ColorInput",{staticClass:"u-spacingBottom",attrs:{label:t.$t("background_color"),value:t.active_module.background_color,default_value:t.is_shape?"transparent":""},on:{save:function(e){return t.updateMediaPubliMeta({background_color:e})}}}),a("RangeValueInput",{staticClass:"u-spacingBottom",attrs:{label:t.$t("outline_width"),value:t.active_module.outline_width,min:0,max:20,step:1,ticks:[0,10,20],default_value:0,suffix:t.unit},on:{save:function(e){return t.updateMediaPubliMeta({outline_width:e})}}}),t.active_module.outline_width>0?a("ColorInput",{staticClass:"u-spacingBottom",attrs:{label:t.$t("outline_color"),value:t.active_module.outline_color,default_value:"#000000"},on:{save:function(e){return t.updateMediaPubliMeta({outline_color:e})}}}):t._e(),a("br"),a("DepthInput",{staticClass:"u-spacingBottom",attrs:{label:t.$t("z_index"),value:t.active_module.z_index,page_modules:t.page_modules},on:{save:function(e){return t.updateMediaPubliMeta({z_index:e})}}})],1):t._e():a("div",{key:"page_options-"+t.active_page_number},[a("div",{staticClass:"_pageMenu--pane"},[a("div",{staticClass:"u-spacingBottom"},[a("DLabel",{attrs:{str:t.$t("add_on_page")}}),a("ModuleCreator",{attrs:{publication_path:t.publication_path,addtl_meta:t.new_module_meta,context:"page_by_page",show_shapes:!0,is_collapsed:!1},on:{addModule:t.enableModuleEdit}})],1),t.can_edit?a("div",{},[t.can_edit?a("ToggledSection",{staticClass:"u-spacingBottom",attrs:{label:t.$t("show_grid"),content:t.show_grid},on:{"update:content":function(e){return t.$emit("update:show_grid",e)}}},[a("RangeValueInput",{attrs:{label:t.$t("gridstep"),value:t.gridstep_in_mm,min:1,max:20,step:1,ticks:[5,10,20,50],default_value:10,suffix:t.unit},on:{save:function(e){return t.$emit("update:gridstep_in_mm",e)}}}),a("ToggleInput",{staticClass:"u-spacingBottom",attrs:{content:t.snap_to_grid,label:t.$t("snap_to_grid")},on:{"update:content":function(e){return t.$emit("update:snap_to_grid",e)}}})],1):t._e()],1):t._e(),t.can_edit?a("div",{},[a("ColorInput",{staticClass:"u-spacingBottom",attrs:{label:t.$t("page_color"),value:t.page_color},on:{save:function(e){return t.$emit("updatePageOptions",{page_number:t.active_page_number,value:{page_color:e}})}}}),t.has_pagination?a("ToggleInput",{staticClass:"u-spacingBottom",attrs:{content:t.hide_pagination,label:t.$t("hide_pagination")},on:{"update:content":function(e){return t.$emit("updatePageOptions",{page_number:t.active_page_number,value:{hide_pagination:e}})}}}):t._e()],1):t._e()]),a("div",{staticClass:"_pageMenu--pane"},[a("DLabel",{attrs:{str:t.$t("list_of_medias"),instructions:t.$t("list_of_medias_instr")}}),a("div",{staticClass:"u-spacingBottom"},[t.can_edit?a("button",{staticClass:"u-buttonLink",attrs:{type:"button",disabled:0===t.page_modules.length},on:{click:function(e){t.show_all_medias=!t.show_all_medias}}},[a("sl-icon",{attrs:{name:"collection"}}),t.show_all_medias?[t._v(" "+t._s(t.$t("hide"))+" ")]:[t._v(" "+t._s(t.$t("show"))+" ")]],2):t._e()]),t.show_all_medias?a("div",{staticClass:"_mediaList"},t._l(t.page_modules,(function(e){return a("div",{key:e.$path,on:{click:function(a){return t.setActive(e.$path)}}},[t.firstMedia(e)?a("MediaContent",{staticClass:"_preview",attrs:{file:t.firstMedia(e),resolution:50,context:"preview"}}):t._e(),a("DateField",{attrs:{title:t.$t("date_uploaded"),date:e.$date_uploaded}})],1)})),0):t._e()],1)])]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.has_editor_toolbar,expression:"has_editor_toolbar"}],key:"text-toolbar-"+t.active_page_number,staticClass:"_pageMenu--pane"},[a("div",{ref:"editor_toolbar",staticClass:"_editorToolbar"}),a("RangeValueInput",{staticClass:"u-spacingBottom",attrs:{label:t.$t("text_size"),value:t.active_module.text_size,min:1,max:400,step:1,ticks:[1,100,200,300,400],default_value:100,suffix:"%"},on:{save:function(e){return t.updateMediaPubliMeta({text_size:e})}}})],1)]:t._e()],2)}),I=[],B=a(7172),L=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"_depthInput"},[t.label?a("DLabel",{attrs:{str:t.label,for:t.label}}):t._e(),a("div",{staticClass:"u-sameRow"},[a("button",{staticClass:"u-button u-button_black",attrs:{type:"button",disabled:t.value===t.max_z_index},on:{click:t.moveToFront}},[a("sl-icon",{attrs:{name:"front",label:t.$t("move_to_front")}}),t._v(" "+t._s(t.$t("move_to_front"))+" ")],1),a("button",{staticClass:"u-button u-button_black",attrs:{type:"button",disabled:t.value===t.min_z_index},on:{click:t.moveToBack}},[a("sl-icon",{attrs:{name:"back",label:t.$t("move_to_back")}}),t._v(" "+t._s(t.$t("move_to_back"))+" ")],1)])],1)},D=[],H={props:{label:String,value:Number,page_modules:Array},components:{},data(){return{}},created(){},mounted(){},beforeDestroy(){},watch:{},computed:{list_all_z_index(){return this.page_modules.map((t=>t.z_index||0))},max_z_index(){return Math.max(...this.list_all_z_index)},min_z_index(){return Math.min(...this.list_all_z_index)}},methods:{moveToBack(){this.$emit("save",this.min_z_index-1)},moveToFront(){this.$emit("save",this.max_z_index+1)}}},j=H,X=(0,u.Z)(j,L,D,!1,null,"952a845c",null),Z=X.exports,F=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("button",{staticClass:"u-buttonLink",attrs:{type:"button"},on:{click:function(e){t.show_confirm_move=!0}}},[a("sl-icon",{attrs:{name:"arrow-left-right"}}),t._v(" "+t._s(t.$t("move_to_page"))+" ")],1),t.show_confirm_move?a("BaseModal2",{attrs:{title:t.$t("move_to_page")},on:{close:function(e){t.show_confirm_move=!1}}},[a("div",{},[a("SelectField2",{attrs:{value:t.current_page_id,options:t.all_pages_in_select,can_edit:!0,hide_validation:!0},on:{change:t.setNewPage}})],1),a("div",{staticClass:"u-sameRow",attrs:{slot:"footer"},slot:"footer"},[a("button",{staticClass:"u-buttonLink",attrs:{type:"button"},on:{click:function(e){t.show_confirm_move=!1}}},[t._v(" "+t._s(t.$t("cancel"))+" ")]),a("button",{staticClass:"u-button u-button_red",attrs:{type:"button",autofocus:"",disabled:!t.page_id_to_move_to||t.page_id_to_move_to===t.current_page_id},on:{click:t.submit}},[t._v(" "+t._s(t.$t("move"))+" ")])])]):t._e()],1)},Y=[],W={props:{pages:Array,current_page_id:String},components:{},data(){return{show_confirm_move:!1,page_id_to_move_to:void 0}},created(){},mounted(){},beforeDestroy(){},watch:{},computed:{all_pages_in_select(){return this.pages.map(((t,e)=>({key:t.id,text:e+1})))}},methods:{setNewPage(t){this.page_id_to_move_to=t},submit(){this.$emit("submit",this.page_id_to_move_to),this.show_confirm_move=!1}}},V=W,U=(0,u.Z)(V,F,Y,!1,null,"42602880",null),G=U.exports,J={props:{can_edit:Boolean,pages:Array,active_page_number:Number,active_spread_index:[Boolean,Number],scale:Number,show_grid:Boolean,snap_to_grid:Boolean,gridstep_in_mm:Number,layout_mode:{type:String,default:"print"},page_color:String,pagination:[Boolean,Object],publication_path:String,page_modules:Array,page_opened_id:String,active_module:[Boolean,Object]},components:{DepthInput:Z,ModuleCreator:B.Z,MoveToPage:G},data(){return{show_page_options:!1,show_all_medias:!1,has_editor_toolbar:!1}},created(){},mounted(){this.$eventHub.$on("module.text_editing_enabled",this.displayToolbar),this.$eventHub.$on("module.text_editing_disabled",this.removeToolbar),this.$eventHub.$on("module.open_remove_modal",this.openRemoveModal)},beforeDestroy(){this.$eventHub.$off("module.moveToolbar",this.displayToolbar),this.$eventHub.$off("module.text_editing_disabled",this.removeToolbar),this.$eventHub.$off("module.open_remove_modal",this.openRemoveModal)},watch:{},computed:{module_meta_filename(){return this.active_module.$path.substring(this.active_module.$path.lastIndexOf("/")+1)},is_shape(){return this.active_module&&["ellipsis","line","arrow","rectangle"].includes(this.active_module.module_type)},unit(){return"screen"===this.layout_mode?"px":"mm"},has_pagination(){return this.active_page_number-this.pagination.pagination_start_on_page>=0},hide_pagination(){return!0===this.pages[this.active_page_number].hide_pagination},new_module_meta(){const t=Math.max(...this.page_modules.map((t=>t.z_index||0)))+1;return{page_id:this.page_opened_id,x:this.gridstep_in_mm,y:this.gridstep_in_mm,width:this.$root.default_new_module_width,height:this.$root.default_new_module_height,rotation:0,margins:0,opacity:1,outline_width:0,z_index:t}}},methods:{firstMedia(t){if(!t)return!1;try{const e=t.source_medias[0],a=this.getParent(t.$path);return this.getSourceMedia({source_media:e,publication_path:a})}catch(e){return!1}},displayToolbar(t){this.has_editor_toolbar=!0,this.$nextTick((()=>{this.$refs.editor_toolbar&&this.$refs.editor_toolbar.append(t)}))},removeToolbar(){this.has_editor_toolbar=!1},openRemoveModal(){this.$refs.removeMenu.show_confirm_delete=!0},enableModuleEdit({meta_filename:t}){setTimeout((()=>{this.$eventHub.$emit(`module.enable_edit.${t}`),this.$eventHub.$emit(`module.panTo.${t}`)}),150)},changeModulePage(){this.$eventHub.$emit(`module.move.${this.module_meta_filename}`)},duplicateModule(){this.$eventHub.$emit(`module.duplicate.${this.module_meta_filename}`)},removeModule(){this.$eventHub.$emit(`module.remove.${this.module_meta_filename}`),this.$eventHub.$emit("module.setActive",!1)},setActive(t){this.$eventHub.$emit("module.setActive",t),this.$nextTick((()=>{const e=this.getFilename(t);this.$eventHub.$emit(`module.panTo.${e}`)}))},async updateMediaPubliMeta(t){this.active_module&&await this.$api.updateMeta({path:this.active_module.$path,new_meta:t}).catch((t=>{throw this.$alertify.delay(4e3).error(t),t}))}}},q=J,K=(a(3786),(0,u.Z)(q,O,I,!1,null,"64fa2648",null)),Q=K.exports,tt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[t._t("default")],2)},et=[],at=(a(4916),a(1703),function(){return at=Object.assign||function(t){for(var e,a=1,i=arguments.length;a<i;a++)for(var o in e=arguments[a],e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},at.apply(this,arguments)});function it(t,e){var a=t.length;while(a--)if(t[a].pointerId===e.pointerId)return a;return-1}function ot(t,e){var a;if(e.touches){a=0;for(var i=0,o=e.touches;i<o.length;i++){var n=o[i];n.pointerId=a++,ot(t,n)}}else a=it(t,e),a>-1&&t.splice(a,1),t.push(e)}function nt(t,e){if(e.touches)while(t.length)t.pop();else{var a=it(t,e);a>-1&&t.splice(a,1)}}function st(t){t=t.slice(0);var e,a=t.pop();while(e=t.pop())a={clientX:(e.clientX-a.clientX)/2+a.clientX,clientY:(e.clientY-a.clientY)/2+a.clientY};return a}function rt(t){if(t.length<2)return 0;var e=t[0],a=t[1];return Math.sqrt(Math.pow(Math.abs(a.clientX-e.clientX),2)+Math.pow(Math.abs(a.clientY-e.clientY),2))}"undefined"!==typeof window&&(window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),"function"!==typeof window.CustomEvent&&(window.CustomEvent=function(t,e){e=e||{bubbles:!1,cancelable:!1,detail:null};var a=document.createEvent("CustomEvent");return a.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),a}));var dt={down:"mousedown",move:"mousemove",up:"mouseup mouseleave"};function lt(t,e,a,i){dt[t].split(" ").forEach((function(t){e.addEventListener(t,a,i)}))}function ct(t,e,a){dt[t].split(" ").forEach((function(t){e.removeEventListener(t,a)}))}"undefined"!==typeof window&&("function"===typeof window.PointerEvent?dt={down:"pointerdown",move:"pointermove",up:"pointerup pointerleave pointercancel"}:"function"===typeof window.TouchEvent&&(dt={down:"touchstart",move:"touchmove",up:"touchend touchcancel"}));var ut,pt="undefined"!==typeof document&&!!document.documentMode;function ht(){return ut||(ut=document.createElement("div").style)}var _t=["webkit","moz","ms"],mt={};function gt(t){if(mt[t])return mt[t];var e=ht();if(t in e)return mt[t]=t;var a=t[0].toUpperCase()+t.slice(1),i=_t.length;while(i--){var o="".concat(_t[i]).concat(a);if(o in e)return mt[t]=o}}function vt(t,e){return parseFloat(e[gt(t)])||0}function bt(t,e,a){void 0===a&&(a=window.getComputedStyle(t));var i="border"===e?"Width":"";return{left:vt("".concat(e,"Left").concat(i),a),right:vt("".concat(e,"Right").concat(i),a),top:vt("".concat(e,"Top").concat(i),a),bottom:vt("".concat(e,"Bottom").concat(i),a)}}function ft(t,e,a){t.style[gt(e)]=a}function yt(t,e){var a=gt("transform");ft(t,"transition","".concat(a," ").concat(e.duration,"ms ").concat(e.easing))}function wt(t,e,a){var i=e.x,o=e.y,n=e.scale,s=e.isSVG;if(ft(t,"transform","scale(".concat(n,") translate(").concat(i,"px, ").concat(o,"px)")),s&&pt){var r=window.getComputedStyle(t).getPropertyValue("transform");t.setAttribute("transform",r)}}function xt(t){var e=t.parentNode,a=window.getComputedStyle(t),i=window.getComputedStyle(e),o=t.getBoundingClientRect(),n=e.getBoundingClientRect();return{elem:{style:a,width:o.width,height:o.height,top:o.top,bottom:o.bottom,left:o.left,right:o.right,margin:bt(t,"margin",a),border:bt(t,"border",a)},parent:{style:i,width:n.width,height:n.height,top:n.top,bottom:n.bottom,left:n.left,right:n.right,padding:bt(e,"padding",i),border:bt(e,"border",i)}}}function $t(t){var e=t.ownerDocument,a=t.parentNode;return e&&a&&9===e.nodeType&&1===a.nodeType&&e.documentElement.contains(a)}function Mt(t){return(t.getAttribute("class")||"").trim()}function kt(t,e){return 1===t.nodeType&&" ".concat(Mt(t)," ").indexOf(" ".concat(e," "))>-1}function Pt(t,e){for(var a=t;null!=a;a=a.parentNode)if(kt(a,e.excludeClass)||e.exclude.indexOf(a)>-1)return!0;return!1}var Ct=/^http:[\w\.\/]+svg$/;function zt(t){return Ct.test(t.namespaceURI)&&"svg"!==t.nodeName.toLowerCase()}function Tt(t){var e={};for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a]);return e}var St={animate:!1,canvas:!1,cursor:"move",disablePan:!1,disableZoom:!1,disableXAxis:!1,disableYAxis:!1,duration:200,easing:"ease-in-out",exclude:[],excludeClass:"panzoom-exclude",handleStartEvent:function(t){t.preventDefault(),t.stopPropagation()},maxScale:4,minScale:.125,overflow:"hidden",panOnlyWhenZoomed:!1,pinchAndPan:!1,relative:!1,setTransform:wt,startX:0,startY:0,startScale:1,step:.3,touchAction:"none"};function Et(t,e){if(!t)throw new Error("Panzoom requires an element as an argument");if(1!==t.nodeType)throw new Error("Panzoom requires an element with a nodeType of 1");if(!$t(t))throw new Error("Panzoom should be called on elements that have been attached to the DOM");e=at(at({},St),e);var a=zt(t),i=t.parentNode;function o(){i.style.overflow="",i.style.userSelect="",i.style.touchAction="",i.style.cursor="",t.style.cursor="",t.style.userSelect="",t.style.touchAction="",ft(t,"transformOrigin","")}function n(a){for(var o in void 0===a&&(a={}),a)a.hasOwnProperty(o)&&(e[o]=a[o]);(a.hasOwnProperty("cursor")||a.hasOwnProperty("canvas"))&&(i.style.cursor=t.style.cursor="",(e.canvas?i:t).style.cursor=e.cursor),a.hasOwnProperty("overflow")&&(i.style.overflow=a.overflow),a.hasOwnProperty("touchAction")&&(i.style.touchAction=a.touchAction,t.style.touchAction=a.touchAction)}i.style.overflow=e.overflow,i.style.userSelect="none",i.style.touchAction=e.touchAction,(e.canvas?i:t).style.cursor=e.cursor,t.style.userSelect="none",t.style.touchAction=e.touchAction,ft(t,"transformOrigin","string"===typeof e.origin?e.origin:a?"0 0":"50% 50%");var s,r,d,l,c,u,p=0,h=0,_=1,m=!1;function g(e,a,i){if(!i.silent){var o=new CustomEvent(e,{detail:a});t.dispatchEvent(o)}}function v(e,i,o){var n={x:p,y:h,scale:_,isSVG:a,originalEvent:o};return requestAnimationFrame((function(){"boolean"===typeof i.animate&&(i.animate?yt(t,i):ft(t,"transition","none")),i.setTransform(t,n,i),g(e,n,i),g("panzoomchange",n,i)})),n}function b(a,i,o,n){var s=at(at({},e),n),r={x:p,y:h,opts:s};if(!s.force&&(s.disablePan||s.panOnlyWhenZoomed&&_===s.startScale))return r;if(a=parseFloat(a),i=parseFloat(i),s.disableXAxis||(r.x=(s.relative?p:0)+a),s.disableYAxis||(r.y=(s.relative?h:0)+i),s.contain){var d=xt(t),l=d.elem.width/_,c=d.elem.height/_,u=l*o,m=c*o,g=(u-l)/2,v=(m-c)/2;if("inside"===s.contain){var b=(-d.elem.margin.left-d.parent.padding.left+g)/o,f=(d.parent.width-u-d.parent.padding.left-d.elem.margin.left-d.parent.border.left-d.parent.border.right+g)/o;r.x=Math.max(Math.min(r.x,f),b);var y=(-d.elem.margin.top-d.parent.padding.top+v)/o,w=(d.parent.height-m-d.parent.padding.top-d.elem.margin.top-d.parent.border.top-d.parent.border.bottom+v)/o;r.y=Math.max(Math.min(r.y,w),y)}else if("outside"===s.contain){b=(-(u-d.parent.width)-d.parent.padding.left-d.parent.border.left-d.parent.border.right+g)/o,f=(g-d.parent.padding.left)/o;r.x=Math.max(Math.min(r.x,f),b);y=(-(m-d.parent.height)-d.parent.padding.top-d.parent.border.top-d.parent.border.bottom+v)/o,w=(v-d.parent.padding.top)/o;r.y=Math.max(Math.min(r.y,w),y)}}return s.roundPixels&&(r.x=Math.round(r.x),r.y=Math.round(r.y)),r}function f(a,i){var o=at(at({},e),i),n={scale:_,opts:o};if(!o.force&&o.disableZoom)return n;var s=e.minScale,r=e.maxScale;if(o.contain){var d=xt(t),l=d.elem.width/_,c=d.elem.height/_;if(l>1&&c>1){var u=d.parent.width-d.parent.border.left-d.parent.border.right,p=d.parent.height-d.parent.border.top-d.parent.border.bottom,h=u/l,m=p/c;"inside"===e.contain?r=Math.min(r,h,m):"outside"===e.contain&&(s=Math.max(s,h,m))}}return n.scale=Math.min(Math.max(a,s),r),n}function y(t,e,i,o){var n=b(t,e,_,i);return p!==n.x||h!==n.y?(p=n.x,h=n.y,v("panzoompan",n.opts,o)):{x:p,y:h,scale:_,isSVG:a,originalEvent:o}}function w(t,e,a){var i=f(t,e),o=i.opts;if(o.force||!o.disableZoom){t=i.scale;var n=p,s=h;if(o.focal){var r=o.focal;n=(r.x/t-r.x/_+p*t)/t,s=(r.y/t-r.y/_+h*t)/t}var d=b(n,s,t,{relative:!1,force:!0});return p=d.x,h=d.y,_=t,v("panzoomzoom",o,a)}}function x(t,a){var i=at(at(at({},e),{animate:!0}),a);return w(_*Math.exp((t?1:-1)*i.step),i)}function $(t){return x(!0,t)}function M(t){return x(!1,t)}function k(e,i,o,n){var s=xt(t),r={width:s.parent.width-s.parent.padding.left-s.parent.padding.right-s.parent.border.left-s.parent.border.right,height:s.parent.height-s.parent.padding.top-s.parent.padding.bottom-s.parent.border.top-s.parent.border.bottom},d=i.clientX-s.parent.left-s.parent.padding.left-s.parent.border.left-s.elem.margin.left,l=i.clientY-s.parent.top-s.parent.padding.top-s.parent.border.top-s.elem.margin.top;a||(d-=s.elem.width/_/2,l-=s.elem.height/_/2);var c={x:d/r.width*(r.width*e),y:l/r.height*(r.height*e)};return w(e,at(at({},o),{animate:!1,focal:c}),n)}function P(t,a){t.preventDefault();var i=at(at(at({},e),a),{animate:!1}),o=0===t.deltaY&&t.deltaX?t.deltaX:t.deltaY,n=o<0?1:-1,s=f(_*Math.exp(n*i.step/3),i).scale;return k(s,t,i,t)}function C(t){var a=at(at(at({},e),{animate:!0,force:!0}),t);_=f(a.startScale,a).scale;var i=b(a.startX,a.startY,_,a);return p=i.x,h=i.y,v("panzoomreset",a)}w(e.startScale,{animate:!1,force:!0}),setTimeout((function(){y(e.startX,e.startY,{animate:!1,force:!0})}));var z=[];function T(t){if(!Pt(t.target,e)){ot(z,t),m=!0,e.handleStartEvent(t),s=p,r=h,g("panzoomstart",{x:p,y:h,scale:_,isSVG:a,originalEvent:t},e);var i=st(z);d=i.clientX,l=i.clientY,c=_,u=rt(z)}}function S(t){if(m&&void 0!==s&&void 0!==r&&void 0!==d&&void 0!==l){ot(z,t);var a=st(z),i=z.length>1,o=_;if(i){0===u&&(u=rt(z));var n=rt(z)-u;o=f(n*e.step/80+c).scale,k(o,a,{animate:!1},t)}i&&!e.pinchAndPan||y(s+(a.clientX-d)/o,r+(a.clientY-l)/o,{animate:!1},t)}}function E(t){1===z.length&&g("panzoomend",{x:p,y:h,scale:_,isSVG:a,originalEvent:t},e),nt(z,t),m&&(m=!1,s=r=d=l=void 0)}var N=!1;function R(){N||(N=!0,lt("down",e.canvas?i:t,T),lt("move",document,S,{passive:!0}),lt("up",document,E,{passive:!0}))}function A(){N=!1,ct("down",e.canvas?i:t,T),ct("move",document,S),ct("up",document,E)}return e.noBind||R(),{bind:R,destroy:A,eventNames:dt,getPan:function(){return{x:p,y:h}},getScale:function(){return _},getOptions:function(){return Tt(e)},handleDown:T,handleMove:S,handleUp:E,pan:y,reset:C,resetStyle:o,setOptions:n,setStyle:function(e,a){return ft(t,e,a)},zoom:w,zoomIn:$,zoomOut:M,zoomToPoint:k,zoomWithWheel:P}}Et.defaultOptions=St;var Nt={props:{scale:Number,page_opened_id:String},components:{},data(){return{panzoom:void 0,debounce_zoom:void 0,pan_margin_when_moving_to_media:15}},created(){},async mounted(){this.$nextTick((()=>{this.init()}))},beforeDestroy(){this.$eventHub.$off("panzoom.panTo",this.panTo)},watch:{scale(){this.updateScale(this.scale)},page_opened_id:{handler(){this.$nextTick((()=>{}))}}},computed:{},methods:{init(){const{left:t,top:e}=this.getActivePagePos();this.panzoom=Et(this.$el,{maxScale:5,step:.05,canvas:!0,startScale:this.scale,startX:t,startY:e}),this.$el.addEventListener("wheel",(t=>{t.ctrlKey&&this.panzoom.zoomWithWheel(t)})),this.$el.addEventListener("panzoomzoom",this.panzoomzoom),this.$el.addEventListener("panzoomstart",this.panzoomstart),this.$el.addEventListener("panzoomend",this.panzoomend),this.$eventHub.$on("panzoom.panTo",this.panTo)},getActivePagePos(){const t=this.$el.querySelector("._spreadNavigator--page.is--active").offsetLeft,e=document.querySelector("._sideCont").offsetWidth,a=this.pan_margin_when_moving_to_media,i=-t+e+a,o=a;return{left:i,top:o}},panTo({x:t,y:e}){this.panzoom.pan(280-t+this.pan_margin_when_moving_to_media,-e+this.pan_margin_when_moving_to_media,{animate:!0})},panzoomzoom(t){this.debounce_zoom&&clearTimeout(this.debounce_zoom),this.debounce_zoom=setTimeout((async()=>{t.detail.scale!==this.scale&&this.$emit("update:scale",t.detail.scale)}),500)},panzoomstart(t){this.start_pan_x=t.detail.x,this.start_pan_y=t.detail.y},panzoomend(t){t.stopPropagation();const e=(t,e)=>Math.abs(t-e)<10;e(this.start_pan_x,t.detail.x)&&e(this.start_pan_y,t.detail.y)&&this.disableActiveModule()},updateScale(t){t!==this.panzoom.getScale()&&this.panzoom.zoom(t,{animate:!0})},disableActiveModule(){this.$eventHub.$emit("module.setActive",!1)}}},Rt=Nt,At=(0,u.Z)(Rt,tt,et,!1,null,"706b332e",null),Ot=At.exports,It={props:{page_opened_id:String,publication_path:String,publication_title:String,pages:Array,spreads:[Boolean,Array],modules:Array,is_spread:Boolean,page_width:Number,page_height:Number,layout_mode:String,margins:Object,pagination:[Boolean,Object],can_edit:Boolean},components:{PageMenu:Q,SinglePage:N.Z,PanZoom:Ot},data(){return{scale:1,show_grid:!0,snap_to_grid:!1,gridstep_in_mm:10,active_module_path:!1}},created(){this.$eventHub.$on("module.setActive",this.setActiveModule),document.addEventListener("keydown",this.keyPressed)},mounted(){},beforeDestroy(){this.$eventHub.$off("module.setActive",this.setActiveModule),document.removeEventListener("keydown",this.keyPressed)},watch:{page_opened_id(){this.$nextTick((()=>{}))}},computed:{active_module(){return!!this.active_module_path&&this.modules.find((t=>t.$path===this.active_module_path))},active_module_meta_filename(){return this.active_module.$path.substring(this.active_module.$path.lastIndexOf("/")+1)},active_page_number(){return this.pages.findIndex((t=>t.id===this.page_opened_id))},current_page(){return this.pages.find((t=>t.id===this.page_opened_id))},previous_page(){return this.pages[this.active_page_number-1]},next_page(){return this.pages[this.active_page_number+1]},active_spread(){return this.spreads[this.active_spread_index]},active_spread_index(){return this.is_spread&&this.spreads.findIndex((t=>t.find((t=>t&&t.id===this.page_opened_id))))}},methods:{keyPressed(t){if(this.$root.modal_is_opened||"input"===t.target.tagName.toLowerCase()||"textarea"===t.target.tagName.toLowerCase()||t.target.className.includes("ql-editor")||t.target.hasAttribute("contenteditable"))return;let e="";"Backspace"!==t.key&&"Delete"!==t.key||(e="remove",this.$eventHub.$emit("module.open_remove_modal")),e&&t.preventDefault()},setActiveModule(t){this.active_module_path=t},prevPage(){const t=this.active_page_number-1;this.setPageActive(this.pages[t].id)},nextPage(){const t=this.active_page_number+1;this.setPageActive(this.pages[t].id)},setPageActive(t){this.setActiveModule(!1),this.$emit("togglePage",t)},prevSpread(){const t=this.spreads[this.active_spread_index-1],e=t[1].id;this.setPageActive(e)},nextSpread(){const t=this.spreads[this.active_spread_index+1],e=t[0].id;this.setPageActive(e)}}},Bt=It,Lt=(a(5890),(0,u.Z)(Bt,R,A,!1,null,"04d84a32",null)),Dt=Lt.exports,Ht=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"_label"},[a("div",{staticClass:"u-sameRow"},[a("b",{},[t._v(t._s(t.$t("page"))+" "+t._s(t.index+1))]),t.can_edit?a("EditBtn",{on:{click:function(e){t.edit_mode=!t.edit_mode}}}):t._e()],1),t.edit_mode?a("div",{staticClass:"u-sameRow"},[a("select",{domProps:{value:t.index},on:{change:function(e){t.$emit("movePage",{old_position:t.index,new_position:+e.target.value}),t.edit_mode=!1}}},t._l(t.number_of_pages,(function(e){return a("option",{key:e-1,domProps:{value:e-1,textContent:t._s(e)}})})),0),a("div",{},[a("button",{staticClass:"u-buttonLink",attrs:{type:"button"},on:{click:function(e){t.$emit("duplicatePage"),t.edit_mode=!1}}},[a("sl-icon",{attrs:{name:"clipboard2-plus"}})],1)]),t.can_edit?a("RemoveMenu",{attrs:{remove_text:t.$t("remove_page_and_content"),show_button_text:!1},on:{remove:function(e){return t.$emit("removePage")}}}):t._e()],1):t._e()])},jt=[],Xt={props:{index:Number,number_of_pages:Number,can_edit:Boolean},components:{},data(){return{edit_mode:!1}},created(){},mounted(){},beforeDestroy(){},watch:{},computed:{},methods:{}},Zt=Xt,Ft=(a(556),(0,u.Z)(Zt,Ht,jt,!1,null,"121f451e",null)),Yt=Ft.exports,Wt={props:{publication:Object,page_opened_id:String,can_edit:Boolean},components:{SinglePage:N.Z,OpenedPageOrSpread:Dt,PageLabel:Yt},data(){return{}},created(){},mounted(){},beforeDestroy(){},watch:{},computed:{pages(){return this.publication.pages},modules(){return this.publication.$files||[]},is_spread(){return!0===this.publication.page_spreads},page_preview_zoom(){return this.calculateZoomToFit({width:this.publication.page_width,height:this.publication.page_height,desired_largest_dimension:200,magnification:"screen"===this.publication.layout_mode?1:this.$root.page_magnification})},spreads(){return!!this.is_spread&&this.makeSpread({pages:this.pages})},margins(){return{left:this.publication.page_margin_left||0,right:this.publication.page_margin_right||0,top:this.publication.page_margin_top||0,bottom:this.publication.page_margin_bottom||0}},pagination(){return this.setPaginationFromPublication(this.publication)}},methods:{createPage(){const t=this.generatePageID();let e=this.publication.pages?this.publication.pages.slice():[];e.push({id:t,page_color:"white"}),this.updatePubliMeta({pages:e})},removePage(t){let e=this.publication.pages.slice();e=e.filter((e=>e.id!==t)),this.updatePubliMeta({pages:e})},async duplicatePage(t){let e=this.generatePageID();const a=this.publication.pages.reduce(((a,i)=>{if(a.push(i),i.id===t){const t=JSON.parse(JSON.stringify(i));t.id=e,a.push(t)}return a}),[]);await this.updatePubliMeta({pages:a});const i=this.getModulesForPage({modules:this.modules,page_id:t});if(0===i.length)return;const o={page_id:e};for(const n of i)await this.duplicateModuleWithSourceMedias({og_module:n,addtl_meta_to_module:o})},movePage({old_position:t,new_position:e}){let a=this.publication.pages.slice();function i(t,e,a){if(a>=t.length){var i=a-t.length+1;while(i--)t.push(void 0)}return t.splice(a,0,t.splice(e,1)[0]),t}i(a,t,e),this.updatePubliMeta({pages:a})},generatePageID(){return(Math.random().toString(36)+"00000000000000000").slice(2,8)},async updatePageOptions({page_number:t,value:e}){let a=this.publication.pages.slice();Object.assign(a[t],e),this.updatePubliMeta({pages:a})},async updatePubliMeta(t){return await this.$api.updateMeta({path:this.publication.$path,new_meta:t})}}},Vt=Wt,Ut=(a(4640),(0,u.Z)(Vt,S,E,!1,null,"4ced4740",null)),Gt=Ut.exports,Jt={props:{publication:Object,page_opened_id:String,can_edit:Boolean},components:{PageSettings:T,PagesList:Gt},data(){return{current_view:"pages"}},created(){},mounted(){},beforeDestroy(){},watch:{},computed:{},methods:{}},qt=Jt,Kt=(0,u.Z)(qt,i,o,!1,null,"a5ce3770",null),Qt=Kt.exports},1533:function(t,e,a){"use strict";a.r(e);var i=a(8081),o=a.n(i),n=a(3645),s=a.n(n),r=s()(o());r.push([t.id,".yoyoo-ddr{position:absolute}.yoyoo-ddr .resize-handler.tm{left:50%}.yoyoo-ddr .resize-handler.r{top:50%}.yoyoo-ddr .resize-handler.bm{left:50%}.yoyoo-ddr .resize-handler.l{top:50%;cursor:pointer}.yoyoo-ddr .resize-handler,.yoyoo-ddr .rotate-handler{display:none;position:absolute;border:1px solid #607d8b;background:#fff;-webkit-box-sizing:border-box;box-sizing:border-box;border-radius:50%}.yoyoo-ddr .rotate-handler{left:50%;cursor:crosshair}.yoyoo-ddr.active{border:1px dashed #607d8b}.yoyoo-ddr.active>.resize-handler-wrapper>.resize-handler,.yoyoo-ddr.active>.rotate-handler{display:inline-block}.yoyoo-ddr .bl,.yoyoo-ddr .br,.yoyoo-ddr .tl,.yoyoo-ddr .tr{background:#607d8b}",""]),e["default"]=r},7005:function(t,e,a){"use strict";a.r(e);var i=a(8081),o=a.n(i),n=a(3645),s=a.n(n),r=s()(o());r.push([t.id,'._moveableItem.is--locked[data-v-2ccd65f4]{pointer-events:none}._moveableItem.is--editable[data-v-2ccd65f4]  .u-floatingFsButton{display:none}._moveableItem.is--editable[data-v-2ccd65f4]:not(.is--beingEdited):not(.is--locked){cursor:pointer;cursor:grab}._moveableItem.is--editable[data-v-2ccd65f4]:hover:not(.is--locked){outline:2px dotted var(--c-noir)}._moveableItem.is--beingEdited[data-v-2ccd65f4]{outline:2px dotted var(--c-orange)!important}._moveableItem.yoyoo-ddr:not(.is--beingEdited).active[data-v-2ccd65f4]{border:none;outline:2px dotted var(--c-orange)!important}._moveableItem.yoyoo-ddr:not(.is--beingEdited).active[data-v-2ccd65f4]  .bl,._moveableItem.yoyoo-ddr:not(.is--beingEdited).active[data-v-2ccd65f4]  .br,._moveableItem.yoyoo-ddr:not(.is--beingEdited).active[data-v-2ccd65f4]  .tl,._moveableItem.yoyoo-ddr:not(.is--beingEdited).active[data-v-2ccd65f4]  .tr{background:var(--c-orange)}._moveableItem.yoyoo-ddr:not(.is--beingEdited).ddr-dragging[data-v-2ccd65f4]{cursor:-moz-grabbing;cursor:dragging}._moveableItem--content[data-v-2ccd65f4]{height:100%;padding:0;transition:all .2s cubic-bezier(.19,1,.22,1)}._moveableItem--content[data-v-2ccd65f4]  ._content{height:100%;overflow:hidden}._moveableItem--content[data-v-2ccd65f4]  ._content ._mediaContent,._moveableItem--content[data-v-2ccd65f4]  ._content ._mediaGrid,._moveableItem--content[data-v-2ccd65f4]  ._content ._mediaGrid--item,._moveableItem--content[data-v-2ccd65f4]  ._content ._moduleMosaic{height:100%}._moveableItem--content[data-v-2ccd65f4]  ._content ._mediaContent--image{position:absolute;width:100%;height:100%;-o-object-fit:var(--object-fit,cover);object-fit:var(--object-fit,cover);-o-object-position:center;object-position:center}._moveableItem--content[data-v-2ccd65f4]  ._content .plyr__poster{background-size:var(--object-fit,cover);background-position:50%;background-color:transparent}._moveableItem--content[data-v-2ccd65f4]  ._content .plyr--video,._moveableItem--content[data-v-2ccd65f4]  ._content .plyr__video-wrapper{background-color:transparent}._moveableItem--content[data-v-2ccd65f4]  ._content .plyr__video-wrapper video{-o-object-fit:var(--object-fit,cover);object-fit:var(--object-fit,cover);-o-object-position:center;object-position:center}._moveableItem--content[data-v-2ccd65f4]  ._content .plyr--video{min-width:50px}._moveableItem[data-v-2ccd65f4]  ._publicationModule:not(.is--shape) .ql-editor{font-size:var(--set-fontSize)}._moveableItem[data-v-2ccd65f4]  ._publicationModule:not(.is--shape) ._mediaContent--image,._moveableItem[data-v-2ccd65f4]  ._publicationModule:not(.is--shape) ._mediaContent[data-filetype=audio],._moveableItem[data-v-2ccd65f4]  ._publicationModule:not(.is--shape) ._mediaContent[data-filetype=url],._moveableItem[data-v-2ccd65f4]  ._publicationModule:not(.is--shape) ._mediaContent[data-filetype=video],._moveableItem[data-v-2ccd65f4]  ._publicationModule:not(.is--shape) .ql-editor{padding:var(--set-margins);opacity:var(--set-opacity);aspect-ratio:unset;border-radius:var(--set-borderRadius);overflow:hidden;background:var(--set-backgroundColor);border-color:var(--set-outlineColor);border-width:var(--set-outlineWidth);border-style:solid}._moveableItem[data-v-2ccd65f4]  ._publicationModule.is--shape{padding:var(--set-margins);opacity:var(--set-opacity);fill:var(--set-backgroundColor);stroke:var(--set-outlineColor);stroke-width:var(--set-outlineWidth)}._moveableItem.is--editable:not(.is--beingEdited):not(.is--locked) ._activator[data-v-2ccd65f4]:after{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background-color:var(--c-orange_clair);opacity:0;transition:opacity .4s cubic-bezier(.19,1,.22,1)}._moveableItem.is--editable:not(.is--beingEdited):not(.is--locked) ._activator[data-v-2ccd65f4]:hover:after{opacity:.15}._coords[data-v-2ccd65f4]{bottom:0;background:#fff;margin:calc(var(--spacing)*1)}._coords[data-v-2ccd65f4],._unlockBtn[data-v-2ccd65f4]{position:absolute;left:0}._unlockBtn[data-v-2ccd65f4]{top:0;width:100%;pointer-events:none;padding:calc(var(--spacing)/2);display:flex;justify-content:flex-start}._unlockBtn>*[data-v-2ccd65f4]{pointer-events:auto}',""]),e["default"]=r},4220:function(t,e,a){"use strict";a.r(e);var i=a(8081),o=a.n(i),n=a(3645),s=a.n(n),r=s()(o());r.push([t.id,'._openedPage[data-v-04d84a32]{position:absolute;top:0;left:0;width:100%;height:100%;z-index:10;text-align:center;display:flex;flex-flow:column nowrap;background:var(--c-bodybg);--pagemenu-width:280px}._openedPage.is--editable[data-v-04d84a32]{background:var(--color-publish)}._openedPage>._topMenu[data-v-04d84a32]{flex:0 0 auto}._openedPage>._spreadNavigator[data-v-04d84a32]{flex:1 1 auto}._navBar[data-v-04d84a32]{position:absolute;bottom:0;left:0;height:auto;width:100%;z-index:12;overflow:hidden;display:flex;flex-flow:row nowrap;justify-content:space-between;pointer-events:none}._navBar button[data-v-04d84a32]{pointer-events:auto;display:flex;align-items:center;margin:calc(var(--spacing)/2);padding:calc(var(--spacing)/2);gap:1px;background:hsla(0,0%,100%,.4);-webkit-backdrop-filter:blur(12px);backdrop-filter:blur(12px);border-radius:4px}._breadcrumb[data-v-04d84a32]{padding:calc(var(--spacing)/1)}._topMenu[data-v-04d84a32]{position:relative;z-index:10;padding:0 calc(var(--spacing)*1)}._topMenu--content[data-v-04d84a32]{background:#fff;box-shadow:0 1px 4px rgba(0,0,0,.2);padding:calc(var(--spacing)/2) calc(var(--spacing)*1);display:flex;flex-flow:row wrap;justify-content:space-between;align-items:center}._spreadNavigator[data-v-04d84a32]{overflow:hidden;width:100%;height:100%}._spreadNavigator[data-v-04d84a32]::-webkit-scrollbar{height:18px;width:18px;background-color:transparent}._spreadNavigator[data-v-04d84a32]::-webkit-scrollbar-thumb,._spreadNavigator[data-v-04d84a32]::-webkit-scrollbar-track{border:6px solid hsla(0,0%,100%,0);border-radius:24px;background-clip:padding-box;-webkit-transition:all .4s;transition:all .4s}._spreadNavigator[data-v-04d84a32]::-webkit-scrollbar-track{background-color:transparent}._spreadNavigator[data-v-04d84a32]::-webkit-scrollbar-thumb{background-color:var(--c-noir)}._spreadNavigator[data-v-04d84a32]::-webkit-scrollbar-thumb:hover{background-color:var(--c-gris);border:6px solid hsla(0,0%,100%,0)}._spreadNavigator--content[data-v-04d84a32]{width:100%;height:100%}._pageCont[data-v-04d84a32]{display:flex;flex-flow:row nowrap;width:-moz-max-content;width:max-content}._spreadNavigator--page[data-v-04d84a32]{position:relative;flex:1 1 50%}._spreadNavigator--page[data-v-04d84a32]  ._pagecontent:after{content:"";position:absolute;inset:0;z-index:1000000;background:hsla(0,0%,100%,.6);transition:all .4s cubic-bezier(.19,1,.22,1);pointer-events:none}._spreadNavigator--page.is--active[data-v-04d84a32]{z-index:1}._spreadNavigator--page.is--active[data-v-04d84a32]  ._pagecontent:after{opacity:0}._spreadNavigator--page[data-v-04d84a32]:not(.is--active)  ._pagecontent:after{pointer-events:auto;opacity:1}._spreadNavigator--page ._openAdjacentPageBtn[data-v-04d84a32]{position:absolute;inset:0;width:100%;height:100%;background:transparent;padding:0}._noPage[data-v-04d84a32]{background:rgba(0,0,0,.1)}._sideCont[data-v-04d84a32]{width:var(--pagemenu-width);position:absolute;left:0;top:0;z-index:10;max-height:100%;overflow:auto}._sideCont[data-v-04d84a32]::-webkit-scrollbar{height:18px;width:18px;background-color:transparent}._sideCont[data-v-04d84a32]::-webkit-scrollbar-thumb,._sideCont[data-v-04d84a32]::-webkit-scrollbar-track{border:6px solid hsla(0,0%,100%,0);border-radius:24px;background-clip:padding-box;-webkit-transition:all .4s;transition:all .4s}._sideCont[data-v-04d84a32]::-webkit-scrollbar-track{background-color:transparent}._sideCont[data-v-04d84a32]::-webkit-scrollbar-thumb{background-color:var(--c-noir)}._sideCont[data-v-04d84a32]::-webkit-scrollbar-thumb:hover{background-color:var(--c-gris);border:6px solid hsla(0,0%,100%,0)}._sideCont>._content[data-v-04d84a32]{margin:0 calc(var(--spacing)/4) calc(var(--spacing)*4) 0}._pagePan[data-v-04d84a32]{width:100%;height:100%}',""]),e["default"]=r},7416:function(t,e,a){"use strict";a.r(e);var i=a(8081),o=a.n(i),n=a(3645),s=a.n(n),r=s()(o());r.push([t.id,"._label[data-v-121f451e]{padding:calc(var(--spacing)/4) calc(var(--spacing)/2);margin:calc(var(--spacing)/4);background:rgba(0,0,0,.06);border-radius:4px}",""]),e["default"]=r},6044:function(t,e,a){"use strict";a.r(e);var i=a(8081),o=a.n(i),n=a(3645),s=a.n(n),r=s()(o());r.push([t.id,"._pageMenu[data-v-64fa2648]{margin:2px;background:var(--panel-color);border:var(--panel-borders);box-shadow:var(--panel-shadows);border-radius:var(--panel-radius);text-align:left}._pageMenu--pane[data-v-64fa2648]{padding:calc(var(--spacing)/2) 0;margin:0 calc(var(--spacing)/2)}._pageMenu--pane[data-v-64fa2648]:not(:last-child){margin-bottom:calc(var(--spacing)/2);border-bottom:1px solid var(--active-color)}._activeModulePreview[data-v-64fa2648]{overflow:hidden;margin:0 auto;background:var(--c-noir);width:100%;height:50px;display:flex;justify-content:center}._mediaList[data-v-64fa2648]{font-size:var(--sl-font-size-x-small);padding:0}._mediaList>*[data-v-64fa2648]{display:flex;flex-flow:row nowrap;align-items:center;gap:calc(var(--spacing)/2);cursor:pointer}._mediaList[data-v-64fa2648]>:hover{background:var(--c-gris_clair)}._mediaList[data-v-64fa2648]>:not(:last-child){border-bottom:2px solid var(--c-gris)}._mediaList>* ._preview[data-v-64fa2648]{position:relative;width:50px;height:50px;flex:0 0 50px}._mediaList>* ._preview[data-v-64fa2648]  img{width:100%;height:100%;position:absolute;-o-object-fit:contain;object-fit:contain}._textExtract[data-v-64fa2648]  .ql-editor{padding-bottom:0}._titleRow[data-v-64fa2648]{display:flex;flex-flow:row wrap;align-items:center;justify-content:space-between}._titleRow button[data-v-64fa2648]{font-size:var(--sl-font-size-large)}",""]),e["default"]=r},1142:function(t,e,a){"use strict";a.r(e);var i=a(8081),o=a.n(i),n=a(3645),s=a.n(n),r=s()(o());r.push([t.id,"._pageSettings[data-v-6793dcf2]{background:#fff;max-width:380px;padding:calc(var(--spacing)*1);margin:0 auto calc(var(--spacing)*1)}",""]),e["default"]=r},2905:function(t,e,a){"use strict";a.r(e);var i=a(8081),o=a.n(i),n=a(3645),s=a.n(n),r=s()(o());r.push([t.id,"._allPages[data-v-4ced4740]{flex-flow:row wrap;justify-content:center;gap:calc(var(--spacing)/1)}._allPages[data-v-4ced4740],._page[data-v-4ced4740]{display:flex;align-items:center}._page[data-v-4ced4740]{flex-flow:column nowrap}._spread[data-v-4ced4740]{display:flex;flex-flow:row nowrap}._preview[data-v-4ced4740]{position:relative;overflow:hidden;box-shadow:0 3px 6px rgba(0,0,0,.06);min-width:2em;min-height:2em;background:hsla(0,0%,100%,.2)}._openPage[data-v-4ced4740]{position:absolute;top:0;left:0;width:100%;height:100%;background:hsla(0,0%,100%,.6);color:#000;opacity:0;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);transition:opacity .4s cubic-bezier(.19,1,.22,1)}._openPage[data-v-4ced4740]:active,._openPage[data-v-4ced4740]:focus,._openPage[data-v-4ced4740]:hover{opacity:1}",""]),e["default"]=r},5253:function(t,e,a){"use strict";a.r(e);var i=a(8081),o=a.n(i),n=a(3645),s=a.n(n),r=s()(o());r.push([t.id,"._pagecontainer[data-v-799340e8]{width:calc(var(--page-width));height:calc(var(--page-height));padding:0;transform:scale(var(--zoom));transform-origin:0 0;transition:all .4s cubic-bezier(.19,1,.22,1)}.is--preview ._pagecontainer[data-v-799340e8]{width:calc(var(--page-width)*var(--zoom));height:calc(var(--page-height)*var(--zoom));transform-origin:left top;margin:0 auto;padding:0}._pagecontent[data-v-799340e8]{display:block;position:relative;z-index:0;margin:0;width:var(--page-width,100mm);height:var(--page-height,100mm);background:var(--page-color,#fff);overflow:hidden;box-shadow:0 3px 6px rgba(0,0,0,.16),0 3px 6px rgba(0,0,0,.23);transition:background .4s cubic-bezier(.19,1,.22,1)}._singlePage.is--editable ._pagecontent[data-v-799340e8]{overflow:visible}._grid[data-v-799340e8]{position:absolute;top:0;width:100%;height:100%;pointer-events:none;opacity:.6;z-index:-10000;--c-gridlines:#aaa;--c-gridfiveslines:#111}._margins[data-v-799340e8],._pageBorders[data-v-799340e8]{position:absolute;top:0;width:100%;height:100%;pointer-events:none;stroke-width:2px}._margins[data-v-799340e8]{stroke:#cb68fd}._pagination[data-v-799340e8]{position:absolute;right:var(--pagination-right);left:var(--pagination-left);bottom:var(--pagination-bottom);font-weight:500;line-height:.5;font-size:var(--sl-font-size-large)}",""]),e["default"]=r},3589:function(t,e,a){"use strict";a.r(e);var i=a(8081),o=a.n(i),n=a(3645),s=a.n(n),r=s()(o());r.push([t.id,".yoyoo-ddr{position:absolute}.yoyoo-ddr .resize-handler.tm{left:50%}.yoyoo-ddr .resize-handler.r{top:50%}.yoyoo-ddr .resize-handler.bm{left:50%}.yoyoo-ddr .resize-handler.l{top:50%;cursor:pointer}.yoyoo-ddr .resize-handler,.yoyoo-ddr .rotate-handler{display:none;position:absolute;border:1px solid #607d8b;background:#fff;box-sizing:border-box;border-radius:50%}.yoyoo-ddr .rotate-handler{left:50%;cursor:crosshair}.yoyoo-ddr.active{border:1px dashed #607d8b}.yoyoo-ddr.active>.resize-handler-wrapper>.resize-handler,.yoyoo-ddr.active>.rotate-handler{display:inline-block}.yoyoo-ddr .bl,.yoyoo-ddr .br,.yoyoo-ddr .tl,.yoyoo-ddr .tr{background:#607d8b}",""]),e["default"]=r},3382:function(t,e,a){var i=a(1533);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var o=a(1982).Z;o("9124acb2",i,!0,{sourceMap:!1,shadowMode:!1})},5406:function(t,e,a){var i=a(7005);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var o=a(1982).Z;o("59447ba2",i,!0,{sourceMap:!1,shadowMode:!1})},5890:function(t,e,a){var i=a(4220);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var o=a(1982).Z;o("72377bac",i,!0,{sourceMap:!1,shadowMode:!1})},556:function(t,e,a){var i=a(7416);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var o=a(1982).Z;o("55d140f5",i,!0,{sourceMap:!1,shadowMode:!1})},3786:function(t,e,a){var i=a(6044);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var o=a(1982).Z;o("9d02bea6",i,!0,{sourceMap:!1,shadowMode:!1})},7145:function(t,e,a){var i=a(1142);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var o=a(1982).Z;o("40467ff0",i,!0,{sourceMap:!1,shadowMode:!1})},4640:function(t,e,a){var i=a(2905);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var o=a(1982).Z;o("4b741657",i,!0,{sourceMap:!1,shadowMode:!1})},2627:function(t,e,a){var i=a(5253);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var o=a(1982).Z;o("19bfc455",i,!0,{sourceMap:!1,shadowMode:!1})},2046:function(t,e,a){var i=a(3589);i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);var o=a(1982).Z;o("7060f4ae",i,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=324.js.map