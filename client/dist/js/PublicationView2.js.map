{"version":3,"file":"js/PublicationView2.js","mappings":"qIAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,gBAAgB,CAACF,EAAG,wBAAwB,CAACG,MAAM,CAAC,KAAOP,EAAIQ,sBAAsBC,GAAG,CAAC,YAAc,SAASC,GAAQ,OAAOV,EAAIW,MAAM,cAAeD,IAAS,MAAQ,SAASA,GAAQ,OAAOV,EAAIW,MAAM,cAAc,IAC3UC,EAAkB,GCetB,GACAC,MAAAA,CACAC,iBAAAA,QAEAC,WAAAA,GACAC,OACA,UAEA,kBACAC,kBACAC,MAAAA,GACAC,SAAAA,CACAX,uBACA,8CACA,2BAGAY,QAAAA,ICjCgR,I,oBCQ5QC,GAAY,OACd,EACAtB,EACAa,GACA,EACA,KACA,WACA,MAIF,EAAeS,EAAiB,S,kECnBhC,IAAItB,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,qBAAqBgB,MAAM,CAC7I,YAAatB,EAAIuB,WAChB,CAAEvB,EAAIwB,UAAkC,iBAAtBxB,EAAIyB,cAAkCrB,EAAG,MAAM,CAACE,YAAY,gBAAgB,CAACF,EAAG,OAAO,CACpGJ,EAAI0B,WAAWC,eAAe,WACN,UAAxB3B,EAAI4B,iBACoB,UAAxB5B,EAAI4B,gBACJxB,EAAG,SAAS,CAACE,YAAY,wBAAwBC,MAAM,CAAC,KAAO,UAAUE,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOV,EAAIW,MAAM,aAAa,CAACP,EAAG,MAAM,CAACyB,YAAY,CAAC,UAAY,iBAAiBtB,MAAM,CAAC,MAAQ,6BAA6B,QAAU,gBAAgB,CAACH,EAAG,OAAO,CAACyB,YAAY,CAAC,KAAO,gBAAgBtB,MAAM,CAAC,EAAI,8LAA8LP,EAAI8B,OAAO1B,EAAG,MAAM,CAACE,YAAY,YAAY,CAACF,EAAG,SAAS,CAACE,YAAY,YAAYgB,MAAM,CACjlB,aAActB,EAAI+B,oBAClBxB,MAAM,CAAC,KAAO,UAAUE,GAAG,CAAC,MAAQ,SAASC,GAAQA,EAAOsB,kBAAkBhC,EAAI+B,oBAAsB/B,EAAI+B,sBAAsB,CAAC3B,EAAG,MAAM,CAACyB,YAAY,CAAC,KAAO,gBAAgBtB,MAAM,CAAC,QAAU,MAAM,MAAQ,6BAA6B,cAAc,+BAA+B,EAAI,MAAM,EAAI,MAAM,MAAQ,KAAK,OAAS,KAAK,QAAU,YAAY,YAAY,aAAa,CAACH,EAAG,SAAS,CAACG,MAAM,CAAC,GAAK,KAAK,GAAK,KAAK,EAAI,OAAOH,EAAG,SAAS,CAACG,MAAM,CAAC,GAAK,KAAK,GAAK,KAAK,EAAI,OAAOH,EAAG,SAAS,CAACG,MAAM,CAAC,GAAK,KAAK,GAAK,KAAK,EAAI,WAAYP,EAAsB,mBAAEI,EAAG,MAAM,CAACE,YAAY,kBAAkB,CAACF,EAAG,YAAY,CAACG,MAAM,CAAC,QAAU,UAAU,KAAO,QAAQ,KAAO,KAAK,CAACP,EAAIiC,GAAG,IAAIjC,EAAIkC,GAAGlC,EAAImC,GAAI,gBAAmBnC,EAAIoC,YAAuB,cAAK,OAAOhC,EAAG,MAAM,CAACE,YAAY,cAAc,CAACF,EAAG,SAAS,CAACE,YAAY,WAAWC,MAAM,CAAC,KAAO,SAAS,UAAYP,EAAIoC,YAAYC,MAAiC,MAAzBrC,EAAIoC,YAAYC,MAAc5B,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOV,EAAIsC,WAAW,CAAED,KAAM,SAAU,CAACrC,EAAIiC,GAAG,YAAY7B,EAAG,SAAS,CAACE,YAAY,WAAWC,MAAM,CAAC,KAAO,SAAS,SAAoC,OAAzBP,EAAIoC,YAAYC,MAAe5B,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOV,EAAIsC,WAAW,CAAED,KAAM,UAAW,CAACrC,EAAIiC,GAAG,WAAW7B,EAAG,SAAS,CAACE,YAAY,WAAWC,MAAM,CAAC,KAAO,SAAS,SAAoC,KAAzBP,EAAIoC,YAAYC,MAAa5B,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOV,EAAIsC,WAAW,CAAED,KAAM,QAAS,CAACrC,EAAIiC,GAAG,WAAW7B,EAAG,SAAS,CAACE,YAAY,WAAWC,MAAM,CAAC,KAAO,SAAS,SAAoC,OAAzBP,EAAIoC,YAAYC,MAAe5B,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOV,EAAIsC,WAAW,CAAED,KAAM,UAAW,CAACrC,EAAIiC,GAAG,aAAa7B,EAAG,MAAM,CAACE,YAAY,cAAc,CAACF,EAAG,SAAS,CAACE,YAAY,WAAWC,MAAM,CAAC,KAAO,SAAS,UAAYP,EAAIoC,YAAYG,OAAmC,SAA1BvC,EAAIoC,YAAYG,OAAkB9B,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOV,EAAIsC,WAAW,CAAEC,MAAO,YAAa,CAACnC,EAAG,UAAU,CAACG,MAAM,CAAC,KAAO,kBAAkB,GAAGH,EAAG,SAAS,CAACE,YAAY,WAAWC,MAAM,CAAC,KAAO,SAAS,SAAqC,WAA1BP,EAAIoC,YAAYG,OAAoB9B,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOV,EAAIsC,WAAW,CAAEC,MAAO,cAAe,CAACnC,EAAG,UAAU,CAACG,MAAM,CAAC,KAAO,mBAAmB,GAAGH,EAAG,SAAS,CAACE,YAAY,WAAWC,MAAM,CAAC,KAAO,SAAS,SAAqC,UAA1BP,EAAIoC,YAAYG,OAAmB9B,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOV,EAAIsC,WAAW,CAAEC,MAAO,aAAc,CAACnC,EAAG,UAAU,CAACG,MAAM,CAAC,KAAO,gBAAgB,KAAKH,EAAG,MAAM,CAACE,YAAY,cAAc,CAACF,EAAG,SAAS,CAACE,YAAY,WAAWC,MAAM,CAAC,KAAO,UAAUE,GAAG,CAAC,MAAQT,EAAIwC,kBAAkB,CAACxC,EAAIiC,GAAG,IAAIjC,EAAIkC,GAAGlC,EAAImC,GAAG,cAAc,OAAO/B,EAAG,SAAS,CAACE,YAAY,WAAWC,MAAM,CAAC,KAAO,UAAUE,GAAG,CAAC,MAAQT,EAAIyC,eAAe,CAACzC,EAAIiC,GAAG,IAAIjC,EAAIkC,GAAGlC,EAAImC,GAAG,WAAW,UAAU,GAAGnC,EAAI8B,OAAO1B,EAAG,OAAO,CACzmFJ,EAAI0B,WAAWC,eAAe,aACN,SAAxB3B,EAAI4B,iBACoB,UAAxB5B,EAAI4B,gBACJxB,EAAG,SAAS,CAACE,YAAY,uBAAuBC,MAAM,CAAC,KAAO,UAAUE,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOV,EAAIW,MAAM,eAAe,CAACP,EAAG,MAAM,CAACyB,YAAY,CAAC,UAAY,iBAAiBtB,MAAM,CAAC,MAAQ,6BAA6B,QAAU,gBAAgB,CAACH,EAAG,OAAO,CAACyB,YAAY,CAAC,KAAO,gBAAgBtB,MAAM,CAAC,EAAI,kMAAkMP,EAAI8B,SAAS9B,EAAI8B,KAAK1B,EAAG,MAAM,CAACE,YAAY,WAAWoC,MAAO1C,EAAgB,cAAG,CAAkC,WAAhCA,EAAIoC,YAAYO,YAA0BvC,EAAG,eAAe,CAACG,MAAM,CAAC,YAAcP,EAAIoC,YAAY,SAAWpC,EAAIwB,SAAS,QAAUxB,EAAI4C,QAAQ,cAAgB5C,EAAIyB,cAAc,qBAAuBzB,EAAI6C,sBAAsBpC,GAAG,CAAC,WAAaT,EAAIsC,WAAW,OAAStC,EAAIyC,gBAAiD,aAAhCzC,EAAIoC,YAAYO,YAA4BvC,EAAG,iBAAiB,CAACG,MAAM,CAAC,YAAcP,EAAIoC,YAAY,QAAUpC,EAAI4C,QAAQ,SAAW5C,EAAIwB,YAA6C,SAAhCxB,EAAIoC,YAAYO,aAA0B3C,EAAI8C,YAAa1C,EAAG,uBAAuB,CAAC2C,IAAI,WAAWxC,MAAM,CAAC,KAAOP,EAAI8C,YAAYE,MAAM,QAAUhD,EAAI8C,YAAYG,SAAS,mBAAqBjD,EAAIkD,IAAI,eAAgB,EAAM,SAAWlD,EAAIwB,UAAUf,GAAG,CAAC,YAAc,SAASC,GAAQ,OAAOV,EAAIW,MAAM,cAAeD,IAAS,gBAAkB,SAASA,GAAQ,OAAOV,EAAIW,MAAM,kBAAmBD,IAAS,mBAAqB,SAASA,GAAQ,OAAOV,EAAIW,MAAM,qBAAsBD,OAAaV,EAAY,SAAE,CAACI,EAAG,MAAM,CAACG,MAAM,CAAC,QAAU,cAAc,oBAAsB,OAAO,MAAQ,+BAA+B,CAAkC,aAAhCP,EAAIoC,YAAYO,YAA4BvC,EAAG,SAAS,CAACG,MAAM,CAAC,GAAK,KAAK,GAAK,KAAK,EAAI,GAAMP,EAAIoC,YAAYe,cAAgBnD,EAAIoD,cAAiB,EAAE,gBAAgB,wBAAyD,cAAhCpD,EAAIoC,YAAYO,YAA6BvC,EAAG,OAAO,CAACG,MAAM,CAAC,EAAKP,EAAIoC,YAAYe,cAAgBnD,EAAIoD,cAAiB,EAAE,EAAKpD,EAAIoC,YAAYe,cAAgBnD,EAAIoD,cAAiB,EAAE,MAAQ,IAAOpD,EAAIoC,YAAYe,cAAgBnD,EAAIoD,cAAiB,EAAE,OAAS,IAAOpD,EAAIoC,YAAYe,cAAgBnD,EAAIoD,cAAiB,EAAE,gBAAgB,qBAAqB,GAAKpD,EAAIqD,aAAe,GAAK,EAAE,GAAKrD,EAAIqD,aAAe,GAAK,KAAsC,SAAhCrD,EAAIoC,YAAYO,YAAwBvC,EAAG,IAAI,CAACA,EAAG,OAAO,CAACG,MAAM,CAAC,MAAQ,MAAM,OAAS,MAAM,gBAAgB,qBAAqB,OAAS,OAAO,GAAKP,EAAIqD,aAAe,GAAK,EAAE,GAAKrD,EAAIqD,aAAe,GAAK,KAAKjD,EAAG,OAAO,CAACG,MAAM,CAAC,GAAMP,EAAIoC,YAAYe,cAAgBnD,EAAIoD,cAAiB,GAAK,EAAE,GAAK,KAAK,GAAK,KAAQpD,EAAIoC,YAAYe,cAAgBnD,EAAIoD,cAAiB,GAAK,GAAG,GAAK,KAAK,gBAAgB,0BAA2D,UAAhCpD,EAAIoC,YAAYO,YAAyBvC,EAAG,IAAI,CAACA,EAAG,OAAO,CAACG,MAAM,CAAC,MAAQ,MAAM,OAAS,MAAM,gBAAgB,qBAAqB,OAAS,OAAO,GAAKP,EAAIqD,aAAe,GAAK,EAAE,GAAKrD,EAAIqD,aAAe,GAAK,KAAKjD,EAAG,OAAO,CAACG,MAAM,CAAC,GAAMP,EAAIoC,YAAYe,cAAgBnD,EAAIoD,cAAiB,GAAK,EAAE,GAAK,KAAK,GAAK,KAAQpD,EAAIoC,YAAYe,cAAgBnD,EAAIoD,cAAiB,GAAK,GAAG,GAAK,KAAK,gBAAgB,wBAAwBhD,EAAG,IAAI,CAACG,MAAM,CAAC,UAAa,8BAAgC,KAAQP,EAAIoC,YAAYe,cAAgBnD,EAAIoD,cAAiB,GAAK,IAAM,QAAS,oBAAsB,KAAK,CAAChD,EAAG,OAAO,CAACG,MAAM,CAAC,GAAK,IAAI,GAAK,IAAI,GAAK,MAAM,GAAK,MAAM,gBAAgB,wBAAwBH,EAAG,OAAO,CAACG,MAAM,CAAC,GAAK,IAAI,GAAK,IAAI,GAAK,MAAM,GAAK,KAAK,gBAAgB,4BAA4BP,EAAI8B,QAAyC,iBAAhC9B,EAAIoC,YAAYO,iBAAgC,EAAOvC,EAAG,QAAQ,CAACJ,EAAIiC,GAAGjC,EAAIkC,GAAGlC,EAAImC,GAAG,wBAAwB,MACnjHvB,EAAkB,GCblB,G,wBAAS,WAAa,IAAIZ,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,aAAa,CAACG,MAAM,CAAC,KAAO,YAAY,KAAO,WAAW,CAACH,EAAG,MAAM,CAACkD,IAAItD,EAAIuD,mBAAqB,WAAa,SAASjD,YAAY,gBAAgBgB,MAAM,CACvP,qBAAsBtB,EAAIuD,oBAC1Bb,MAAQ,uBAA0B1C,EAAIwD,mBAAyB,QAAK,CAACpD,EAAG,MAAM,CAACE,YAAY,cAAc,CAACN,EAAIyD,GAAIzD,EAAsB,oBAAE,SAAS0D,EAAkBC,GAAO,OAAOvD,EAAG,MAAM,CAACkD,IAAII,EAAkBE,cAAcZ,OAAS,OAAO1C,YAAY,mBAAmBoC,MAAO1C,EAAI6D,UAAU,CAAEH,kBAAmBA,KAAuB,CAACtD,EAAG,eAAe,CAACG,MAAM,CAAC,KAAOmD,EAAkBE,cAAc,WAA6B,YAAhB5D,EAAI4C,QAAwB,IAAM,KAAK,QAAU5C,EAAI4C,QAAQ,uBAAyC,YAAhB5C,EAAI4C,WAA0B5C,EAAY,SAAEI,EAAG,MAAM,CAACE,YAAY,WAAW,EAC1jBN,EAAIuD,oBACoB,iBAAtBvD,EAAIyB,gBACFzB,EAAI8D,uCAENJ,EAAkBK,WACa,UAAhCL,EAAkBK,UAEpB3D,EAAG,SAAS,CAACE,YAAY,eAAeC,MAAM,CAAC,KAAO,UAAUE,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOV,EAAIgE,SAAS,CAAEL,MAAOA,EAAOM,IAAK,CAAEF,UAAW,cAAgB,CAAC/D,EAAIiC,GAAG,IAAIjC,EAAIkC,GAAGlC,EAAImC,GAAG,qBAAqB,OAAOnC,EAAI8B,MAC5N9B,EAAIuD,oBACoB,iBAAtBvD,EAAIyB,gBACFzB,EAAI8D,uCACuB,YAAhCJ,EAAkBK,UAClB3D,EAAG,SAAS,CAACE,YAAY,eAAeC,MAAM,CAAC,KAAO,UAAUE,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOV,EAAIgE,SAAS,CAAEL,MAAOA,EAAOM,IAAK,CAAEF,UAAW,gBAAkB,CAAC/D,EAAIiC,GAAG,IAAIjC,EAAIkC,GAAGlC,EAAImC,GAAG,uBAAuB,OAAOnC,EAAI8B,KAAM9B,EAAsB,mBAAEI,EAAG,SAAS,CAACE,YAAY,eAAeC,MAAM,CAAC,KAAO,UAAUE,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOV,EAAIkE,mBAAmBP,MAAU,CAAC3D,EAAIiC,GAAG,IAAIjC,EAAIkC,GAAGlC,EAAImC,GAAG,WAAW,OAAOnC,EAAI8B,OAAO9B,EAAI8B,MAAM,MACzc9B,EAAIwB,YACFxB,EAAI6C,sBACJ7C,EAAIwD,mBAAmBW,OAASnE,EAAI6C,sBACtCzC,EAAG,MAAM,CAACE,YAAY,oBAAoB,CAAGN,EAAIoE,kBAAkMhE,EAAG,cAAc,CAACG,MAAM,CAAC,iBAAmBP,EAAIc,kBAAkBL,GAAG,CAAC,YAAcT,EAAIqE,YAAY,MAAQ,SAAS3D,GAAQV,EAAIoE,mBAAoB,MAApUhE,EAAG,iBAAiB,CAACE,YAAY,kBAAkBC,MAAM,CAAC,KAAO,mBAAmB,MAAQP,EAAImC,GAAG,cAAc1B,GAAG,CAAC,MAAQ,SAASC,GAAQV,EAAIoE,mBAAoB,MAAwKhE,EAAG,aAAa,CAACG,MAAM,CAAC,KAAO,WAAW,SAAW,MAAM,CACzcP,EAAIsE,eACJtE,EAAIwD,mBAAmBW,OAASnE,EAAI6C,qBACpCzC,EAAG,MAAM,CAACE,YAAY,aAAa,CAACF,EAAG,WAAW,CAACK,GAAG,CAAC,aAAeT,EAAIqE,gBAAgB,GAAGrE,EAAI8B,QAAQ,GAAG9B,EAAI8B,MAAM,SAChI,EAAkB,G,oBCoFtB,GACAjB,MAAAA,CACAuB,YAAAA,OACAZ,SAAAA,QACAoB,QAAAA,CACA2B,KAAAA,OACAC,QAAAA,QAEA/C,cAAAA,OACAoB,qBAAAA,CAAAA,QAAAA,SAEA9B,WAAAA,CAGA0D,YAAAA,EAAAA,GAEAzD,OACA,OACAoD,mBAAAA,EACAE,eAAAA,IAGAI,YACAC,UACA,wDACA,uDAEA1D,gBACA,yDACA,wDAEAC,MAAAA,GACAC,SAAAA,CACAL,mBACA,+CAEAgD,uCAAA,MACA,6CAEA,8FACA,OACAc,KAAAA,MAAAA,GAAAA,KACAA,KAAAA,MAAAA,KAAAA,YAAAA,OAAAA,KAAAA,YAAAA,MAAAA,KAGApB,qBACA,sCACA,wCACA,6BACAqB,aAAAA,EACA/D,iBAAAA,KAAAA,mBAGA,2BAAA8C,cAAAA,OAPA,IAUAL,qBACA,0CAGAnC,QAAAA,CACAiD,aAAAA,qBAAAS,IACA,+CACAC,EAAAA,KAAAA,CAAAC,KAAAA,IACA,yBAAAD,cAAAA,IACA,2BAEAb,mBAAAA,GACA,+CACAa,EAAAA,OAAAA,EAAAA,GAEA,kCACA,yBAAAA,cAAAA,KAEAf,UAAAA,MAAAL,EAAAA,IAAAM,IACA,+CACAgB,OAAAA,OAAAA,EAAAA,GAAAA,GACA,yBAAAF,cAAAA,KAEAlB,WAAAA,kBAAAH,IACA,SAEA,OADA7C,EAAAA,gBAAAA,EAAAA,WAAAA,QACA,GAEAqE,eACA,uBAEAC,eACA,yBCnM0R,I,oBCQtR9D,GAAY,OACd,EACA,EACA,GACA,EACA,KACA,WACA,MAIF,EAAeA,EAAiB,QCnB5B,EAAS,WAAa,IAAIrB,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACJ,EAAIiC,GAAG,oBAAoBjC,EAAIyD,GAAIzD,EAAU,QAAE,SAASoF,GAAO,OAAOhF,EAAG,MAAM,CAACkD,IAAI8B,EAAMpC,OAAO,CAAC,EAAQ5C,EAAG,eAAe,CAACG,MAAM,CAAC,KAAO6E,EAAM,WAAa,KAAK,QAAU,UAAUpF,EAAI8B,MAAM,OAAM,IAC7S,EAAkB,GCatB,GACAjB,MAAAA,CACAuB,YAAAA,OACAiD,OAAAA,OAEAtE,WAAAA,GACAC,OACA,UAEA0D,YACAC,YACA1D,kBACAC,MAAAA,GACAC,SAAAA,GACAC,QAAAA,IC5B4R,ICOxR,GAAY,OACd,EACA,EACA,GACA,EACA,KACA,WACA,MAIF,EAAe,EAAiB,QCwRhC,GACAP,MAAAA,CACAuB,YAAAA,OACAR,gBAAAA,OACAJ,SAAAA,QACA4B,cAAAA,OACAC,aAAAA,OACAT,QAAAA,OACAnB,cAAAA,OACAoB,qBAAAA,CACA0B,KAAAA,CAAAA,QAAAA,QACAC,SAAAA,IAGAzD,WAAAA,CACAuE,aAAAA,EAEAC,eAAAA,GAEAvE,OACA,OACAe,oBAAAA,IAGA2C,YACAC,UACA,mBACA,kDACA,wBAEA,mBACA,gDACA,sBAEA,mBACA,6CACA,oBAGA1D,gBACA,oBACA,kDACA,wBAEA,oBACA,gDACA,sBAEA,oBACA,6CACA,oBAGAC,MAAAA,GACAC,SAAAA,CACAqE,uBACA,iDAEAjE,WACA,uDACA,+BAGAuB,cACA,IACA,gCACA,0CAEA,SACA,0CACA,MACA,+CACA,4BAAA+B,aAAAA,EAAA/D,iBAAAA,IAEA,UAEA2E,eACA,QASA,MARA,oCACA,oCACA,gCACA,wCACA,mCACA,oCACA,gCACA,wCACA,CACA,4CACA,4BAIArE,QAAAA,CACA,0BACA,UACAkB,WAAAA,CACA0C,KAAAA,KAAAA,YAAAA,MACAU,SAAAA,IAEAC,OAAAA,IAEA,MADA,mCACA,MAGAC,oBAMA,qBACA,4DAGA,wBACA,SACA,sCACAC,EAAAA,GAAAA,KAAAA,YAAAA,GAAAA,GAAAA,GACAA,EAAAA,GAAAA,KAAAA,YAAAA,GAAAA,GAAAA,IAGA,oDACAC,UAAAA,KAAAA,YACAD,qBAAAA,IAEA,2BAEA,2BAiBA,UACAE,WAAAA,CACAf,KAAAA,KAAAA,YAAAA,QAEAW,OAAAA,IAEA,MADA,mCACA,KAGA,wBCnc+R,ICQ3R,G,SAAY,OACd,EACA5F,EACAa,GACA,EACA,KACA,WACA,OAIF,EAAe,EAAiB,S,iECnBhC,IAAIb,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,cAAcgB,MAAM,CACtI,cAA+B,YAAhBtB,EAAI4C,QACnB,eAAgB5C,EAAIwB,WACnB,CAACpB,EAAG,MAAM,CAACE,YAAY,iBAAiBoC,MAAO1C,EAAe,aAAG,CAACI,EAAG,MAAM,CAACE,YAAY,gBAAgB,CAAEN,EAAIwB,UAAYxB,EAAIgG,UAAW5F,EAAG,MAAM,CAACE,YAAY,QAAQC,MAAM,CAAC,MAAQ,OAAO,OAAS,OAAO,MAAQ,+BAA+B,CAACH,EAAG,OAAO,CAACA,EAAG,UAAU,CAACG,MAAM,CAAC,GAAK,YAAY,MAAQP,EAAIiG,SAAS,OAASjG,EAAIiG,SAAS,aAAe,mBAAmB,CAAC7F,EAAG,OAAO,CAACG,MAAM,CAAC,EAAK,KAAOP,EAAIiG,SAAW,cAAgBjG,EAAIiG,SAAU,KAAO,OAAO,OAAS,qBAAqB,YAAc,SAAS7F,EAAG,UAAU,CAACG,MAAM,CAAC,GAAK,OAAO,MAAuB,EAAfP,EAAIiG,SAAa,OAAwB,EAAfjG,EAAIiG,SAAa,aAAe,mBAAmB,CAAC7F,EAAG,OAAO,CAACG,MAAM,CAAC,MAAuB,EAAfP,EAAIiG,SAAa,OAAwB,EAAfjG,EAAIiG,SAAa,KAAO,qBAAqB7F,EAAG,OAAO,CAACG,MAAM,CAAC,EAAK,KAAuB,EAAfP,EAAIiG,SAAgB,cAAgC,EAAfjG,EAAIiG,SAAe,KAAO,OAAO,OAAS,0BAA0B,YAAc,WAAW7F,EAAG,OAAO,CAACG,MAAM,CAAC,MAAQ,OAAO,OAAS,OAAO,KAAO,kBAAkBP,EAAI8B,KAAK9B,EAAIyD,GAAIzD,EAAgB,cAAE,SAASoC,GAAa,OAAOhC,EAAG,eAAe,CAACkD,IAAIlB,EAAYY,MAAM1C,YAAY,QAAQC,MAAM,CAAC,QAAUP,EAAI4C,QAAQ,YAAcR,EAAY,cAAgBpC,EAAIoD,cAAc,SAAWpD,EAAIgG,WAAahG,EAAIkG,aAAelG,EAAIiG,SAAW,EAAE,MAAQjG,EAAImG,MAAM,SAAWnG,EAAIwB,SAAS,UAAYxB,EAAIoG,cAAcpD,QAAUZ,EAAYY,YAAYhD,EAAIwB,UAAYxB,EAAIqG,UAAWjG,EAAG,MAAM,CAACE,YAAY,WAAWC,MAAM,CAAC,MAAQ,OAAO,OAAS,OAAO,MAAQ,6BAA6B,KAAO,gBAAgB,CAACH,EAAG,OAAO,CAACG,MAAM,CAAC,EAAIP,EAAIsG,QAAQtG,EAAIqG,UAAUE,MAAM,EAAIvG,EAAIsG,QAAQtG,EAAIqG,UAAUG,KAAK,MAAQxG,EAAIsG,QAAQtG,EAAIyG,WAAazG,EAAIqG,UAAUE,KAAOvG,EAAIqG,UAAUK,OAAO,OAAS1G,EAAIsG,QAAQtG,EAAI2G,YAAc3G,EAAIqG,UAAUG,IAAMxG,EAAIqG,UAAUO,aAAa5G,EAAI8B,KAAM9B,EAAI6G,aAAe7G,EAAI8G,iBAAmB9G,EAAI+G,sBAAwB,EAAG3G,EAAG,MAAM,CAACE,YAAY,cAAcoC,MAAO1C,EAAqB,mBAAG,CAACA,EAAIiC,GAAG,IAAIjC,EAAIkC,GAAGlC,EAAI+G,uBAAuB,OAAO/G,EAAI8B,KAAM9B,EAAIwB,UAAYxB,EAAIqG,UAAWjG,EAAG,MAAM,CAACE,YAAY,eAAeC,MAAM,CAAC,MAAQ,OAAO,OAAS,OAAO,MAAQ,6BAA6B,KAAO,gBAAgB,CAACH,EAAG,OAAO,CAACG,MAAM,CAAC,EAAI,IAAI,EAAI,IAAI,MAAQP,EAAIsG,QAAQtG,EAAIyG,YAAY,OAASzG,EAAIsG,QAAQtG,EAAI2G,aAAa,OAAS,aAAa3G,EAAI8B,MAAM,QAC/uElB,EAAkB,GCJlB,EAAS,WAAa,IAAIZ,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACkD,IAAItD,EAAIgH,cAAc1G,YAAY,gBAAgBgB,MAAM,CAC9J,cAAyC,IAA3BtB,EAAIoC,YAAY6E,OAC9B,eAAgBjH,EAAIwB,SACpB,aAAcxB,EAAIwB,UAAYxB,EAAIkH,UAClC,kBAAmBlH,EAAImH,kBACvB,kBAAmBnH,EAAIwB,UACvBkB,MAAO1C,EAAkB,eAAEO,MAAM,CAAC,OAASP,EAAIwB,UAC/CxB,EAAIkH,YACuB,IAA3BlH,EAAIoC,YAAY6E,SACU,IAA1BjH,EAAImH,kBAA2B,MAAQnH,EAAIoH,UAAU,QAAS,EAA8B,YAAcpH,EAAIqH,aAAa,YAAc,GAAG,KAAOrH,EAAIsH,KAAK,GAAKtH,EAAIoC,YAAYY,MAAM,KAAOhD,EAAImG,OAAO1F,GAAG,CAAC,UAAYT,EAAIuH,UAAU,KAAOvH,EAAIwH,OAAO,QAAUxH,EAAIyH,QAAQ,YAAczH,EAAI0H,YAAY,UAAY1H,EAAI2H,UAAU,UAAY3H,EAAI4H,YAAY,CAACxH,EAAG,OAAO,CAACE,YAAY,aAAaG,GAAG,CAAC,UAAYT,EAAI6H,UAAU,SAAW7H,EAAI8H,WAAW,CAAC1H,EAAG,oBAAoB,CAACE,YAAY,yBAAyBoC,MAAO1C,EAAiB,cAAEO,MAAM,CAAC,YAAcP,EAAIoC,YAAY,SAAWpC,EAAIwB,UAAYxB,EAAIkH,UAAU,aAAelH,EAAI+H,WAAW/H,EAAIoC,YAAY4F,gBAAkB,EAAE,QAAUhI,EAAI4C,QAAQ,cAAgB,eAAe,qBAAuB,EAAE,cAAgB5C,EAAIoD,eAAe3C,GAAG,CAAC,UAAYT,EAAIiI,kBAAkB,gBAAkBjI,EAAIkI,gBAAgB,mBAAqBlI,EAAImI,uBAAuB,GAAInI,EAAY,SAAEI,EAAG,MAAM,CAACE,YAAY,cAAc,EAA6B,IAA3BN,EAAIoC,YAAY6E,OAAiB7G,EAAG,SAAS,CAACE,YAAY,sEAAsEC,MAAM,CAAC,KAAO,UAAUE,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOV,EAAIoI,YAAY,CAAChI,EAAG,UAAU,CAACG,MAAM,CAAC,KAAO,WAAW,GAAGP,EAAI8B,MACpsC9B,EAAIwB,WACJxB,EAAIkH,WACHlH,EAAImH,mBACHnH,EAAIoC,YAAY6E,SAAqC,IAA3BjH,EAAIoC,YAAY6E,OAC0KjH,EAAI8B,KAA1N1B,EAAG,SAAS,CAACE,YAAY,sEAAsEC,MAAM,CAAC,KAAO,UAAUE,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOV,EAAIqI,UAAU,CAACjI,EAAG,UAAU,CAACG,MAAM,CAAC,KAAO,aAAa,KAAcP,EAAI8B,QACzO,EAAkB,G,gDCdtB,MAAMwG,EACJC,YAAYC,GACVvI,KAAKwI,QAAUD,EAGjBE,WACE,MAAQ,UAASzI,KAAKwI,QAAQE,KAAK,SAGjCxE,aACF,OAAOlE,KAAKwI,QAAQtE,OAGtByE,IAAIC,GACF,GAAIA,aAAkBP,GAAUrI,KAAKkE,SAAW0E,EAAO1E,OACrD,OAAOlE,KAAKwI,QACTK,KAAI,CAACC,EAAMpF,IAAUoF,EAAOF,EAAOJ,QAAQ9E,KAC3CqF,QAAO,CAACC,EAAGC,IAAMD,EAAIC,IAE1B,MAAMC,MAAM,8CAGdC,IAAIzF,GACF,OAAO1D,KAAKwI,QAAQ9E,IAIxB,QCzBA,MAAM0F,EACJd,YAAYe,GACVrJ,KAAKwI,QAAUa,EAGjBC,aAAaC,GACX,OAAO,IAAIH,EACT,IAAII,MAAMD,EAAM,IAAIE,KAAK,MAAMZ,KAAI,IAAM,IAAIW,MAAMD,EAAM,IAAIE,KAAK,MAItEC,UACE,OAAOC,KAAKC,MAAMD,KAAKE,UAAU7J,KAAKwI,UAGxCC,WACE,MACE,YAAczI,KAAKwI,QAAQK,KAAKC,GAASA,EAAKJ,KAAK,OAAMA,KAAK,MAAQ,KAI1EoB,OACE,OAAO9J,KAAKwI,QAAQtE,OAGtB6F,OACE,OAAO/J,KAAKwI,QAAQ,GAAGtE,OAGzB8F,UAAUC,GACR,OAAO,IAAI5B,EAAOrI,KAAKwI,QAAQyB,GAAKC,MAAM,IAG5CC,UAAUC,GACR,IAAIC,EAAI,IAAIb,MAAMxJ,KAAK8J,QAAQL,KAAK,GAIpC,OAHAzJ,KAAKwI,QAAQ8B,SAAQ,CAACxB,EAAMpF,KAC1B2G,EAAE3G,GAASoF,EAAKsB,MAEX,IAAI/B,EAAOgC,GAGpB1B,IAAI0B,GACF,GAAIA,aAAahC,GAAUrI,KAAK+J,SAAWM,EAAEnG,OAC3C,OAAO,IAAImE,EACT,IAAImB,MAAMa,EAAEnG,QAAQuF,KAAK,MAAMZ,KAAI,CAACC,EAAMpF,IACjC1D,KAAKgK,UAAUtG,GAAOiF,IAAI0B,MAIvC,GAAIA,aAAajB,GAAUpJ,KAAK+J,SAAWM,EAAEP,OAAQ,CACnD,IAGIS,EAHAR,EAAOM,EAAEN,OACXD,EAAOO,EAAEP,OACPU,EAAYpB,EAAOqB,MAAM,CAACX,EAAMC,IAEpC,IAAK,IAAIW,EAAI,EAAGA,EAAIX,EAAMW,IAAK,CAC7BH,EAAKvK,KAAK2I,IAAI0B,EAAEF,UAAUO,IAC1B,IAAK,IAAIC,EAAI,EAAGA,EAAIb,EAAMa,IACxBH,EAAUhC,QAAQmC,GAAGD,GAAKH,EAAGpB,IAAIwB,GAGrC,OAAOH,EAET,MAAMtB,MAAM,8CAAgDmB,GAG9DlB,IAAIc,EAAKG,GACP,OAAOpK,KAAKwI,QAAQyB,GAAKG,GAG3BQ,IACE,OAAO,IAAIxB,EACT,IAAII,MAAMxJ,KAAK+J,QAAQN,KAAK,MAAMZ,KAAI,CAACgC,EAAGC,IACjC,IAAItB,MAAMxJ,KAAK8J,QAAQL,KAAK,GAAGZ,KAAI,CAACgC,EAAGE,IACrC/K,KAAKmJ,IAAI4B,EAAUD,SAOpC,QC7EO,MAAME,EAAW,CACtBC,GAAI,EACJC,GAAI,EACJC,GAAI,EACJC,EAAG,EACHC,GAAI,EACJC,GAAI,EACJC,GAAI,EACJC,EAAG,GAGQC,EAAkB,CAC7BJ,GAAI,EACJC,GAAI,EACJC,GAAI,EACJC,EAAG,EACHP,GAAI,EACJC,GAAI,EACJC,GAAI,EACJC,EAAG,GAGQM,EAAY,CACvBT,GAAI,EACJC,GAAI,EACJC,GAAI,EACJC,EAAG,EACHC,GAAI,EACJC,GAAI,EACJC,GAAI,EACJC,EAAG,GAGQG,EAAW,CACtBP,EAAG,EACHI,EAAG,GAEQI,EAAY,CACvBN,GAAI,EACJJ,GAAI,GAEOW,EAAQ,CACnBN,GAAI,EACJJ,GAAI,EACJK,EAAG,EACHJ,EAAG,GAGE,SAASU,EAAQC,GACtB,OAAQA,EAAMpH,KAAKqH,GAAM,IAGpB,SAASC,EAAQC,GACtB,OAAc,IAANA,EAAavH,KAAKqH,GAIrB,SAASG,GAAU,EAAEC,EAAC,EAAEC,EAAC,MAAEC,EAAK,OAAEC,EAAM,SAAEC,GAAYC,GAC3D,IAAIzD,EAAKwD,EAAW7H,KAAKqH,GAAM,IAC3BU,EAAMJ,EAAQ,EAAKG,EACnBE,EAAMJ,EAAS,EAAKE,EAEpBV,EAAM,IAAI3C,EAAO,CACnB,CAACzE,KAAKiI,IAAI5D,GAAIrE,KAAKkI,IAAI7D,IACvB,EAAErE,KAAKkI,IAAI7D,GAAIrE,KAAKiI,IAAI5D,MAEtB8D,EAAO,IAAI1D,EAAO,CACpB,EAAEsD,EAAIC,GACN,CAAC,EAAGA,GACJ,CAACD,EAAIC,GACL,CAACD,EAAI,GACL,CAACA,GAAKC,GACN,CAAC,GAAIA,GACL,EAAED,GAAKC,GACP,EAAED,EAAI,KAER,OAAOX,EACJpD,IAAImE,EAAKlC,KACTA,IACAlB,UACAb,KAAKC,IACG,CAAEsD,EAAGtD,EAAK,GAAK4D,EAAKN,EAAIK,EAAMJ,IAAKvD,EAAK,GAAK6D,GAAMN,EAAII,MAsC7D,SAASM,GAAQ,KAAEzI,EAAI,EAAE8H,EAAC,EAAEC,EAAC,IAAEW,EAAG,WAAEC,EAAU,WAAEC,IACrD,IAAIC,EAAGC,EACHC,EAAepB,EAAQtH,KAAK2I,MAAMjB,EAAGD,IACrCF,EAAMJ,EAAQmB,EAAaI,EAAeH,GAQ9C,OAPIrB,EAAMvH,IACR8I,EAAIzI,KAAKiI,IAAIV,GAAOc,EACpBG,EAAIxI,KAAKkI,IAAIX,GAAOc,IAEpBI,EAAIzI,KAAKkI,IAAIX,GAAOc,EACpBG,EAAIxI,KAAKiI,IAAIV,GAAOc,GAEf,CAAEG,EAAAA,EAAGC,EAAAA,GAGd,MAAMG,EAAY,CAAC,KAAM,IAAK,KAAM,IAAK,KAAM,IAAK,KAAM,KACpDC,EAAa,CAAEnC,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAGC,EAAG,EAAGP,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAGC,EAAG,GAEjE,SAASqC,EAAWnJ,EAAMkI,GAC/B,IAAIkB,EAAcF,EAAWlJ,GACzBqJ,GAAgBD,EAAc/I,KAAKiJ,MAAMpB,EAAW,KAAO,EAC/D,OAAOe,EAAUI,GClInB,ICfI,EAAQ,EDeZ,GACAE,KAAAA,MACAjN,MAAAA,CACAkN,MAAAA,CACAvJ,QAAAA,WACA,OAAA6H,EAAAA,EAAAC,EAAAA,EAAAC,MAAAA,IAAAC,OAAAA,IAAAC,SAAAA,IAEAlI,KAAAA,QAEAyJ,YAAAA,CACAzJ,KAAAA,OACAC,QAAAA,IAEAyJ,OAAAA,CACAzJ,SAAAA,EACAD,KAAAA,SAEA2J,cAAAA,CACA1J,QAAAA,WACA,+CAEAD,KAAAA,OAEA4J,UAAAA,CACA3J,SAAAA,EACAD,KAAAA,SAEA6J,UAAAA,CACA5J,SAAAA,EACAD,KAAAA,SAEA8J,UAAAA,CACA7J,SAAAA,EACAD,KAAAA,SAEA+J,YAAAA,CACA9J,SAAAA,EACAD,KAAAA,SAEAgK,SAAAA,CACAhK,KAAAA,OACAC,QAAAA,GAEAgK,UAAAA,CACAjK,KAAAA,OACAC,QAAAA,GAEAiK,SAAAA,CACAlK,KAAAA,OACAC,QAAAA,KAEAkK,UAAAA,CACAnK,KAAAA,OACAC,QAAAA,KAEAmK,OAAAA,CACApK,KAAAA,QACAC,SAAAA,GAEAoK,aAAAA,CACArK,KAAAA,SACAC,QAAAA,KAAAA,GAEAqK,GAAAA,CAAAA,OAAAA,QACAC,cAAAA,SACAxH,KAAAA,CACA/C,KAAAA,MACAC,QAAAA,IAAAA,CAAAA,EAAAA,IAEAuK,KAAAA,CACAvK,SAAAA,EACAD,KAAAA,SAEAyK,QAAAA,CACAxK,SAAAA,EACAD,KAAAA,SAEAmI,KAAAA,CACAlI,QAAAA,EACAD,KAAAA,QAEA0K,KAAAA,CACA1K,KAAAA,OACAC,QAAAA,OAGAxD,OACA,OACAoG,UAAAA,OAAAA,OAAAA,GAAAA,KAAAA,OACA8H,aAAAA,EACAC,gBAAAA,EACAC,YAAAA,EACAC,YAAAA,EACAC,YAAAA,EACAC,eAAAA,EACAC,iBAAAA,EACAC,iBAAAA,IAGA/K,UAEA,0CAEAxD,MAAAA,CACA6M,MAAAA,GACA,wBAIA5M,SAAAA,CACAuO,gBACA,iDACA,kEACA,yBAGAhN,QACA,qBACA,gHAGAtB,QAAAA,CACAuO,mBAAAA,GACA,WACAC,EAAAA,kBAEA,cACAA,EAAAA,kBAGAC,cAAAA,GACA,oCACA,YAAA7B,GAAA,KACA,KACA,wBACA,UACA,SACAnN,EAAAA,CACA2F,IAAAA,EACAD,KAAAA,GAEA,MACA,SACA1F,EAAAA,CAAA2F,IAAAA,EAAA,iBACA,MACA,SACA3F,EAAAA,CAAA6F,MAAAA,EAAAF,IAAAA,GACA,MACA,QACA3F,EAAAA,CAAA6F,MAAAA,EAAA,gBACA,MACA,SACA7F,EAAAA,CAAA+F,OAAAA,EAAAF,MAAAA,GACA,MACA,SACA7F,EAAAA,CAAA,gBAAA+F,OAAAA,GACA,MACA,SACA/F,EAAAA,CAAA0F,KAAAA,EAAAK,OAAAA,GACA,MACA,QACA/F,EAAAA,CAAA,eAAA0F,KAAAA,GACA,MAEA,OACAuJ,OAAAA,EAAAA,UACAvD,MAAAA,KAAAA,KAAAA,EAAAA,KAAAA,MAAAA,KACAC,OAAAA,KAAAA,KAAAA,EAAAA,KAAAA,MAAAA,QACA,GAEA,sBACA1D,KAAAA,GAAAA,GAAAA,KAAAA,EAAAA,OACAH,KAAAA,MAEAoH,aACA,yCAEAC,gBAAAA,GACA,oDACA,2BACA,gCACA,QAAAC,EAAAA,QAAAC,GAAA,EASA,GARA,cACA,cACA,4BACA,uEACA,gDACA,yCAGA,aACA,QACA,wDACA,IACA,EACA,wDACA,wCACA,EACA,kDACA,yCACA,EACA,mDACA,cACAC,QAAAA,EACAC,QAAAA,EACAC,OAAAA,EACAC,OAAAA,EACAC,aAAAA,EACAC,cAAAA,EACAC,aAAAA,EACAC,gBAAAA,GAIAC,SAAAA,iBAAAA,YAAAA,KAAAA,iBAAAA,GACAA,SAAAA,iBAAAA,YAAAA,KAAAA,iBAAAA,GACAA,SAAAA,iBAAAA,WAAAA,KAAAA,eAAAA,GACAA,SAAAA,iBAAAA,UAAAA,KAAAA,eAAAA,GACA,kCACA,2BACA,wBACA,0BACA,4CACA,uCACA,2BACA,wBACA,0BACA,6CAEA,yBACA,sBACA,2DAGAC,gBAAAA,GACA,2BACA,YAAAX,EAAAA,QAAAC,GAAA,yBACA,sBACA,wBACA,wBACA,2BACA,2BACA,cACA,cACA,8BACA,mBACA,yBACA,uCACA,4CACA,mBACA,eACA,qCACA,+BACA,mBACA,yBACA,uCAEA,mBAGAW,SACA,mBACA,yBACA,yBACA,oCACA,0BAEA,oCACA,0BAMA,0BACA,mBACA,oDACA,qBACA,6CACAxE,GAAAA,EAAAA,EAAAA,MAKA,0BACA,mBACA,mDACA,qBACA,4CACAC,GAAAA,EAAAA,EAAAA,OAKAwE,uBAAAA,GACA,oBACAzE,EAAAA,KAAAA,IAAAA,KAAAA,QAAAA,QAAAA,GACAA,EAAAA,KAAAA,IAAAA,KAAAA,QAAAA,QAAAA,GACA,GAHA,GAKA0E,sBAAAA,GACA,oBACAzE,EAAAA,KAAAA,IAAAA,KAAAA,QAAAA,OAAAA,GACAA,EAAAA,KAAAA,IAAAA,KAAAA,QAAAA,OAAAA,GACA,GAHA,GAKA0E,eAAAA,EAAAA,GACA,gDACA,6BACA,yCACA,6BACA,sCACA,GAEAC,cAAAA,EAAAA,GACA,gDACA,4BACA,sCACA,4BACA,uCACA,GAEAC,cAAAA,GACA,2BACAP,SAAAA,oBAAAA,YAAAA,KAAAA,iBAAAA,GACAA,SAAAA,oBAAAA,UAAAA,KAAAA,eAAAA,GACAA,SAAAA,oBAAAA,YAAAA,KAAAA,iBAAAA,GACAA,SAAAA,oBAAAA,WAAAA,KAAAA,eAAAA,GAEA,OACAQ,KAAAA,YACAC,OAAAA,YACAC,OAAAA,aAGA,oBACA,gBACA,gBACA,iBACA,EACA,gEACA,4BACA,sDAEAC,kBAAAA,GACA,IAGA,EAHA,sBACA,iBACA,iBAIA,UAGA,WACA,QAAArB,EAAAA,QAAAC,GAAA,yBAGA,UACA,QACA,QAEA,UACA,UACA,UACA,WAGAhD,EADA,KACAA,EACAtI,KAAAA,MAAAA,EAAAA,EAAAA,GAAAA,EAAAA,EAAAA,IAGAsI,EACAtI,KAAAA,MAAAA,EAAAA,EAAAA,GAAAA,EAAAA,EAAAA,IAGA,yBACA,iBACA2M,OAAAA,EACAxE,KAAAA,EACAxI,KAAAA,EACAiN,SAAAA,EACAC,KAAAA,EACAvE,WAAAA,EACAC,WAAAA,EACAuE,QAAAA,EACAC,QAAAA,IAGAC,iBAAAA,GACA,YAAA3B,EAAAA,QAAAC,GAAA,0BACA,SAAAsB,EAAAA,KAAAC,EAAAA,KAAAlN,EAAAA,WAAA2I,EAAAA,WAAAC,EAAAA,QAAAuE,EAAAA,QAAAC,GACA,gBACA,UACA,UACA,kBACA,gCACA,gBAEA,yBACA,6DACA,wBAEA,IACA,wBAIA,MAAAvE,EAAAA,EAAAC,GAAA,GACA9I,KAAAA,EACA0I,IAAAA,EACAZ,EAAAA,EACAC,EAAAA,EACAa,WAAAA,EACAD,WAAAA,IAEA,4BAGA,sBACA,2BACAE,EAAAA,EAAAA,KAAAA,cAGAA,GAAAA,KAAAA,KACAC,GAAAA,KAAAA,KACAD,EAAAA,KAAAA,IAAAA,KAAAA,IAAAA,KAAAA,MAAAA,GAAAA,KAAAA,UAAAA,KAAAA,UACAC,EAAAA,KAAAA,IAAAA,KAAAA,IAAAA,KAAAA,MAAAA,GAAAA,KAAAA,WAAAA,KAAAA,WAEA,SACAjG,EAAAA,MAAAA,GACA,WAGAA,EAAAA,MAAAA,GAFAA,EAAAA,OAAAA,GAMA,0BAEA,cACA,mCAEAA,EAAAA,MAAAA,EAAAA,MAAAA,EAAAA,MAAAA,EAGAA,EAAAA,MACAA,EAAAA,OAAAA,EAAAA,MAAAA,EAAAA,IAKA,eACA,qCACAA,EAAAA,OAAAA,EAAAA,OAAAA,EAAAA,OAAAA,EAEAA,EAAAA,OACAA,EAAAA,QAAAA,EAAAA,OAAAA,EAAAA,IAIAA,EAAAA,OAAAA,KAAAA,eAAAA,EAAAA,OAAAA,GACAA,EAAAA,MAAAA,KAAAA,cAAAA,EAAAA,MAAAA,GAGA,qBACA,UACA,uBACA,uBACAA,EAAAA,EAAAA,KAAAA,MAAAA,EAAAA,EAAAA,GACAA,EAAAA,EAAAA,KAAAA,MAAAA,EAAAA,EAAAA,GACA,kBAGAyK,kBAAAA,GACA,YAAA5B,EAAAA,QAAAC,GAAA,yBACA,6CACA,mBACA,mBACA,kCACA,0BAEA,iBAAA4B,GAAAA,EAAAC,GAAAA,EAAA5E,WAAAA,EAAAV,SAAAA,IAEAuF,iBAAAA,GACA,OAAAF,EAAAA,GAAAC,EAAAA,WAAA5E,EAAAA,SAAAV,GAAA,iBACA,QAAAwD,EAAAA,QAAAC,GAAA,yBACA,MACA,MACA,8BAGA,MACA,MACAzE,GAAAA,IACAA,EAAAA,EAAAA,EAAAA,EAAAA,IAAAA,EACAA,EAAAA,KAAAA,YAAAA,GACA,uCAEAwG,YAAAA,GACA,UACA,wBACA,kBACA,qBACA,qBACA,GAEAC,gBACA,sBASA,OAPA,8BACA,wCACA,wCACA,wCACA,6CACA,iDACA,iDACA,IAGAnS,SAAA,qBACA,oBAEA,gBACA,iBACA,oCACA,+BACA,wBAEA,gEACA,+BACA,2BACA,2BACA,mCAEAgJ,GAAA,IACAA,EAAA,MACA,4BACA,4BAMA,gCAEA,sCACA,gBACA,uBEnjBiQ,I,oBDQ7P1H,GAAY,OACd,EACA,EACA,GACA,EACA,KACA,KACA,MAIF,EAAeA,EAAiB,Q,oBE4EhC,GACAyM,KAAAA,MACAjN,MAAAA,CACA+B,QAAAA,OACAR,YAAAA,OACAZ,SAAAA,QACA4B,cAAAA,OACA6C,SAAAA,OACAE,MAAAA,OACAe,UAAAA,SAEAnG,WAAAA,CACAoR,IAAAA,EACAC,kBAAAA,EAAAA,GAEApR,OACA,OACAoG,UAAAA,CAAAiF,EAAAA,EAAAC,EAAAA,EAAAC,MAAAA,IAAAC,OAAAA,IAAAC,SAAAA,GACAzF,cAAAA,EACAK,cAAAA,EACAF,mBAAAA,IAGAzC,UAEA,6BAIA,2BAEAC,UAGA,2EACA,mBACA,kDACA,iBAGA1D,gBACA,oBACA,4CACA,YAEA,oBACA,kDACA,iBAGAC,MAAAA,CACAkB,YAAAA,CACAiQ,UAEA,qCACA,8BAEAC,MAAAA,GAEAlP,gBACA,qCACA,8BAEA8D,YACA,gBACA,4BAIA/F,SAAAA,CACAqE,uBACA,iDAEA8B,OACA,qCAEAiL,iBACA,4BACmBtS,KAAKmC,YAAYoQ,QAAUvS,KAAKmC,YAAYoQ,QAAU,aAGzEC,gBACA,OACA,uDACA,iBACA,mDACA,4CACA,sBACA,yDACA,wBACA,iDACA,6DACA,sBACA,4DAIArR,QAAAA,CACAsR,qBACA,yCAEAC,wBACA,SAkBA,OAhBA1N,OAAAA,KAAAA,KAAAA,WAAAA,KAAAA,IACA,yCACA,2CACA,6CACA,wBACA,oBACA2N,GAAAA,OAEA,gBACA,0CACA,sCACAA,GAAAA,MAKA,GAGA7K,WAAAA,GACA,WACA,uCAEA8K,WAAAA,GACA,8CAEA3K,gBAAAA,GACA,sDACA,2BAEAC,qBACA,qDACA,2BAEA2K,WAAAA,GACA,+CAEAC,WAAAA,GACA,eACA,IACA,2BACA,0BAEA,4BACAlO,aAAAA,EACA/D,iBAAAA,IAEA,SACA,WAIAyG,cAIAC,OAAAA,KAMAC,QAAAA,EAAAA,GACA,6DAGA,0DACA,4DAKA,6BAEAuL,EAAAA,qBAEAtL,YAAAA,EAAAA,GACA,OACAsL,EAAAA,OAAAA,UAAAA,SAAAA,OACAA,EAAAA,OAAAA,UAAAA,SAAAA,OACAA,EAAAA,OAAAA,UAAAA,SAAAA,OACAA,EAAAA,OAAAA,UAAAA,SAAAA,MAEA,qBACA,sBAEArL,UAAAA,EAAAA,GACA,sDACA,SAGA,wBAEAqL,EAAAA,mBAEApL,UAAAA,EAAAA,GACA,sDACA,SAGA,wBAEAoL,EAAAA,mBAEA,yBACA,oCACA/N,OAAAA,KAAAA,GAAAA,KAAAA,IACA,yBACA,wCACAS,EAAAA,GAAAA,KAAAA,WAAAA,EAAAA,IACA,yCAEA,gEAGA,cAIA,uBACAA,SAAAA,KAGAuN,QACA,sCACA5G,EAAAA,KAAAA,UAAAA,EACAC,EAAAA,KAAAA,UAAAA,KAGAzE,UAAAA,GACA,wBAEA,gDACA,iCACA,6BAEA,mEAEA,iBACA,0BAEA,0CACA,KAEA,wCACA,OAEA,uDACA,iCACA,uBACAnC,SAAAA,CAAA8G,OAAAA,OAIA0G,WACA,yCACA,2CAEA,iDAEA,aACA,SACAjM,QAAAA,SAEA,uBACAvB,SAAAA,IAEA,6CAEA,eACA,SACAuB,QAAAA,SAEA,uBACAvB,SAAAA,IAEAyN,YAAAA,KACA,mBACA,MAEA,iCAAAzN,UACA,UACApD,WAAAA,CACA0C,KAAAA,KAAAA,YAAAA,MACAU,SAAAA,IAEAC,OAAAA,IAEA,MADA,mCACA,MAGAsC,kBAAAA,GACA,QACA,iCACA,EACA,2CACA,EACAkL,YAAAA,KACA,6CACA,QC9Y0R,ICQtR,G,SAAY,OACd,EACA,EACA,GACA,EACA,KACA,WACA,OAIF,EAAe,EAAiB,QC4HhC,GACAtS,MAAAA,CACA+B,QAAAA,OACAwQ,aAAAA,MACA3M,WAAAA,OACAE,YAAAA,OACA0M,YAAAA,CACA9O,KAAAA,OACAC,QAAAA,SAEA8O,WAAAA,OACAxM,gBAAAA,QACA4F,KAAAA,CAAAnI,KAAAA,OAAAC,QAAAA,GACA2B,MAAAA,CAAA5B,KAAAA,OAAAC,QAAAA,GACAwB,UAAAA,CAAAzB,KAAAA,QAAAC,SAAAA,GACA0B,aAAAA,CAAA3B,KAAAA,QAAAC,SAAAA,GACA+O,eAAAA,OACAC,QAAAA,OACAC,YAAAA,OACA5M,WAAAA,CAAAA,QAAAA,QACAT,cAAAA,CAAAA,QAAAA,QACAsN,aAAAA,QACAlS,SAAAA,SAEAT,WAAAA,CACA4S,aAAAA,GAEA3S,OACA,UAEA0D,YACAC,YACA1D,kBACAC,MAAAA,GACAC,SAAAA,CACAkF,YACA,+CACA,sBACA,CACAE,KAAAA,KAAAA,QAAAA,MACAG,MAAAA,KAAAA,QAAAA,KACAF,IAAAA,KAAAA,QAAAA,IACAI,OAAAA,KAAAA,QAAAA,QAEA,eAEAX,WACA,2BACA,kCADA,GAGA7C,gBACA,oCACA,+BAEAwQ,cACA,WAUA,OARA,oCACA/S,EAAAA,gBAAAA,GAAAA,KAAAA,QAAAA,KAAAA,gBACAA,EAAAA,iBAAAA,GAAAA,KAAAA,QAAAA,KAAAA,kBAGAA,EAAAA,UAAAA,KAAAA,KACAA,EAAAA,gBAAAA,KAAAA,YAAAA,OAEA,GAEAkG,wBACA,oEAEA8M,oBACA,WAcA,OAZA,sBACAhT,EAAAA,qBAAAA,GAAAA,KAAAA,QAAAA,KAAAA,WAAAA,WAEAA,EAAAA,sBAAAA,GAAAA,KAAAA,QACA,2BAIAA,EAAAA,uBAAAA,GAAAA,KAAAA,QACA,4BAGA,IAGAO,QAAAA,CACAkF,QAAAA,GACA,+BCzOwR,ICQpR,G,SAAY,OACd,EACAvG,EACAa,GACA,EACA,KACA,WACA,OAIF,EAAe,EAAiB,S,+ECnBhC,IAAIb,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,oBAAoB,CAAGN,EAAI8T,SAAY9T,EAAI+T,YAA2F/T,EAAuB,oBAAEI,EAAG,MAAM,CAACkD,IAAI,OAAO,CAACtD,EAAIiC,GAAG,IAAIjC,EAAIkC,GAAGlC,EAAIgU,qBAAqB,OAAqC,iBAA7BhU,EAAI+T,YAAYE,SAA6B,CAAC7T,EAAG,MAAM,CAACE,YAAY,UAAU,CAACF,EAAG,MAAM,CAACE,YAAY,UAAU,CAAGN,EAAIkU,UAA2blU,EAAI8B,KAApb9B,EAAIyD,GAAIzD,EAAS,OAAE,SAASmU,EAAKV,GAAa,OAAOrT,EAAG,UAAU,CAACkD,IAAI,QAAU6Q,EAAKtF,GAAGvO,YAAY,SAAS,CAACF,EAAG,aAAa,CAACG,MAAM,CAAC,QAAU,OAAO,aAAeP,EAAIoU,kBAAkB,CAAEC,QAASrU,EAAIqU,QAASC,QAASH,EAAKtF,KAAM,WAAasF,EAAKb,WAAW,YAActT,EAAI+T,YAAYV,YAAY,iBAA2C,IAAzBc,EAAKrN,gBAAyB,YAAc2M,EAAY,WAAazT,EAAI6G,WAAW,UAAW,MAAU,MAAc7G,EAAIyD,GAAIzD,EAAW,SAAE,SAASuU,EAAOC,GAAS,OAAOpU,EAAG,UAAU,CAACkD,IAAIkR,GAAS,CAACpU,EAAG,MAAM,CAACE,YAAY,WAAWN,EAAIyD,GAAG,GAAS,SAAS0Q,EAAKxQ,GAAO,OAAOvD,EAAG,MAAM,CAACkD,IAAI6Q,EAAKtF,GAAKsF,EAAKtF,GAAKlL,EAAMrD,YAAY,iBAAiB,CAAC,EAAO,CAACF,EAAG,aAAa,CAACG,MAAM,CAAC,QAAU,OAAO,aAAeP,EAAIoU,kBAAkB,CAAEC,QAASrU,EAAIqU,QAASC,QAASH,EAAKtF,KAAM,WAAasF,EAAKb,WAAW,YAActT,EAAI+T,YAAYV,YAAY,iBAA2C,IAAzBc,EAAKrN,gBAAyB,YAAwB,EAAV0N,EAAc7Q,EAAM,WAAa3D,EAAI6G,WAAW,UAAW,MAAUzG,EAAG,MAAM,CAACE,YAAY,aAAa,MAAK,SAAQ,MAAMN,EAAI8B,KAAp1C1B,EAAG,MAAM,CAACkD,IAAI,SAAShD,YAAY,iBAAiB,CAACF,EAAG,kBAAkB,IAAgxC,IACpgDQ,EAAkB,G,4BCiEtB,GACAkN,KAAAA,MACA/M,WAAAA,CAAA0T,WAAAA,EAAAA,GACAzT,OACA,OACAgT,oBAAAA,KACAF,QAAAA,KACAC,YAAAA,KACAW,aAAAA,GAEAC,aAAAA,UAGA,sBACA,2GAEA,yBAEA,uBAEA,6CACA,wCACAhE,SAAAA,KAAAA,MAAAA,6BAC0B1Q,KAAK8T,YAAYtN,2CAChBxG,KAAK8T,YAAYpN,2BAE5C,yCACAgK,SAAAA,KAAAA,MAAAA,6BAC0B1Q,KAAK8T,YAAYtN,gDACXxG,KAAK8T,YAAYpN,qCAEjDgK,SAAAA,iBAAAA,UAAAA,KAAAA,aAGA,8BACA,oBAGA1P,kBACAC,MAAAA,GACAC,SAAAA,CACA0F,aACA,4DAEA+N,eACA,wBACAC,WAAAA,KAAAA,OAAAA,OAAAA,WACAC,aAAAA,KAAAA,OAAAA,OAAAA,gBAGAhU,mBACA,kFAEAiU,QACA,+BAEAV,UACA,oCAEAH,YACA,0CAEAc,UACA,wBACA,iBACAD,MAAAA,KAAAA,UAIA3T,QAAAA,CACA,oBAEA,uCACA6T,EAAAA,aAAAA,MAAAA,cACAA,EAAAA,aAAAA,OAAAA,YACAA,EAAAA,aACA,OACA,+DAEAtE,SAAAA,KAAAA,YAAAA,SACA,0CACA,gBACApE,MAAAA,KAAAA,YAAAA,WACAC,OAAAA,KAAAA,YAAAA,eAGA,oBACA,wBACA0I,UAAAA,CACAlQ,KAAAA,KAAAA,eAEAW,OAAAA,IACA,oCACA,sBAEA,gBAEA,wBACA,wBACAuP,UAAAA,CACAlQ,KAAAA,KAAAA,mBAEAW,OAAAA,IACA,2CAEA,sBC3KgQ,I,oBCQ5PtE,GAAY,OACd,EACAtB,EACAa,GACA,EACA,KACA,KACA,MAIF,EAAeS,EAAiB,S,mFChB5B8T,EAA0B,IAA4B,KAE1DA,EAAwBC,KAAK,CAACC,EAAOxG,GAAI,4qBAA6qB,KAEttB,gB,mFCJIsG,EAA0B,IAA4B,KAE1DA,EAAwBC,KAAK,CAACC,EAAOxG,GAAI,2IAA4I,KAErL,gB,mFCJIsG,EAA0B,IAA4B,KAE1DA,EAAwBC,KAAK,CAACC,EAAOxG,GAAI,83DAA+3D,KAEx6D,gB,mFCJIsG,EAA0B,IAA4B,KAE1DA,EAAwBC,KAAK,CAACC,EAAOxG,GAAI,krDAAmrD,KAE5tD,gB,mFCJIsG,EAA0B,IAA4B,KAE1DA,EAAwBC,KAAK,CAACC,EAAOxG,GAAI,0iIAA6iI,KAEtlI,gB,mFCJIsG,EAA0B,IAA4B,KAE1DA,EAAwBC,KAAK,CAACC,EAAOxG,GAAI,qyCAAsyC,KAE/0C,gB,mFCJIsG,EAA0B,IAA4B,KAE1DA,EAAwBC,KAAK,CAACC,EAAOxG,GAAI,mlBAAolB,KAE7nB,gB,mFCJIsG,EAA0B,IAA4B,KAE1DA,EAAwBC,KAAK,CAACC,EAAOxG,GAAI,8oBAA+oB,KAExrB,gB;;;;;;;;ACAC,SAAUyG,EAAMC,GAGfC,EAAAA,WAEC,OADAF,EAAKG,OAASF,IACPD,EAAKG,QACZ,wCANF,CAcExV,MAAM,WAER,aAEA,IAAIwV,EA4RHC,EACAC,EAGAC,EACAC,EAEAC,EA+BAC,EAGAC,EAqBAC,EAvVGC,EAAU,QAEVC,EAAkB,kBACrBC,EAA6B,kBAC7BC,EAA2B,kCAC3BC,EAAsB,gCAEtBC,EAAKC,UAAUC,UAGfC,EAAgC,yEAGhCC,EAAS,CAIRpK,MAAO,IACPC,OAAQ,IAGRoK,OAAQ,IAGRC,SAAU,GACVC,SAAU,EAGVC,UAAU,EAIVC,kBAAkB,EAGlBC,eAAgB,eAIhBC,mBAAoB,QAGpBC,UAAU,EAgBVC,aAAa,EAMbC,gBAAiB,MAIjBC,mBAAmB,EAInBC,MAAM,EAGNC,SAAS,EAGTC,UAAU,EAGVC,kBAAmB,KAGnBC,UAAU,EAIVC,eAAe,EAGfC,QAAQ,EAGRC,OAAO,EAGPC,MAAM,EAGNC,KAAK,EA0BLC,eAAgB,UAGhBC,SAAS,EAGTC,WAAW,EAIXC,eAAe,EAIfC,UAAU,EAIVC,MAAM,EAGNC,OAAO,EAGPC,WAAW,EAMXC,cAAe,KAOfC,eAAgB,KAOhBC,UAAW,EAGXC,oBAAoB,EAGpBC,gBAAiB,KAKjBC,cAAe,KAGfC,YAAY,EAGZC,cAAc,EAGdC,gBAAgB,EAKhBC,cAAc,EAGdC,aAAa,EAGbC,mBAAmB,EAGnBC,iCAAiC,EAGjCC,WAAY,QAGZC,gBAAiB,UAGjBC,qBAAsB,OAGtBC,wBAAyB,GAGzBC,uBAAwB,GAGxBC,yBAA0B,GAG1BC,2BAA4B,GAG5BC,6BAA8B,KAC9BC,2BAA4B,KAI5BC,oBAAqBC,OAAOC,kBAG5BC,sBAAsB,EAOtBC,qBAAsB,EAGtBC,aAAc,EAKdC,mBAAoB,EAGpBC,QAAS,QAGTC,oBAAoB,EAGpBC,eAAgB,IAGhBC,aAAc,IAKfC,GAAc,EAGdC,GAAS,EAGThD,GAAW,EAGXiD,EAAqB,KACrBC,EAAsB,KAatBC,GAAoB,EACpBC,GAAmB,EAKnBC,EAAQ,GAGR7U,EAAQ,EAIR8U,EAAkB,CAAEC,OAAQ,GAAIvD,SAAU,IAG1CwD,EAAM,GAGNC,EAAU,GAGVC,EAAoB,GAGpBC,EAAW,GASXC,EAAqB,EAGrBC,EAAkB,EAGlBC,GAAe,EAGfC,EAAwB,EAGxBC,GAAiB,EAGjBhD,EAAY,EAIZiD,EAAmB,EACnBC,GAAsB,EACtBC,GAAkB,EAGlBhE,EAAQ,CACPiE,OAAQ,EACRC,OAAQ,EACRC,WAAY,EACZC,UAAU,EACVC,UAAW,IAKZC,EAAoB,GAGpBC,EAAwB,GAKzB,SAASC,EAAYC,GAGpB,IAAoB,IAAhB7B,EAMJ,GAJAA,GAAc,EAEd8B,IAEKlB,EAASmB,cAAiBnB,EAASoB,aAAxC,CAwBAvB,EAAIwB,QAAUhM,SAASiM,cAAe,WACtCzB,EAAI0B,OAASlM,SAASiM,cAAe,mBAGrCE,OAAOC,iBAAkB,OAAQ7B,IAAQ,GAEzC,IAAI8B,EAAQvH,EAAOwH,eAIkB,qBAA1BD,EAAM,wBAAyCA,EAAM,gBAGhEE,GAAQvG,EAAQ4F,GAChBW,GAAQvG,EAAQqG,GAGhB/D,KAGAkE,QA5CA,CACCxM,SAASyM,KAAKC,aAAc,QAAS,iBASrC,IALA,IAAIC,EAASC,GAAS5M,SAAS6M,qBAAsB,QACpDC,EAAUF,GAAS5M,SAAS6M,qBAAsB,WAE/CE,EAAeJ,EAAOK,OAAQF,GAEzB9S,EAAI,EAAGiT,EAAMF,EAAavZ,OAAQwG,EAAIiT,EAAKjT,IAAM,CACzD,IAAIkT,EAAUH,EAAa/S,GACvBkT,EAAQC,aAAc,cACzBD,EAAQR,aAAc,MAAOQ,EAAQC,aAAc,aACnDD,EAAQE,gBAAiB,eAsC7B,SAASvB,IAERzG,EAAiB,+BAA+BiI,KAAMzH,IACxB,aAAvBC,UAAUyH,UAA2BzH,UAAU0H,eAAiB,EACvElI,EAAW,UAAUgI,KAAMzH,KAAS,QAAQyH,KAAMzH,GAElD,IAAI4H,EAAcxN,SAASyN,cAAe,OAE1C9C,EAASoB,aAAe,sBAAuByB,EAAYzb,OACrD,mBAAoByb,EAAYzb,OAChC,kBAAmByb,EAAYzb,OAC/B,iBAAkByb,EAAYzb,OAC9B,gBAAiByb,EAAYzb,MAEnC4Y,EAASmB,aAAe,oBAAqB0B,EAAYzb,OACnD,iBAAkByb,EAAYzb,OAC9B,gBAAiByb,EAAYzb,OAC7B,eAAgByb,EAAYzb,OAC5B,cAAeyb,EAAYzb,MAEjC4Y,EAAS+C,4BAA8BvB,OAAOwB,uBAAyBxB,OAAOyB,6BAA+BzB,OAAO0B,yBACpHlD,EAASgD,sBAAwE,oBAAzChD,EAAS+C,4BAEjD/C,EAASmD,SAAW9N,SAASyN,cAAe,UAAWM,WAIvDpD,EAASqD,qBAAuB,2BAA2BX,KAAMzH,GAKjE+E,EAAS5O,KAAO,SAAUyR,EAAYzb,QAAUqT,IAC1CC,GAAY,2BAA2BgI,KAAMzH,IAWpD,SAAS4G,IAER,IAAIyB,EAAU,GACbC,EAAgB,EAEjBlI,EAAO8D,aAAalQ,SAAS,SAAUuU,GAEjCA,EAAEC,YAAaD,EAAEC,cACjBD,EAAEE,MACL3D,EAAkBjG,KAAM0J,GAGxBF,EAAQxJ,KAAM0J,OAKbF,EAAQza,QACX0a,EAAgBD,EAAQza,OAGxBya,EAAQrU,SAAS,SAAUuU,GAC1BG,EAAYH,EAAEI,KAAK,WAEQ,oBAAfJ,EAAEK,UAA0BL,EAAEK,WAEjB,MAAlBN,GACLO,WAOHA,IASF,SAASA,IAER,IAAIC,EAAsBpa,OAAOqa,KAAMlE,GAAUjX,OAGjD,GAA4B,IAAxBkb,EACHE,QAGI,CAEJ,IAAIC,EAAuB,WACI,MAAxBH,GACLE,KAIF,IAAK,IAAI5U,KAAKyQ,EAAU,CAEvB,IAAIqE,EAASrE,EAAQzQ,GAGrB,GAA2B,oBAAhB8U,EAAOC,KAAsB,CACvC,IAAIP,EAAWM,EAAOC,OAGlBP,GAAqC,oBAAlBA,EAASQ,KAC/BR,EAASQ,KAAMH,GAGfA,SAIDA,MAYJ,SAASD,IAEJlE,EAAkBlX,QACrBkX,EAAkB9Q,SAAS,SAAUuU,GACpCG,EAAYH,EAAEI,IAAKJ,EAAEK,aAIvBS,IAWD,SAASX,EAAYY,EAAKV,GAEzB,IAAIW,EAASnP,SAASyN,cAAe,UACrC0B,EAAOvb,KAAO,kBACdub,EAAOd,OAAQ,EACfc,EAAOC,OAAQ,EACfD,EAAOZ,IAAMW,EAETV,IAGHW,EAAOE,OAASF,EAAOG,mBAAqB,SAAUjN,IAClC,SAAfA,EAAMzO,MAAoB,kBAAkByZ,KAAM8B,EAAOI,eAG5DJ,EAAOE,OAASF,EAAOG,mBAAqBH,EAAOK,QAAU,KAE7DhB,MAMFW,EAAOK,QAAU,SAAUC,GAG1BN,EAAOE,OAASF,EAAOG,mBAAqBH,EAAOK,QAAU,KAE7DhB,EAAU,IAAIhW,MAAO,0BAA4B2W,EAAOZ,IAAM,KAAOkB,MAOvE,IAAIC,EAAO1P,SAASiM,cAAe,QACnCyD,EAAKC,aAAcR,EAAQO,EAAKE,WAQjC,SAASX,IAERjF,GAAS,EAGT6F,IAGAC,KAGAC,KAGAC,KAGAC,KAGAC,KAGAC,IAAkB,GAIlB3N,YAAY,WAEXgI,EAAI0B,OAAOkE,UAAUC,OAAQ,iBAE7B7F,EAAIwB,QAAQoE,UAAUE,IAAK,SAE3BC,GAAe,QAAS,CACvB,OAAUxL,EACV,OAAUC,EACV,aAAgBE,MAEf,GAGCsL,OACHC,KAI4B,aAAxBzQ,SAASuP,WACZmB,IAGAvE,OAAOC,iBAAkB,OAAQsE,IAWpC,SAASb,IAGRrF,EAAI0B,OAAOkE,UAAUE,IAAK,iBAEtBlL,EACHoF,EAAIwB,QAAQoE,UAAUE,IAAK,YAG3B9F,EAAIwB,QAAQoE,UAAUC,OAAQ,YAG3B,WAAWhD,KAAMzH,GACpB4E,EAAIwB,QAAQoE,UAAUE,IAAK,aAG3B9F,EAAIwB,QAAQoE,UAAUC,OAAQ,aAI/B7F,EAAImG,WAAaC,GAAqBpG,EAAIwB,QAAS,MAAO,cAAe,MAGzExB,EAAIhE,SAAWoK,GAAqBpG,EAAIwB,QAAS,MAAO,WAAY,iBACpExB,EAAIqG,YAAcrG,EAAIhE,SAASyF,cAAe,QAG9CzB,EAAIpE,SAAWwK,GAAqBpG,EAAIwB,QAAS,QAAS,WACzD,6YAMDxB,EAAI/D,YAAcmK,GAAqBpG,EAAIwB,QAAS,MAAO,eAAgB,IAG3ExB,EAAIsG,aAAeF,GAAqBpG,EAAIwB,QAAS,MAAO,gBAAiB,MAC7ExB,EAAIsG,aAAapE,aAAc,qBAAsB,IACrDlC,EAAIsG,aAAapE,aAAc,WAAY,KAG3ClC,EAAIuG,aAAeH,GAAqBpG,EAAIwB,QAAS,MAAO,gBAAiBhG,EAAOI,SAAW,6DAA+D,MAE9JoE,EAAIwB,QAAQU,aAAc,OAAQ,eAGlClC,EAAIwG,aAAepE,GAAS5M,SAASiR,iBAAkB,mBACvDzG,EAAI0G,cAAgBtE,GAAS5M,SAASiR,iBAAkB,oBACxDzG,EAAI2G,WAAavE,GAAS5M,SAASiR,iBAAkB,iBACrDzG,EAAI4G,aAAexE,GAAS5M,SAASiR,iBAAkB,mBACvDzG,EAAI6G,aAAezE,GAAS5M,SAASiR,iBAAkB,mBACvDzG,EAAI8G,aAAe1E,GAAS5M,SAASiR,iBAAkB,mBAGvDzG,EAAI+G,mBAAqB/G,EAAIpE,SAAS6F,cAAe,mBACrDzB,EAAIgH,kBAAoBhH,EAAIpE,SAAS6F,cAAe,kBAEpDzB,EAAIiH,UAAYC,IAUjB,SAASA,IAER,IAAID,EAAYzR,SAAS2R,eAAgB,mBAazC,OAZKF,IACJA,EAAYzR,SAASyN,cAAe,OACpCgE,EAAU1f,MAAM6f,SAAW,WAC3BH,EAAU1f,MAAM8J,OAAS,MACzB4V,EAAU1f,MAAM6J,MAAQ,MACxB6V,EAAU1f,MAAM8f,SAAW,SAC3BJ,EAAU1f,MAAM+f,KAAO,6BACvBL,EAAU/E,aAAc,KAAM,mBAC9B+E,EAAU/E,aAAc,YAAa,UACrC+E,EAAU/E,aAAc,cAAc,QACtClC,EAAIwB,QAAQ+F,YAAaN,IAEnBA,EASR,SAASO,EAAeC,GAEvB,IAAIC,EAAO,GAGX,GAAsB,IAAlBD,EAAKE,SACRD,GAAQD,EAAKG,iBAGT,GAAsB,IAAlBH,EAAKE,SAAiB,CAE9B,IAAIE,EAAeJ,EAAK9E,aAAc,eAClCmF,EAAiE,SAA/CnG,OAAOoG,iBAAkBN,GAAO,WACjC,SAAjBI,GAA4BC,GAE/B1F,GAASqF,EAAKO,YAAa5Y,SAAS,SAAU6Y,GAC7CP,GAAQF,EAAeS,MAO1B,OAAOP,EAQR,SAASxB,IAER,IAAIgC,EAAYC,GAAsBxG,OAAOyG,WAAYzG,OAAO0G,aAG5DC,EAAY7e,KAAKiJ,MAAOwV,EAAU9W,OAAU,EAAIoK,EAAOC,SAC1D8M,EAAa9e,KAAKiJ,MAAOwV,EAAU7W,QAAW,EAAImK,EAAOC,SAGtD+M,EAAaN,EAAU9W,MAC1BqX,EAAcP,EAAU7W,OAGzBqX,GAAkB,cAAeJ,EAAW,MAAOC,EAAY,qBAG/DG,GAAkB,iFAAkFF,EAAY,kBAAmBC,EAAa,OAEhJjT,SAASyM,KAAK2D,UAAUE,IAAK,aAC7BtQ,SAASyM,KAAK1a,MAAM6J,MAAQkX,EAAY,KACxC9S,SAASyM,KAAK1a,MAAM8J,OAASkX,EAAa,KAG1CI,GAAqBH,EAAYC,GAGjC,IAAIG,EAAoBpN,EAAOS,aAAe,aAAa4G,KAAMrH,EAAOU,iBACxEkG,GAASpC,EAAIwB,QAAQiF,iBAAkBzL,IAAoB5L,SAAS,SAAUyZ,GAC7EA,EAAM3G,aAAc,oBAAqB4G,GAAgBD,OAI1DzG,GAASpC,EAAIwB,QAAQiF,iBAAkBzL,IAAoB5L,SAAS,SAAUyZ,GAI7E,IAA4C,IAAxCA,EAAMjD,UAAUmD,SAAU,SAAsB,CAEnD,IAAI3d,GAASkd,EAAYE,GAAe,EACvCnd,GAAQkd,EAAaE,GAAgB,EAElCO,EAAgBH,EAAMI,aACtBC,EAAgBzf,KAAK0f,IAAK1f,KAAK2f,KAAMJ,EAAgBT,GAAc,GAGvEW,EAAgBzf,KAAK4f,IAAKH,EAAe1N,EAAOoD,sBAG1B,IAAlBsK,GAAuB1N,EAAOkB,QAAUmM,EAAMjD,UAAUmD,SAAU,aACrE1d,EAAM5B,KAAK0f,KAAOZ,EAAaS,GAAkB,EAAG,IAKrD,IAAIhQ,EAAOxD,SAASyN,cAAe,OAgBnC,GAfAjK,EAAKsQ,UAAY,WACjBtQ,EAAKzR,MAAM8J,QAAakX,EAAa/M,EAAOwD,qBAAwBkK,EAAkB,KACtFL,EAAMU,WAAWpE,aAAcnM,EAAM6P,GACrC7P,EAAKuO,YAAasB,GAGlBA,EAAMthB,MAAM6D,KAAOA,EAAO,KAC1Byd,EAAMthB,MAAM8D,IAAMA,EAAM,KACxBwd,EAAMthB,MAAM6J,MAAQoX,EAAa,KAE7BK,EAAMW,wBACTxQ,EAAKmM,aAAc0D,EAAMW,uBAAwBX,GAI9CrN,EAAO6B,UAAY,CAGtB,IAAIoM,EAAQC,GAAeb,GAC3B,GAAIY,EAAQ,CAEX,IAAIE,EAAe,EACfC,EAA0C,kBAArBpO,EAAO6B,UAAyB7B,EAAO6B,UAAY,SACxEwM,EAAerU,SAASyN,cAAe,OAC3C4G,EAAajE,UAAUE,IAAK,iBAC5B+D,EAAajE,UAAUE,IAAK,qBAC5B+D,EAAa3H,aAAc,cAAe0H,GAC1CC,EAAaC,UAAYL,EAEL,kBAAhBG,EACH5Q,EAAKuQ,WAAWpE,aAAc0E,EAAc7Q,EAAK+Q,cAGjDF,EAAatiB,MAAM6D,KAAOue,EAAe,KACzCE,EAAatiB,MAAMkE,OAASke,EAAe,KAC3CE,EAAatiB,MAAM6J,MAAUkX,EAAyB,EAAbqB,EAAmB,KAC5D3Q,EAAKuO,YAAasC,KAQrB,GAAIjB,EAAoB,CACvB,IAAIoB,EAAgBxU,SAASyN,cAAe,OAC5C+G,EAAcpE,UAAUE,IAAK,gBAC7BkE,EAAcpE,UAAUE,IAAK,oBAC7BkE,EAAcF,UAAYjB,EAAMlG,aAAc,qBAC9C3J,EAAKuO,YAAayC,GAInB,GAAIxO,EAAOuD,qBAAuB,CAKjC,IAEIkL,EACAC,EAHAC,EAAiBC,GAAepR,EAAKyN,iBAAkB,cAAe,GAK1E0D,EAAe/a,SAAS,SAAU4N,GAG7BiN,GACHA,EAAqB7a,SAAS,SAAUib,GACvCA,EAASzE,UAAUC,OAAQ,uBAK7B7I,EAAU5N,SAAS,SAAUib,GAC5BA,EAASzE,UAAUE,IAAK,UAAW,uBAIpC,IAAIwE,EAAatR,EAAKuR,WAAW,GACjCvR,EAAKuQ,WAAWpE,aAAcmF,GAAcJ,GAAgBlR,GAAO+Q,aAEnEE,EAAuBjN,EACvBkN,EAAeI,KAKhBH,EAAe/a,SAAS,SAAU4N,GACjCA,EAAU5N,SAAS,SAAUib,GAC5BA,EAASzE,UAAUC,OAAQ,UAAW,+BAOxCzD,GAASpJ,EAAKyN,iBAAkB,6BAA+BrX,SAAS,SAAUib,GACjFA,EAASzE,UAAUE,IAAK,kBAS5BC,GAAe,aAahB,SAASR,KAERiF,aAAa,WACkB,IAA1BxK,EAAIwB,QAAQiJ,WAA8C,IAA3BzK,EAAIwB,QAAQkJ,aAC9C1K,EAAIwB,QAAQiJ,UAAY,EACxBzK,EAAIwB,QAAQkJ,WAAa,KAExB,KAgBJ,SAAStE,GAAqBuE,EAAWC,EAASC,EAAWf,GAO5D,IAJA,IAAIgB,EAAQH,EAAUlE,iBAAkB,IAAMoE,GAIrCrb,EAAI,EAAGA,EAAIsb,EAAM9hB,OAAQwG,IAAM,CACvC,IAAIub,EAAWD,EAAMtb,GACrB,GAAIub,EAASxB,aAAeoB,EAC3B,OAAOI,EAKT,IAAItD,EAAOjS,SAASyN,cAAe2H,GAOnC,OANAnD,EAAK6B,UAAYuB,EACQ,kBAAdf,IACVrC,EAAKqC,UAAYA,GAElBa,EAAUpD,YAAaE,GAEhBA,EASR,SAASuD,KAEQhF,KAGhBhG,EAAImG,WAAW2D,UAAY,GAC3B9J,EAAImG,WAAWP,UAAUE,IAAK,iBAG9B1D,GAASpC,EAAIwB,QAAQiF,iBAAkBxL,IAA+B7L,SAAS,SAAU6b,GAExF,IAAIC,EAAkBC,GAAkBF,EAAQjL,EAAImG,YAGpD/D,GAAS6I,EAAOxE,iBAAkB,YAAcrX,SAAS,SAAUgc,GAElED,GAAkBC,EAAQF,GAE1BA,EAAgBtF,UAAUE,IAAK,eAO7BtK,EAAO8C,yBAEV0B,EAAImG,WAAW5e,MAAM8jB,gBAAkB,QAAU7P,EAAO8C,wBAA0B,KAClF0B,EAAImG,WAAW5e,MAAM+jB,eAAiB9P,EAAO+C,uBAC7CyB,EAAImG,WAAW5e,MAAMgkB,iBAAmB/P,EAAOgD,yBAC/CwB,EAAImG,WAAW5e,MAAMikB,mBAAqBhQ,EAAOiD,2BAMjDzG,YAAY,WACXgI,EAAIwB,QAAQoE,UAAUE,IAAK,6BACzB,KAKH9F,EAAImG,WAAW5e,MAAM8jB,gBAAkB,GACvCrL,EAAIwB,QAAQoE,UAAUC,OAAQ,4BAchC,SAASsF,GAAkBtC,EAAO8B,GAIjC,IAAIjI,EAAUlN,SAASyN,cAAe,OACtCP,EAAQ4G,UAAY,oBAAsBT,EAAMS,UAAUmC,QAAS,sBAAuB,IAG1F,IAAIC,EAAiBlW,SAASyN,cAAe,OAY7C,OAXAyI,EAAepC,UAAY,2BAE3B5G,EAAQ6E,YAAamE,GACrBf,EAAUpD,YAAa7E,GAEvBmG,EAAMW,uBAAyB9G,EAC/BmG,EAAM8C,8BAAgCD,EAGtCE,GAAgB/C,GAETnG,EAUR,SAASkJ,GAAgB/C,GAExB,IAAInG,EAAUmG,EAAMW,uBACnBkC,EAAiB7C,EAAM8C,8BAIxB9C,EAAMjD,UAAUC,OAAQ,uBACxBgD,EAAMjD,UAAUC,OAAQ,wBAExBnD,EAAQE,gBAAiB,eACzBF,EAAQE,gBAAiB,wBACzBF,EAAQE,gBAAiB,wBACzBF,EAAQE,gBAAiB,8BACzBF,EAAQnb,MAAMskB,gBAAkB,GAEhCH,EAAenkB,MAAM+jB,eAAiB,GACtCI,EAAenkB,MAAMgkB,iBAAmB,GACxCG,EAAenkB,MAAMikB,mBAAqB,GAC1CE,EAAenkB,MAAM8jB,gBAAkB,GACvCK,EAAenkB,MAAMukB,QAAU,GAC/BJ,EAAe5B,UAAY,GAE3B,IAAIjkB,EAAO,CACVsgB,WAAY0C,EAAMlG,aAAc,mBAChC2I,eAAgBzC,EAAMlG,aAAc,wBACpC0I,gBAAiBxC,EAAMlG,aAAc,yBACrCoJ,gBAAiBlD,EAAMlG,aAAc,yBACrCqJ,iBAAkBnD,EAAMlG,aAAc,0BACtCkJ,gBAAiBhD,EAAMlG,aAAc,yBACrC4I,iBAAkB1C,EAAMlG,aAAc,0BACtC6I,mBAAoB3C,EAAMlG,aAAc,4BACxCtE,qBAAsBwK,EAAMlG,aAAc,8BAC1CsJ,kBAAmBpD,EAAMlG,aAAc,4BAGpC9c,EAAKsgB,aAEJ,sBAAsBtD,KAAMhd,EAAKsgB,aAAgB,2CAA2CtD,KAAMhd,EAAKsgB,YAC1G0C,EAAM3G,aAAc,wBAAyBrc,EAAKsgB,YAGlDzD,EAAQnb,MAAM4e,WAAatgB,EAAKsgB,aAO9BtgB,EAAKsgB,YAActgB,EAAKgmB,iBAAmBhmB,EAAKwlB,iBAAmBxlB,EAAKkmB,iBAAmBlmB,EAAKmmB,mBACnGtJ,EAAQR,aAAc,uBAAwBrc,EAAKsgB,WACvCtgB,EAAKylB,eACLzlB,EAAKwlB,gBACLxlB,EAAKkmB,gBACLlmB,EAAKmmB,iBACLnmB,EAAKgmB,gBACLhmB,EAAK0lB,iBACL1lB,EAAK2lB,mBACL3lB,EAAKwY,qBACLxY,EAAKomB,mBAIdpmB,EAAKylB,gBAAiB5I,EAAQR,aAAc,uBAAwBrc,EAAKylB,gBACzEzlB,EAAKgmB,kBAAkBnJ,EAAQnb,MAAMskB,gBAAkBhmB,EAAKgmB,iBAC5DhmB,EAAKwY,sBAAuBqE,EAAQR,aAAc,6BAA8Brc,EAAKwY,sBAErFwK,EAAMqD,aAAc,iBAAmBxJ,EAAQR,aAAc,eAAgB,IAG7Erc,EAAKylB,iBAAiBI,EAAenkB,MAAM+jB,eAAiBzlB,EAAKylB,gBACjEzlB,EAAK0lB,mBAAmBG,EAAenkB,MAAMgkB,iBAAmB1lB,EAAK0lB,kBACrE1lB,EAAK2lB,qBAAqBE,EAAenkB,MAAMikB,mBAAqB3lB,EAAK2lB,oBACzE3lB,EAAKomB,oBAAoBP,EAAenkB,MAAMukB,QAAUjmB,EAAKomB,mBAKjE,IAAIE,EAAgBtmB,EAAKgmB,gBAGzB,IAAKM,EAAgB,CACpB,IAAIC,EAA0BzK,OAAOoG,iBAAkBrF,GACnD0J,GAA2BA,EAAwBP,kBACtDM,EAAgBC,EAAwBP,iBAI1C,GAAIM,EAAgB,CACnB,IAAIE,EAAMC,GAAYH,GAKlBE,GAAiB,IAAVA,EAAIve,IACVye,GAAiBJ,GAAkB,IACtCtD,EAAMjD,UAAUE,IAAK,uBAGrB+C,EAAMjD,UAAUE,IAAK,0BAiBzB,SAASR,KAEJ9J,EAAOwC,aACV2D,OAAOC,iBAAkB,WAAW,SAAW/J,GAC9C,IAAIhS,EAAOgS,EAAMhS,KAGjB,GAAoB,kBAATA,GAA0C,MAArBA,EAAK2mB,OAAQ,IAAkD,MAAnC3mB,EAAK2mB,OAAQ3mB,EAAKmD,OAAS,KACtFnD,EAAO4I,KAAKC,MAAO7I,GAGfA,EAAK4mB,QAAyC,oBAAxBnS,EAAOzU,EAAK4mB,SAErC,IAA0D,IAAtDlR,EAA8BsH,KAAMhd,EAAK4mB,QAAqB,CAEjE,IAAIC,EAASpS,EAAOzU,EAAK4mB,QAAQE,MAAOrS,EAAQzU,EAAK+mB,MAIrDC,GAAqB,WAAY,CAAEJ,OAAQ5mB,EAAK4mB,OAAQC,OAAQA,SAIhEI,QAAQC,KAAM,eAAgBlnB,EAAK4mB,OAAQ,mDAK5C,GAWL,SAAShH,GAAWrE,GAEnB,IAAI4L,EAAgBxR,EAAO2C,WAS3B,GALuB,kBAAZiD,GAAuBW,GAAQvG,EAAQ4F,IAKnC,IAAX5B,EAAJ,CAEA,IAAIyN,EAAiBjN,EAAIwB,QAAQiF,iBAAkBzL,GAAkBhS,OAGrEgX,EAAIwB,QAAQoE,UAAUC,OAAQmH,IAGA,IAA1B7M,EAASoB,eAAyB/F,EAAO2C,WAAa,UAE1D6B,EAAIwB,QAAQoE,UAAUE,IAAKtK,EAAO2C,YAElC6B,EAAIwB,QAAQU,aAAc,wBAAyB1G,EAAO4C,iBAC1D4B,EAAIwB,QAAQU,aAAc,6BAA8B1G,EAAO6C,sBAE/D2B,EAAIpE,SAASrU,MAAM4X,QAAU3D,EAAOI,SAAW,QAAU,OACzDoE,EAAIhE,SAASzU,MAAM4X,QAAU3D,EAAOQ,SAAW,QAAU,OAEzDgE,EAAIpE,SAASsG,aAAc,uBAAwB1G,EAAOM,gBAC1DkE,EAAIpE,SAASsG,aAAc,4BAA6B1G,EAAOO,oBAE3DP,EAAOuB,SACVA,KAGGvB,EAAOqB,IACVmD,EAAIwB,QAAQoE,UAAUE,IAAK,OAG3B9F,EAAIwB,QAAQoE,UAAUC,OAAQ,OAG3BrK,EAAOkB,OACVsD,EAAIwB,QAAQoE,UAAUE,IAAK,UAG3B9F,EAAIwB,QAAQoE,UAAUC,OAAQ,WAIV,IAAjBrK,EAAO4B,OACV8P,KAGG1R,EAAO6B,WACV2C,EAAIsG,aAAapE,aAAc,cAA2C,kBAArB1G,EAAO6B,UAAyB7B,EAAO6B,UAAY,UAGrG7B,EAAOoC,YACVpI,SAASoM,iBAAkB,iBAAkBuL,IAAuB,GACpE3X,SAASoM,iBAAkB,aAAcuL,IAAuB,KAGhE3X,SAAS4X,oBAAqB,iBAAkBD,IAAuB,GACvE3X,SAAS4X,oBAAqB,aAAcD,IAAuB,IAIhE3R,EAAOqC,aACVwP,KAGAC,KAIG9R,EAAO4D,oBACV5J,SAASoM,iBAAkB,YAAa2L,IAAwB,GAChE/X,SAASoM,iBAAkB,YAAa2L,IAAwB,KAGhEC,KAEAhY,SAAS4X,oBAAqB,YAAaG,IAAwB,GACnE/X,SAAS4X,oBAAqB,YAAaG,IAAwB,IAIhE/R,EAAOuC,cACV0P,KACAC,GAAqB,+BAGrBA,KACAD,GAAoB,uDAIjB3S,IACHA,EAAgB6S,UAChB7S,EAAkB,MAIfmS,EAAiB,GAAKzR,EAAOgC,WAAahC,EAAOiC,oBAAsB0C,EAASmD,QAAUnD,EAASgD,wBACtGrI,EAAkB,IAAI8S,GAAU5N,EAAIwB,SAAS,WAC5C,OAAO/X,KAAK4f,IAAK5f,KAAK0f,KAAO0E,KAAKC,MAAQpN,GAAuBlD,EAAW,GAAK,MAGlF1C,EAAgBxV,GAAI,QAASyoB,IAC7BpN,GAAkB,IAIM,IAArBnF,EAAOwB,WACVoF,GAASpC,EAAI0B,OAAO+E,iBAAkB,cAAgBrX,SAAS,SAAUsT,GACxEA,EAAQkD,UAAUE,IAAK,WACvBpD,EAAQkD,UAAUC,OAAQ,uBAK5B,IAAImI,EAAqB,OACrBxS,EAAOS,cAAgB+J,OACK,QAA3BxK,EAAOU,iBAGyB,YAA3BV,EAAOU,iBAAiC+R,QAFhDD,EAAqB,SAOvBhO,EAAI/D,YAAY1U,MAAM4X,QAAU6O,EAGF,YAA1BxS,EAAOsB,eACVkD,EAAIwB,QAAQU,aAAc,uBAAwB1G,EAAOsB,gBAGzDkD,EAAIwB,QAAQoB,gBAAiB,wBAIA,WAA1BpH,EAAOsB,gBACVmE,EAAkB,mDAAqD,aACvEA,EAAkB,yCAAqD,mBAGvEA,EAAkB,eAAmB,aACrCA,EAAkB,KAAmB,iBACrCA,EAAkB,iBAAmB,gBACrCA,EAAkB,iBAAmB,iBACrCA,EAAkB,iBAAmB,cACrCA,EAAkB,iBAAmB,iBAGtCA,EAAkB,0BAAmC,cACrDA,EAAkB,yBAAmC,aACrDA,EAAkB,WAAmC,QACrDA,EAAkB,KAAmC,aACrDA,EAAkB,UAAmC,iBAErDiN,MAOD,SAASC,KAwCP,IAAIC,GAtCL5N,GAAiB,EAEjBmB,OAAOC,iBAAkB,aAAcyM,IAAoB,GAC3D1M,OAAOC,iBAAkB,SAAU0M,IAAgB,GAE/C9S,EAAOmB,QACN,kBAAmBgF,QAEtB3B,EAAIwB,QAAQI,iBAAkB,cAAe2M,IAAe,GAC5DvO,EAAIwB,QAAQI,iBAAkB,cAAe4M,IAAe,GAC5DxO,EAAIwB,QAAQI,iBAAkB,YAAa6M,IAAa,IAEhD9M,OAAOtG,UAAUqT,kBAEzB1O,EAAIwB,QAAQI,iBAAkB,gBAAiB2M,IAAe,GAC9DvO,EAAIwB,QAAQI,iBAAkB,gBAAiB4M,IAAe,GAC9DxO,EAAIwB,QAAQI,iBAAkB,cAAe6M,IAAa,KAI1DzO,EAAIwB,QAAQI,iBAAkB,aAAc+M,IAAc,GAC1D3O,EAAIwB,QAAQI,iBAAkB,YAAagN,IAAa,GACxD5O,EAAIwB,QAAQI,iBAAkB,WAAYiN,IAAY,KAIpDrT,EAAOc,WACV9G,SAASoM,iBAAkB,UAAWkN,IAAmB,GACzDtZ,SAASoM,iBAAkB,WAAYmN,IAAoB,IAGxDvT,EAAOQ,UAAYgE,EAAIhE,UAC1BgE,EAAIhE,SAAS4F,iBAAkB,QAASoN,IAAmB,GAG5DhP,EAAIuG,aAAa3E,iBAAkB,QAASsL,IAAQ,GAEhD1R,EAAO0C,mCAGN,WAAY1I,SACf4Y,EAAmB,mBAEX,aAAc5Y,SACtB4Y,EAAmB,qBAEX,iBAAkB5Y,WAC1B4Y,EAAmB,0BAGhBA,GACH5Y,SAASoM,iBAAkBwM,EAAkBa,IAAwB,IAMvE,IAAIC,EAAgB,CAAE,aAAc,SAIhC9T,EAAG+T,MAAO,eACbD,EAAgB,CAAE,eAGnBA,EAAc9f,SAAS,SAAUggB,GAChCpP,EAAIwG,aAAapX,SAAS,SAAUigB,GAAOA,EAAGzN,iBAAkBwN,EAAWE,IAAuB,MAClGtP,EAAI0G,cAActX,SAAS,SAAUigB,GAAOA,EAAGzN,iBAAkBwN,EAAWG,IAAwB,MACpGvP,EAAI2G,WAAWvX,SAAS,SAAUigB,GAAOA,EAAGzN,iBAAkBwN,EAAWI,IAAqB,MAC9FxP,EAAI4G,aAAaxX,SAAS,SAAUigB,GAAOA,EAAGzN,iBAAkBwN,EAAWK,IAAuB,MAClGzP,EAAI6G,aAAazX,SAAS,SAAUigB,GAAOA,EAAGzN,iBAAkBwN,EAAWM,IAAuB,MAClG1P,EAAI8G,aAAa1X,SAAS,SAAUigB,GAAOA,EAAGzN,iBAAkBwN,EAAWO,IAAuB,SAQpG,SAAS1J,KAERzF,GAAiB,EAEjBhL,SAAS4X,oBAAqB,UAAW0B,IAAmB,GAC5DtZ,SAAS4X,oBAAqB,WAAY2B,IAAoB,GAC9DpN,OAAOyL,oBAAqB,aAAciB,IAAoB,GAC9D1M,OAAOyL,oBAAqB,SAAUkB,IAAgB,GAEtDtO,EAAIwB,QAAQ4L,oBAAqB,cAAemB,IAAe,GAC/DvO,EAAIwB,QAAQ4L,oBAAqB,cAAeoB,IAAe,GAC/DxO,EAAIwB,QAAQ4L,oBAAqB,YAAaqB,IAAa,GAE3DzO,EAAIwB,QAAQ4L,oBAAqB,gBAAiBmB,IAAe,GACjEvO,EAAIwB,QAAQ4L,oBAAqB,gBAAiBoB,IAAe,GACjExO,EAAIwB,QAAQ4L,oBAAqB,cAAeqB,IAAa,GAE7DzO,EAAIwB,QAAQ4L,oBAAqB,aAAcuB,IAAc,GAC7D3O,EAAIwB,QAAQ4L,oBAAqB,YAAawB,IAAa,GAC3D5O,EAAIwB,QAAQ4L,oBAAqB,WAAYyB,IAAY,GAEzD7O,EAAIuG,aAAa6G,oBAAqB,QAASF,IAAQ,GAElD1R,EAAOQ,UAAYgE,EAAIhE,UAC3BgE,EAAIhE,SAASoR,oBAAqB,QAAS4B,IAAmB,GAG/D,CAAE,aAAc,SAAU5f,SAAS,SAAUggB,GAC5CpP,EAAIwG,aAAapX,SAAS,SAAUigB,GAAOA,EAAGjC,oBAAqBgC,EAAWE,IAAuB,MACrGtP,EAAI0G,cAActX,SAAS,SAAUigB,GAAOA,EAAGjC,oBAAqBgC,EAAWG,IAAwB,MACvGvP,EAAI2G,WAAWvX,SAAS,SAAUigB,GAAOA,EAAGjC,oBAAqBgC,EAAWI,IAAqB,MACjGxP,EAAI4G,aAAaxX,SAAS,SAAUigB,GAAOA,EAAGjC,oBAAqBgC,EAAWK,IAAuB,MACrGzP,EAAI6G,aAAazX,SAAS,SAAUigB,GAAOA,EAAGjC,oBAAqBgC,EAAWM,IAAuB,MACrG1P,EAAI8G,aAAa1X,SAAS,SAAUigB,GAAOA,EAAGjC,oBAAqBgC,EAAWO,IAAuB,SAYvG,SAASC,GAAgBlc,EAAI4Q,QAERuL,IAAhB5P,EAAQvM,IACXuM,EAAQvM,GAAM4Q,EAIV9E,GAAiC,oBAAhB8E,EAAOC,MAC3BD,EAAOC,QAIRuI,QAAQC,KAAM,eAAgBrZ,EAAI,wCAUpC,SAASoc,GAAWpc,GAEnB,QAASuM,EAAQvM,GAUlB,SAASqc,GAAWrc,GAEnB,OAAOuM,EAAQvM,GAQhB,SAASsc,GAAeC,EAASjM,GAET,kBAAZiM,GAAwBA,EAAQC,QAC1ChP,EAAsB+O,EAAQC,SAAW,CACxClM,SAAUA,EACV7b,IAAK8nB,EAAQ9nB,IACbgoB,YAAaF,EAAQE,aAItBjP,EAAsB+O,GAAW,CAChCjM,SAAUA,EACV7b,IAAK,KACLgoB,YAAa,MAShB,SAASC,GAAkBF,UAEnBhP,EAAsBgP,GAW9B,SAASnO,GAAQjU,EAAGC,GAEnB,IAAK,IAAIyB,KAAKzB,EACbD,EAAG0B,GAAMzB,EAAGyB,GAGb,OAAO1B,EAUR,SAASsU,GAASiO,GAEjB,OAAO/hB,MAAMgiB,UAAUthB,MAAMuhB,KAAMF,GAUpC,SAASG,GAAa5d,GAErB,GAAqB,kBAAVA,EAAqB,CAC/B,GAAc,SAAVA,EAAmB,OAAO,KACzB,GAAc,SAAVA,EAAmB,OAAO,EAC9B,GAAc,UAAVA,EAAoB,OAAO,EAC/B,GAAIA,EAAMuc,MAAO,eAAkB,OAAOsB,WAAY7d,GAG5D,OAAOA,EA4BR,SAAS8d,GAAkBhO,EAASzW,GAEnCyW,EAAQnb,MAAMopB,gBAAkB1kB,EAChCyW,EAAQnb,MAAMqpB,aAAe3kB,EAC7ByW,EAAQnb,MAAMspB,YAAc5kB,EAC5ByW,EAAQnb,MAAM0E,UAAYA,EAW3B,SAAS6kB,GAAiBC,GAGQ,kBAAtBA,EAAWhR,SAAsBD,EAAgBC,OAASgR,EAAWhR,QAC7C,kBAAxBgR,EAAWvU,WAAwBsD,EAAgBtD,SAAWuU,EAAWvU,UAGhFsD,EAAgBC,OACnB2Q,GAAkB1Q,EAAI0B,OAAQ5B,EAAgBC,OAAS,IAAMD,EAAgBtD,UAG7EkU,GAAkB1Q,EAAI0B,OAAQ5B,EAAgBtD,UAUhD,SAASkM,GAAkB9V,GAE1B,IAAIoe,EAAMxb,SAASyN,cAAe,SAClC+N,EAAI5nB,KAAO,WACP4nB,EAAIC,WACPD,EAAIC,WAAWC,QAAUte,EAGzBoe,EAAIzJ,YAAa/R,SAAS2b,eAAgBve,IAE3C4C,SAAS6M,qBAAsB,QAAS,GAAGkF,YAAayJ,GAezD,SAASI,GAAeC,EAAQC,GAE/B,IAAI9d,EAAS6d,EAAO9H,WAEpB,MAAO/V,EAAS,CAKf,IAAI+d,EAAgB/d,EAAOge,SAAWhe,EAAOie,iBAAmBje,EAAOke,kBAGvE,GAAIH,GAAiBA,EAAchB,KAAM/c,EAAQ8d,GAChD,OAAO9d,EAIRA,EAASA,EAAO+V,WAIjB,OAAO,KAmBR,SAAS+C,GAAYqF,GAEpB,IAAIC,EAAOD,EAAMxC,MAAO,qBACxB,GAAIyC,GAAQA,EAAK,GAEhB,OADAA,EAAOA,EAAK,GACL,CACNthB,EAAsC,GAAnCuhB,SAAUD,EAAKpF,OAAQ,GAAK,IAC/BsF,EAAsC,GAAnCD,SAAUD,EAAKpF,OAAQ,GAAK,IAC/Bze,EAAsC,GAAnC8jB,SAAUD,EAAKpF,OAAQ,GAAK,KAIjC,IAAIuF,EAAOJ,EAAMxC,MAAO,qBACxB,GAAI4C,GAAQA,EAAK,GAEhB,OADAA,EAAOA,EAAK,GACL,CACNzhB,EAAGuhB,SAAUE,EAAKC,OAAQ,EAAG,GAAK,IAClCF,EAAGD,SAAUE,EAAKC,OAAQ,EAAG,GAAK,IAClCjkB,EAAG8jB,SAAUE,EAAKC,OAAQ,EAAG,GAAK,KAIpC,IAAI3F,EAAMsF,EAAMxC,MAAO,oDACvB,GAAI9C,EACH,MAAO,CACN/b,EAAGuhB,SAAUxF,EAAI,GAAI,IACrByF,EAAGD,SAAUxF,EAAI,GAAI,IACrBte,EAAG8jB,SAAUxF,EAAI,GAAI,KAIvB,IAAI4F,EAAON,EAAMxC,MAAO,gFACxB,OAAI8C,EACI,CACN3hB,EAAGuhB,SAAUI,EAAK,GAAI,IACtBH,EAAGD,SAAUI,EAAK,GAAI,IACtBlkB,EAAG8jB,SAAUI,EAAK,GAAI,IACtBnkB,EAAG2iB,WAAYwB,EAAK,KAIf,KAUR,SAAS1F,GAAiBoF,GAIzB,MAFqB,kBAAVA,IAAqBA,EAAQrF,GAAYqF,IAEhDA,GACgB,IAAVA,EAAMrhB,EAAoB,IAAVqhB,EAAMG,EAAoB,IAAVH,EAAM5jB,GAAY,IAGrD,KAaR,SAASmkB,GAAoBxP,EAASrR,GAIrC,GAFAA,EAASA,GAAU,EAEfqR,EAAU,CACb,IAAIyP,EAAWC,EAAY1P,EAAQnb,MAAM8J,OAkBzC,OAdAqR,EAAQnb,MAAM8J,OAAS,MAIvBqR,EAAQ6G,WAAWhiB,MAAM8J,OAAS,OAElC8gB,EAAY9gB,EAASqR,EAAQ6G,WAAW8I,aAGxC3P,EAAQnb,MAAM8J,OAAS+gB,EAAY,KAGnC1P,EAAQ6G,WAAWhiB,MAAM+qB,eAAe,UAEjCH,EAGR,OAAO9gB,EAOR,SAAS2U,KAER,MAAS,cAAgBnD,KAAMlB,OAAO4Q,SAASC,QAOhD,SAAS1U,KAEJtC,EAAOsC,gBAAkBlD,IAE5B+G,OAAOC,iBAAkB,OAAQ6Q,IAAkB,GACnD9Q,OAAOC,iBAAkB,oBAAqB6Q,IAAkB,IASlE,SAASA,KAERza,YAAY,WACX2J,OAAO+Q,SAAU,EAAG,KAClB,IAQJ,SAAS3M,GAAe3c,EAAMwjB,GAE7B,IAAI/U,EAAQrC,SAASmd,YAAa,aAAc,EAAG,GACnD9a,EAAM+a,UAAWxpB,GAAM,GAAM,GAC7B2Y,GAAQlK,EAAO+U,GACf5M,EAAIwB,QAAQuE,cAAelO,GAI3BgV,GAAqBzjB,GAOtB,SAASyjB,GAAqBzjB,EAAMvD,GAEnC,GAAI2V,EAAOyC,mBAAqB0D,OAAOnO,SAAWmO,OAAOkR,KAAO,CAC/D,IAAIC,EAAU,CACbC,UAAW,SACX3D,UAAWhmB,EACXyW,MAAOmT,MAGRjR,GAAQ+Q,EAASjtB,GAEjB8b,OAAOnO,OAAOwK,YAAavP,KAAKE,UAAWmkB,GAAW,MAQxD,SAASzF,KAER,GAAIlN,EAASoB,gBAAmB,kBAAmB/L,SAASyM,KAAK1a,OAGhE,IAFA,IAAI0rB,EAAUjT,EAAIwB,QAAQiF,iBAAkBzL,EAAkB,MAErDxL,EAAI,EAAGiT,EAAMwQ,EAAQjqB,OAAQwG,EAAIiT,EAAKjT,IAAM,CACpD,IAAI0jB,EAASD,EAAQzjB,GAErB,GAAI0jB,EAAOtL,cAAgBsL,EAAOzR,cAAe,QAAYyR,EAAO5J,YAAc4J,EAAOtN,UAAUmD,SAAUmK,EAAQ,SAAa,CACjI,IAAIC,EAAO3d,SAASyN,cAAc,QAClCkQ,EAAKjR,aAAa,aAAcgR,EAAOxL,MACvCyL,EAAKrJ,UAAYoJ,EAAOpJ,UAExBoJ,EAAOtN,UAAUE,IAAK,QACtBoN,EAAOpJ,UAAY,GACnBoJ,EAAO3L,YAAY4L,KAUvB,SAAS7F,KAIR,IAFA,IAAI2F,EAAUjT,EAAIwB,QAAQiF,iBAAkBzL,EAAkB,WAErDxL,EAAI,EAAGiT,EAAMwQ,EAAQjqB,OAAQwG,EAAIiT,EAAKjT,IAAM,CACpD,IAAI0jB,EAASD,EAAQzjB,GACjB2jB,EAAOD,EAAOzR,cAAe,QAE7B0R,IACHD,EAAOtN,UAAUC,OAAQ,QACzBqN,EAAOpJ,UAAYqJ,EAAKrJ,YAW3B,SAAS2D,GAAoB6D,GAE5B,IAAI2B,EAAU7Q,GAAS5M,SAASiR,iBAAkB6K,GAAsB,MAExE2B,EAAQ7jB,SAAS,SAAUsT,GACtB,gBAAgBG,KAAMH,EAAQC,aAAc,UAC/CD,EAAQd,iBAAkB,QAASwR,IAAsB,MAS5D,SAAS1F,GAAqB4D,GAE7B,IAAI2B,EAAU7Q,GAAS5M,SAASiR,iBAAkB6K,GAAsB,MAExE2B,EAAQ7jB,SAAS,SAAUsT,GACtB,gBAAgBG,KAAMH,EAAQC,aAAc,UAC/CD,EAAQ0K,oBAAqB,QAASgG,IAAsB,MAW/D,SAASC,GAAa3O,GAErB4O,KAEAtT,EAAIuT,QAAU/d,SAASyN,cAAe,OACtCjD,EAAIuT,QAAQ3N,UAAUE,IAAK,WAC3B9F,EAAIuT,QAAQ3N,UAAUE,IAAK,mBAC3B9F,EAAIwB,QAAQ+F,YAAavH,EAAIuT,SAE7BvT,EAAIuT,QAAQzJ,UAAY,CACvB,WACC,2DACA,6BAA8BpF,EAAK,mDACpC,YACA,8BACA,yBACC,gBAAiBA,EAAK,cACtB,iCACC,wHACD,WACD,UACClX,KAAK,IAEPwS,EAAIuT,QAAQ9R,cAAe,UAAWG,iBAAkB,QAAQ,SAAU/J,GACzEmI,EAAIuT,QAAQ3N,UAAUE,IAAK,aACzB,GAEH9F,EAAIuT,QAAQ9R,cAAe,UAAWG,iBAAkB,SAAS,SAAU/J,GAC1Eyb,KACAzb,EAAM2b,oBACJ,GAEHxT,EAAIuT,QAAQ9R,cAAe,aAAcG,iBAAkB,SAAS,SAAU/J,GAC7Eyb,QACE,GAEHtb,YAAY,WACXgI,EAAIuT,QAAQ3N,UAAUE,IAAK,aACzB,GAWJ,SAAS2N,GAAYC,GAEI,mBAAbA,EACVA,EAAWC,KAAaL,KAGpBtT,EAAIuT,QACPD,KAGAK,KAQH,SAASA,KAER,GAAInY,EAAO2B,KAAO,CAEjBmW,KAEAtT,EAAIuT,QAAU/d,SAASyN,cAAe,OACtCjD,EAAIuT,QAAQ3N,UAAUE,IAAK,WAC3B9F,EAAIuT,QAAQ3N,UAAUE,IAAK,gBAC3B9F,EAAIwB,QAAQ+F,YAAavH,EAAIuT,SAE7B,IAAIK,EAAO,+CAGX,IAAK,IAAIzrB,KADTyrB,GAAQ,qCACQ3S,EACf2S,GAAQ,WAAazrB,EAAM,YAAc8Y,EAAmB9Y,GAAQ,aAIrE,IAAK,IAAI8nB,KAAW/O,EACfA,EAAsB+O,GAAS9nB,KAAO+Y,EAAsB+O,GAASE,cACxEyD,GAAQ,WAAa1S,EAAsB+O,GAAS9nB,IAAM,YAAc+Y,EAAsB+O,GAASE,YAAc,cAIvHyD,GAAQ,WAER5T,EAAIuT,QAAQzJ,UAAY,CACvB,WACC,2DACD,YACA,yBACC,+BAAgC8J,EAAM,SACvC,UACCpmB,KAAK,IAEPwS,EAAIuT,QAAQ9R,cAAe,UAAWG,iBAAkB,SAAS,SAAU/J,GAC1Eyb,KACAzb,EAAM2b,oBACJ,GAEHxb,YAAY,WACXgI,EAAIuT,QAAQ3N,UAAUE,IAAK,aACzB,IASL,SAASwN,KAEJtT,EAAIuT,UACPvT,EAAIuT,QAAQhK,WAAWsK,YAAa7T,EAAIuT,SACxCvT,EAAIuT,QAAU,MAShB,SAASxT,KAER,GAAIC,EAAIwB,UAAYwE,KAAkB,CAErC,IAAKxK,EAAOiB,cAAgB,CAQvB7B,GACHpF,SAASse,gBAAgBvsB,MAAMwsB,YAAa,OAA+B,IAArBpS,OAAO0G,YAAuB,MAGrF,IAAInhB,EAAOihB,KAEP6L,EAAWhpB,EAGf2d,GAAqBnN,EAAOpK,MAAOoK,EAAOnK,QAE1C2O,EAAI0B,OAAOna,MAAM6J,MAAQlK,EAAKkK,MAAQ,KACtC4O,EAAI0B,OAAOna,MAAM8J,OAASnK,EAAKmK,OAAS,KAGxCrG,EAAQvB,KAAK4f,IAAKniB,EAAK+sB,kBAAoB/sB,EAAKkK,MAAOlK,EAAKgtB,mBAAqBhtB,EAAKmK,QAGtFrG,EAAQvB,KAAK0f,IAAKne,EAAOwQ,EAAOE,UAChC1Q,EAAQvB,KAAK4f,IAAKre,EAAOwQ,EAAOG,UAGlB,IAAV3Q,GACHgV,EAAI0B,OAAOna,MAAMgK,KAAO,GACxByO,EAAI0B,OAAOna,MAAM6D,KAAO,GACxB4U,EAAI0B,OAAOna,MAAM8D,IAAM,GACvB2U,EAAI0B,OAAOna,MAAMkE,OAAS,GAC1BuU,EAAI0B,OAAOna,MAAMgE,MAAQ,GACzBulB,GAAiB,CAAE/Q,OAAQ,MAQvB/U,EAAQ,GAAKmV,EAAS5O,MAAQoQ,OAAOwS,iBAAmB,GAC3DnU,EAAI0B,OAAOna,MAAMgK,KAAOvG,EACxBgV,EAAI0B,OAAOna,MAAM6D,KAAO,GACxB4U,EAAI0B,OAAOna,MAAM8D,IAAM,GACvB2U,EAAI0B,OAAOna,MAAMkE,OAAS,GAC1BuU,EAAI0B,OAAOna,MAAMgE,MAAQ,GACzBulB,GAAiB,CAAE/Q,OAAQ,OAO3BC,EAAI0B,OAAOna,MAAMgK,KAAO,GACxByO,EAAI0B,OAAOna,MAAM6D,KAAO,MACxB4U,EAAI0B,OAAOna,MAAM8D,IAAM,MACvB2U,EAAI0B,OAAOna,MAAMkE,OAAS,OAC1BuU,EAAI0B,OAAOna,MAAMgE,MAAQ,OACzBulB,GAAiB,CAAE/Q,OAAQ,+BAAgC/U,EAAO,OAOpE,IAFA,IAAI0W,EAASU,GAASpC,EAAIwB,QAAQiF,iBAAkBzL,IAE3CxL,EAAI,EAAGiT,EAAMf,EAAO1Y,OAAQwG,EAAIiT,EAAKjT,IAAM,CACnD,IAAIqZ,EAAQnH,EAAQlS,GAGQ,SAAxBqZ,EAAMthB,MAAM4X,UAIZ3D,EAAOkB,QAAUmM,EAAMjD,UAAUmD,SAAU,UAG1CF,EAAMjD,UAAUmD,SAAU,SAC7BF,EAAMthB,MAAM8D,IAAM,EAGlBwd,EAAMthB,MAAM8D,IAAM5B,KAAK0f,KAAOjiB,EAAKmK,OAASwX,EAAMI,cAAiB,EAAG,GAAM,KAI7EJ,EAAMthB,MAAM8D,IAAM,IAKhB2oB,IAAahpB,GAChB+a,GAAe,SAAU,CACxB,SAAYiO,EACZ,MAAShpB,EACT,KAAQ9D,IAKXktB,KACAC,KAEIC,MACHC,MAcH,SAAS5L,GAAqBvX,EAAOC,GAGpC+Q,GAASpC,EAAI0B,OAAO+E,iBAAkB,uBAAyBrX,SAAS,SAAUsT,GAGjF,IAAI8R,EAAkBtC,GAAoBxP,EAASrR,GAGnD,GAAI,gBAAgBwR,KAAMH,EAAQ+R,UAAa,CAC9C,IAAIC,EAAKhS,EAAQiS,cAAgBjS,EAAQkS,WACxCC,EAAKnS,EAAQoS,eAAiBpS,EAAQqS,YAEnCC,EAAKvrB,KAAK4f,IAAKjY,EAAQsjB,EAAIF,EAAkBK,GAEjDnS,EAAQnb,MAAM6J,MAAUsjB,EAAKM,EAAO,KACpCtS,EAAQnb,MAAM8J,OAAWwjB,EAAKG,EAAO,UAIrCtS,EAAQnb,MAAM6J,MAAQA,EAAQ,KAC9BsR,EAAQnb,MAAM8J,OAASmjB,EAAkB,QAe5C,SAASrM,GAAsB8L,EAAmBC,GAEjD,IAAIhtB,EAAO,CAEVkK,MAAOoK,EAAOpK,MACdC,OAAQmK,EAAOnK,OAGf4iB,kBAAmBA,GAAqBjU,EAAIwB,QAAQyT,YACpDf,mBAAoBA,GAAsBlU,EAAIwB,QAAQ6Q,cAiBvD,OAbAnrB,EAAK+sB,mBAAuB/sB,EAAK+sB,kBAAoBzY,EAAOC,OAC5DvU,EAAKgtB,oBAAwBhtB,EAAKgtB,mBAAqB1Y,EAAOC,OAGpC,kBAAfvU,EAAKkK,OAAsB,KAAKyR,KAAM3b,EAAKkK,SACrDlK,EAAKkK,MAAQygB,SAAU3qB,EAAKkK,MAAO,IAAO,IAAMlK,EAAK+sB,mBAI3B,kBAAhB/sB,EAAKmK,QAAuB,KAAKwR,KAAM3b,EAAKmK,UACtDnK,EAAKmK,OAASwgB,SAAU3qB,EAAKmK,OAAQ,IAAO,IAAMnK,EAAKgtB,oBAGjDhtB,EAYR,SAASguB,GAA0BC,EAAOhmB,GAEpB,kBAAVgmB,GAAoD,oBAAvBA,EAAMjT,cAC7CiT,EAAMjT,aAAc,uBAAwB/S,GAAK,GAYnD,SAASimB,GAA0BD,GAElC,GAAqB,kBAAVA,GAAoD,oBAAvBA,EAAMjT,cAA+BiT,EAAMvP,UAAUmD,SAAU,SAAY,CAElH,IAAIsM,EAAgBF,EAAMjJ,aAAc,qBAAwB,oBAAsB,uBAEtF,OAAO2F,SAAUsD,EAAMxS,aAAc0S,IAAmB,EAAG,IAG5D,OAAO,EAQR,SAASC,KAGR,GAAI9Z,EAAOgB,WAAa8X,KAAe,CAEtC9X,GAAW,EAEXwD,EAAIwB,QAAQoE,UAAUE,IAAK,YAC3B9F,EAAIwB,QAAQoE,UAAUC,OAAQ,yBAE1B1F,EAASqD,qBACZxL,YAAY,WACXgI,EAAIwB,QAAQoE,UAAUE,IAAK,uBACzB,GAIJyP,KAIAvV,EAAI0B,OAAO6F,YAAavH,EAAImG,YAG5B/D,GAASpC,EAAIwB,QAAQiF,iBAAkBzL,IAAoB5L,SAAS,SAAUyZ,GACxEA,EAAMjD,UAAUmD,SAAU,UAC9BF,EAAMjH,iBAAkB,QAAS4T,IAAwB,MAK3D,IAAI/Z,EAAS,GACTyM,EAAYC,KAChB1I,EAAqByI,EAAU9W,MAAQqK,EACvCiE,EAAsBwI,EAAU7W,OAASoK,EAGrCD,EAAOqB,MACV4C,GAAsBA,GAGvBgW,KACAC,KACAnB,KAEAxU,KAGAgG,GAAe,gBAAiB,CAC/B,OAAUxL,EACV,OAAUC,EACV,aAAgBE,KAWnB,SAASgb,KAGRtT,GAASpC,EAAIwB,QAAQiF,iBAAkBxL,IAA+B7L,SAAS,SAAUumB,EAAQzjB,GAChGyjB,EAAOzT,aAAc,eAAgBhQ,GACrCwe,GAAkBiF,EAAQ,eAAmBzjB,EAAIuN,EAAuB,aAEpEkW,EAAO/P,UAAUmD,SAAU,UAE9B3G,GAASuT,EAAOlP,iBAAkB,YAAcrX,SAAS,SAAUwmB,EAAQzmB,GAC1EymB,EAAO1T,aAAc,eAAgBhQ,GACrC0jB,EAAO1T,aAAc,eAAgB/S,GAErCuhB,GAAkBkF,EAAQ,kBAAsBzmB,EAAIuQ,EAAwB,gBAO/E0C,GAASpC,EAAImG,WAAW6B,YAAa5Y,SAAS,SAAUymB,EAAa3jB,GACpEwe,GAAkBmF,EAAa,eAAmB3jB,EAAIuN,EAAuB,aAE7E2C,GAASyT,EAAYpP,iBAAkB,sBAAwBrX,SAAS,SAAU0mB,EAAa3mB,GAC9FuhB,GAAkBoF,EAAa,kBAAsB3mB,EAAIuQ,EAAwB,gBAUpF,SAAS6U,KAER,IAAIwB,EAAOtsB,KAAK4f,IAAK1H,OAAOyG,WAAYzG,OAAO0G,aAC3Crd,EAAQvB,KAAK0f,IAAK4M,EAAO,EAAG,KAAQA,EAExCjF,GAAiB,CAChBtU,SAAU,CACT,SAAUxR,EAAO,IACjB,eAAkBuP,EAASkF,EAAsB,MACjD,eAAkBjF,EAASkF,EAAuB,OACjDlS,KAAM,OASV,SAASwoB,KAGJxa,EAAOgB,WAEVA,GAAW,EAEXwD,EAAIwB,QAAQoE,UAAUC,OAAQ,YAC9B7F,EAAIwB,QAAQoE,UAAUC,OAAQ,qBAK9B7F,EAAIwB,QAAQoE,UAAUE,IAAK,yBAE3B9N,YAAY,WACXgI,EAAIwB,QAAQoE,UAAUC,OAAQ,2BAC5B,GAGH7F,EAAIwB,QAAQ+F,YAAavH,EAAImG,YAG7B/D,GAASpC,EAAIwB,QAAQiF,iBAAkBzL,IAAoB5L,SAAS,SAAUyZ,GAC7E6H,GAAkB7H,EAAO,IAEzBA,EAAMuE,oBAAqB,QAASoI,IAAwB,MAI7DpT,GAASpC,EAAImG,WAAWM,iBAAkB,sBAAwBrX,SAAS,SAAU+W,GACpFuK,GAAkBvK,EAAY,OAG/B2K,GAAiB,CAAEtU,SAAU,KAE7BqM,GAAOtO,EAAQC,GAEfuF,KAEAkW,KAGAlQ,GAAe,iBAAkB,CAChC,OAAUxL,EACV,OAAUC,EACV,aAAgBE,KAanB,SAASwb,GAAgBxC,GAEA,mBAAbA,EACVA,EAAW4B,KAAqBU,KAGhC1B,KAAe0B,KAAuBV,KAWxC,SAAShB,KAER,OAAO9X,EASR,SAAS2Z,GAActN,GAEtB,IAAInE,EAAM,IAGNf,EAAIkF,GAASnO,EACbhH,EAAKiQ,EAAIA,EAAEhB,aAAc,MAAS,KAClCjP,IACHA,EAAK0iB,mBAAoB1iB,IAG1B,IAAIlL,EAAQ6tB,GAAYxN,GAOxB,GANKrN,EAAOyB,gBACXzU,EAAM8tB,OAAIzG,GAKO,kBAAPnc,GAAmBA,EAAG1K,aAAsB6mB,IAAZrnB,EAAM8tB,EAChD5R,EAAM,IAAMhR,MAGR,CACJ,IAAI6iB,EAAgB/a,EAAOW,kBAAoB,EAAI,GAC/C3T,EAAM0J,EAAI,GAAK1J,EAAM2G,EAAI,QAAiB0gB,IAAZrnB,EAAM8tB,KAAkB5R,GAAOlc,EAAM0J,EAAIqkB,IACvE/tB,EAAM2G,EAAI,QAAiB0gB,IAAZrnB,EAAM8tB,KAAkB5R,GAAO,KAAOlc,EAAM2G,EAAIonB,SACnD1G,IAAZrnB,EAAM8tB,IAAkB5R,GAAO,IAAMlc,EAAM8tB,GAGhD,OAAO5R,EAYR,SAAS8R,GAAiB3N,GAKzB,OAFAA,EAAQA,GAAgBnO,EAEjBmO,GAASA,EAAMU,cAAgBV,EAAMU,WAAWkL,SAAStF,MAAO,YAUxE,SAASsH,KAER,IAAI/T,EAAUlN,SAASse,gBAGnB4C,EAAgBhU,EAAQiU,mBACvBjU,EAAQkU,yBACRlU,EAAQmU,yBACRnU,EAAQoU,sBACRpU,EAAQqU,oBAETL,GACHA,EAAc/J,MAAOjK,GASvB,SAAS8K,KAEJlN,IACHA,GAAe,EACfN,EAAIwB,QAAQja,MAAMoN,OAAS,IAS7B,SAASqiB,MAEa,IAAjB1W,IACHA,GAAe,EACfN,EAAIwB,QAAQja,MAAMoN,OAAS,QAS7B,SAASyI,KAER,GAAI5B,EAAO4B,MAAQ,CAClB,IAAI6Z,EAAYjX,EAAIwB,QAAQoE,UAAUmD,SAAU,UAEhDwM,KACAvV,EAAIwB,QAAQoE,UAAUE,IAAK,WAET,IAAdmR,GACHlR,GAAe,WASlB,SAASmH,KAER,IAAI+J,EAAYjX,EAAIwB,QAAQoE,UAAUmD,SAAU,UAChD/I,EAAIwB,QAAQoE,UAAUC,OAAQ,UAE9BoQ,KAEIgB,GACHlR,GAAe,WAQjB,SAASmR,GAAaxD,GAEG,mBAAbA,EACVA,EAAWtW,KAAU8P,KAGrBiK,KAAajK,KAAW9P,KAU1B,SAAS+Z,KAER,OAAOnX,EAAIwB,QAAQoE,UAAUmD,SAAU,UAWxC,SAASqO,GAAiB1D,GAED,mBAAbA,EACVA,EAAW2D,KAAoBC,KAI/B3W,EAAkB0W,KAAoBC,KAUxC,SAASC,KAER,SAAW/Z,GAAcmD,GAe1B,SAASkI,GAAO3W,EAAG/C,EAAGmnB,EAAGjG,GAGxB5V,EAAgBC,EAGhB,IAAI8c,EAAmBxX,EAAIwB,QAAQiF,iBAAkBxL,GAGrD,GAAgC,IAA5Buc,EAAiBxuB,OAArB,MAIU6mB,IAAN1gB,GAAoBmlB,OACvBnlB,EAAIimB,GAA0BoC,EAAkBtlB,KAK7CuI,GAAiBA,EAAc8O,YAAc9O,EAAc8O,WAAW3D,UAAUmD,SAAU,UAC7FmM,GAA0Bza,EAAc8O,WAAY/O,GAIrD,IAAIid,EAAc5X,EAAM2C,SAGxB3C,EAAM7W,OAAS,EAEf,IAAI0uB,EAAend,GAAU,EAC5Bod,EAAend,GAAU,EAG1BD,EAASqd,GAAc3c,OAAkC4U,IAAN3d,EAAkBqI,EAASrI,GAC9EsI,EAASod,GAAc1c,OAAgC2U,IAAN1gB,EAAkBqL,EAASrL,GAG5EsmB,KAEA1V,KAGIuU,MACHC,KAKD,IAAIsD,EAAyBL,EAAkBjd,GAC9Cud,EAAwBD,EAAuBpR,iBAAkB,WAGlE/L,EAAeod,EAAuBtd,IAAYqd,EAGjC,qBAANvB,GACVyB,GAAkBzB,GAInB,IAAI0B,EAAiBzd,IAAWmd,GAAgBld,IAAWmd,EACtDK,IAEJvd,EAAgB,MAMbA,GAAiBA,IAAkBC,IACtCD,EAAcmL,UAAUC,OAAQ,WAChCpL,EAAcyH,aAAc,cAAe,QAItClC,EAAIwB,QAAQC,cAAetG,GAAsByK,UAAUmD,SAAU,YAEzE/Q,YAAY,WACX,IAA8FxI,EAA1FkS,EAASU,GAASpC,EAAIwB,QAAQiF,iBAAkBxL,EAA6B,WACjF,IAAKzL,KAAKkS,EACLA,EAAOlS,IAEV0lB,GAA0BxT,EAAOlS,GAAI,KAGrC,IAKLyoB,EAAW,IAAK,IAAIzoB,EAAI,EAAGiT,EAAM5C,EAAM7W,OAAQwG,EAAIiT,EAAKjT,IAAM,CAG7D,IAAK,IAAIC,EAAI,EAAGA,EAAIgoB,EAAYzuB,OAAQyG,IACvC,GAAIgoB,EAAYhoB,KAAOoQ,EAAMrQ,GAAK,CACjCioB,EAAYS,OAAQzoB,EAAG,GACvB,SAASwoB,EAIXziB,SAASse,gBAAgBlO,UAAUE,IAAKjG,EAAMrQ,IAG9CuW,GAAelG,EAAMrQ,IAItB,MAAOioB,EAAYzuB,OAClBwM,SAASse,gBAAgBlO,UAAUC,OAAQ4R,EAAYU,OAGpDH,GACHjS,GAAe,eAAgB,CAC9B,OAAUxL,EACV,OAAUC,EACV,cAAiBC,EACjB,aAAgBC,EAChB,OAAU2V,KAKR2H,GAAiBvd,IACpB2d,GAAqB3d,GACrB4d,GAAsB3d,IAIvBsF,EAAIiH,UAAUW,YAAcJ,EAAe9M,GAE3C4d,KACAlE,KACAzO,KACA0O,KACAkE,KACAC,KACAC,KAGAC,KAEAzC,MASD,SAAS/H,KAGRjI,KACAkI,KAGApO,KAGAvC,EAAYhC,EAAOgC,UAGnByY,KAGAjL,KAGA0N,KAEAC,KAEAL,KACAlE,KACAmE,KACA9C,KACA9P,IAAkB,GAClBiT,KACAJ,KAEAK,MAG6B,IAAzBrd,EAAO8B,cACV8a,GAAqB1d,EAAc,CAAEoe,eAAe,IAGpDT,GAAsB3d,GAGnB4Z,MACHoB,KAeF,SAASqD,GAAWlQ,GAGnBA,EAAQA,GAASnO,EAEjBkR,GAAgB/C,GAChBmQ,GAAenQ,GAEfoQ,GAAWpQ,GAEXlD,KACA6S,KAYD,SAASQ,GAAenQ,GAKvB,OAFAA,EAAQA,GAASnO,EAEV0P,GAAevB,EAAMpC,iBAAkB,cAQ/C,SAASjB,KAER,IAAIgS,EAAmBpV,GAASpC,EAAIwB,QAAQiF,iBAAkBxL,IAC9Duc,EAAiBpoB,SAAS,SAAU8pB,GAEnC,IAAIC,EAAiB/W,GAAS8W,EAAgBzS,iBAAkB,YAChE0S,EAAe/pB,SAAS,SAAUgqB,EAAejoB,GAE5CA,EAAI,IACPioB,EAAcxT,UAAUC,OAAQ,WAChCuT,EAAcxT,UAAUC,OAAQ,QAChCuT,EAAcxT,UAAUE,IAAK,UAC7BsT,EAAclX,aAAc,cAAe,eAa/C,SAASyW,KAER,IAAInB,EAAmBpV,GAASpC,EAAIwB,QAAQiF,iBAAkBxL,IAC9Duc,EAAiBpoB,SAAS,SAAU8pB,GAEnC,IAAIC,EAAiB/W,GAAS8W,EAAgBzS,iBAAkB,YAChE0S,EAAe/pB,SAAS,SAAUgqB,EAAejoB,GAEhDiZ,GAAegP,EAAc3S,iBAAkB,iBAIlB,IAA1B0S,EAAenwB,QAAeohB,GAAe8O,EAAgBzS,iBAAkB,iBASrF,SAAS1J,KAER,IAAI2E,EAASU,GAASpC,EAAIwB,QAAQiF,iBAAkBxL,IAEpDyG,EAAOtS,SAAS,SAAUyZ,GAIzB7I,EAAI0B,OAAOyD,aAAc0D,EAAOnH,EAAQjY,KAAKiJ,MAAOjJ,KAAK4vB,SAAW3X,EAAO1Y,aAmB7E,SAAS4uB,GAActG,EAAU9oB,GAIhC,IAAIkZ,EAASU,GAASpC,EAAIwB,QAAQiF,iBAAkB6K,IACnDgI,EAAe5X,EAAO1Y,OAEnBuwB,EAAYvT,KAEhB,GAAIsT,EAAe,CAGd9d,EAAOoB,OACVpU,GAAS8wB,EAEL9wB,EAAQ,IACXA,EAAQ8wB,EAAe9wB,IAKzBA,EAAQiB,KAAK0f,IAAK1f,KAAK4f,IAAK7gB,EAAO8wB,EAAe,GAAK,GAEvD,IAAK,IAAI9pB,EAAI,EAAGA,EAAI8pB,EAAc9pB,IAAM,CACvC,IAAIkT,EAAUhB,EAAOlS,GAEjBgqB,EAAUhe,EAAOqB,MAAQ2Z,GAAiB9T,GAE9CA,EAAQkD,UAAUC,OAAQ,QAC1BnD,EAAQkD,UAAUC,OAAQ,WAC1BnD,EAAQkD,UAAUC,OAAQ,UAG1BnD,EAAQR,aAAc,SAAU,IAChCQ,EAAQR,aAAc,cAAe,QAGjCQ,EAAQjB,cAAe,YAC1BiB,EAAQkD,UAAUE,IAAK,SAIpByT,EACH7W,EAAQkD,UAAUE,IAAK,WAIpBtW,EAAIhH,GAEPka,EAAQkD,UAAUE,IAAK0T,EAAU,SAAW,QAExChe,EAAOwB,WAEVoF,GAASM,EAAQ+D,iBAAkB,cAAgBrX,SAAS,SAAUib,GACrEA,EAASzE,UAAUE,IAAK,WACxBuE,EAASzE,UAAUC,OAAQ,wBAIrBrW,EAAIhH,IAEZka,EAAQkD,UAAUE,IAAK0T,EAAU,OAAS,UAEtChe,EAAOwB,WAEVoF,GAASM,EAAQ+D,iBAAkB,sBAAwBrX,SAAS,SAAUib,GAC7EA,EAASzE,UAAUC,OAAQ,WAC3BwE,EAASzE,UAAUC,OAAQ,wBAO/BnE,EAAOlZ,GAAOod,UAAUE,IAAK,WAC7BpE,EAAOlZ,GAAOoa,gBAAiB,UAC/BlB,EAAOlZ,GAAOoa,gBAAiB,eAI/B,IAAI6W,EAAa/X,EAAOlZ,GAAOma,aAAc,cACzC8W,IACH5Z,EAAQA,EAAM2C,OAAQiX,EAAWC,MAAO,YAOzClxB,EAAQ,EAGT,OAAOA,EAQR,SAASitB,KAIR,IAECkE,EACAC,EAHGpC,EAAmBpV,GAASpC,EAAIwB,QAAQiF,iBAAkBxL,IAC7D4e,EAAyBrC,EAAiBxuB,OAI3C,GAAI6wB,GAA4C,qBAAXtf,EAAyB,CAI7D,IAAI0E,EAAeqV,KAAe,GAAK9Y,EAAOyD,aAI1CrE,IACHqE,EAAeqV,KAAe,EAAI9Y,EAAO0D,oBAItC8G,OACH/G,EAAeJ,OAAOib,WAGvB,IAAK,IAAI5oB,EAAI,EAAGA,EAAI2oB,EAAwB3oB,IAAM,CACjD,IAAIgoB,EAAkB1B,EAAiBtmB,GAEnCioB,EAAiB/W,GAAS8W,EAAgBzS,iBAAkB,YAC/DsT,EAAuBZ,EAAenwB,OAmBvC,GAhBA2wB,EAAYlwB,KAAKuwB,KAAOzf,GAAU,GAAMrJ,IAAO,EAI3CsK,EAAOoB,OACV+c,EAAYlwB,KAAKuwB,MAASzf,GAAU,GAAMrJ,IAAQ2oB,EAAyB5a,KAAoB,GAI5F0a,EAAY1a,EACfga,GAAWC,GAGXe,GAAaf,GAGVa,EAIH,IAFA,IAAIG,EAAK9E,GAA0B8D,GAE1B/nB,EAAI,EAAGA,EAAI4oB,EAAsB5oB,IAAM,CAC/C,IAAIioB,EAAgBD,EAAehoB,GAEnCyoB,EAAY1oB,KAAQqJ,GAAU,GAAM9Q,KAAKuwB,KAAOxf,GAAU,GAAMrJ,GAAM1H,KAAKuwB,IAAK7oB,EAAI+oB,GAEhFP,EAAYC,EAAY3a,EAC3Bga,GAAWG,GAGXa,GAAab,IAQbe,KACHna,EAAIwB,QAAQoE,UAAUE,IAAK,uBAG3B9F,EAAIwB,QAAQoE,UAAUC,OAAQ,uBAI3BuU,KACHpa,EAAIwB,QAAQoE,UAAUE,IAAK,yBAG3B9F,EAAIwB,QAAQoE,UAAUC,OAAQ,0BAajC,SAAS2S,KAEJhd,EAAO6B,WAAa2C,EAAIsG,cAAgB5L,IAAiBsL,OAE5DhG,EAAIsG,aAAawD,UAAYJ,MAAmB,kEAYlD,SAASkP,KAEJpd,EAAO6B,WAAagd,KACvBra,EAAIwB,QAAQoE,UAAUE,IAAK,cAG3B9F,EAAIwB,QAAQoE,UAAUC,OAAQ,cAShC,SAASwU,KAER,OAAOra,EAAI0B,OAAO+E,iBAAkB,6BAA8Bzd,OAAS,EAO5E,SAASorB,KAGJ5Y,EAAOQ,UAAYgE,EAAIqG,cAE1BrG,EAAIqG,YAAY9e,MAAM6J,MAAQkpB,KAAgBta,EAAIwB,QAAQyT,YAAc,MAU1E,SAASsD,KAGJ/c,EAAOS,aAAe+D,EAAI/D,cAC7B+D,EAAI/D,YAAY6N,UAAYhB,MAS9B,SAASA,GAAgBD,GAExB,IAAIjW,EACA2nB,EAAS,MAKb,QAJc1K,IAAVhH,IACHA,EAAQnO,GAG0B,oBAAvBc,EAAOS,YAClBrJ,EAAQ4I,EAAOS,YAAa4M,QAc5B,OAXkC,kBAAvBrN,EAAOS,cACjBse,EAAS/e,EAAOS,aAKZ,IAAI4G,KAAM0X,IAAkF,IAAtEva,EAAIwB,QAAQiF,iBAAkBxL,GAA6BjS,SACrFuxB,EAAS,KAGV3nB,EAAQ,GACA2nB,GACP,IAAK,IACJ3nB,EAAMqH,KAAMugB,GAAmB3R,GAAU,GACzC,MACD,IAAK,MACJjW,EAAMqH,KAAMugB,GAAmB3R,GAAU,EAAG,IAAK4R,MACjD,MACD,QACC,IAAIC,EAAUrE,GAAYxN,GAC1BjW,EAAMqH,KAAMygB,EAAQxoB,EAAI,GACxB,IAAIyoB,EAAiB,QAAXJ,EAAmB,IAAM,IAC/B/D,GAAiB3N,IAAUjW,EAAMqH,KAAM0gB,EAAKD,EAAQvrB,EAAI,GAI/D,IAAIuV,EAAM,IAAMyR,GAActN,GAC9B,OAAO+R,GAAmBhoB,EAAM,GAAIA,EAAM,GAAIA,EAAM,GAAI8R,GAczD,SAASkW,GAAmB9sB,EAAG+sB,EAAW9sB,EAAG2W,GAK5C,YAHYmL,IAARnL,IACHA,EAAM,IAAMyR,MAEI,kBAANpoB,GAAmB+sB,MAAO/sB,GAQ7B,YAAc2W,EAAd,kCACiC5W,EADjC,cAPC,YAAc4W,EAAd,kCAC2B5W,EAD3B,+CAEmC+sB,EAFnC,uCAG2B9sB,EAH3B,cAiBV,SAASuqB,KAER,IAAIyC,EAASC,KACThe,EAAYie,KAGhBjb,EAAIwG,aAAahE,OAAQxC,EAAI0G,eACxBlE,OAAQxC,EAAI2G,YACZnE,OAAQxC,EAAI4G,cACZpE,OAAQxC,EAAI6G,cACZrE,OAAQxC,EAAI8G,cAAe1X,SAAS,SAAUqY,GAClDA,EAAK7B,UAAUC,OAAQ,WACvB4B,EAAK7B,UAAUC,OAAQ,cAGvB4B,EAAKvF,aAAc,WAAY,eAI5B6Y,EAAO3vB,MAAO4U,EAAIwG,aAAapX,SAAS,SAAUigB,GAAOA,EAAGzJ,UAAUE,IAAK,WAAauJ,EAAGzM,gBAAiB,eAC5GmY,EAAOxvB,OAAQyU,EAAI0G,cAActX,SAAS,SAAUigB,GAAOA,EAAGzJ,UAAUE,IAAK,WAAauJ,EAAGzM,gBAAiB,eAC9GmY,EAAOG,IAAKlb,EAAI2G,WAAWvX,SAAS,SAAUigB,GAAOA,EAAGzJ,UAAUE,IAAK,WAAauJ,EAAGzM,gBAAiB,eACxGmY,EAAOI,MAAOnb,EAAI4G,aAAaxX,SAAS,SAAUigB,GAAOA,EAAGzJ,UAAUE,IAAK,WAAauJ,EAAGzM,gBAAiB,gBAG5GmY,EAAO3vB,MAAQ2vB,EAAOG,KAAKlb,EAAI6G,aAAazX,SAAS,SAAUigB,GAAOA,EAAGzJ,UAAUE,IAAK,WAAauJ,EAAGzM,gBAAiB,gBACzHmY,EAAOxvB,OAASwvB,EAAOI,OAAOnb,EAAI8G,aAAa1X,SAAS,SAAUigB,GAAOA,EAAGzJ,UAAUE,IAAK,WAAauJ,EAAGzM,gBAAiB,eAG5HlI,IAGCsC,EAAUoe,MAAOpb,EAAI6G,aAAazX,SAAS,SAAUigB,GAAOA,EAAGzJ,UAAUE,IAAK,aAAc,WAAauJ,EAAGzM,gBAAiB,eAC7H5F,EAAUqe,MAAOrb,EAAI8G,aAAa1X,SAAS,SAAUigB,GAAOA,EAAGzJ,UAAUE,IAAK,aAAc,WAAauJ,EAAGzM,gBAAiB,eAI7H4T,GAAiB9b,IAChBsC,EAAUoe,MAAOpb,EAAI2G,WAAWvX,SAAS,SAAUigB,GAAOA,EAAGzJ,UAAUE,IAAK,aAAc,WAAauJ,EAAGzM,gBAAiB,eAC3H5F,EAAUqe,MAAOrb,EAAI4G,aAAaxX,SAAS,SAAUigB,GAAOA,EAAGzJ,UAAUE,IAAK,aAAc,WAAauJ,EAAGzM,gBAAiB,iBAG7H5F,EAAUoe,MAAOpb,EAAIwG,aAAapX,SAAS,SAAUigB,GAAOA,EAAGzJ,UAAUE,IAAK,aAAc,WAAauJ,EAAGzM,gBAAiB,eAC7H5F,EAAUqe,MAAOrb,EAAI0G,cAActX,SAAS,SAAUigB,GAAOA,EAAGzJ,UAAUE,IAAK,aAAc,WAAauJ,EAAGzM,gBAAiB,iBAKhIpH,EAAOK,oBAIL+D,GAAoBmb,EAAOI,KAC/Bnb,EAAIgH,kBAAkBpB,UAAUE,IAAK,cAGrC9F,EAAIgH,kBAAkBpB,UAAUC,OAAQ,cAEnClG,GAAqBob,EAAOxvB,OAAoB,IAAXiP,EACzCwF,EAAI+G,mBAAmBnB,UAAUE,IAAK,aAGtC9F,EAAI+G,mBAAmBnB,UAAUC,OAAQ,eAe7C,SAASF,GAAkB2V,GAE1B,IAAIC,EAAoB,KAGpBC,EAAiBhgB,EAAOqB,IAAM,SAAW,OAC5C4e,EAAmBjgB,EAAOqB,IAAM,OAAS,SAwD1C,GApDAuF,GAASpC,EAAImG,WAAW6B,YAAa5Y,SAAS,SAAUssB,EAAaxpB,GAEpEwpB,EAAY9V,UAAUC,OAAQ,QAC9B6V,EAAY9V,UAAUC,OAAQ,WAC9B6V,EAAY9V,UAAUC,OAAQ,UAE1B3T,EAAIqI,EACPmhB,EAAY9V,UAAUE,IAAK0V,GAElBtpB,EAAIqI,EACbmhB,EAAY9V,UAAUE,IAAK2V,IAG3BC,EAAY9V,UAAUE,IAAK,WAG3ByV,EAAoBG,IAGjBJ,GAAcppB,IAAMqI,IACvB6H,GAASsZ,EAAYjV,iBAAkB,sBAAwBrX,SAAS,SAAUusB,EAAaxsB,GAE9FwsB,EAAY/V,UAAUC,OAAQ,QAC9B8V,EAAY/V,UAAUC,OAAQ,WAC9B8V,EAAY/V,UAAUC,OAAQ,UAE1B1W,EAAIqL,EACPmhB,EAAY/V,UAAUE,IAAK,QAElB3W,EAAIqL,EACbmhB,EAAY/V,UAAUE,IAAK,WAG3B6V,EAAY/V,UAAUE,IAAK,WAGvB5T,IAAMqI,IAASghB,EAAoBI,UASvChhB,GAEHyd,GAAqBzd,EAAoB,CAAEme,eAAgB8C,GAAejhB,KAKvE4gB,EAAoB,CAEvBlD,GAAsBkD,GAEtB,IAAIM,EAA2BN,EAAkB9Z,cAAe,6BAChE,GAAIoa,EAA2B,CAE9B,IAAIC,EAAqBD,EAAyBt0B,MAAM8jB,iBAAmB,GAGvE,SAASxI,KAAMiZ,KAClBD,EAAyBt0B,MAAM8jB,gBAAkB,GACjD1J,OAAOoG,iBAAkB8T,GAA2B/P,QACpD+P,EAAyBt0B,MAAM8jB,gBAAkByQ,GAOnD,IAAIC,EAAyBphB,EAAqBA,EAAmBgI,aAAc,wBAA2B,KAC1GqZ,EAAwBT,EAAkB5Y,aAAc,wBACxDqZ,GAAyBA,IAA0BD,GAA0BR,IAAsB5gB,GACtGqF,EAAImG,WAAWP,UAAUE,IAAK,iBAG/BnL,EAAqB4gB,EAMlB7gB,GACH,CAAE,uBAAwB,uBAAwBtL,SAAS,SAAU6sB,GAChEvhB,EAAakL,UAAUmD,SAAUkT,GACpCjc,EAAIwB,QAAQoE,UAAUE,IAAKmW,GAG3Bjc,EAAIwB,QAAQoE,UAAUC,OAAQoW,MAMjCjkB,YAAY,WACXgI,EAAImG,WAAWP,UAAUC,OAAQ,mBAC/B,GAQJ,SAASwO,KAER,GAAI7Y,EAAO8C,wBAA0B,CAEpC,IAIC4d,EAAiBC,EAJd3E,EAAmBxX,EAAIwB,QAAQiF,iBAAkBxL,GACpDke,EAAiBnZ,EAAIwB,QAAQiF,iBAAkBvL,GAE5CoQ,EAAiBtL,EAAImG,WAAW5e,MAAM+jB,eAAeoO,MAAO,KAGlC,IAA1BpO,EAAetiB,OAClBkzB,EAAkBC,EAAmBtK,SAAUvG,EAAe,GAAI,KAGlE4Q,EAAkBrK,SAAUvG,EAAe,GAAI,IAC/C6Q,EAAmBtK,SAAUvG,EAAe,GAAI,KAGjD,IAEC8Q,EACAC,EAHG7T,EAAaxI,EAAImG,WAAW8O,YAC/BqH,EAAuB9E,EAAiBxuB,OAKxCozB,EADkD,kBAAxC5gB,EAAOkD,6BACYlD,EAAOkD,6BAGP4d,EAAuB,GAAMJ,EAAkB1T,IAAiB8T,EAAqB,GAAM,EAGzHD,EAAmBD,EAA6B7hB,GAAU,EAE1D,IAECgiB,EACAC,EAHG/T,EAAczI,EAAImG,WAAWkM,aAChCoK,EAAqBtD,EAAenwB,OAKpCuzB,EADgD,kBAAtC/gB,EAAOmD,2BACUnD,EAAOmD,4BAGLwd,EAAmB1T,IAAkBgU,EAAmB,GAGtFD,EAAiBC,EAAqB,EAAKF,EAA2B/hB,EAAS,EAE/EwF,EAAImG,WAAW5e,MAAMikB,mBAAqB6Q,EAAmB,OAASG,EAAiB,MAYzF,SAASZ,GAAelZ,GAGvB,IAAIga,EAAUlhB,EAAO+B,eAQrB,MAJuB,mBAAZmf,IACVA,EAAUha,EAAQwJ,aAAc,iBAG1BwQ,EAUR,SAASzD,GAAWpQ,EAAOzH,GAE1BA,EAAUA,GAAW,GAGrByH,EAAMthB,MAAM4X,QAAU3D,EAAO2D,QAG7BiD,GAASyG,EAAMpC,iBAAkB,sEAAwErX,SAAS,SAAUsT,IACnG,WAApBA,EAAQia,SAAwBf,GAAelZ,MAClDA,EAAQR,aAAc,MAAOQ,EAAQC,aAAc,aACnDD,EAAQR,aAAc,mBAAoB,IAC1CQ,EAAQE,gBAAiB,gBAK3BR,GAASyG,EAAMpC,iBAAkB,iBAAmBrX,SAAS,SAAUnF,GACtE,IAAI2yB,EAAU,EAEdxa,GAASnY,EAAMwc,iBAAkB,qBAAuBrX,SAAS,SAAUytB,GAC1EA,EAAO3a,aAAc,MAAO2a,EAAOla,aAAc,aACjDka,EAAOja,gBAAiB,YACxBia,EAAO3a,aAAc,mBAAoB,IACzC0a,GAAW,KAKRA,EAAU,GACb3yB,EAAM+X,UAMR,IAAImE,EAAa0C,EAAMW,uBACvB,GAAIrD,EAAa,CAChBA,EAAW5e,MAAM4X,QAAU,QAE3B,IAAI2d,EAAoBjU,EAAM8C,8BAC1BK,EAAmBnD,EAAMlG,aAAc,0BAG3C,IAAiD,IAA7CwD,EAAW+F,aAAc,eAA4B,CACxD/F,EAAWjE,aAAc,cAAe,QAExC,IAAImJ,EAAkBxC,EAAMlG,aAAc,yBACzCoJ,EAAkBlD,EAAMlG,aAAc,yBACtCoa,EAAsBlU,EAAMqD,aAAc,8BAC1C8Q,EAAuBnU,EAAMqD,aAAc,+BAG5C,GAAIb,EACHyR,EAAkBv1B,MAAM8jB,gBAAkB,OAAQ4R,UAAW5R,GAAmB,SAG5E,GAAKU,IAAoBkC,KAAmB,CAChD,IAAIiP,EAAQ1nB,SAASyN,cAAe,SAEhC8Z,GACHG,EAAMhb,aAAc,OAAQ,IAGzB8a,IACHE,EAAMC,OAAQ,GAMXviB,IACHsiB,EAAMC,OAAQ,EACdD,EAAME,UAAW,EACjBF,EAAMhb,aAAc,cAAe,KAIpC6J,EAAgB2N,MAAO,KAAMtqB,SAAS,SAAUytB,GAC/CK,EAAMpT,WAAa,gBAAiB+S,EAAQ,QAG7CC,EAAkBvV,YAAa2V,QAG3B,GAAIlR,IAA+C,IAA3B5K,EAAQic,eAA0B,CAC9D,IAAIC,EAAS9nB,SAASyN,cAAe,UACrCqa,EAAOpb,aAAc,kBAAmB,IACxCob,EAAOpb,aAAc,qBAAsB,IAC3Cob,EAAOpb,aAAc,wBAAyB,IAC9Cob,EAAOpb,aAAc,QAAS,YAE9Bob,EAAOpb,aAAc,WAAY8J,GAEjCsR,EAAO/1B,MAAM6J,MAAS,OACtBksB,EAAO/1B,MAAM8J,OAAS,OACtBisB,EAAO/1B,MAAMgM,UAAY,OACzB+pB,EAAO/1B,MAAM+L,SAAW,OAExBwpB,EAAkBvV,YAAa+V,IAKjC,IAAIC,EAA0BT,EAAkBrb,cAAe,oBAC3D8b,GAGC3B,GAAezV,KAAiB,0BAA0BtD,KAAMmJ,IAC/DuR,EAAwB5a,aAAc,SAAYqJ,GACrDuR,EAAwBrb,aAAc,MAAO8J,IAgBlD,SAASiO,GAAapR,GAGrBA,EAAMthB,MAAM4X,QAAU,OAGtB,IAAIgH,EAAaqX,GAAoB3U,GACjC1C,IACHA,EAAW5e,MAAM4X,QAAU,OAG3BiD,GAAS+D,EAAWM,iBAAkB,gBAAkBrX,SAAS,SAAUsT,GAC1EA,EAAQE,gBAAiB,WAK3BR,GAASyG,EAAMpC,iBAAkB,8FAAgGrX,SAAS,SAAUsT,GACnJA,EAAQR,aAAc,WAAYQ,EAAQC,aAAc,QACxDD,EAAQE,gBAAiB,UAI1BR,GAASyG,EAAMpC,iBAAkB,2DAA6DrX,SAAS,SAAUytB,GAChHA,EAAO3a,aAAc,WAAY2a,EAAOla,aAAc,QACtDka,EAAOja,gBAAiB,UAU1B,SAASoY,KAER,IAAIxD,EAAmBxX,EAAIwB,QAAQiF,iBAAkBxL,GACpDke,EAAiBnZ,EAAIwB,QAAQiF,iBAAkBvL,GAE5C6f,EAAS,CACZ3vB,KAAMmP,EAAS,EACfhP,MAAOgP,EAASid,EAAiBxuB,OAAS,EAC1CkyB,GAAI1gB,EAAS,EACb2gB,KAAM3gB,EAAS2e,EAAenwB,OAAS,GAkBxC,GAbIwS,EAAOoB,OACN4a,EAAiBxuB,OAAS,IAC7B+xB,EAAO3vB,MAAO,EACd2vB,EAAOxvB,OAAQ,GAGZ4tB,EAAenwB,OAAS,IAC3B+xB,EAAOG,IAAK,EACZH,EAAOI,MAAO,IAKZ3f,EAAOqB,IAAM,CAChB,IAAIzR,EAAO2vB,EAAO3vB,KAClB2vB,EAAO3vB,KAAO2vB,EAAOxvB,MACrBwvB,EAAOxvB,MAAQH,EAGhB,OAAO2vB,EAUR,SAASE,KAER,GAAIvgB,GAAgBc,EAAOwB,UAAY,CACtC,IAAIA,EAAYtC,EAAa+L,iBAAkB,aAC3CgX,EAAkB/iB,EAAa+L,iBAAkB,2BAErD,MAAO,CACN2U,KAAMpe,EAAUhU,OAASy0B,EAAgBz0B,OAAS,EAClDqyB,OAAQoC,EAAgBz0B,QAIzB,MAAO,CAAEoyB,MAAM,EAAOC,MAAM,GAQ9B,SAASxC,KAER,IAAI6E,EAA6B,SAAUC,EAAiBC,EAAWC,GACtEzb,GAASpC,EAAI0B,OAAO+E,iBAAkB,UAAWkX,EAAiB,MAAOC,EAAW,OAASxuB,SAAS,SAAUigB,GAC/G,IAAItL,EAAMsL,EAAG1M,aAAcgb,GACvB5Z,IAAiC,IAA1BA,EAAI+Z,QAASD,IACvBxO,EAAGnN,aAAcyb,EAAiB5Z,GAAS,KAAKlB,KAAMkB,GAAc,IAAN,KAAc8Z,OAM/EH,EAA4B,MAAO,qBAAsB,iBACzDA,EAA4B,WAAY,qBAAsB,iBAG9DA,EAA4B,MAAO,oBAAqB,SACxDA,EAA4B,WAAY,oBAAqB,SAU9D,SAASrF,GAAsB3V,GAE1BA,IAAYuL,OAGf7L,GAASM,EAAQ+D,iBAAkB,qBAAuBrX,SAAS,SAAUigB,GAG5EA,EAAGnN,aAAc,MAAOmN,EAAG1M,aAAc,WAI1CP,GAASM,EAAQ+D,iBAAkB,iBAAmBrX,SAAS,SAAUigB,GACxE,IAAI+B,GAAe/B,EAAI,cAAkB+B,GAAe/B,EAAI,qBAA5D,CAKA,IAAI+N,EAAW5hB,EAAO8B,cAQtB,GAJwB,mBAAb8f,IACVA,EAAW/N,EAAGnD,aAAc,oBAAuBkF,GAAe/B,EAAI,sBAGnE+N,GAA+B,oBAAZ/N,EAAG0O,KAGzB,GAAI1O,EAAGtK,WAAa,EACnBiZ,GAAoB,CAAE3M,OAAQhC,SAI1B,GAAIzU,EAAiB,CACzB,IAAIqjB,EAAU5O,EAAG0O,OAIbE,GAAoC,oBAAlBA,EAAQzzB,QAAwC,IAAhB6kB,EAAGzT,UACxDqiB,EAAQzzB,OAAO,WACd6kB,EAAGzT,UAAW,EAGdyT,EAAGzN,iBAAkB,QAAQ,WAC5ByN,EAAGzT,UAAW,aAOjByT,EAAGjC,oBAAqB,aAAc4Q,IACtC3O,EAAGzN,iBAAkB,aAAcoc,QAOtC5b,GAASM,EAAQ+D,iBAAkB,gBAAkBrX,SAAS,SAAUigB,GACnE+B,GAAe/B,EAAI,eAAkB+B,GAAe/B,EAAI,sBAI5D6O,GAAqB,CAAE7M,OAAQhC,OAIhCjN,GAASM,EAAQ+D,iBAAkB,qBAAuBrX,SAAS,SAAUigB,GACxE+B,GAAe/B,EAAI,eAAkB+B,GAAe/B,EAAI,sBAIxDA,EAAG1M,aAAc,SAAY0M,EAAG1M,aAAc,cACjD0M,EAAGjC,oBAAqB,OAAQ8Q,IAChC7O,EAAGzN,iBAAkB,OAAQsc,IAC7B7O,EAAGnN,aAAc,MAAOmN,EAAG1M,aAAc,kBAc7C,SAASqb,GAAoBnmB,GAE5B,IAAIsmB,IAAoB/M,GAAevZ,EAAMwZ,OAAQ,QACpD+M,IAAiBhN,GAAevZ,EAAMwZ,OAAQ,YAE3C8M,GAAmBC,IACtBvmB,EAAMwZ,OAAOgN,YAAc,EAC3BxmB,EAAMwZ,OAAO0M,QAGdlmB,EAAMwZ,OAAOjE,oBAAqB,aAAc4Q,IAUjD,SAASE,GAAqBrmB,GAE7B,IAAIylB,EAASzlB,EAAMwZ,OAEnB,GAAIiM,GAAUA,EAAOgB,cAAgB,CAEpC,IAAIH,IAAoB/M,GAAevZ,EAAMwZ,OAAQ,QACpD+M,IAAiBhN,GAAevZ,EAAMwZ,OAAQ,YAE/C,GAAI8M,GAAmBC,EAAY,CAGlC,IAAIhB,EAAW5hB,EAAO8B,cAIE,mBAAb8f,IACVA,EAAWE,EAAOpR,aAAc,oBAAuBkF,GAAekM,EAAQ,sBAI3E,wBAAwBza,KAAMya,EAAO3a,aAAc,SAAaya,EACnEE,EAAOgB,cAActgB,YAAa,mDAAoD,KAG9E,uBAAuB6E,KAAMya,EAAO3a,aAAc,SAAaya,EACvEE,EAAOgB,cAActgB,YAAa,oBAAqB,KAIvDsf,EAAOgB,cAActgB,YAAa,cAAe,OAerD,SAASoa,GAAqB1V,EAAStB,GAEtCA,EAAUW,GAAQ,CAEjB+W,eAAe,GACb1X,GAAW,IAEVsB,GAAWA,EAAQ6G,aAEtBnH,GAASM,EAAQ+D,iBAAkB,iBAAmBrX,SAAS,SAAUigB,GACnEA,EAAGnD,aAAc,gBAAuC,oBAAbmD,EAAGjS,QAClDiS,EAAGnN,aAAa,wBAAyB,IACzCmN,EAAGjS,YAKLgF,GAASM,EAAQ+D,iBAAkB,WAAarX,SAAS,SAAUigB,GAC9DA,EAAGiP,eAAgBjP,EAAGiP,cAActgB,YAAa,aAAc,KACnEqR,EAAGjC,oBAAqB,OAAQ8Q,OAIjC9b,GAASM,EAAQ+D,iBAAkB,sCAAwCrX,SAAS,SAAUigB,IACxFA,EAAGnD,aAAc,gBAAmBmD,EAAGiP,eAAyD,oBAAjCjP,EAAGiP,cAActgB,aACpFqR,EAAGiP,cAActgB,YAAa,oDAAqD,QAKrFoE,GAASM,EAAQ+D,iBAAkB,qCAAuCrX,SAAS,SAAUigB,IACvFA,EAAGnD,aAAc,gBAAmBmD,EAAGiP,eAAyD,oBAAjCjP,EAAGiP,cAActgB,aACpFqR,EAAGiP,cAActgB,YAAa,qBAAsB,SAIxB,IAA1BoD,EAAQ0X,eAEX1W,GAASM,EAAQ+D,iBAAkB,qBAAuBrX,SAAS,SAAUigB,GAG5EA,EAAGnN,aAAc,MAAO,eACxBmN,EAAGzM,gBAAiB,WAexB,SAAS4X,GAAmB3R,QAEbgH,IAAVhH,IACHA,EAAQnO,GAGT,IAAI8c,EAAmBpV,GAASpC,EAAIwB,QAAQiF,iBAAkBxL,IAG1DsjB,EAAY,EAGhBC,EAAU,IAAK,IAAIhvB,EAAI,EAAGA,EAAIgoB,EAAiBxuB,OAAQwG,IAAM,CAK5D,IAHA,IAAI0pB,EAAkB1B,EAAiBhoB,GACnC2pB,EAAiB/W,GAAS8W,EAAgBzS,iBAAkB,YAEvDhX,EAAI,EAAGA,EAAI0pB,EAAenwB,OAAQyG,IAAM,CAGhD,GAAI0pB,EAAe1pB,KAAOoZ,EACzB,MAAM2V,EAGPD,IAKD,GAAIrF,IAAoBrQ,EACvB,OAIqD,IAAlDqQ,EAAgBtT,UAAUmD,SAAU,UACvCwV,IAKF,OAAOA,EAUR,SAASjE,KAGR,IAAImE,EAAahE,KACb8D,EAAY/D,KAEhB,GAAI9f,EAAe,CAElB,IAAIgkB,EAAehkB,EAAa+L,iBAAkB,aAIlD,GAAIiY,EAAa11B,OAAS,EAAI,CAC7B,IAAI21B,EAAmBjkB,EAAa+L,iBAAkB,qBAIlDmY,EAAiB,GAGrBL,GAAeI,EAAiB31B,OAAS01B,EAAa11B,OAAW41B,GAKnE,OAAOn1B,KAAK4f,IAAKkV,GAAcE,EAAa,GAAK,GAUlD,SAASxQ,KAER,QAAStM,OAAO4Q,SAASC,OAAOrD,MAAO,cAOxC,SAASzJ,KAER,IAAItJ,EAAOuF,OAAO4Q,SAASnW,KAGvByiB,EAAOziB,EAAKpN,MAAO,GAAI0qB,MAAO,KACjC/mB,EAAOyJ,EAAKqP,QAAS,SAAU,IAIhC,IAAK,WAAW5I,KAAMgc,EAAK,KAAQlsB,EAAK3J,OAAS,CAChD,IAAI0Z,EAGJ,IACCA,EAAUlN,SAAS2R,eAAgB2X,mBAAoBnsB,IAExD,MAAQosB,IAGR,IAAIC,IAA2BtkB,GAAeA,EAAaiI,aAAc,QAAWhQ,EAEpF,GAAI+P,GAEH,IAAMsc,EAA2B,CAEhC,IAAItE,EAAUpgB,EAAO+b,WAAW3T,GAChCmG,GAAM6R,EAAQxoB,EAAGwoB,EAAQvrB,SAK1B0Z,GAAOtO,GAAU,EAAGC,GAAU,OAG3B,CACJ,IAKC8b,EALGC,EAAgB/a,EAAOW,kBAAoB,EAAI,EAG/CjK,EAAM2f,SAAUgN,EAAK,GAAI,IAAOtI,GAAmB,EACtDpnB,EAAM0iB,SAAUgN,EAAK,GAAI,IAAOtI,GAAmB,EAGhD/a,EAAOyB,gBACVqZ,EAAIzE,SAAUgN,EAAK,GAAI,IACnB/D,MAAOxE,KACVA,OAAIzG,IAIF3d,IAAMqI,GAAUpL,IAAMqL,QAAgBqV,IAANyG,GACnCzN,GAAO3W,EAAG/C,EAAGmnB,IAahB,SAASoC,GAAUuG,GAGlBC,aAAc7e,GAGO,kBAAV4e,EACV5e,EAAkBrI,WAAY0gB,GAAUuG,GAEhCvkB,IAGJc,EAAOa,UAAYsF,OAAOtF,QAC7BsF,OAAO4Q,SAASnW,KAAO+Z,KAIf3a,EAAOY,KACfuF,OAAOtF,QAAQ8iB,aAAc,KAAM,KAAM,IAAMhJ,MAM/CxU,OAAOtF,QAAQ8iB,aAAc,KAAM,KAAMxd,OAAO4Q,SAAS6M,SAAWzd,OAAO4Q,SAASC,SAevF,SAAS6D,GAAYxN,GAGpB,IAECyN,EAFGpkB,EAAIqI,EACPpL,EAAIqL,EAIL,GAAIqO,EAAQ,CACX,IAAIwW,EAAa7I,GAAiB3N,GAC9BoC,EAASoU,EAAaxW,EAAMU,WAAaV,EAGzC2O,EAAmBpV,GAASpC,EAAIwB,QAAQiF,iBAAkBxL,IAG9D/I,EAAIzI,KAAK0f,IAAKqO,EAAiBsG,QAAS7S,GAAU,GAGlD9b,OAAI0gB,EAGAwP,IACHlwB,EAAI1F,KAAK0f,IAAK/G,GAASyG,EAAMU,WAAW9C,iBAAkB,YAAcqX,QAASjV,GAAS,IAI5F,IAAKA,GAASnO,EAAe,CAC5B,IAAI4kB,EAAe5kB,EAAa+L,iBAAkB,aAAczd,OAAS,EACzE,GAAIs2B,EAAe,CAClB,IAAIC,EAAkB7kB,EAAa+G,cAAe,qBAEjD6U,EADGiJ,GAAmBA,EAAgBrT,aAAc,uBAChD2F,SAAU0N,EAAgB5c,aAAc,uBAAyB,IAGjEjI,EAAa+L,iBAAkB,qBAAsBzd,OAAS,GAKrE,MAAO,CAAEkJ,EAAGA,EAAG/C,EAAGA,EAAGmnB,EAAGA,GAOzB,SAASkJ,KAER,OAAOpd,GAASpC,EAAIwB,QAAQiF,iBAAkBzL,EAAkB,iBASjE,SAASykB,KAER,OAAOrd,GAASpC,EAAIwB,QAAQiF,iBAAkBxL,IAO/C,SAASykB,KAER,OAAOtd,GAASpC,EAAIwB,QAAQiF,iBAAkB,4BAO/C,SAAS2T,KAER,OAAOqF,KAAsBz2B,OAAS,EAMvC,SAASmxB,KAER,OAAOuF,KAAoB12B,OAAS,EAQrC,SAAS22B,KAER,OAAOH,KAAY7xB,KAAK,SAAUkb,GAGjC,IADA,IAAI+W,EAAa,GACRpwB,EAAI,EAAGA,EAAIqZ,EAAM+W,WAAW52B,OAAQwG,IAAM,CAClD,IAAIqwB,EAAYhX,EAAM+W,WAAYpwB,GAClCowB,EAAYC,EAAUltB,MAASktB,EAAUjtB,MAE1C,OAAOgtB,KAWT,SAASnF,KAER,OAAO+E,KAAYx2B,OASpB,SAAS82B,GAAU5uB,EAAGC,GAErB,IAAI+nB,EAAkBlZ,EAAIwB,QAAQiF,iBAAkBxL,GAA8B/J,GAC9EioB,EAAiBD,GAAmBA,EAAgBzS,iBAAkB,WAE1E,OAAI0S,GAAkBA,EAAenwB,QAAuB,kBAANmI,EAC9CgoB,EAAiBA,EAAgBhoB,QAAM0e,EAGxCqJ,EAeR,SAASsE,GAAoBtsB,EAAGC,GAE/B,IAAI0X,EAAqB,kBAAN3X,EAAiB4uB,GAAU5uB,EAAGC,GAAMD,EACvD,GAAI2X,EACH,OAAOA,EAAMW,uBAgBf,SAASE,GAAeb,GAMvB,GAHAA,EAAQA,GAASnO,EAGbmO,EAAMqD,aAAc,cACvB,OAAOrD,EAAMlG,aAAc,cAI5B,IAAIkH,EAAehB,EAAMpH,cAAe,eACxC,OAAIoI,EACIA,EAAaC,UAGd,KAWR,SAASkJ,KAER,IAAI0H,EAAUrE,KAEd,MAAO,CACN9b,OAAQmgB,EAAQxoB,EAChBsI,OAAQkgB,EAAQvrB,EAChB4wB,OAAQrF,EAAQpE,EAChB0J,OAAQ7I,KACR3a,SAAU8X,MAWZ,SAAS2L,GAAUpgB,GAElB,GAAqB,kBAAVA,EAAqB,CAC/BgJ,GAAO2H,GAAa3Q,EAAMtF,QAAUiW,GAAa3Q,EAAMrF,QAAUgW,GAAa3Q,EAAMkgB,SAEpF,IAAIG,EAAa1P,GAAa3Q,EAAMmgB,QACnCG,EAAe3P,GAAa3Q,EAAMrD,UAET,mBAAf0jB,GAA4BA,IAAe/I,MACrDD,GAAagJ,GAGc,mBAAjBC,GAA8BA,IAAiB7L,MACzD4B,GAAgBiK,IAyBnB,SAAS/V,GAAepN,EAAWojB,GAElCpjB,EAAYoF,GAASpF,GAErB,IAAIqjB,EAAU,GACbC,EAAY,GACZC,EAAS,GAGVvjB,EAAU5N,SAAS,SAAUib,EAAU7a,GACtC,GAAI6a,EAAS6B,aAAc,uBAA0B,CACpD,IAAI1jB,EAAQqpB,SAAUxH,EAAS1H,aAAc,uBAAyB,IAEjE0d,EAAQ73B,KACZ63B,EAAQ73B,GAAS,IAGlB63B,EAAQ73B,GAAOyR,KAAMoQ,QAGrBiW,EAAUrmB,KAAM,CAAEoQ,OAMpBgW,EAAUA,EAAQ7d,OAAQ8d,GAI1B,IAAI93B,EAAQ,EAaZ,OATA63B,EAAQjxB,SAAS,SAAUoxB,GAC1BA,EAAMpxB,SAAS,SAAUib,GACxBkW,EAAOtmB,KAAMoQ,GACbA,EAASnI,aAAc,sBAAuB1Z,MAG/CA,QAGkB,IAAZ43B,EAAmBC,EAAUE,EAcrC,SAAS9H,GAAiBjwB,EAAOwU,GAEhC,IAAIyjB,EAAmB,CACtBC,MAAO,GACPC,OAAQ,IAGT,GAAIjmB,GAAgBc,EAAOwB,YAE1BA,EAAYA,GAAaoN,GAAe1P,EAAa+L,iBAAkB,cAEnEzJ,EAAUhU,QAAS,CAEtB,IAAI43B,EAAW,EAEf,GAAqB,kBAAVp4B,EAAqB,CAC/B,IAAI+2B,EAAkBnV,GAAe1P,EAAa+L,iBAAkB,sBAAwB0R,MACxFoH,IACH/2B,EAAQqpB,SAAU0N,EAAgB5c,aAAc,wBAA2B,EAAG,KAIhFP,GAASpF,GAAY5N,SAAS,SAAUigB,EAAI7f,GAEvC6f,EAAGnD,aAAc,yBACpB1c,EAAIqiB,SAAUxC,EAAG1M,aAAc,uBAAyB,KAGzDie,EAAWn3B,KAAK0f,IAAKyX,EAAUpxB,GAG3BA,GAAKhH,GACH6mB,EAAGzJ,UAAUmD,SAAU,YAAc0X,EAAiBC,MAAMzmB,KAAMoV,GACvEA,EAAGzJ,UAAUE,IAAK,WAClBuJ,EAAGzJ,UAAUC,OAAQ,oBAGrB7F,EAAIiH,UAAUW,YAAcJ,EAAe6H,GAEvC7f,IAAMhH,IACT6mB,EAAGzJ,UAAUE,IAAK,oBAClBuS,GAAsBhJ,MAKnBA,EAAGzJ,UAAUmD,SAAU,YAAc0X,EAAiBE,OAAO1mB,KAAMoV,GACvEA,EAAGzJ,UAAUC,OAAQ,WACrBwJ,EAAGzJ,UAAUC,OAAQ,wBAQvBrd,EAAyB,kBAAVA,EAAqBA,GAAS,EAC7CA,EAAQiB,KAAK0f,IAAK1f,KAAK4f,IAAK7gB,EAAOo4B,IAAa,GAChDlmB,EAAawH,aAAc,gBAAiB1Z,GAM9C,OAAOi4B,EAeR,SAAS1I,GAAkBvvB,EAAOq4B,GAEjC,GAAInmB,GAAgBc,EAAOwB,UAAY,CAEtC,IAAIA,EAAYoN,GAAe1P,EAAa+L,iBAAkB,cAC9D,GAAIzJ,EAAUhU,OAAS,CAGtB,GAAqB,kBAAVR,EAAqB,CAC/B,IAAIs4B,EAAsB1W,GAAe1P,EAAa+L,iBAAkB,sBAAwB0R,MAG/F3vB,EADGs4B,EACKjP,SAAUiP,EAAoBne,aAAc,wBAA2B,EAAG,KAGzE,EAKW,kBAAXke,IACVr4B,GAASq4B,GAGV,IAAIJ,EAAmBhI,GAAiBjwB,EAAOwU,GAiB/C,OAfIyjB,EAAiBE,OAAO33B,QAC3B+c,GAAe,iBAAkB,CAAEsE,SAAUoW,EAAiBE,OAAO,GAAI3jB,UAAWyjB,EAAiBE,SAGlGF,EAAiBC,MAAM13B,QAC1B+c,GAAe,gBAAiB,CAAEsE,SAAUoW,EAAiBC,MAAM,GAAI1jB,UAAWyjB,EAAiBC,QAGpGpI,KACAlE,KAEI5Y,EAAOyB,eACVyb,QAGU+H,EAAiBC,MAAM13B,SAAUy3B,EAAiBE,OAAO33B,SAMtE,OAAO,EAUR,SAAS+3B,KAER,OAAOhJ,GAAkB,KAAM,GAUhC,SAASiJ,KAER,OAAOjJ,GAAkB,MAAO,GAOjC,SAAS9B,KAIR,GAFAV,KAEI7a,IAAqC,IAArBc,EAAOgC,UAAsB,CAEhD,IAAI6M,EAAW3P,EAAa+G,cAAe,qBAItC4I,IAAWA,EAAW3P,EAAa+G,cAAe,cAEvD,IAAIwf,EAAoB5W,EAAWA,EAAS1H,aAAc,kBAAqB,KAC3Eue,EAAkBxmB,EAAa6O,WAAa7O,EAAa6O,WAAW5G,aAAc,kBAAqB,KACvGwe,EAAiBzmB,EAAaiI,aAAc,kBAQ/CnF,EADGyjB,EACSpP,SAAUoP,EAAmB,IAEjCE,EACItP,SAAUsP,EAAgB,IAE9BD,EACIrP,SAAUqP,EAAiB,IAG3B1lB,EAAOgC,UAQwC,IAAxD9C,EAAa+L,iBAAkB,aAAczd,QAChDoZ,GAAS1H,EAAa+L,iBAAkB,iBAAmBrX,SAAS,SAAUigB,GACzEA,EAAGnD,aAAc,kBAChB1O,GAA4B,IAAd6R,EAAG+R,SAAkB/R,EAAGgS,aAAiB7jB,IAC1DA,EAA4B,IAAd6R,EAAG+R,SAAkB/R,EAAGgS,aAAiB,SAYvD7jB,GAAcmD,GAAoBwW,MAAe7C,MAAmBha,EAAOgnB,gBAAiBrG,KAAqBI,OAAwB,IAAhB7f,EAAOoB,OACnI6D,EAAmBzI,YAAY,WACI,oBAA3BwD,EAAOkC,gBAAiClC,EAAOkC,kBAAoB6jB,KAC1EtL,OACEzY,GACHkD,EAAqBmN,KAAKC,OAGvBhT,GACHA,EAAgB0mB,YAAkC,IAAtB/gB,IAU/B,SAAS8U,KAER2J,aAAcze,GACdA,GAAoB,EAIrB,SAAS6W,KAEJ9Z,IAAcmD,IACjBA,GAAkB,EAClBoF,GAAe,mBACfmZ,aAAcze,GAEV3F,GACHA,EAAgB0mB,YAAY,IAM/B,SAASnK,KAEJ7Z,GAAamD,IAChBA,GAAkB,EAClBoF,GAAe,oBACfkQ,MAKF,SAASwL,KAGJjmB,EAAOqB,KACJyX,OAAmC,IAAnByM,OAA8B/F,KAAkB5vB,MACrEyd,GAAOtO,EAAS,EAA6B,SAA1BiB,EAAOsB,eAA4BtC,OAASqV,IAItDyE,OAAuC,IAAvB0M,OAAkChG,KAAkB5vB,MAC9Eyd,GAAOtO,EAAS,EAA6B,SAA1BiB,EAAOsB,eAA4BtC,OAASqV,GAKjE,SAAS6R,KAER/hB,GAAoB,EAGhBnE,EAAOqB,KACJyX,OAAuC,IAAvB0M,OAAkChG,KAAkBzvB,OACzEsd,GAAOtO,EAAS,EAA6B,SAA1BiB,EAAOsB,eAA4BtC,OAASqV,IAItDyE,OAAmC,IAAnByM,OAA8B/F,KAAkBzvB,OAC1Esd,GAAOtO,EAAS,EAA6B,SAA1BiB,EAAOsB,eAA4BtC,OAASqV,GAKjE,SAAS8R,MAGFrN,OAAuC,IAAvB0M,OAAkChG,KAAkBE,IACzErS,GAAOtO,EAAQC,EAAS,GAK1B,SAASonB,KAERhiB,GAAmB,GAGb0U,OAAmC,IAAnByM,OAA8B/F,KAAkBG,MACrEtS,GAAOtO,EAAQC,EAAS,GAW1B,SAASqnB,KASN,IAAIpnB,EANN,IAA2B,IAAvBumB,KACH,GAAIhG,KAAkBE,GACrByG,UAaA,GANClnB,EADGe,EAAOqB,IACMuF,GAASpC,EAAIwB,QAAQiF,iBAAkBxL,EAA6B,YAAckd,MAGlF/V,GAASpC,EAAIwB,QAAQiF,iBAAkBxL,EAA6B,UAAYkd,MAG7F1d,EAAgB,CACnB,IAAItL,EAAMsL,EAAcgM,iBAAkB,WAAYzd,OAAS,QAAO6mB,EAClE3d,EAAIqI,EAAS,EACjBsO,GAAO3W,EAAG/C,IAUd,SAASoyB,KAMR,GAJA5hB,GAAoB,EACpBC,GAAmB,GAGI,IAAnBmhB,KAA2B,CAE9B,IAAIhG,EAASC,KAKTD,EAAOI,MAAQJ,EAAOxvB,OAASiQ,EAAOoB,MAAQtC,EAAOwnB,oBAAqBpnB,KAC7EqgB,EAAOI,MAAO,GAGXJ,EAAOI,KACVyG,KAEQpmB,EAAOqB,IACf4kB,KAGAC,MAUH,SAASK,GAAkB1Q,GAE1B,MAAOA,GAAyC,oBAAxBA,EAAOnF,aAA8B,CAC5D,GAAImF,EAAOnF,aAAc,sBAAyB,OAAO,EACzDmF,EAASA,EAAO9H,WAGjB,OAAO,EAeR,SAASyY,GAAanqB,GAEjB2D,EAAOiC,oBACV6Z,KAWF,SAAS/J,GAAwB1V,GAEhC2V,KAEA0R,aAAc3e,GAEdA,EAAwBvI,WAAYgf,GAAYxb,EAAO6D,gBASxD,SAAS0P,GAAoBlX,GAGxBA,EAAMoqB,UAA+B,KAAnBpqB,EAAMqqB,UAC3BzO,KAUF,SAAS3E,GAAmBjX,GAI3B,GAAwC,oBAA7B2D,EAAOe,oBAAwE,IAApCf,EAAOe,kBAAkB1E,GAC9E,OAAO,EAIR,IAAIqY,EAAUrY,EAAMqY,QAGhBiS,EAAqBxhB,EAEzBqhB,GAAanqB,GAGb,IAAIuqB,EAAoB5sB,SAAS6sB,eAA4D,YAA3C7sB,SAAS6sB,cAAcC,gBACrEC,EAAuB/sB,SAAS6sB,eAAiB7sB,SAAS6sB,cAAc1F,SAAW,kBAAkB9Z,KAAMrN,SAAS6sB,cAAc1F,SAClI6F,EAAuBhtB,SAAS6sB,eAAiB7sB,SAAS6sB,cAAc/Y,WAAa,iBAAiBzG,KAAMrN,SAAS6sB,cAAc/Y,WAGnImZ,EAAoB5qB,EAAMoqB,UAA8B,KAAlBpqB,EAAMqY,QAC5CwS,EAAqB7qB,EAAMoqB,UAAwB,KAAZ/R,EACvCyS,EAAoB9qB,EAAMoqB,UAAwB,KAAZ/R,EAGtC0S,GAAmBH,IAAsBC,IAAuBC,IAC5D9qB,EAAMoqB,UAAYpqB,EAAMgrB,QAAUhrB,EAAMirB,SAAWjrB,EAAMkrB,SAIjE,KAAIX,GAAqBG,GAAwBC,GAAwBI,GAAzE,CAGA,IACIz6B,EADA66B,EAAiB,CAAC,GAAG,GAAG,IAAI,KAIhC,GAA+B,kBAApBxnB,EAAOc,SACjB,IAAKnU,KAAOqT,EAAOc,SACW,gBAAzBd,EAAOc,SAASnU,IACnB66B,EAAe/oB,KAAM4X,SAAU1pB,EAAK,KAKvC,GAAIgvB,OAAqD,IAAvC6L,EAAelF,QAAS5N,GACzC,OAAO,EAKR,IAAI+S,EAA0C,WAA1BznB,EAAOsB,iBAAgCsd,OAA0BD,KAEjF+I,GAAY,EAGhB,GAA+B,kBAApB1nB,EAAOc,SAEjB,IAAKnU,KAAOqT,EAAOc,SAGlB,GAAIuV,SAAU1pB,EAAK,MAAS+nB,EAAU,CAErC,IAAItd,EAAQ4I,EAAOc,SAAUnU,GAGR,oBAAVyK,EACVA,EAAM+Z,MAAO,KAAM,CAAE9U,IAGI,kBAAVjF,GAAiD,oBAApB0H,EAAQ1H,IACpD0H,EAAQ1H,GAAQ2d,OAGjB2S,GAAY,EASf,IAAkB,IAAdA,EAEH,IAAK/6B,KAAO+Y,EAGX,GAAI2Q,SAAU1pB,EAAK,MAAS+nB,EAAU,CAErC,IAAIiT,EAASjiB,EAAuB/Y,GAAM6b,SAGpB,oBAAXmf,EACVA,EAAOxW,MAAO,KAAM,CAAE9U,IAGI,kBAAXsrB,GAAmD,oBAArB7oB,EAAQ6oB,IACrD7oB,EAAQ6oB,GAAS5S,OAGlB2S,GAAY,GAMG,IAAdA,IAGHA,GAAY,EAGI,KAAZhT,GAA8B,KAAZA,EACrB2R,KAGoB,KAAZ3R,GAA8B,KAAZA,EAC1BqR,KAGoB,KAAZrR,GAA8B,KAAZA,EACtBwS,EACH7Z,GAAO,IAEEyL,MAAgB2O,EACzBpB,KAGAJ,KAImB,KAAZvR,GAA8B,KAAZA,EACtByS,EACH9Z,GAAOhK,OAAOib,YAELxF,MAAgB2O,EACzB1B,KAGAG,KAImB,KAAZxR,GAA8B,KAAZA,GACrBoE,MAAgB2O,EACpBpB,KAGAF,KAImB,KAAZzR,GAA8B,KAAZA,GACrBoE,MAAgB2O,EACpB1B,KAGAK,KAImB,KAAZ1R,EACRrH,GAAO,GAGa,KAAZqH,EACRrH,GAAOhK,OAAOib,WAGM,KAAZ5J,GACJoE,MACH0B,KAEGne,EAAMoqB,SACTJ,KAGAN,MAImB,KAAZrR,GAA8B,KAAZA,GAA8B,KAAZA,GAA8B,KAAZA,GAA8B,MAAZA,GAA+B,MAAZA,EACnGgH,KAGoB,KAAZhH,EACRuG,KAGoB,KAAZvG,EACH1U,EAAOiC,oBACX2Z,GAAiB+K,GAIlBe,GAAY,GAOVA,EACHrrB,EAAM2b,gBAAkB3b,EAAM2b,iBAGP,KAAZtD,GAA8B,KAAZA,IAAoB/P,EAASoB,eACtDvB,EAAIuT,QACPD,KAGA4C,KAGDre,EAAM2b,gBAAkB3b,EAAM2b,kBAK/ByC,MAUD,SAAStH,GAAc9W,GAEtB,GAAIkqB,GAAkBlqB,EAAMwZ,QAAW,OAAO,EAE9C1U,EAAMiE,OAAS/I,EAAMurB,QAAQ,GAAGtuB,QAChC6H,EAAMkE,OAAShJ,EAAMurB,QAAQ,GAAGruB,QAChC4H,EAAMmE,WAAajJ,EAAMurB,QAAQp6B,OASlC,SAAS4lB,GAAa/W,GAErB,GAAIkqB,GAAkBlqB,EAAMwZ,QAAW,OAAO,EAG9C,GAAK1U,EAAMoE,SA4EF3F,EAAG+T,MAAO,cAClBtX,EAAM2b,qBA7Ee,CACrBwO,GAAanqB,GAEb,IAAIwrB,EAAWxrB,EAAMurB,QAAQ,GAAGtuB,QAC5BwuB,EAAWzrB,EAAMurB,QAAQ,GAAGruB,QAGhC,GAA6B,IAAzB8C,EAAMurB,QAAQp6B,QAAqC,IAArB2T,EAAMmE,WAAmB,CAE1D,IAAIyiB,EAASF,EAAW1mB,EAAMiE,OAC7B4iB,EAASF,EAAW3mB,EAAMkE,OAEvB0iB,EAAS5mB,EAAMqE,WAAavX,KAAKuwB,IAAKuJ,GAAW95B,KAAKuwB,IAAKwJ,IAC9D7mB,EAAMoE,UAAW,EACa,WAA1BvF,EAAOsB,eACNtB,EAAOqB,IACV0kB,KAGAM,KAIDJ,MAGO8B,GAAU5mB,EAAMqE,WAAavX,KAAKuwB,IAAKuJ,GAAW95B,KAAKuwB,IAAKwJ,IACpE7mB,EAAMoE,UAAW,EACa,WAA1BvF,EAAOsB,eACNtB,EAAOqB,IACVglB,KAGAN,KAIDG,MAGO8B,EAAS7mB,EAAMqE,WACvBrE,EAAMoE,UAAW,EACa,WAA1BvF,EAAOsB,eACV+kB,KAGAF,MAGO6B,GAAU7mB,EAAMqE,YACxBrE,EAAMoE,UAAW,EACa,WAA1BvF,EAAOsB,eACVykB,KAGAK,MAMEpmB,EAAO0B,UACNP,EAAMoE,UAAYyV,GAAiB9b,KACtC7C,EAAM2b,iBAMP3b,EAAM2b,mBAkBV,SAAS3E,GAAYhX,GAEpB8E,EAAMoE,UAAW,EASlB,SAASwN,GAAe1W,GAEnBA,EAAM4rB,cAAgB5rB,EAAM6rB,sBAA8C,UAAtB7rB,EAAM4rB,cAC7D5rB,EAAMurB,QAAU,CAAC,CAAEtuB,QAAS+C,EAAM/C,QAASC,QAAS8C,EAAM9C,UAC1D4Z,GAAc9W,IAUhB,SAAS2W,GAAe3W,GAEnBA,EAAM4rB,cAAgB5rB,EAAM6rB,sBAA8C,UAAtB7rB,EAAM4rB,cAC7D5rB,EAAMurB,QAAU,CAAC,CAAEtuB,QAAS+C,EAAM/C,QAASC,QAAS8C,EAAM9C,UAC1D6Z,GAAa/W,IAUf,SAAS4W,GAAa5W,GAEjBA,EAAM4rB,cAAgB5rB,EAAM6rB,sBAA8C,UAAtB7rB,EAAM4rB,cAC7D5rB,EAAMurB,QAAU,CAAC,CAAEtuB,QAAS+C,EAAM/C,QAASC,QAAS8C,EAAM9C,UAC1D8Z,GAAYhX,IAWd,SAASsV,GAAuBtV,GAE/B,GAAIgW,KAAKC,MAAQ1N,EAAqB,IAAM,CAE3CA,EAAqByN,KAAKC,MAE1B,IAAI6V,EAAQ9rB,EAAM+rB,SAAW/rB,EAAMgsB,WAC/BF,EAAQ,EACXpC,KAEQoC,EAAQ,GAChB9B,MAeH,SAAS7S,GAAmBnX,GAE3BmqB,GAAanqB,GAEbA,EAAM2b,iBAEN,IAAIsQ,EAAc1hB,GAASpC,EAAIwB,QAAQiF,iBAAkBxL,IAA+BjS,OACpF+6B,EAAat6B,KAAKiJ,MAASmF,EAAM/C,QAAUkL,EAAIwB,QAAQyT,YAAgB6O,GAEvEtoB,EAAOqB,MACVknB,EAAaD,EAAcC,GAG5Blb,GAAOkb,GAOR,SAASzU,GAAuBzX,GAAUA,EAAM2b,iBAAkBwO,KAAyC,WAA1BxmB,EAAOsB,eAA8B+kB,KAAiBJ,KACvI,SAASlS,GAAwB1X,GAAUA,EAAM2b,iBAAkBwO,KAAyC,WAA1BxmB,EAAOsB,eAA8BykB,KAAiBG,KACxI,SAASlS,GAAqB3X,GAAUA,EAAM2b,iBAAkBwO,KAAeL,KAC/E,SAASlS,GAAuB5X,GAAUA,EAAM2b,iBAAkBwO,KAAeJ,KACjF,SAASlS,GAAuB7X,GAAUA,EAAM2b,iBAAkBwO,KAAeH,KACjF,SAASlS,GAAuB9X,GAAUA,EAAM2b,iBAAkBwO,KAAeT,KAOjF,SAASlT,GAAoBxW,GAE5B6N,KASD,SAAS4I,GAAgBzW,GAExBkI,KASD,SAASkP,GAAwBpX,GAEhC,IAAImsB,EAAYxuB,SAASyuB,cACrBzuB,SAAS0uB,UACT1uB,SAASmrB,QAII,IAAbqD,GAAsBxuB,SAAS6sB,gBAAkB7sB,SAASyM,OAElB,oBAAhCzM,SAAS6sB,cAAc8B,MACjC3uB,SAAS6sB,cAAc8B,OAExB3uB,SAASyM,KAAKmiB,SAUhB,SAAS5O,GAAwB3d,GAIhC,GAAI2I,GAAkB8T,KAAe,CACpCzc,EAAM2b,iBAEN,IAAI9Q,EAAU7K,EAAMwZ,OAEpB,MAAO3O,IAAYA,EAAQ+R,SAAStF,MAAO,aAC1CzM,EAAUA,EAAQ6G,WAGnB,GAAI7G,IAAYA,EAAQkD,UAAUmD,SAAU,cAE3CiN,KAEItT,EAAQ+R,SAAStF,MAAO,cAAgB,CAC3C,IAAIjd,EAAI2f,SAAUnP,EAAQC,aAAc,gBAAkB,IACzDxT,EAAI0iB,SAAUnP,EAAQC,aAAc,gBAAkB,IAEvDkG,GAAO3W,EAAG/C,KAcd,SAASikB,GAAsBvb,GAE9B,GAAIA,EAAMwsB,eAAiBxsB,EAAMwsB,cAAcnY,aAAc,QAAW,CACvE,IAAIxH,EAAM7M,EAAMwsB,cAAc1hB,aAAc,QACxC+B,IACH2O,GAAa3O,GACb7M,EAAM2b,mBAWT,SAASzF,GAAwBlW,GAG5ByC,EAAOgnB,gBAAiC,IAAhB9lB,EAAOoB,MAClCiM,GAAO,EAAG,GACVwO,MAGQ1W,EACR0W,KAIAC,KAqBF,SAAS1J,GAAUjD,EAAW2Z,GAG7Bx/B,KAAKy/B,SAAW,IAChBz/B,KAAK0/B,UAAY1/B,KAAKy/B,SAAS,EAC/Bz/B,KAAK2/B,UAAY,EAGjB3/B,KAAK4/B,SAAU,EAGf5/B,KAAKkX,SAAW,EAGhBlX,KAAK6/B,eAAiB,EAEtB7/B,KAAK6lB,UAAYA,EACjB7lB,KAAKw/B,cAAgBA,EAErBx/B,KAAKwe,OAAS9N,SAASyN,cAAe,UACtCne,KAAKwe,OAAOgG,UAAY,WACxBxkB,KAAKwe,OAAOlS,MAAQtM,KAAKy/B,SACzBz/B,KAAKwe,OAAOjS,OAASvM,KAAKy/B,SAC1Bz/B,KAAKwe,OAAO/b,MAAM6J,MAAQtM,KAAK0/B,UAAY,KAC3C1/B,KAAKwe,OAAO/b,MAAM8J,OAASvM,KAAK0/B,UAAY,KAC5C1/B,KAAK2C,QAAU3C,KAAKwe,OAAOC,WAAY,MAEvCze,KAAK6lB,UAAUpD,YAAaziB,KAAKwe,QAEjCxe,KAAKF,SAyWN,OAlWAgpB,GAAS0C,UAAUkR,WAAa,SAAU5uB,GAEzC,IAAIgyB,EAAa9/B,KAAK4/B,QAEtB5/B,KAAK4/B,QAAU9xB,GAGVgyB,GAAc9/B,KAAK4/B,QACvB5/B,KAAK+/B,UAGL//B,KAAKF,UAKPgpB,GAAS0C,UAAUuU,QAAU,WAE5B,IAAIC,EAAiBhgC,KAAKkX,SAE1BlX,KAAKkX,SAAWlX,KAAKw/B,gBAIjBQ,EAAiB,IAAOhgC,KAAKkX,SAAW,KAC3ClX,KAAK6/B,eAAiB7/B,KAAKkX,UAG5BlX,KAAKF,SAEDE,KAAK4/B,SACRvkB,EAAS+C,4BAA4BqN,KAAM5O,OAAQ7c,KAAK+/B,QAAQE,KAAMjgC,QAQxE8oB,GAAS0C,UAAU1rB,OAAS,WAE3B,IAAIoX,EAAWlX,KAAK4/B,QAAU5/B,KAAKkX,SAAW,EAC7CgpB,EAAWlgC,KAAK0/B,UAAc1/B,KAAK2/B,UACnCvzB,EAAIpM,KAAK0/B,UACTrzB,EAAIrM,KAAK0/B,UACTS,EAAW,GAGZngC,KAAK6/B,gBAAgD,IAA5B,EAAI7/B,KAAK6/B,gBAElC,IAAIO,GAAez7B,KAAKqH,GAAK,EAAQkL,GAAuB,EAAVvS,KAAKqH,IACnDkB,GAAiBvI,KAAKqH,GAAK,EAAQhM,KAAK6/B,gBAA6B,EAAVl7B,KAAKqH,IAEpEhM,KAAK2C,QAAQ09B,OACbrgC,KAAK2C,QAAQ29B,UAAW,EAAG,EAAGtgC,KAAKy/B,SAAUz/B,KAAKy/B,UAGlDz/B,KAAK2C,QAAQ49B,YACbvgC,KAAK2C,QAAQ69B,IAAKp0B,EAAGC,EAAG6zB,EAAS,EAAG,EAAa,EAAVv7B,KAAKqH,IAAQ,GACpDhM,KAAK2C,QAAQ89B,UAAY,uBACzBzgC,KAAK2C,QAAQ8G,OAGbzJ,KAAK2C,QAAQ49B,YACbvgC,KAAK2C,QAAQ69B,IAAKp0B,EAAGC,EAAG6zB,EAAQ,EAAa,EAAVv7B,KAAKqH,IAAQ,GAChDhM,KAAK2C,QAAQ+9B,UAAY1gC,KAAK2/B,UAC9B3/B,KAAK2C,QAAQg+B,YAAc,6BAC3B3gC,KAAK2C,QAAQi+B,SAET5gC,KAAK4/B,UAER5/B,KAAK2C,QAAQ49B,YACbvgC,KAAK2C,QAAQ69B,IAAKp0B,EAAGC,EAAG6zB,EAAQhzB,EAAYkzB,GAAU,GACtDpgC,KAAK2C,QAAQ+9B,UAAY1gC,KAAK2/B,UAC9B3/B,KAAK2C,QAAQg+B,YAAc,OAC3B3gC,KAAK2C,QAAQi+B,UAGd5gC,KAAK2C,QAAQk+B,UAAWz0B,EAAM+zB,EAAW,EAAK9zB,EAAM8zB,EAAW,GAG3DngC,KAAK4/B,SACR5/B,KAAK2C,QAAQ89B,UAAY,OACzBzgC,KAAK2C,QAAQm+B,SAAU,EAAG,EAAGX,EAAW,EAAI,EAAGA,GAC/CngC,KAAK2C,QAAQm+B,SAAUX,EAAW,EAAI,EAAG,EAAGA,EAAW,EAAI,EAAGA,KAG9DngC,KAAK2C,QAAQ49B,YACbvgC,KAAK2C,QAAQk+B,UAAW,EAAG,GAC3B7gC,KAAK2C,QAAQo+B,OAAQ,EAAG,GACxB/gC,KAAK2C,QAAQq+B,OAAQb,EAAW,EAAGA,EAAW,GAC9CngC,KAAK2C,QAAQq+B,OAAQ,EAAGb,GACxBngC,KAAK2C,QAAQ89B,UAAY,OACzBzgC,KAAK2C,QAAQ8G,QAGdzJ,KAAK2C,QAAQs+B,WAIdnY,GAAS0C,UAAUhrB,GAAK,SAAU8D,EAAM48B,GACvClhC,KAAKwe,OAAO1B,iBAAkBxY,EAAM48B,GAAU,IAG/CpY,GAAS0C,UAAU2V,IAAM,SAAU78B,EAAM48B,GACxClhC,KAAKwe,OAAO8J,oBAAqBhkB,EAAM48B,GAAU,IAGlDpY,GAAS0C,UAAU3C,QAAU,WAE5B7oB,KAAK4/B,SAAU,EAEX5/B,KAAKwe,OAAOiG,YACfzkB,KAAK6lB,UAAUkJ,YAAa/uB,KAAKwe,SAWnChJ,EAAS,CACRS,QAASA,EAEToG,WAAYA,EACZsE,UAAWA,GAEXyI,KAAMA,GACN6K,UAAWA,GACXC,cAAeA,GAGfnQ,MAAOA,GACPzd,KAAMq2B,GACNl2B,MAAOm2B,GACPxG,GAAIyG,GACJxG,KAAMyG,GACNxG,KAAMyG,GACNxG,KAAMkG,GAGNxJ,iBAAkBA,GAClBmO,aAAclF,GACdD,aAAcA,GAGdoF,WAAYtd,GACZ4Y,aAAcA,GACdC,cAAeA,GACfC,WAAYA,GACZC,aAAcA,GACdC,aAAcA,GACdN,aAAcA,GAGdxhB,OAAQA,GAGRhD,QAASA,GAGTie,gBAAiBA,GAGjBC,mBAAoBA,GAGpBxH,WAAYA,GAGZyC,eAAgBA,GAGhBgB,YAAaA,GAGbE,gBAAiBA,GAGjB9C,WAAYA,GACZ6C,SAAUA,GACVI,cAAeA,GACftJ,eAAgBA,GAGhBgL,UAAWA,GACXgB,YAAaA,GAGb9L,kBAAmBA,GACnBlI,qBAAsBA,GAGtB+M,SAAUA,GACViN,SAAUA,GAGVzF,kBAAmBA,GAGnBF,YAAaA,GAGbjE,WAAYA,GAGZmJ,UAAWA,GAIXG,oBAAqBA,GAGrBlF,eAAgBA,GAGhBqF,SAAUA,GAGVtC,mBAAoBA,GAGpB9T,cAAeA,GAGf+V,oBAAqBA,GACrBC,kBAAmBA,GAInBtF,oBAAqBA,GACrBD,kBAAmBA,GAGnBiM,iBAAkB,WACjB,OAAO3rB,GAIR4rB,gBAAiB,WAChB,OAAO3rB,GAIR4rB,SAAU,WACT,OAAOt7B,GAIRu7B,UAAW,WACV,OAAO/qB,GAIRsG,aAAc,WACb,IAAID,EAAQ,GAOZ,IAAK,IAAIrS,KALT+iB,SAASC,OAAO/G,QAAS,4BAA4B,SAAS3d,GAC7D+T,EAAO/T,EAAE4rB,MAAO,KAAM8M,SAAY14B,EAAE4rB,MAAO,KAAMvB,SAIpCtW,EAAQ,CACrB,IAAIjP,EAAQiP,EAAOrS,GAEnBqS,EAAOrS,GAAMghB,GAAaiW,SAAU7zB,IAGrC,OAAOiP,GAIR6kB,iBAAkB,WACjB,OAAO1mB,EAAIwB,SAAWhM,SAASiM,cAAe,YAI/CklB,WAAY,WACX,OAAO1mB,GAIR2mB,aAAc,WACb,OAAoB,IAAXrsB,GAA2B,IAAXC,GAI1B8mB,YAAa,WACZ,QAAI5mB,KAECA,EAAamsB,sBAGbrQ,GAAiB9b,KAAkBA,EAAa6O,WAAWsd,sBAUjE/E,oBAAqB,WACpB,SAAIpnB,IAAgB8b,GAAiB9b,MAEhCA,EAAamsB,oBASnBC,QAAS,WACR,OAAOtnB,GAIRoC,iBAAkB,SAAUxY,EAAM48B,EAAUe,GACvC,qBAAsBplB,QACzBrH,EAAOosB,mBAAmB9kB,iBAAkBxY,EAAM48B,EAAUe,IAG9D3Z,oBAAqB,SAAUhkB,EAAM48B,EAAUe,GAC1C,qBAAsBplB,QACzBrH,EAAOosB,mBAAmBtZ,oBAAqBhkB,EAAM48B,EAAUe,IAKjE/W,cAAeA,GACfI,iBAAkBA,GAGlBR,eAAgBA,GAChBE,UAAWA,GACXC,UAAWA,GAGXiX,WAAY,SAAU9W,GACrBpB,GAAmB,CAAEoB,QAASA,KAI/B+W,yBAA0B,SAAU9+B,EAAKyK,GACxCqO,EAAkB9Y,GAAOyK,IAIpB0H,M,qBCziMR,IAAI4sB,EAAU,EAAQ,MACnBA,EAAQC,aAAYD,EAAUA,EAAQ79B,SACnB,kBAAZ69B,IAAsBA,EAAU,CAAC,CAAChtB,EAAOxG,GAAIwzB,EAAS,MAC7DA,EAAQE,SAAQltB,EAAOmtB,QAAUH,EAAQE,QAE5C,IAAIthB,EAAM,UACGA,EAAI,WAAYohB,GAAS,EAAM,CAAC,WAAY,EAAM,YAAa,K,qBCN5E,IAAIA,EAAU,EAAQ,MACnBA,EAAQC,aAAYD,EAAUA,EAAQ79B,SACnB,kBAAZ69B,IAAsBA,EAAU,CAAC,CAAChtB,EAAOxG,GAAIwzB,EAAS,MAC7DA,EAAQE,SAAQltB,EAAOmtB,QAAUH,EAAQE,QAE5C,IAAIthB,EAAM,UACGA,EAAI,WAAYohB,GAAS,EAAM,CAAC,WAAY,EAAM,YAAa,K,qBCN5E,IAAIA,EAAU,EAAQ,MACnBA,EAAQC,aAAYD,EAAUA,EAAQ79B,SACnB,kBAAZ69B,IAAsBA,EAAU,CAAC,CAAChtB,EAAOxG,GAAIwzB,EAAS,MAC7DA,EAAQE,SAAQltB,EAAOmtB,QAAUH,EAAQE,QAE5C,IAAIthB,EAAM,UACGA,EAAI,WAAYohB,GAAS,EAAM,CAAC,WAAY,EAAM,YAAa,K,qBCN5E,IAAIA,EAAU,EAAQ,MACnBA,EAAQC,aAAYD,EAAUA,EAAQ79B,SACnB,kBAAZ69B,IAAsBA,EAAU,CAAC,CAAChtB,EAAOxG,GAAIwzB,EAAS,MAC7DA,EAAQE,SAAQltB,EAAOmtB,QAAUH,EAAQE,QAE5C,IAAIthB,EAAM,UACGA,EAAI,WAAYohB,GAAS,EAAM,CAAC,WAAY,EAAM,YAAa,K,qBCN5E,IAAIA,EAAU,EAAQ,MACnBA,EAAQC,aAAYD,EAAUA,EAAQ79B,SACnB,kBAAZ69B,IAAsBA,EAAU,CAAC,CAAChtB,EAAOxG,GAAIwzB,EAAS,MAC7DA,EAAQE,SAAQltB,EAAOmtB,QAAUH,EAAQE,QAE5C,IAAIthB,EAAM,UACGA,EAAI,WAAYohB,GAAS,EAAM,CAAC,WAAY,EAAM,YAAa,K,qBCN5E,IAAIA,EAAU,EAAQ,MACnBA,EAAQC,aAAYD,EAAUA,EAAQ79B,SACnB,kBAAZ69B,IAAsBA,EAAU,CAAC,CAAChtB,EAAOxG,GAAIwzB,EAAS,MAC7DA,EAAQE,SAAQltB,EAAOmtB,QAAUH,EAAQE,QAE5C,IAAIthB,EAAM,UACGA,EAAI,WAAYohB,GAAS,EAAM,CAAC,WAAY,EAAM,YAAa,K,qBCN5E,IAAIA,EAAU,EAAQ,MACnBA,EAAQC,aAAYD,EAAUA,EAAQ79B,SACnB,kBAAZ69B,IAAsBA,EAAU,CAAC,CAAChtB,EAAOxG,GAAIwzB,EAAS,MAC7DA,EAAQE,SAAQltB,EAAOmtB,QAAUH,EAAQE,QAE5C,IAAIthB,EAAM,UACGA,EAAI,WAAYohB,GAAS,EAAM,CAAC,WAAY,EAAM,YAAa,K,qBCN5E,IAAIA,EAAU,EAAQ,MACnBA,EAAQC,aAAYD,EAAUA,EAAQ79B,SACnB,kBAAZ69B,IAAsBA,EAAU,CAAC,CAAChtB,EAAOxG,GAAIwzB,EAAS,MAC7DA,EAAQE,SAAQltB,EAAOmtB,QAAUH,EAAQE,QAE5C,IAAIthB,EAAM,UACGA,EAAI,WAAYohB,GAAS,EAAM,CAAC,WAAY,EAAM,YAAa","sources":["webpack://app/./src/components/publications/MediaPicker.vue?d662","webpack://app/src/components/publications/MediaPicker.vue","webpack://app/./src/components/publications/MediaPicker.vue?e7bb","webpack://app/./src/components/publications/MediaPicker.vue","webpack://app/./src/components/publications/modules/PublicationModule.vue?e990","webpack://app/./src/components/publications/modules/ModuleMosaic.vue?8f21","webpack://app/src/components/publications/modules/ModuleMosaic.vue","webpack://app/./src/components/publications/modules/ModuleMosaic.vue?295c","webpack://app/./src/components/publications/modules/ModuleMosaic.vue","webpack://app/./src/components/publications/modules/ModuleCarousel.vue?f8d1","webpack://app/src/components/publications/modules/ModuleCarousel.vue","webpack://app/./src/components/publications/modules/ModuleCarousel.vue?e3db","webpack://app/./src/components/publications/modules/ModuleCarousel.vue","webpack://app/src/components/publications/modules/PublicationModule.vue","webpack://app/./src/components/publications/modules/PublicationModule.vue?6f0d","webpack://app/./src/components/publications/modules/PublicationModule.vue","webpack://app/./src/components/publications/page_by_page/SinglePage.vue?ad91","webpack://app/./src/components/publications/page_by_page/MoveableItem.vue?3cf4","webpack://app/./src/ddr/Vector.js","webpack://app/./src/ddr/Matrix.js","webpack://app/./src/ddr/helper.js","webpack://app/src/ddr/index.vue","webpack://app/./src/ddr/index.vue","webpack://app/./src/ddr/index.vue?bba9","webpack://app/src/components/publications/page_by_page/MoveableItem.vue","webpack://app/./src/components/publications/page_by_page/MoveableItem.vue?79c7","webpack://app/./src/components/publications/page_by_page/MoveableItem.vue","webpack://app/src/components/publications/page_by_page/SinglePage.vue","webpack://app/./src/components/publications/page_by_page/SinglePage.vue?ac6e","webpack://app/./src/components/publications/page_by_page/SinglePage.vue","webpack://app/./src/views/Pub2.vue?830e","webpack://app/src/views/Pub2.vue","webpack://app/./src/views/Pub2.vue?867a","webpack://app/./src/views/Pub2.vue","webpack://app/./node_modules/yoyoo-ddr/dist/yoyoo-ddr.css","webpack://app/./src/components/publications/MediaPicker.vue?9562","webpack://app/./src/components/publications/modules/ModuleMosaic.vue?baed","webpack://app/./src/components/publications/modules/PublicationModule.vue?c3bd","webpack://app/./src/components/publications/page_by_page/MoveableItem.vue?1479","webpack://app/./src/components/publications/page_by_page/SinglePage.vue?2ec1","webpack://app/./src/views/Pub2.vue?a02c","webpack://app/./src/ddr/index.vue?7963","webpack://app/./node_modules/reveal.js/js/reveal.js","webpack://app/./node_modules/yoyoo-ddr/dist/yoyoo-ddr.css?d541","webpack://app/./src/components/publications/MediaPicker.vue?b22d","webpack://app/./src/components/publications/modules/ModuleMosaic.vue?fb1a","webpack://app/./src/components/publications/modules/PublicationModule.vue?91b9","webpack://app/./src/components/publications/page_by_page/MoveableItem.vue?46d8","webpack://app/./src/components/publications/page_by_page/SinglePage.vue?7ab5","webpack://app/./src/views/Pub2.vue?474c","webpack://app/./src/ddr/index.vue?3772"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"_mediaPicker\"},[_c('PickMediaFromProjects',{attrs:{\"path\":_vm.current_project_path},on:{\"selectMedia\":function($event){return _vm.$emit('selectMedia', $event)},\"close\":function($event){return _vm.$emit('close')}}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"_mediaPicker\">\n    <!-- OPTIONS -->\n    <!-- create a text -->\n    <!-- <button type=\"button\" @click=\"createText\">\n        {{ $t(\"create_text\") }}\n      </button> -->\n    <!-- select from this or another project library -->\n    <PickMediaFromProjects\n      :path=\"current_project_path\"\n      @selectMedia=\"$emit('selectMedia', $event)\"\n      @close=\"$emit('close')\"\n    />\n  </div>\n</template>\n<script>\nexport default {\n  props: {\n    publication_path: String,\n  },\n  components: {},\n  data() {\n    return {};\n  },\n  async created() {},\n  beforeDestroy() {},\n  watch: {},\n  computed: {\n    current_project_path() {\n      const all_publications_path = this.getParent(this.publication_path);\n      return this.getParent(all_publications_path);\n    },\n  },\n  methods: {},\n};\n</script>\n<style lang=\"scss\" scoped>\n._mediaPicker {\n  width: 100%;\n  // background: var(--c-gris_clair);\n  margin: 0 auto;\n}\n\n._addMediaBtn {\n  text-align: center;\n  padding: calc(var(--spacing) * 1);\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./MediaPicker.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./MediaPicker.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MediaPicker.vue?vue&type=template&id=89343b6c&scoped=true&\"\nimport script from \"./MediaPicker.vue?vue&type=script&lang=js&\"\nexport * from \"./MediaPicker.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MediaPicker.vue?vue&type=style&index=0&id=89343b6c&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"89343b6c\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"_publicationModule\",class:{\n    'is--shape': _vm.is_shape,\n  }},[(_vm.can_edit && _vm.page_template !== 'page_by_page')?_c('div',{staticClass:\"_sideOptions\"},[_c('span',[(\n          _vm.$listeners.hasOwnProperty('moveUp') &&\n          _vm.module_position !== 'first' &&\n          _vm.module_position !== 'alone'\n        )?_c('button',{staticClass:\"_sideBtns _moveBefore\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.$emit('moveUp')}}},[_c('svg',{staticStyle:{\"transform\":\"rotate(90deg)\"},attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"viewBox\":\"0 0 168 168\"}},[_c('path',{staticStyle:{\"fill\":\"currentColor\"},attrs:{\"d\":\"M87.46,49.46,73.39,64.77a65.3,65.3,0,0,1-6.15,6.15A47.8,47.8,0,0,1,61,75.29H131.6V91.14H61A39.1,39.1,0,0,1,67,95.51q2.81,2.46,6.36,6.15L87.46,117,74.48,128,34.17,83.21,74.48,38.39Z\"}})])]):_vm._e()]),_c('div',{staticClass:\"_options\"},[_c('button',{staticClass:\"_sideBtns\",class:{\n          'is--active': _vm.show_advanced_menu,\n        },attrs:{\"type\":\"button\"},on:{\"click\":function($event){$event.stopPropagation();_vm.show_advanced_menu = !_vm.show_advanced_menu}}},[_c('svg',{staticStyle:{\"fill\":\"currentColor\"},attrs:{\"version\":\"1.1\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"xmlns:xlink\":\"http://www.w3.org/1999/xlink\",\"x\":\"0px\",\"y\":\"0px\",\"width\":\"24\",\"height\":\"24\",\"viewBox\":\"0 0 48 48\",\"xml:space\":\"preserve\"}},[_c('circle',{attrs:{\"cx\":\"12\",\"cy\":\"24\",\"r\":\"4\"}}),_c('circle',{attrs:{\"cx\":\"24\",\"cy\":\"24\",\"r\":\"4\"}}),_c('circle',{attrs:{\"cx\":\"36\",\"cy\":\"24\",\"r\":\"4\"}})])]),(_vm.show_advanced_menu)?_c('div',{staticClass:\"_advanced_menu\"},[_c('sl-button',{attrs:{\"variant\":\"default\",\"size\":\"small\",\"pill\":\"\"}},[_vm._v(\" \"+_vm._s(_vm.$t((\"module.label.\" + (_vm.publimodule.module_type))))+\" \")]),_c('div',{staticClass:\"_buttonRow\"},[_c('button',{staticClass:\"u-button\",attrs:{\"type\":\"button\",\"disabled\":!_vm.publimodule.size || _vm.publimodule.size === 100},on:{\"click\":function($event){return _vm.updateMeta({ size: 100 })}}},[_vm._v(\" 100% \")]),_c('button',{staticClass:\"u-button\",attrs:{\"type\":\"button\",\"disabled\":_vm.publimodule.size === 66.6},on:{\"click\":function($event){return _vm.updateMeta({ size: 66.6 })}}},[_vm._v(\" 66% \")]),_c('button',{staticClass:\"u-button\",attrs:{\"type\":\"button\",\"disabled\":_vm.publimodule.size === 50},on:{\"click\":function($event){return _vm.updateMeta({ size: 50 })}}},[_vm._v(\" 50% \")]),_c('button',{staticClass:\"u-button\",attrs:{\"type\":\"button\",\"disabled\":_vm.publimodule.size === 33.3},on:{\"click\":function($event){return _vm.updateMeta({ size: 33.3 })}}},[_vm._v(\" 33% \")])]),_c('div',{staticClass:\"_buttonRow\"},[_c('button',{staticClass:\"u-button\",attrs:{\"type\":\"button\",\"disabled\":!_vm.publimodule.align || _vm.publimodule.align === 'left'},on:{\"click\":function($event){return _vm.updateMeta({ align: 'left' })}}},[_c('sl-icon',{attrs:{\"name\":\"align-start\"}})],1),_c('button',{staticClass:\"u-button\",attrs:{\"type\":\"button\",\"disabled\":_vm.publimodule.align === 'center'},on:{\"click\":function($event){return _vm.updateMeta({ align: 'center' })}}},[_c('sl-icon',{attrs:{\"name\":\"align-center\"}})],1),_c('button',{staticClass:\"u-button\",attrs:{\"type\":\"button\",\"disabled\":_vm.publimodule.align === 'right'},on:{\"click\":function($event){return _vm.updateMeta({ align: 'right' })}}},[_c('sl-icon',{attrs:{\"name\":\"align-end\"}})],1)]),_c('div',{staticClass:\"_buttonRow\"},[_c('button',{staticClass:\"u-button\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.duplicateModule}},[_vm._v(\" \"+_vm._s(_vm.$t(\"duplicate\"))+\" \")]),_c('button',{staticClass:\"u-button\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.removeModule}},[_vm._v(\" \"+_vm._s(_vm.$t(\"remove\"))+\" \")])])],1):_vm._e()]),_c('span',[(\n          _vm.$listeners.hasOwnProperty('moveDown') &&\n          _vm.module_position !== 'last' &&\n          _vm.module_position !== 'alone'\n        )?_c('button',{staticClass:\"_sideBtns _moveAfter\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.$emit('moveDown')}}},[_c('svg',{staticStyle:{\"transform\":\"rotate(90deg)\"},attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"viewBox\":\"0 0 168 168\"}},[_c('path',{staticStyle:{\"fill\":\"currentColor\"},attrs:{\"d\":\"M78.31,117l14.07-15.31a65.3,65.3,0,0,1,6.15-6.15,47.52,47.52,0,0,1,6.29-4.37H34.17V75.29h70.65a39.1,39.1,0,0,1-6.08-4.37q-2.8-2.46-6.36-6.15L78.31,49.46l13-11.07L131.6,83.21,91.29,128Z\"}})])]):_vm._e()])]):_vm._e(),_c('div',{staticClass:\"_content\",style:(_vm.media_styles)},[(_vm.publimodule.module_type === 'mosaic')?_c('ModuleMosaic',{attrs:{\"publimodule\":_vm.publimodule,\"can_edit\":_vm.can_edit,\"context\":_vm.context,\"page_template\":_vm.page_template,\"number_of_max_medias\":_vm.number_of_max_medias},on:{\"updateMeta\":_vm.updateMeta,\"remove\":_vm.removeModule}}):(_vm.publimodule.module_type === 'carousel')?_c('ModuleCarousel',{attrs:{\"publimodule\":_vm.publimodule,\"context\":_vm.context,\"can_edit\":_vm.can_edit}}):(_vm.publimodule.module_type === 'text' && _vm.first_media)?_c('CollaborativeEditor2',{ref:\"textBloc\",attrs:{\"path\":_vm.first_media.$path,\"content\":_vm.first_media.$content,\"scrollingContainer\":_vm.$el,\"line_selected\":false,\"can_edit\":_vm.can_edit},on:{\"lineClicked\":function($event){return _vm.$emit('lineClicked', $event)},\"contentIsEdited\":function($event){return _vm.$emit('contentIsEdited', $event)},\"contentIsNotEdited\":function($event){return _vm.$emit('contentIsNotEdited', $event)}}}):(_vm.is_shape)?[_c('svg',{attrs:{\"viewBox\":\"0 0 100 100\",\"preserveAspectRatio\":\"none\",\"xmlns\":\"http://www.w3.org/2000/svg\"}},[(_vm.publimodule.module_type === 'ellipsis')?_c('circle',{attrs:{\"cx\":\"50\",\"cy\":\"50\",\"r\":50 - (_vm.publimodule.outline_width * _vm.magnification) / 8,\"vector-effect\":\"non-scaling-stroke\"}}):(_vm.publimodule.module_type === 'rectangle')?_c('rect',{attrs:{\"x\":(_vm.publimodule.outline_width * _vm.magnification) / 4,\"y\":(_vm.publimodule.outline_width * _vm.magnification) / 4,\"width\":100 - (_vm.publimodule.outline_width * _vm.magnification) / 2,\"height\":100 - (_vm.publimodule.outline_width * _vm.magnification) / 2,\"vector-effect\":\"non-scaling-stroke\",\"rx\":_vm.borderRadius / 2 || 0,\"ry\":_vm.borderRadius / 2 || 0}}):(_vm.publimodule.module_type === 'line')?_c('g',[_c('rect',{attrs:{\"width\":\"100\",\"height\":\"100\",\"vector-effect\":\"non-scaling-stroke\",\"stroke\":\"none\",\"rx\":_vm.borderRadius / 2 || 0,\"ry\":_vm.borderRadius / 2 || 0}}),_c('line',{attrs:{\"x1\":(_vm.publimodule.outline_width * _vm.magnification) / 4 || 0,\"y1\":\"50\",\"x2\":100 - ((_vm.publimodule.outline_width * _vm.magnification) / 4 || 0),\"y2\":\"50\",\"vector-effect\":\"non-scaling-stroke\"}})]):(_vm.publimodule.module_type === 'arrow')?_c('g',[_c('rect',{attrs:{\"width\":\"100\",\"height\":\"100\",\"vector-effect\":\"non-scaling-stroke\",\"stroke\":\"none\",\"rx\":_vm.borderRadius / 2 || 0,\"ry\":_vm.borderRadius / 2 || 0}}),_c('line',{attrs:{\"x1\":(_vm.publimodule.outline_width * _vm.magnification) / 4 || 0,\"y1\":\"50\",\"x2\":100 - ((_vm.publimodule.outline_width * _vm.magnification) / 4 || 0),\"y2\":\"50\",\"vector-effect\":\"non-scaling-stroke\"}}),_c('g',{attrs:{\"transform\":(\"\\n              translate(\" + (100 - ((_vm.publimodule.outline_width * _vm.magnification) / 4 || 0)) + \", 50)\"),\"preserveAspectRatio\":\"\"}},[_c('line',{attrs:{\"x1\":\"0\",\"y1\":\"0\",\"x2\":\"-10\",\"y2\":\"-10\",\"vector-effect\":\"non-scaling-stroke\"}}),_c('line',{attrs:{\"x1\":\"0\",\"y1\":\"0\",\"x2\":\"-10\",\"y2\":\"10\",\"vector-effect\":\"non-scaling-stroke\"}})])]):_vm._e()])]:(_vm.publimodule.module_type === 'free_drawing')?void 0:_c('small',[_vm._v(_vm._s(_vm.$t(\"nothing_to_show\")))])],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"name\":\"fade_fast\",\"mode\":\"out-in\"}},[_c('div',{key:_vm.is_multiple_medias ? 'multiple' : 'single',staticClass:\"_moduleMosaic\",class:{\n      'is--multipleMedias': _vm.is_multiple_medias,\n    },style:((\"--number_of_medias: \" + (_vm.medias_with_linked.length)))},[_c('div',{staticClass:\"_mediaGrid\"},[_vm._l((_vm.medias_with_linked),function(media_with_linked,index){return _c('div',{key:media_with_linked._linked_media.$path || 'none',staticClass:\"_mediaGrid--item\",style:(_vm.itemStyle({ media_with_linked: media_with_linked }))},[_c('MediaContent',{attrs:{\"file\":media_with_linked._linked_media,\"resolution\":_vm.context === 'preview' ? 220 : 1600,\"context\":_vm.context,\"show_fullscreen_button\":_vm.context !== 'preview'}}),(_vm.can_edit)?_c('div',{staticClass:\"_btnRow\"},[(\n              (_vm.is_multiple_medias ||\n                (_vm.page_template === 'page_by_page' &&\n                  !_vm.single_media_displayed_at_full_ratio)) &&\n              !(\n                !media_with_linked.objectFit ||\n                media_with_linked.objectFit === 'cover'\n              )\n            )?_c('button',{staticClass:\"u-buttonLink\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.frameFit({ index: index, opt: { objectFit: 'cover' } })}}},[_vm._v(\" \"+_vm._s(_vm.$t(\"object_fit_cover\"))+\" \")]):_vm._e(),(\n              (_vm.is_multiple_medias ||\n                (_vm.page_template === 'page_by_page' &&\n                  !_vm.single_media_displayed_at_full_ratio)) &&\n              media_with_linked.objectFit !== 'contain'\n            )?_c('button',{staticClass:\"u-buttonLink\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.frameFit({ index: index, opt: { objectFit: 'contain' } })}}},[_vm._v(\" \"+_vm._s(_vm.$t(\"object_fit_contain\"))+\" \")]):_vm._e(),(_vm.is_multiple_medias)?_c('button',{staticClass:\"u-buttonLink\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.removeMediaAtIndex(index)}}},[_vm._v(\" \"+_vm._s(_vm.$t(\"remove\"))+\" \")]):_vm._e()]):_vm._e()],1)}),(\n          _vm.can_edit &&\n          (!_vm.number_of_max_medias ||\n            _vm.medias_with_linked.length < _vm.number_of_max_medias)\n        )?_c('div',{staticClass:\"_mediaPickerTile\"},[(!_vm.show_media_picker)?_c('sl-icon-button',{staticClass:\"u-colorBleuvert\",attrs:{\"name\":\"plus-circle-fill\",\"label\":_vm.$t('add_media')},on:{\"click\":function($event){_vm.show_media_picker = true}}}):_c('MediaPicker',{attrs:{\"publication_path\":_vm.publication_path},on:{\"selectMedia\":_vm.selectMedia,\"close\":function($event){_vm.show_media_picker = false}}}),_c('transition',{attrs:{\"name\":\"dropzone\",\"duration\":150}},[(\n              _vm.show_dropzone &&\n              _vm.medias_with_linked.length < _vm.number_of_max_medias\n            )?_c('div',{staticClass:\"_dropzone\"},[_c('DropZone',{on:{\"mediaDropped\":_vm.selectMedia}})],1):_vm._e()])],1):_vm._e()],2)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <transition name=\"fade_fast\" mode=\"out-in\">\n    <div\n      class=\"_moduleMosaic\"\n      :style=\"`--number_of_medias: ${medias_with_linked.length}`\"\n      :key=\"is_multiple_medias ? 'multiple' : 'single'\"\n      :class=\"{\n        'is--multipleMedias': is_multiple_medias,\n      }\"\n    >\n      <div class=\"_mediaGrid\">\n        <div\n          class=\"_mediaGrid--item\"\n          v-for=\"(media_with_linked, index) in medias_with_linked\"\n          :key=\"media_with_linked._linked_media.$path || 'none'\"\n          :style=\"itemStyle({ media_with_linked })\"\n        >\n          <MediaContent\n            :file=\"media_with_linked._linked_media\"\n            :resolution=\"context === 'preview' ? 220 : 1600\"\n            :context=\"context\"\n            :show_fullscreen_button=\"context !== 'preview'\"\n          />\n\n          <div class=\"_btnRow\" v-if=\"can_edit\">\n            <button\n              type=\"button\"\n              class=\"u-buttonLink\"\n              v-if=\"\n                (is_multiple_medias ||\n                  (page_template === 'page_by_page' &&\n                    !single_media_displayed_at_full_ratio)) &&\n                !(\n                  !media_with_linked.objectFit ||\n                  media_with_linked.objectFit === 'cover'\n                )\n              \"\n              @click=\"frameFit({ index, opt: { objectFit: 'cover' } })\"\n            >\n              {{ $t(\"object_fit_cover\") }}\n            </button>\n            <button\n              type=\"button\"\n              class=\"u-buttonLink\"\n              v-if=\"\n                (is_multiple_medias ||\n                  (page_template === 'page_by_page' &&\n                    !single_media_displayed_at_full_ratio)) &&\n                media_with_linked.objectFit !== 'contain'\n              \"\n              @click=\"frameFit({ index, opt: { objectFit: 'contain' } })\"\n            >\n              <!-- v-if=\"media_with_linked.objectFit !== 'contain'\" -->\n              {{ $t(\"object_fit_contain\") }}\n            </button>\n            <button\n              type=\"button\"\n              class=\"u-buttonLink\"\n              v-if=\"is_multiple_medias\"\n              @click=\"removeMediaAtIndex(index)\"\n            >\n              {{ $t(\"remove\") }}\n            </button>\n          </div>\n        </div>\n        <div\n          class=\"_mediaPickerTile\"\n          v-if=\"\n            can_edit &&\n            (!number_of_max_medias ||\n              medias_with_linked.length < number_of_max_medias)\n          \"\n        >\n          <sl-icon-button\n            name=\"plus-circle-fill\"\n            class=\"u-colorBleuvert\"\n            :label=\"$t('add_media')\"\n            v-if=\"!show_media_picker\"\n            @click=\"show_media_picker = true\"\n          />\n          <MediaPicker\n            v-else\n            :publication_path=\"publication_path\"\n            @selectMedia=\"selectMedia\"\n            @close=\"show_media_picker = false\"\n          />\n\n          <transition name=\"dropzone\" :duration=\"150\">\n            <div\n              class=\"_dropzone\"\n              v-if=\"\n                show_dropzone &&\n                medias_with_linked.length < number_of_max_medias\n              \"\n            >\n              <DropZone @mediaDropped=\"selectMedia\" />\n            </div>\n          </transition>\n        </div>\n      </div>\n    </div>\n  </transition>\n</template>\n<script>\n// import { Splitpanes, Pane } from \"splitpanes\";\nimport MediaPicker from \"@/components/publications/MediaPicker.vue\";\n\nexport default {\n  props: {\n    publimodule: Object,\n    can_edit: Boolean,\n    context: {\n      type: String,\n      default: \"full\",\n    },\n    page_template: String,\n    number_of_max_medias: [Boolean, Number],\n  },\n  components: {\n    // Splitpanes,\n    // Pane,\n    MediaPicker,\n  },\n  data() {\n    return {\n      show_media_picker: false,\n      show_dropzone: false,\n    };\n  },\n  created() {},\n  mounted() {\n    this.$eventHub.$on(`mediadrag.start`, this.showDropzone);\n    this.$eventHub.$on(`mediadrag.end`, this.hideDropzone);\n  },\n  beforeDestroy() {\n    this.$eventHub.$off(`mediadrag.start`, this.showDropzone);\n    this.$eventHub.$off(`mediadrag.end`, this.hideDropzone);\n  },\n  watch: {},\n  computed: {\n    publication_path() {\n      return this.getParent(this.publimodule.$path);\n    },\n    single_media_displayed_at_full_ratio() {\n      if (this.medias_with_linked.length > 1) return false;\n\n      const ratio = this.medias_with_linked[0]._linked_media.$infos?.ratio;\n      return (\n        Math.round(ratio * 10) ===\n        Math.round((this.publimodule.height / this.publimodule.width) * 10)\n      );\n    },\n    medias_with_linked() {\n      if (!this.publimodule.source_medias) return [];\n      return this.publimodule.source_medias.map((source_media) => {\n        const _linked_media = this.getSourceMedia({\n          source_media,\n          publication_path: this.publication_path,\n        });\n\n        return Object.assign({}, source_media, { _linked_media });\n      });\n    },\n    is_multiple_medias() {\n      return this.medias_with_linked.length > 1;\n    },\n  },\n  methods: {\n    selectMedia({ path_to_source_media }) {\n      const source_medias = this.publimodule.source_medias.slice();\n      source_medias.push({ path: path_to_source_media });\n      this.$emit(\"updateMeta\", { source_medias });\n      this.show_media_picker = false;\n    },\n    removeMediaAtIndex(index) {\n      const source_medias = this.publimodule.source_medias.slice();\n      source_medias.splice(index, 1);\n\n      if (source_medias.length === 0) this.$emit(\"remove\");\n      else this.$emit(\"updateMeta\", { source_medias });\n    },\n    frameFit({ index, opt }) {\n      const source_medias = this.publimodule.source_medias.slice();\n      Object.assign(source_medias[index], opt);\n      this.$emit(\"updateMeta\", { source_medias });\n    },\n    itemStyle({ media_with_linked }) {\n      let props = {};\n      props[\"--object-fit\"] = media_with_linked.objectFit || \"cover\";\n      return props;\n    },\n    showDropzone() {\n      this.show_dropzone = true;\n    },\n    hideDropzone() {\n      this.show_dropzone = false;\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n._moduleMosaic {\n  --number_of_medias: 1;\n  position: relative;\n}\n\n._mediaGrid {\n  position: relative;\n  width: 100%;\n\n  ._moduleMosaic.is--multipleMedias & {\n    display: flex;\n    flex-flow: row nowrap;\n    gap: calc(var(--spacing) / 4);\n    transition: flex 0.25s cubic-bezier(0.19, 1, 0.22, 1);\n  }\n\n  > ._mediaGrid--item {\n    position: relative;\n\n    ._moduleMosaic.is--multipleMedias & {\n      aspect-ratio: 1/1;\n      overflow: hidden;\n      background: var(--c-gris_clair);\n      flex: 1 1 calc(100% / var(--number_of_medias));\n    }\n\n    transition: flex 0.25s cubic-bezier(0.19, 1, 0.22, 1);\n\n    ::v-deep ._mediaContent {\n      ._moduleMosaic.is--multipleMedias & {\n        width: 100%;\n        height: 100%;\n      }\n\n      ._mediaContent--image,\n      .plyr--video,\n      ._mediaContent--iframe {\n        ._moduleMosaic.is--multipleMedias & {\n          position: absolute;\n          height: 100%;\n          width: 100%;\n          object-fit: cover;\n          object-fit: var(--object-fit);\n        }\n      }\n    }\n  }\n}\n\n._mediaPickerTile {\n  position: absolute;\n  top: 0;\n  left: auto;\n  right: 0;\n  // background: var(--c-gris);\n  // height: 100%;\n  display: flex;\n  place-content: center;\n  height: 100%;\n  align-items: center;\n\n  pointer-events: none;\n\n  > * {\n    pointer-events: auto;\n  }\n}\n._btnRow {\n  position: absolute;\n  padding: calc(var(--spacing) / 2);\n  top: 0;\n  right: 0;\n  left: auto;\n  z-index: 100;\n\n  display: flex;\n  flex-flow: row wrap;\n  gap: calc(var(--spacing) / 2);\n\n  button {\n    // background: white;\n    border-radius: 4px;\n    color: white;\n    text-shadow: 0px 0px 4px rgb(0 0 0 / 80%);\n    // background: rgba(0, 0, 0, 0.2);\n  }\n}\n\n._dropzone {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n\n  ::v-deep ._dropNotice {\n    transform: rotate(-90deg);\n  }\n}\n\nsl-icon-button::part(base) {\n  font-size: 1.5em;\n  color: var(--c-bleuvert);\n}\n</style>\n","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37[0].rules[0].use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ModuleMosaic.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37[0].rules[0].use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ModuleMosaic.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ModuleMosaic.vue?vue&type=template&id=1c8913c0&scoped=true&\"\nimport script from \"./ModuleMosaic.vue?vue&type=script&lang=js&\"\nexport * from \"./ModuleMosaic.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ModuleMosaic.vue?vue&type=style&index=0&id=1c8913c0&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1c8913c0\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._v(\" ModuleCarousel \"),_vm._l((_vm.medias),function(media){return _c('div',{key:media.$path},[(media)?_c('MediaContent',{attrs:{\"file\":media,\"resolution\":1600,\"context\":'full'}}):_vm._e()],1)})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    ModuleCarousel\n    <div v-for=\"media in medias\" :key=\"media.$path\">\n      <MediaContent\n        v-if=\"media\"\n        :file=\"media\"\n        :resolution=\"1600\"\n        :context=\"'full'\"\n      />\n    </div>\n  </div>\n</template>\n<script>\nexport default {\n  props: {\n    publimodule: Object,\n    medias: Array,\n  },\n  components: {},\n  data() {\n    return {};\n  },\n  created() {},\n  mounted() {},\n  beforeDestroy() {},\n  watch: {},\n  computed: {},\n  methods: {},\n};\n</script>\n<style lang=\"scss\" scoped></style>\n","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37[0].rules[0].use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ModuleCarousel.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37[0].rules[0].use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ModuleCarousel.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ModuleCarousel.vue?vue&type=template&id=1491e03e&scoped=true&\"\nimport script from \"./ModuleCarousel.vue?vue&type=script&lang=js&\"\nexport * from \"./ModuleCarousel.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1491e03e\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div\n    class=\"_publicationModule\"\n    :class=\"{\n      'is--shape': is_shape,\n    }\"\n  >\n    <div\n      class=\"_sideOptions\"\n      v-if=\"can_edit && page_template !== 'page_by_page'\"\n    >\n      <span>\n        <button\n          v-if=\"\n            $listeners.hasOwnProperty('moveUp') &&\n            module_position !== 'first' &&\n            module_position !== 'alone'\n          \"\n          type=\"button\"\n          class=\"_sideBtns _moveBefore\"\n          @click=\"$emit('moveUp')\"\n        >\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 168 168\"\n            style=\"transform: rotate(90deg)\"\n          >\n            <path\n              d=\"M87.46,49.46,73.39,64.77a65.3,65.3,0,0,1-6.15,6.15A47.8,47.8,0,0,1,61,75.29H131.6V91.14H61A39.1,39.1,0,0,1,67,95.51q2.81,2.46,6.36,6.15L87.46,117,74.48,128,34.17,83.21,74.48,38.39Z\"\n              style=\"fill: currentColor\"\n            />\n          </svg>\n        </button>\n      </span>\n      <div class=\"_options\">\n        <button\n          type=\"button\"\n          class=\"_sideBtns\"\n          :class=\"{\n            'is--active': show_advanced_menu,\n          }\"\n          @click.stop=\"show_advanced_menu = !show_advanced_menu\"\n        >\n          <svg\n            version=\"1.1\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n            xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n            x=\"0px\"\n            y=\"0px\"\n            width=\"24\"\n            height=\"24\"\n            viewBox=\"0 0 48 48\"\n            xml:space=\"preserve\"\n            style=\"fill: currentColor\"\n          >\n            <!-- <circle cx=\"12\" cy=\"4\" r=\"2\" />\n            <circle cx=\"12\" cy=\"12\" r=\"2\" />\n            <circle cx=\"12\" cy=\"20\" r=\"2\" /> -->\n            <circle cx=\"12\" cy=\"24\" r=\"4\" />\n            <circle cx=\"24\" cy=\"24\" r=\"4\" />\n            <circle cx=\"36\" cy=\"24\" r=\"4\" />\n          </svg>\n        </button>\n        <div class=\"_advanced_menu\" v-if=\"show_advanced_menu\">\n          <sl-button variant=\"default\" size=\"small\" pill>\n            {{ $t(`module.label.${publimodule.module_type}`) }}\n          </sl-button>\n\n          <div class=\"_buttonRow\">\n            <button\n              type=\"button\"\n              class=\"u-button\"\n              :disabled=\"!publimodule.size || publimodule.size === 100\"\n              @click=\"updateMeta({ size: 100 })\"\n            >\n              100%\n            </button>\n            <button\n              type=\"button\"\n              class=\"u-button\"\n              :disabled=\"publimodule.size === 66.6\"\n              @click=\"updateMeta({ size: 66.6 })\"\n            >\n              66%\n            </button>\n            <button\n              type=\"button\"\n              class=\"u-button\"\n              :disabled=\"publimodule.size === 50\"\n              @click=\"updateMeta({ size: 50 })\"\n            >\n              50%\n            </button>\n            <button\n              type=\"button\"\n              class=\"u-button\"\n              :disabled=\"publimodule.size === 33.3\"\n              @click=\"updateMeta({ size: 33.3 })\"\n            >\n              33%\n            </button>\n          </div>\n\n          <div class=\"_buttonRow\">\n            <button\n              type=\"button\"\n              class=\"u-button\"\n              :disabled=\"!publimodule.align || publimodule.align === 'left'\"\n              @click=\"updateMeta({ align: 'left' })\"\n            >\n              <sl-icon name=\"align-start\" />\n            </button>\n            <button\n              type=\"button\"\n              class=\"u-button\"\n              :disabled=\"publimodule.align === 'center'\"\n              @click=\"updateMeta({ align: 'center' })\"\n            >\n              <sl-icon name=\"align-center\" />\n            </button>\n            <button\n              type=\"button\"\n              class=\"u-button\"\n              :disabled=\"publimodule.align === 'right'\"\n              @click=\"updateMeta({ align: 'right' })\"\n            >\n              <sl-icon name=\"align-end\" />\n            </button>\n          </div>\n\n          <div class=\"_buttonRow\">\n            <button type=\"button\" class=\"u-button\" @click=\"duplicateModule\">\n              {{ $t(\"duplicate\") }}\n            </button>\n            <button type=\"button\" class=\"u-button\" @click=\"removeModule\">\n              {{ $t(\"remove\") }}\n            </button>\n          </div>\n        </div>\n      </div>\n      <span>\n        <button\n          v-if=\"\n            $listeners.hasOwnProperty('moveDown') &&\n            module_position !== 'last' &&\n            module_position !== 'alone'\n          \"\n          type=\"button\"\n          class=\"_sideBtns _moveAfter\"\n          @click=\"$emit('moveDown')\"\n        >\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 168 168\"\n            style=\"transform: rotate(90deg)\"\n          >\n            <path\n              d=\"M78.31,117l14.07-15.31a65.3,65.3,0,0,1,6.15-6.15,47.52,47.52,0,0,1,6.29-4.37H34.17V75.29h70.65a39.1,39.1,0,0,1-6.08-4.37q-2.8-2.46-6.36-6.15L78.31,49.46l13-11.07L131.6,83.21,91.29,128Z\"\n              style=\"fill: currentColor\"\n            />\n          </svg>\n        </button>\n      </span>\n    </div>\n\n    <div class=\"_content\" :style=\"media_styles\">\n      <ModuleMosaic\n        v-if=\"publimodule.module_type === 'mosaic'\"\n        :publimodule=\"publimodule\"\n        :can_edit=\"can_edit\"\n        :context=\"context\"\n        :page_template=\"page_template\"\n        :number_of_max_medias=\"number_of_max_medias\"\n        @updateMeta=\"updateMeta\"\n        @remove=\"removeModule\"\n      />\n      <ModuleCarousel\n        v-else-if=\"publimodule.module_type === 'carousel'\"\n        :publimodule=\"publimodule\"\n        :context=\"context\"\n        :can_edit=\"can_edit\"\n      />\n      <CollaborativeEditor2\n        v-else-if=\"publimodule.module_type === 'text' && first_media\"\n        ref=\"textBloc\"\n        :path=\"first_media.$path\"\n        :content=\"first_media.$content\"\n        :scrollingContainer=\"$el\"\n        :line_selected=\"false\"\n        :can_edit=\"can_edit\"\n        @lineClicked=\"$emit('lineClicked', $event)\"\n        @contentIsEdited=\"$emit('contentIsEdited', $event)\"\n        @contentIsNotEdited=\"$emit('contentIsNotEdited', $event)\"\n      />\n      <template v-else-if=\"is_shape\">\n        <!-- :width=\"`${mediaSize.width}mm`\"\n          :height=\"`${mediaSize.height}mm`\" -->\n        <svg\n          viewBox=\"0 0 100 100\"\n          preserveAspectRatio=\"none\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n        >\n          <circle\n            v-if=\"publimodule.module_type === 'ellipsis'\"\n            cx=\"50\"\n            cy=\"50\"\n            :r=\"50 - (publimodule.outline_width * magnification) / 8\"\n            vector-effect=\"non-scaling-stroke\"\n          />\n          <rect\n            v-else-if=\"publimodule.module_type === 'rectangle'\"\n            :x=\"(publimodule.outline_width * magnification) / 4\"\n            :y=\"(publimodule.outline_width * magnification) / 4\"\n            :width=\"100 - (publimodule.outline_width * magnification) / 2\"\n            :height=\"100 - (publimodule.outline_width * magnification) / 2\"\n            vector-effect=\"non-scaling-stroke\"\n            :rx=\"borderRadius / 2 || 0\"\n            :ry=\"borderRadius / 2 || 0\"\n          />\n          <g v-else-if=\"publimodule.module_type === 'line'\">\n            <rect\n              width=\"100\"\n              height=\"100\"\n              vector-effect=\"non-scaling-stroke\"\n              stroke=\"none\"\n              :rx=\"borderRadius / 2 || 0\"\n              :ry=\"borderRadius / 2 || 0\"\n            />\n            <line\n              :x1=\"(publimodule.outline_width * magnification) / 4 || 0\"\n              y1=\"50\"\n              :x2=\"100 - ((publimodule.outline_width * magnification) / 4 || 0)\"\n              y2=\"50\"\n              vector-effect=\"non-scaling-stroke\"\n            />\n          </g>\n          <g v-else-if=\"publimodule.module_type === 'arrow'\">\n            <rect\n              width=\"100\"\n              height=\"100\"\n              vector-effect=\"non-scaling-stroke\"\n              stroke=\"none\"\n              :rx=\"borderRadius / 2 || 0\"\n              :ry=\"borderRadius / 2 || 0\"\n            />\n            <line\n              :x1=\"(publimodule.outline_width * magnification) / 4 || 0\"\n              y1=\"50\"\n              :x2=\"100 - ((publimodule.outline_width * magnification) / 4 || 0)\"\n              y2=\"50\"\n              vector-effect=\"non-scaling-stroke\"\n            />\n\n            <g\n              :transform=\"`\n                translate(${\n                  100 - ((publimodule.outline_width * magnification) / 4 || 0)\n                }, 50)`\"\n              preserveAspectRatio\n            >\n              <line\n                x1=\"0\"\n                y1=\"0\"\n                x2=\"-10\"\n                y2=\"-10\"\n                vector-effect=\"non-scaling-stroke\"\n              />\n\n              <line\n                x1=\"0\"\n                y1=\"0\"\n                x2=\"-10\"\n                y2=\"10\"\n                vector-effect=\"non-scaling-stroke\"\n              />\n            </g>\n          </g>\n        </svg>\n      </template>\n      <template v-else-if=\"publimodule.module_type === 'free_drawing'\">\n        <!-- <MediaFreeDrawing\n          :inline_edit_mode=\"inline_edit_mode\"\n          :slugPubliName=\"slugPubliName\"\n          :media=\"media\"\n          :mediaSize=\"mediaSize\"\n        /> -->\n      </template>\n\n      <small v-else>{{ $t(\"nothing_to_show\") }}</small>\n    </div>\n  </div>\n</template>\n<script>\nimport ModuleMosaic from \"@/components/publications/modules/ModuleMosaic.vue\";\nimport ModuleCarousel from \"@/components/publications/modules/ModuleCarousel.vue\";\n\n// a module is a block for a publication, listed in publication.modules_list\n\nexport default {\n  props: {\n    publimodule: Object,\n    module_position: String,\n    can_edit: Boolean,\n    magnification: Number,\n    borderRadius: Number,\n    context: String,\n    page_template: String,\n    number_of_max_medias: {\n      type: [Boolean, Number],\n      default: false,\n    },\n  },\n  components: {\n    ModuleMosaic,\n\n    ModuleCarousel,\n  },\n  data() {\n    return {\n      show_advanced_menu: false,\n    };\n  },\n  created() {},\n  mounted() {\n    this.$eventHub.$on(\n      `module.enable_edit.${this.module_meta_filename}`,\n      this.enableEditForText\n    );\n    this.$eventHub.$on(\n      `module.duplicate.${this.module_meta_filename}`,\n      this.duplicateModule\n    );\n    this.$eventHub.$on(\n      `module.remove.${this.module_meta_filename}`,\n      this.removeModule\n    );\n  },\n  beforeDestroy() {\n    this.$eventHub.$off(\n      `module.enable_edit.${this.module_meta_filename}`,\n      this.enableEditForText\n    );\n    this.$eventHub.$off(\n      `module.duplicate.${this.module_meta_filename}`,\n      this.duplicateModule\n    );\n    this.$eventHub.$off(\n      `module.remove.${this.module_meta_filename}`,\n      this.removeModule\n    );\n  },\n  watch: {},\n  computed: {\n    module_meta_filename() {\n      return this.publimodule.$path.split(\"/\").at(-1);\n    },\n    is_shape() {\n      return [\"ellipsis\", \"rectangle\", \"line\", \"arrow\"].includes(\n        this.publimodule.module_type\n      );\n    },\n    first_media() {\n      if (\n        !this.publimodule.source_medias ||\n        this.publimodule.source_medias.length === 0\n      )\n        return false;\n      const source_media = this.publimodule.source_medias[0];\n      if (source_media) {\n        const publication_path = this.getParent(this.publimodule.$path);\n        return this.getSourceMedia({ source_media, publication_path });\n      }\n      return false;\n    },\n    media_styles() {\n      let margin_left = 0;\n      if (this.publimodule.align === \"center\")\n        if (this.publimodule.size === 66.6) margin_left = 16.6;\n        else if (this.publimodule.size === 50) margin_left = 25;\n        else if (this.publimodule.size === 33.3) margin_left = 33.3;\n      if (this.publimodule.align === \"right\")\n        if (this.publimodule.size === 66.6) margin_left = 33.3;\n        else if (this.publimodule.size === 50) margin_left = 50;\n        else if (this.publimodule.size === 33.3) margin_left = 66.6;\n      return {\n        \"--module-width\": this.publimodule.size || 100,\n        \"--module-margin-left\": margin_left,\n      };\n    },\n  },\n  methods: {\n    async updateMeta(new_meta) {\n      await this.$api\n        .updateMeta({\n          path: this.publimodule.$path,\n          new_meta,\n        })\n        .catch((err) => {\n          this.$alertify.delay(4000).error(err);\n          throw err;\n        });\n    },\n    enableEditForText() {\n      // this.$el.scrollIntoView({\n      //   behavior: \"smooth\",\n      //   block: \"center\",\n      //   inline: \"nearest\",\n      // });\n      this.$nextTick(() => {\n        if (this.$refs.textBloc) this.$refs.textBloc.enableEditor();\n      });\n    },\n    async duplicateModule() {\n      let addtl_meta_to_module = {};\n      if (this.page_template === \"page_by_page\") {\n        addtl_meta_to_module.x = (this.publimodule.x || 0) + 10;\n        addtl_meta_to_module.y = (this.publimodule.y || 0) + 10;\n      }\n\n      const meta_filename = await this.duplicateModuleWithSourceMedias({\n        og_module: this.publimodule,\n        addtl_meta_to_module,\n      });\n      this.$emit(\"duplicate\", meta_filename);\n    },\n    async removeModule() {\n      // todo  remove source medias that are part publications\n      // todo also empty sharedb path, since $path can be retaken\n      //       try {\n      //   for (let sm of file.source_medias) {\n      //     if (sm.path.includes(\"/publications/\")) {\n      //       // this media is specific to publications, lets remove it\n      //       await this.$api.deleteItem({\n      //         path: sm.path,\n      //       });\n      //     }\n      //   }\n      // } catch (err) {\n      //   this.$alertify.delay(4000).error(err);\n      //   throw err;\n      // }\n\n      await this.$api\n        .deleteItem({\n          path: this.publimodule.$path,\n        })\n        .catch((err) => {\n          this.$alertify.delay(4000).error(err);\n          throw err;\n        });\n\n      this.$emit(\"remove\");\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n._publicationModule {\n  position: relative;\n  padding: 0 calc(var(--spacing) * 1);\n\n  &.is--shape {\n    ._content,\n    svg {\n      overflow: visible;\n      stroke-linejoin: arcs;\n      stroke-linecap: round;\n    }\n    svg {\n      width: 100%;\n      height: 100%;\n    }\n  }\n  ._content {\n    width: calc(var(--module-width) * 1%);\n    margin-left: calc(var(--module-margin-left) * 1%);\n    transition: all 0.4s cubic-bezier(0.19, 1, 0.22, 1);\n  }\n}\n\n._sideOptions {\n  position: absolute;\n  top: 0;\n  height: 100%;\n  right: 100%;\n  // background: rgba(0, 0, 0, 0.05);\n  background: var(--active-color);\n\n  pointer-events: none;\n\n  // z-index: 100;\n\n  display: flex;\n  flex-flow: column nowrap;\n  justify-content: space-between;\n\n  --side-width: 24px;\n  width: var(--side-width);\n  border-radius: calc(var(--side-width) / 2);\n\n  &.is--pageByPage {\n    display: none;\n    // position: absolute;\n    // right: 0;\n    // background: transparent;\n    // top: 0;\n    // height: auto;\n\n    // margin: calc(var(--spacing) / 2);\n\n    // z-index: 10;\n\n    // ._sideBtns {\n    //   background: white;\n    // }\n  }\n\n  > * {\n    pointer-events: auto;\n  }\n}\n\n._sideBtns {\n  display: block;\n  width: var(--side-width);\n  height: var(--side-width);\n  padding: 0;\n  border-radius: calc(var(--side-width) / 2);\n  background: transparent;\n\n  &:hover,\n  &:focus {\n    background: rgba(0, 0, 0, 0.1);\n  }\n}\n\n._advanced_menu {\n  position: absolute;\n  z-index: 10;\n  left: 100%;\n  top: 50%;\n  transform: translate(0, -50%);\n\n  background: white;\n  background: var(--active-color);\n  padding: calc(var(--spacing) / 2);\n\n  display: flex;\n  flex-flow: column nowrap;\n  gap: calc(var(--spacing) / 4);\n\n  // border: 2px solid var(--c-gris);\n}\n\n._menu {\n  width: 100%;\n\n  padding: calc(var(--spacing) / 2);\n\n  display: flex;\n  justify-content: flex-end;\n  gap: calc(var(--spacing) / 4);\n\n  &.is--overlaid {\n    position: absolute;\n    top: 0;\n    right: 0;\n    z-index: 10;\n  }\n}\n\n._options {\n  position: relative;\n}\n\n._buttonRow {\n  display: flex;\n  // padding: calc(var(--spacing) / 4);\n  gap: calc(var(--spacing) / 4);\n}\n</style>\n","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37[0].rules[0].use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PublicationModule.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37[0].rules[0].use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PublicationModule.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PublicationModule.vue?vue&type=template&id=2ca1ef5c&scoped=true&\"\nimport script from \"./PublicationModule.vue?vue&type=script&lang=js&\"\nexport * from \"./PublicationModule.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PublicationModule.vue?vue&type=style&index=0&id=2ca1ef5c&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2ca1ef5c\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"_singlePage\",class:{\n    'is--preview': _vm.context === 'preview',\n    'is--editable': _vm.can_edit,\n  }},[_c('div',{staticClass:\"_pagecontainer\",style:(_vm.page_styles)},[_c('div',{staticClass:\"_pagecontent\"},[(_vm.can_edit && _vm.show_grid)?_c('svg',{staticClass:\"_grid\",attrs:{\"width\":\"100%\",\"height\":\"100%\",\"xmlns\":\"http://www.w3.org/2000/svg\"}},[_c('defs',[_c('pattern',{attrs:{\"id\":\"gridSmall\",\"width\":_vm.gridstep,\"height\":_vm.gridstep,\"patternUnits\":\"userSpaceOnUse\"}},[_c('path',{attrs:{\"d\":(\"M \" + _vm.gridstep + \" 0 L 0 0 0 \" + _vm.gridstep),\"fill\":\"none\",\"stroke\":\"var(--c-gridlines)\",\"strokeWidth\":\"1\"}})]),_c('pattern',{attrs:{\"id\":\"grid\",\"width\":_vm.gridstep * 5,\"height\":_vm.gridstep * 5,\"patternUnits\":\"userSpaceOnUse\"}},[_c('rect',{attrs:{\"width\":_vm.gridstep * 5,\"height\":_vm.gridstep * 5,\"fill\":\"url(#gridSmall)\"}}),_c('path',{attrs:{\"d\":(\"M \" + (_vm.gridstep * 5) + \" 0 L 0 0 0 \" + (_vm.gridstep * 5)),\"fill\":\"none\",\"stroke\":\"var(--c-gridfiveslines)\",\"strokeWidth\":\"1\"}})])]),_c('rect',{attrs:{\"width\":\"100%\",\"height\":\"100%\",\"fill\":\"url(#grid)\"}})]):_vm._e(),_vm._l((_vm.page_modules),function(publimodule){return _c('MoveableItem',{key:publimodule.$path,staticClass:\"_item\",attrs:{\"context\":_vm.context,\"publimodule\":publimodule,\"magnification\":_vm.magnification,\"gridstep\":_vm.show_grid && _vm.snap_to_grid ? _vm.gridstep : 1,\"scale\":_vm.scale,\"can_edit\":_vm.can_edit,\"is_active\":_vm.active_module.$path === publimodule.$path}})}),(_vm.can_edit && _vm.l_margins)?_c('svg',{staticClass:\"_margins\",attrs:{\"width\":\"100%\",\"height\":\"100%\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"fill\":\"transparent\"}},[_c('rect',{attrs:{\"x\":_vm.magnify(_vm.l_margins.left),\"y\":_vm.magnify(_vm.l_margins.top),\"width\":_vm.magnify(_vm.page_width - _vm.l_margins.left - _vm.l_margins.right),\"height\":_vm.magnify(_vm.page_height - _vm.l_margins.top - _vm.l_margins.bottom)}})]):_vm._e(),(_vm.pagination && !_vm.hide_pagination && _vm.page_number_corrected > 0)?_c('div',{staticClass:\"_pagination\",style:(_vm.pagination_styles)},[_vm._v(\" \"+_vm._s(_vm.page_number_corrected)+\" \")]):_vm._e(),(_vm.can_edit && _vm.l_margins)?_c('svg',{staticClass:\"_pageBorders\",attrs:{\"width\":\"100%\",\"height\":\"100%\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"fill\":\"transparent\"}},[_c('rect',{attrs:{\"x\":\"0\",\"y\":\"0\",\"width\":_vm.magnify(_vm.page_width),\"height\":_vm.magnify(_vm.page_height),\"stroke\":\"black\"}})]):_vm._e()],2)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('DDR',{key:_vm.component_key,staticClass:\"_moveableItem\",class:{\n    'is--locked': _vm.publimodule.locked === true,\n    'is--editable': _vm.can_edit,\n    'is--active': _vm.can_edit && _vm.is_active,\n    'is--beingEdited': _vm.content_is_edited,\n    'panzoom-exclude': _vm.can_edit,\n  },style:(_vm.module_z_index),attrs:{\"active\":_vm.can_edit &&\n    _vm.is_active &&\n    _vm.publimodule.locked !== true &&\n    _vm.content_is_edited !== true,\"value\":_vm.transform,\"parent\":false /* bind to container */,\"acceptRatio\":_vm.aspect_ratio,\"handlerSize\":15,\"grid\":_vm.grid,\"id\":_vm.publimodule.$path,\"zoom\":_vm.scale},on:{\"dragstart\":_vm.dragStart,\"drag\":_vm.onDrag,\"dragend\":_vm.dragEnd,\"resizestart\":_vm.resizeStart,\"resizeend\":_vm.resizeEnd,\"rotateend\":_vm.rotateEnd}},[_c('span',{staticClass:\"_activator\",on:{\"mousedown\":_vm.setActive,\"dblclick\":_vm.dblClick}},[_c('PublicationModule',{staticClass:\"_moveableItem--content\",style:(_vm.module_styles),attrs:{\"publimodule\":_vm.publimodule,\"can_edit\":_vm.can_edit && _vm.is_active,\"borderRadius\":_vm.turnCMtoPX(_vm.publimodule.border_radius) || 0,\"context\":_vm.context,\"page_template\":'page_by_page',\"number_of_max_medias\":1,\"magnification\":_vm.magnification},on:{\"duplicate\":_vm.onDuplicateModule,\"contentIsEdited\":_vm.contentIsEdited,\"contentIsNotEdited\":_vm.contentIsNotEdited}})],1),(_vm.can_edit)?_c('div',{staticClass:\"_unlockBtn\"},[(_vm.publimodule.locked === true)?_c('button',{staticClass:\"u-button u-button_orange u-button_small u-button_round u-colorBlack\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.unlock()}}},[_c('sl-icon',{attrs:{\"name\":\"lock\"}})],1):_vm._e(),(\n        _vm.can_edit &&\n        _vm.is_active &&\n        !_vm.content_is_edited &&\n        (!_vm.publimodule.locked || _vm.publimodule.locked === false)\n      )?_c('button',{staticClass:\"u-button u-button_orange u-button_small u-button_round u-colorBlack\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.lock()}}},[_c('sl-icon',{attrs:{\"name\":\"unlock\"}})],1):_vm._e()]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/* eslint-disable */\nclass Vector {\n  constructor(lst) {\n    this._values = lst;\n  }\n\n  toString() {\n    return `Vector(${this._values.join(\", \")})`;\n  }\n\n  get length() {\n    return this._values.length;\n  }\n\n  dot(vector) {\n    if (vector instanceof Vector && this.length === vector.length) {\n      return this._values\n        .map((item, index) => item * vector._values[index])\n        .reduce((a, b) => a + b);\n    }\n    throw Error(\"The param `vector` must instance of Vector\");\n  }\n\n  get(index) {\n    return this._values[index];\n  }\n}\n\nexport default Vector;\n","/* eslint-disable */\nimport Vector from \"./Vector\";\n\nclass Matrix {\n  constructor(values) {\n    this._values = values;\n  }\n\n  static zeros(shape) {\n    return new Matrix(\n      new Array(shape[0]).fill(null).map(() => new Array(shape[1]).fill(0))\n    );\n  }\n\n  valueOf() {\n    return JSON.parse(JSON.stringify(this._values));\n  }\n\n  toString() {\n    return (\n      \"Matrix ( \" + this._values.map((item) => item.join(\" \")).join(\", \") + \" )\"\n    );\n  }\n\n  rows() {\n    return this._values.length;\n  }\n\n  cols() {\n    return this._values[0].length;\n  }\n\n  rowVector(row) {\n    return new Vector(this._values[row].slice(0));\n  }\n\n  colVector(col) {\n    let v = new Array(this.rows()).fill(0);\n    this._values.forEach((item, index) => {\n      v[index] = item[col];\n    });\n    return new Vector(v);\n  }\n\n  dot(v) {\n    if (v instanceof Vector && this.cols() === v.length) {\n      return new Vector(\n        new Array(v.length).fill(null).map((item, index) => {\n          return this.rowVector(index).dot(v);\n        })\n      );\n    }\n    if (v instanceof Matrix && this.cols() === v.rows()) {\n      let cols = v.cols(),\n        rows = v.rows();\n      let newMatrix = Matrix.zeros([rows, cols]);\n      let v1;\n      for (let i = 0; i < cols; i++) {\n        v1 = this.dot(v.colVector(i));\n        for (let j = 0; j < rows; j++) {\n          newMatrix._values[j][i] = v1.get(j);\n        }\n      }\n      return newMatrix;\n    }\n    throw Error(\"expected a Vector or Matrix but got \" + typeof v);\n  }\n\n  get(row, col) {\n    return this._values[row][col];\n  }\n\n  T() {\n    return new Matrix(\n      new Array(this.cols()).fill(null).map((_, colIndex) => {\n        return new Array(this.rows()).fill(0).map((_, rowIndex) => {\n          return this.get(rowIndex, colIndex);\n        });\n      })\n    );\n  }\n}\n\nexport default Matrix;\n","/* eslint-disable */\nimport Matrix from \"./Matrix\";\n\n// 缩放时基于对角坐标固定缩放\n// 矩形除了4个直角坐标点外，还有每条边的一个中心点坐标，按照数组的顺序从左上顺时针到左中排列\n// 例如：拖拽点为右中，对应的固定点为左中。拖拽点为左上，对应的固定点为右下\nexport const pointMap = {\n  br: 0,\n  bm: 1,\n  bl: 2,\n  l: 3,\n  tl: 4,\n  tm: 5,\n  tr: 6,\n  r: 7,\n};\n\nexport const handlerPointMap = {\n  tl: 0,\n  tm: 1,\n  tr: 2,\n  r: 3,\n  br: 4,\n  bm: 5,\n  bl: 6,\n  l: 7,\n};\n// 计算矩形大小时使用四个直角坐标\nexport const pointMap2 = {\n  br: 0,\n  bm: 0,\n  bl: 2,\n  l: 2,\n  tl: 4,\n  tm: 4,\n  tr: 6,\n  r: 6,\n};\n\nexport const widthMap = {\n  l: 1,\n  r: 1,\n};\nexport const heightMap = {\n  tm: 1,\n  bm: 1,\n};\nexport const tr2bl = {\n  tr: 1,\n  bl: 1,\n  r: 1,\n  l: 1,\n};\n\nexport function deg2rad(deg) {\n  return (deg * Math.PI) / 180;\n}\n\nexport function rad2deg(rad) {\n  return (rad * 180) / Math.PI;\n}\n\n// 获取矩形旋转后在平面上的8个坐标点，从左上角顺时针放到数组里返回\nexport function getPoints({ x, y, width, height, rotation }, zoom) {\n  let a = (rotation * Math.PI) / 180;\n  let wc = (width / 2) * zoom;\n  let hc = (height / 2) * zoom;\n  // 标准的矩阵点乘公式，返回旋转后的坐标\n  let deg = new Matrix([\n    [Math.cos(a), Math.sin(a)],\n    [-Math.sin(a), Math.cos(a)],\n  ]);\n  let rect = new Matrix([\n    [-wc, hc],\n    [0, hc],\n    [wc, hc],\n    [wc, 0],\n    [wc, -hc],\n    [0, -hc],\n    [-wc, -hc],\n    [-wc, 0],\n  ]);\n  return deg\n    .dot(rect.T())\n    .T()\n    .valueOf()\n    .map((item) => {\n      return { x: item[0] + wc + x * zoom, y: -(item[1] - hc) + y * zoom };\n    });\n}\nexport function getBoundingRect(transform) {\n  if (transform.rotation === 0) {\n    return {\n      left: transform.x,\n      top: transform.y,\n      right: transform.x + transform.width,\n      bottom: transform.y + transform.height,\n      width: transform.width,\n      height: transform.height,\n    };\n  }\n  let points = getPoints(transform);\n  let xarray = [],\n    yarray = [];\n  points.forEach((element) => {\n    xarray.push(element.x);\n    yarray.push(element.y);\n  });\n  xarray = xarray.sort((a, b) => a - b);\n  yarray = yarray.sort((a, b) => a - b);\n  let left = xarray[0],\n    right = xarray[xarray.length - 1];\n  let top = yarray[0],\n    bottom = yarray[yarray.length - 1];\n  return {\n    left,\n    right,\n    top,\n    bottom,\n    width: right - left,\n    height: bottom - top,\n  };\n}\n\n// 计算当前矩形的宽高\nexport function getSize({ type, x, y, dis, pressAngle, startAngle }) {\n  let w, h;\n  let currentAngle = rad2deg(Math.atan2(y, x));\n  let rad = deg2rad(pressAngle + currentAngle - startAngle);\n  if (tr2bl[type]) {\n    h = Math.cos(rad) * dis;\n    w = Math.sin(rad) * dis;\n  } else {\n    h = Math.sin(rad) * dis;\n    w = Math.cos(rad) * dis;\n  }\n  return { w, h };\n}\n\nconst cursorMap = [\"nw\", \"n\", \"ne\", \"e\", \"se\", \"s\", \"sw\", \"w\"];\nconst handlerMap = { tl: 0, tm: 1, tr: 2, r: 3, br: 4, bm: 5, bl: 6, l: 7 };\n\nexport function getHandler(type, rotation) {\n  let originIndex = handlerMap[type];\n  let currentIndex = (originIndex + Math.floor(rotation / 45)) % 8;\n  return cursorMap[currentIndex];\n}\n","<script>\n/* eslint-disable */\nimport {\n  getHandler,\n  getPoints,\n  getSize,\n  handlerPointMap,\n  heightMap,\n  pointMap,\n  pointMap2,\n  rad2deg,\n  tr2bl,\n  widthMap,\n} from \"./helper\";\n\nexport default {\n  name: \"ddr\",\n  props: {\n    value: {\n      default: function () {\n        return { x: 0, y: 0, width: 100, height: 100, rotation: 0 };\n      },\n      type: Object,\n    },\n    handlerSize: {\n      type: Number,\n      default: 11,\n    },\n    active: {\n      default: true,\n      type: Boolean,\n    },\n    resizeHandler: {\n      default: function () {\n        return [\"tl\", \"tm\", \"tr\", \"r\", \"br\", \"bm\", \"bl\", \"l\"];\n      },\n      type: Array,\n    },\n    resizable: {\n      default: true,\n      type: Boolean,\n    },\n    rotatable: {\n      default: true,\n      type: Boolean,\n    },\n    draggable: {\n      default: true,\n      type: Boolean,\n    },\n    acceptRatio: {\n      default: false,\n      type: Boolean,\n    },\n    minWidth: {\n      type: Number,\n      default: 1,\n    },\n    minHeight: {\n      type: Number,\n      default: 1,\n    },\n    maxWidth: {\n      type: Number,\n      default: 100000000,\n    },\n    maxHeight: {\n      type: Number,\n      default: 100000000,\n    },\n    parent: {\n      type: Boolean,\n      default: false,\n    },\n    beforeActive: {\n      type: Function,\n      default: () => false,\n    },\n    id: [Number, String],\n    renderContent: Function,\n    grid: {\n      type: Array,\n      default: () => [1, 1],\n    },\n    stop: {\n      default: true,\n      type: Boolean,\n    },\n    prevent: {\n      default: true,\n      type: Boolean,\n    },\n    zoom: {\n      default: 1,\n      type: Number,\n    },\n    axis: {\n      type: String,\n      default: \"xy\", // x | y 不填写则都可以移动，仅移动时生效\n    },\n  },\n  data() {\n    return {\n      transform: Object.assign({}, this.value),\n      currentRatio: 1,\n      isInitialRatio: false,\n      isDragging: false,\n      isResizing: false,\n      isRotating: false,\n      isReadyToDrag: false,\n      isReadyToResize: false,\n      isReadyToRotate: false,\n    };\n  },\n  created() {\n    // 缓存当前位置信息\n    this.localeTransform = { ...this.transform };\n  },\n  watch: {\n    value(t) {\n      this.transform = { ...t };\n    },\n  },\n\n  computed: {\n    rotateHandler() {\n      let size = Math.ceil(this.handlerSize / this.zoom) + \"px\";\n      return `width:${size};height:${size};top:-25px;margin-left:${-Math.floor(\n        this.handlerSize / 2\n      )}px`;\n    },\n    style() {\n      let transform = this.transform;\n      return `left:${transform.x}px;top:${transform.y}px;width:${transform.width}px;height:${transform.height}px;transform:rotate(${transform.rotation}deg)`;\n    },\n  },\n  methods: {\n    handleDefaultEvent(e) {\n      if (this.stop) {\n        e.stopPropagation();\n      }\n      if (this.prevent) {\n        e.preventDefault();\n      }\n    },\n    getNewHandler(type) {\n      let cursor = getHandler(type, this.transform.rotation);\n      let { handlerSize } = this;\n      let props = {};\n      let half = -Math.floor(handlerSize / 2) + \"px\";\n      switch (type) {\n        case \"tl\":\n          props = {\n            top: half,\n            left: half,\n          };\n          break;\n        case \"tm\":\n          props = { top: half, \"margin-left\": half };\n          break;\n        case \"tr\":\n          props = { right: half, top: half };\n          break;\n        case \"r\":\n          props = { right: half, \"margin-top\": half };\n          break;\n        case \"br\":\n          props = { bottom: half, right: half };\n          break;\n        case \"bm\":\n          props = { \"margin-left\": half, bottom: half };\n          break;\n        case \"bl\":\n          props = { left: half, bottom: half };\n          break;\n        case \"l\":\n          props = { \"margin-top\": half, left: half };\n          break;\n      }\n      let result = {\n        cursor: cursor + \"-resize\",\n        width: Math.ceil(handlerSize / this.zoom) + \"px\",\n        height: Math.ceil(handlerSize / this.zoom) + \"px\",\n        ...props,\n      };\n      return Object.keys(result)\n        .map((item) => `${item}:${result[item]}`)\n        .join(\";\");\n    },\n    emitChange() {\n      this.$emit(\"input\", { ...this.transform });\n    },\n    handleMouseDown(event) {\n      if (!this.active && !this.beforeActive(this.id)) return;\n      this.handleDefaultEvent(event);\n      let point = event.touches ? event.touches[0] : event;\n      let { clientX, clientY } = point;\n      this._lastX = clientX;\n      this._lastY = clientY;\n      this._activeTarget = event.target;\n      this._parentRect = this.$refs.wrapper.parentNode.getBoundingClientRect();\n      this._resizeHandler = event.target.dataset.resizetype;\n      this.localeTransform = { ...this.transform };\n      // 如果设置了限制在父元素的边界内移\n      // 计算组件的边界，在移动时进行判断并修正\n      if (this.parent) {\n        let minLeft = 0;\n        let maxLeft = this._parentRect.width / this.zoom - this.transform.width;\n        let minTop = 0;\n        let maxTop =\n          this._parentRect.height / this.zoom - this.transform.height;\n        let maxLeftWidth = this.transform.x + this.transform.width;\n        let maxRightWidth =\n          this._parentRect.width / this.zoom - this.transform.x;\n        let maxTopHeight = this.transform.y + this.transform.height;\n        let maxBottomHeight =\n          this._parentRect.height / this.zoom - this.transform.y;\n        this.bounday = {\n          minLeft,\n          maxLeft,\n          minTop,\n          maxTop,\n          maxLeftWidth,\n          maxRightWidth,\n          maxTopHeight,\n          maxBottomHeight,\n        };\n      }\n      // 添加事件，该事件会在up时移除\n      document.addEventListener(\"mousemove\", this.handleMouseMove, false);\n      document.addEventListener(\"touchmove\", this.handleMouseMove, false);\n      document.addEventListener(\"touchend\", this.handleMouseUp, false);\n      document.addEventListener(\"mouseup\", this.handleMouseUp, false);\n      if (event.target.dataset.type === \"rotate\") {\n        this._handlerType = \"rotate\";\n        this.isReadyToRotate = true;\n        this.handleRotateStart(event);\n        this.$emit(\"rotatestart\", event, this.transform);\n      } else if (this._activeTarget.dataset.resizetype) {\n        this._handlerType = \"resize\";\n        this.isReadyToResize = true;\n        this.handleResizeStart(event);\n        this.$emit(\"resizestart\", event, this.transform);\n      } else {\n        this._handlerType = \"drag\";\n        this.isReadyToDrag = true;\n        this.draggable && this.$emit(\"dragstart\", event, this.transform);\n      }\n    },\n    handleMouseMove(event) {\n      this.handleDefaultEvent(event);\n      let { clientX, clientY } = event.touches ? event.touches[0] : event;\n      this.isReadyToDrag = false;\n      this.isReadyToResize = false;\n      this.isReadyToRotate = false;\n      this._deltaX = clientX - this._lastX;\n      this._deltaY = clientY - this._lastY;\n      this._lastX = clientX;\n      this._lastY = clientY;\n      if (this._handlerType === \"resize\") {\n        this.isResizing = true;\n        this.handleResizeMove(event);\n        this.$emit(\"resize\", event, this.transform);\n      } else if (this._handlerType === \"drag\" && this.draggable) {\n        this.isDragging = true;\n        this.doMove(event);\n        this.$emit(\"drag\", event, this.transform);\n      } else if (this._handlerType === \"rotate\") {\n        this.isRotating = true;\n        this.handleRotateMove(event);\n        this.$emit(\"rotate\", event, this.transform);\n      }\n      this.emitChange();\n    },\n\n    doMove() {\n      let [gridX, gridY] = this.grid;\n      let deltaX = this._deltaX / this.zoom;\n      let deltaY = this._deltaY / this.zoom;\n      let x = (this.localeTransform.x = Math.round(\n        this.localeTransform.x + deltaX\n      ));\n      let y = (this.localeTransform.y = Math.round(\n        this.localeTransform.y + deltaY\n      ));\n\n      // 将当前位置对齐网格，限制在父元素内进行移动\n      // 当deltaX > 0 说明当前移动方向为向右移动，则向下取整。例如：10 12 14 始终取 10\n      // 当deltaY < 0 说明当干移动方向为向左移动，则向上取整。例如：20 19 17 始终取 20\n      if (this.axis.includes(\"x\")) {\n        if (x > this.transform.x) {\n          this.transform.x = this.restrictToLeftOfParent(x - (x % gridX));\n        } else if (x < this.transform.x) {\n          this.transform.x = this.restrictToLeftOfParent(\n            x - ((x % gridX) - gridX)\n          );\n        }\n      }\n\n      if (this.axis.includes(\"y\")) {\n        if (y > this.transform.y) {\n          this.transform.y = this.restrictToTopOfParent(y - (y % gridY));\n        } else if (y < this.transform.y) {\n          this.transform.y = this.restrictToTopOfParent(\n            y - ((y % gridY) - gridY)\n          );\n        }\n      }\n    },\n    restrictToLeftOfParent(x) {\n      if (!this.parent) return x;\n      x = Math.max(this.bounday.minLeft, x);\n      x = Math.min(this.bounday.maxLeft, x);\n      return x;\n    },\n    restrictToTopOfParent(y) {\n      if (!this.parent) return y;\n      y = Math.max(this.bounday.minTop, y);\n      y = Math.min(this.bounday.maxTop, y);\n      return y;\n    },\n    restrictHeight(h, type) {\n      if (!this.parent || this.transform.rotation > 0) return h;\n      if ([\"bl\", \"bm\", \"br\"].includes(type))\n        return Math.min(this.bounday.maxBottomHeight, h);\n      if ([\"tl\", \"tm\", \"tr\"].includes(type))\n        return Math.min(this.bounday.maxTopHeight, h);\n      return h;\n    },\n    restrictWidth(w, type) {\n      if (!this.parent || this.transform.rotation > 0) return w;\n      if ([\"tl\", \"l\", \"bl\"].includes(type))\n        return Math.min(this.bounday.maxLeftWidth, w);\n      if ([\"tr\", \"r\", \"br\"].includes(type))\n        return Math.min(this.bounday.maxRightWidth, w);\n      return w;\n    },\n    handleMouseUp(event) {\n      this.handleDefaultEvent(event);\n      document.removeEventListener(\"mousemove\", this.handleMouseMove, false);\n      document.removeEventListener(\"mouseup\", this.handleMouseUp, false);\n      document.removeEventListener(\"touchmove\", this.handleMouseMove, false);\n      document.removeEventListener(\"touchend\", this.handleMouseUp, false);\n\n      let ev = {\n        drag: \"draggable\",\n        resize: \"resizable\",\n        rotate: \"rotatable\",\n      };\n\n      this.isInitialRatio =\n        this.isDragging =\n        this.isResizing =\n        this.isRotating =\n          false;\n      this.isReadyToDrag = this.isReadyToResize = this.isReadyToRotate = false;\n      this[ev[this._handlerType]] &&\n        this.$emit(this._handlerType + \"end\", event, this.transform);\n    },\n    handleResizeStart(event) {\n      let type = this._resizeHandler;\n      let rect = this.transform;\n      let matrix = getPoints(rect, this.zoom);\n      let pressAngle;\n      // 当前控制点的对角坐标点，该坐标会用来计算新的位置\n      // 例如：bottomRight(右下角) 对应 topLeft(左上角)\n      let opposite = matrix[pointMap[type]];\n      // 与上面的区别是，这里的对角坐标只能是4个直角坐标，用于计算新的宽高\n      // 例如：例如：bottomRight 和 bottom 都对应 topLeft\n      let opp2 = matrix[pointMap2[type]];\n      let { clientX, clientY } = event.touches ? event.touches[0] : event;\n      // issues: https://github.com/zuimeiaj/yoyoo-ddr/issues/34\n      // 在进行缩放时，需要考虑鼠标位置距离拖拽点中心位置的偏移值，否则拖拽时会有抖动\n      let handlerPoint = matrix[handlerPointMap[type]];\n      let offsetX = clientX - handlerPoint.x;\n      let offsetY = clientY - handlerPoint.y;\n\n      let x1 = clientX - opp2.x - offsetX;\n      let y1 = clientY - opp2.y - offsetY;\n      let width = rect.width;\n      let height = rect.height;\n      // 有问题\n      if (tr2bl[type]) {\n        pressAngle = rad2deg(\n          Math.atan2(width, widthMap[type] ? height / 2 : height)\n        );\n      } else {\n        pressAngle = rad2deg(\n          Math.atan2(height, heightMap[type] ? width / 2 : width)\n        );\n      }\n      let startAngle = rad2deg(Math.atan2(y1, x1));\n      this._resizeOpt = {\n        matrix,\n        rect,\n        type,\n        opposite,\n        opp2,\n        pressAngle,\n        startAngle,\n        offsetX,\n        offsetY,\n      };\n    },\n    handleResizeMove(event) {\n      let { clientX, clientY } = event.touches ? event.touches[0] : event;\n      let { opposite, opp2, type, pressAngle, startAngle, offsetX, offsetY } =\n        this._resizeOpt;\n      let x = clientX - opp2.x - offsetX;\n      let y = clientY - opp2.y - offsetY;\n      let dis = Math.hypot(y, x);\n      let ratio = event.shiftKey || this.acceptRatio;\n      let [gridX, gridY] = this.grid;\n      // 锁定纵横比\n      if (!this.isInitialRatio && ratio) {\n        this.currentRatio = this.transform.width / this.transform.height;\n        this.isInitialRatio = true;\n      }\n      if (!ratio) {\n        this.isInitialRatio = false;\n      }\n\n      // 获取新的宽度和高度\n      let { w, h } = getSize({\n        type,\n        dis,\n        x,\n        y,\n        startAngle,\n        pressAngle,\n      });\n      let transform = { ...this.localeTransform };\n\n      // 进行等比例缩放\n      if (this.isInitialRatio) {\n        if (widthMap[type]) h = w / this.currentRatio;\n        else w = h * this.currentRatio;\n      }\n      // 还原到实际尺寸\n      w /= this.zoom;\n      h /= this.zoom;\n      w = Math.min(Math.max(Math.round(w), this.minWidth), this.maxWidth);\n      h = Math.min(Math.max(Math.round(h), this.minHeight), this.maxHeight);\n      // 判断当前控制点是否为宽度缩放还是高度缩放\n      if (widthMap[type] && !ratio) {\n        transform.width = w;\n      } else if (heightMap[type] && !ratio) {\n        transform.height = h;\n      } else {\n        transform.width = w;\n        transform.height = h;\n      }\n\n      let resizeType = this._resizeHandler;\n      // // 限制在网格中移动，原理同拖动\n      if (transform.width % gridX > 0) {\n        if (transform.width > this.localeTransform.width) {\n          // 宽度变大时向下取整\n          transform.width = transform.width - (transform.width % gridX);\n        } else {\n          // 宽度变小时向上取整\n          transform.width =\n            transform.width - ((transform.width % gridX) - gridX);\n        }\n      }\n\n      // 原理同上\n      if (transform.height % gridY > 0) {\n        if (transform.height > this.localeTransform.height) {\n          transform.height = transform.height - (transform.height % gridY);\n        } else {\n          transform.height =\n            transform.height - ((transform.height % gridY) - gridY);\n        }\n      }\n      // 限制在父元素中\n      transform.height = this.restrictHeight(transform.height, resizeType);\n      transform.width = this.restrictWidth(transform.width, resizeType);\n\n      // 根据新的旋转和宽高计算新的位置\n      let matrix = getPoints(transform, this.zoom);\n      let newOpposite = matrix[pointMap[type]];\n      let deltaX = -(newOpposite.x - opposite.x) / this.zoom;\n      let deltaY = -(newOpposite.y - opposite.y) / this.zoom;\n      transform.x = Math.round(transform.x + deltaX);\n      transform.y = Math.round(transform.y + deltaY);\n      this.transform = transform;\n    },\n\n    handleRotateStart(event) {\n      let { clientX, clientY } = event.touches ? event.touches[0] : event;\n      let t = this.$refs.wrapper.getBoundingClientRect();\n      let cx = t.left + t.width / 2;\n      let cy = t.top + t.height / 2;\n      let startAngle = (180 / Math.PI) * Math.atan2(clientY - cy, clientX - cx);\n      let rotation = this.transform.rotation;\n      // 记录旋转的角度和组件的中心点\n      this._rotateOpt = { cx, cy, startAngle, rotation };\n    },\n    handleRotateMove(event) {\n      let { cx, cy, startAngle, rotation } = this._rotateOpt;\n      let { clientX, clientY } = event.touches ? event.touches[0] : event;\n      let x = clientX - cx;\n      let y = clientY - cy;\n      let angle = (180 / Math.PI) * Math.atan2(y, x);\n      // 旋转角度 = 鼠标移动时角度 - 鼠标按下时角度\n      // 旋转后的角度 = 组件按下时角度 + 旋转角度\n      let currentAngle = angle - startAngle;\n      let r = rotation + currentAngle;\n      r = r % 360;\n      r = r < 0 ? r + 360 : r;\n      r = this.roundRotate(r);\n      this.transform.rotation = Math.floor(r);\n    },\n    roundRotate(r) {\n      const round = 5;\n      if (r > 360 - round || r < 0 + round) return 0;\n      if (r > 90 - round && r < 90 + round) return 90;\n      if (r > 180 - round && r < 180 + round) return 180;\n      if (r > 270 - round && r < 270 + round) return 270;\n      return r;\n    },\n    getClassNames() {\n      const ddrClassNames = [\"yoyoo-ddr\"];\n\n      if (this.active) ddrClassNames.push(\"active\");\n      if (this.isDragging) ddrClassNames.push(\"ddr-dragging\");\n      if (this.isResizing) ddrClassNames.push(\"ddr-resizing\");\n      if (this.isRotating) ddrClassNames.push(\"ddr-rotating\");\n      if (this.isReadyToDrag) ddrClassNames.push(\"ddr-ready-drag\");\n      if (this.isReadyToResize) ddrClassNames.push(\"ddr-ready-resize\");\n      if (this.isReadyToRotate) ddrClassNames.push(\"ddr-ready-rotate\");\n      return ddrClassNames;\n    },\n  },\n  render() {\n    return (\n      <div\n        ref=\"wrapper\"\n        style={this.style}\n        class={this.getClassNames()}\n        onTouchstart={this.handleMouseDown}\n        onMousedown={this.handleMouseDown}\n      >\n        {this.renderContent ? this.renderContent(this) : this.$slots.default}\n        {this.resizable && (\n          <div class=\"resize-handler-wrapper\">\n            {this.resizeHandler.map((item) => {\n              return (\n                <span\n                  data-resizetype={item}\n                  key={item}\n                  style={this.getNewHandler(item)}\n                  class={`resize-handler ${item}`}\n                />\n              );\n            })}\n          </div>\n        )}\n        {this.rotatable && (\n          <span\n            style={this.rotateHandler}\n            data-type=\"rotate\"\n            class=\"rotate-handler\"\n          />\n        )}\n      </div>\n    );\n  },\n};\n</script>\n\n<style lang=\"less\">\n.yoyoo-ddr {\n  position: absolute;\n  .resize-handler.tm {\n    left: 50%;\n  }\n  .resize-handler.r {\n    top: 50%;\n  }\n  .resize-handler.bm {\n    left: 50%;\n  }\n  .resize-handler.l {\n    top: 50%;\n    cursor: pointer;\n  }\n\n  .resize-handler,\n  .rotate-handler {\n    display: none;\n    position: absolute;\n    border: 1px solid #607d8b;\n    background: #fff;\n    box-sizing: border-box;\n    border-radius: 50%;\n  }\n  .rotate-handler {\n    left: 50%;\n    cursor: crosshair;\n  }\n  &.active {\n    border: 1px dashed #607d8b;\n    > .resize-handler-wrapper > .resize-handler,\n    > .rotate-handler {\n      display: inline-block;\n    }\n  }\n  .br,\n  .tr,\n  .tl,\n  .bl {\n    background: #607d8b;\n  }\n}\n</style>\n","var render, staticRenderFns\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","<template>\n  <!-- <div class=\"container\"> -->\n  <!-- <div class=\"\" style=\"position: absolute\">\n      {{ transform }}\n    </div> -->\n  <!-- <div class=\"_moveableItem\">\n    <img class=\"\" :src=\"src\" />\n  </div> -->\n  <DDR\n    class=\"_moveableItem\"\n    :class=\"{\n      'is--locked': publimodule.locked === true,\n      'is--editable': can_edit,\n      'is--active': can_edit && is_active,\n      'is--beingEdited': content_is_edited,\n      'panzoom-exclude': can_edit,\n    }\"\n    :active=\"\n      can_edit &&\n      is_active &&\n      publimodule.locked !== true &&\n      content_is_edited !== true\n    \"\n    :key=\"component_key\"\n    :value=\"transform\"\n    :parent=\"false /* bind to container */\"\n    :acceptRatio=\"aspect_ratio\"\n    :handlerSize=\"15\"\n    :grid=\"grid\"\n    :id=\"publimodule.$path\"\n    :zoom=\"scale\"\n    :style=\"module_z_index\"\n    @dragstart=\"dragStart\"\n    @drag=\"onDrag\"\n    @dragend=\"dragEnd\"\n    @resizestart=\"resizeStart\"\n    @resizeend=\"resizeEnd\"\n    @rotateend=\"rotateEnd\"\n  >\n    <span class=\"_activator\" @mousedown=\"setActive\" @dblclick=\"dblClick\">\n      <PublicationModule\n        class=\"_moveableItem--content\"\n        :publimodule=\"publimodule\"\n        :can_edit=\"can_edit && is_active\"\n        :borderRadius=\"turnCMtoPX(publimodule.border_radius) || 0\"\n        :context=\"context\"\n        :page_template=\"'page_by_page'\"\n        :number_of_max_medias=\"1\"\n        :magnification=\"magnification\"\n        @duplicate=\"onDuplicateModule\"\n        @contentIsEdited=\"contentIsEdited\"\n        @contentIsNotEdited=\"contentIsNotEdited\"\n        :style=\"module_styles\"\n      />\n    </span>\n    <div class=\"_unlockBtn\" v-if=\"can_edit\">\n      <button\n        type=\"button\"\n        class=\"u-button u-button_orange u-button_small u-button_round u-colorBlack\"\n        v-if=\"publimodule.locked === true\"\n        @click=\"unlock()\"\n      >\n        <sl-icon name=\"lock\" />\n      </button>\n      <button\n        type=\"button\"\n        class=\"u-button u-button_orange u-button_small u-button_round u-colorBlack\"\n        v-if=\"\n          can_edit &&\n          is_active &&\n          !content_is_edited &&\n          (!publimodule.locked || publimodule.locked === false)\n        \"\n        @click=\"lock()\"\n      >\n        <sl-icon name=\"unlock\" />\n        <!-- {{ $t(\"lock\") }} -->\n      </button>\n    </div>\n\n    <!-- <small class=\"_coords\">\n      x={{ publimodule.x }}; y={{ publimodule.y }}; width={{\n        publimodule.width\n      }}; height={{ publimodule.height }}\n    </small> -->\n  </DDR>\n</template>\n<script>\n/* eslint-disable */\nimport DDR from \"@/ddr/index.vue\"; // eslint-disable-line\n// import DDR from \"yoyoo-ddr\";\nimport \"yoyoo-ddr/dist/yoyoo-ddr.css\";\nimport PublicationModule from \"@/components/publications/modules/PublicationModule.vue\";\n\n/* eslint-disable no-unused-vars */\nexport default {\n  name: \"app\",\n  props: {\n    context: String,\n    publimodule: Object,\n    can_edit: Boolean,\n    magnification: Number,\n    gridstep: Number,\n    scale: Number,\n    is_active: Boolean,\n  },\n  components: {\n    DDR,\n    PublicationModule,\n  },\n  data() {\n    return {\n      transform: { x: 0, y: 0, width: 300, height: 300, rotation: 0 },\n      component_key: 1,\n      aspect_ratio: true,\n      content_is_edited: false,\n    };\n  },\n  created() {\n    // if (this.publimodule.x)\n    this.setTransformFromPubli();\n    // else debugger;\n    // todo get ratio from linked image, set initial transform based on that\n\n    this.setNewComponentKey();\n  },\n  mounted() {\n    // console.log(`MoveableItem / mounted ${this.publimodule.$path}`);\n\n    this.$eventHub.$on(`module.panTo.${this.module_meta_filename}`, this.panTo);\n    this.$eventHub.$on(\n      `module.enable_edit.${this.module_meta_filename}`,\n      this.setActive\n    );\n  },\n  beforeDestroy() {\n    this.$eventHub.$off(\n      `module.panTo.${this.module_meta_filename}`,\n      this.panTo\n    );\n    this.$eventHub.$off(\n      `module.enable_edit.${this.module_meta_filename}`,\n      this.setActive\n    );\n  },\n  watch: {\n    publimodule: {\n      handler() {\n        // todo change key to re-render component if coordinates were changed and diff from transform (means it was changed on another client)\n        const was_updated = this.setTransformFromPubli();\n        if (was_updated) this.setNewComponentKey();\n      },\n      deep: true,\n    },\n    magnification() {\n      const was_updated = this.setTransformFromPubli();\n      if (was_updated) this.setNewComponentKey();\n    },\n    is_active() {\n      if (!this.is_active) {\n        this.contentIsNotEdited();\n      }\n    },\n  },\n  computed: {\n    module_meta_filename() {\n      return this.publimodule.$path.split(\"/\").at(-1);\n    },\n    grid() {\n      return [this.gridstep, this.gridstep];\n    },\n    module_z_index() {\n      return `\n        z-index: ${this.publimodule.z_index ? this.publimodule.z_index : 0}\n      `;\n    },\n    module_styles() {\n      return {\n        \"--set-fontSize\": (this.publimodule.text_size || 100) + \"%\",\n        \"--set-margins\":\n          (this.turnCMtoPX(this.publimodule.margins) || 0) + \"px\",\n        \"--set-opacity\": this.publimodule.opacity || 1,\n        \"--set-borderRadius\":\n          (this.turnCMtoPX(this.publimodule.border_radius) || 0) + \"px\",\n        \"--set-backgroundColor\":\n          this.publimodule.background_color || \"transparent\",\n        \"--set-outlineColor\": this.publimodule.outline_color || \"black\",\n        \"--set-outlineWidth\":\n          (this.turnCMtoPX(this.publimodule.outline_width) || 0) + \"px\",\n      };\n    },\n  },\n  methods: {\n    setNewComponentKey() {\n      this.component_key = new Date().getTime();\n    },\n    setTransformFromPubli() {\n      let was_updated = false;\n\n      Object.keys(this.transform).map((k) => {\n        if (typeof this.publimodule[k] === \"number\") {\n          if ([\"x\", \"y\", \"width\", \"height\"].includes(k)) {\n            const px = this.turnCMtoPX(this.publimodule[k]);\n            if (this.transform[k] !== px) {\n              this.transform[k] = px;\n              was_updated = true;\n            }\n          } else if (k === \"rotation\") {\n            if (this.transform[k] !== this.publimodule[k]) {\n              this.transform[k] = this.publimodule[k];\n              was_updated = true;\n            }\n          }\n        }\n      });\n      return was_updated;\n      // this.$set(this.transform, k, this.publimodule[k]);\n    },\n    turnCMtoPX(num) {\n      if (!num) return false;\n      return this.roundToDec(num * this.magnification);\n    },\n    turnPXtoCM(num) {\n      return this.roundToDec(num / this.magnification);\n    },\n    contentIsEdited($toolbar) {\n      this.$eventHub.$emit(`module.text_editing_enabled`, $toolbar);\n      this.content_is_edited = true;\n    },\n    contentIsNotEdited() {\n      this.$eventHub.$emit(`module.text_editing_disabled`);\n      this.content_is_edited = false;\n    },\n    roundToDec(num) {\n      return Math.round((num + Number.EPSILON) * 100) / 100;\n    },\n    firstMedia(page_module) {\n      if (!page_module) return false;\n      try {\n        const source_media = page_module.source_medias[0];\n        const publication_path = this.getParent(page_module.$path);\n\n        return this.getSourceMedia({\n          source_media,\n          publication_path,\n        });\n      } catch (err) {\n        return false;\n      }\n    },\n\n    dragStart() {\n      // console.log(\"dragStart\");\n      // this.$eventHub.$emit(`module.dragStart`);\n    },\n    onDrag(event) {\n      // console.log(\"ondrag\");\n      // todo calculate deltaX with start, propagate to other active modules\n      // see https://github.com/zuimeiaj/yoyoo-ddr/blob/edf46aafd86654ab315cfa5b3fc41d68bb7c0273/src/examples/vseditor/plugins/plugin-selection.vue#L120\n      // this.$eventHub.$emit(`module.onDrag`);\n    },\n    dragEnd(event, transform) {\n      if (JSON.stringify(transform) === JSON.stringify(this.transform))\n        return false;\n      if (\n        this.turnPXtoCM(transform.x) === this.turnPXtoCM(this.transform.x) &&\n        this.turnPXtoCM(transform.y) === this.turnPXtoCM(this.transform.y)\n      )\n        return false;\n\n      // this.transform = transform;\n      this.updateTransform(transform);\n\n      event.stopPropagation();\n    },\n    resizeStart(event, transform) {\n      if (\n        event.target.classList.contains(\"br\") ||\n        event.target.classList.contains(\"bl\") ||\n        event.target.classList.contains(\"tl\") ||\n        event.target.classList.contains(\"tr\")\n      )\n        return (this.aspect_ratio = true);\n      return (this.aspect_ratio = false);\n    },\n    resizeEnd(event, transform) {\n      if (JSON.stringify(transform) === JSON.stringify(this.transform))\n        return false;\n\n      // this.transform = transform;\n      this.updateTransform(transform);\n\n      event.stopPropagation();\n    },\n    rotateEnd(event, transform) {\n      if (JSON.stringify(transform) === JSON.stringify(this.transform))\n        return false;\n\n      // this.transform = transform;\n      this.updateTransform(transform);\n\n      event.stopPropagation();\n    },\n    async updateTransform(transform) {\n      let new_meta = JSON.parse(JSON.stringify(transform));\n      Object.keys(new_meta).map((k) => {\n        if (new_meta[k] !== this.transform[k]) {\n          if ([\"x\", \"y\", \"width\", \"height\"].includes(k)) {\n            new_meta[k] = this.turnPXtoCM(new_meta[k]);\n            this.transform[k] = this.turnCMtoPX(new_meta[k]);\n          } else {\n            this.transform[k] = this.turnCMtoPX(this.turnPXtoCM(new_meta[k]));\n          }\n        } else {\n          delete new_meta[k];\n        }\n      });\n\n      await this.updateModuleMeta({\n        new_meta,\n      });\n    },\n    panTo() {\n      this.$eventHub.$emit(`panzoom.panTo`, {\n        x: this.transform.x,\n        y: this.transform.y,\n      });\n    },\n    setActive($event) {\n      if (this.is_active) return false;\n\n      if (this.content_is_edited) return $event.stopPropagation();\n      if (!this.can_edit || this.is_active) return;\n      if (this.publimodule.locked === true) return;\n\n      this.$eventHub.$emit(`module.setActive`, this.publimodule.$path);\n    },\n    async dblClick() {\n      if (!this.is_active) return;\n\n      const first_media = this.firstMedia(this.publimodule);\n      if (!first_media) return;\n\n      if (first_media.$type === \"text\") this.editText();\n      else {\n        // resize height to match ratio\n        const media_ratio = first_media.$infos?.ratio;\n        const height = this.publimodule.width * media_ratio;\n        await this.updateModuleMeta({\n          new_meta: { height },\n        });\n      }\n    },\n    editText() {\n      const meta_filename = this.publimodule.$path.substring(\n        this.publimodule.$path.lastIndexOf(\"/\") + 1\n      );\n      this.$eventHub.$emit(`module.enable_edit.${meta_filename}`);\n    },\n    async lock() {\n      const new_meta = {\n        locked: true,\n      };\n      await this.updateModuleMeta({\n        new_meta,\n      });\n      this.$eventHub.$emit(`module.setActive`, false);\n    },\n    async unlock() {\n      const new_meta = {\n        locked: false,\n      };\n      await this.updateModuleMeta({\n        new_meta,\n      });\n      setTimeout(() => {\n        this.setActive();\n      }, 100);\n    },\n    async updateModuleMeta({ new_meta }) {\n      await this.$api\n        .updateMeta({\n          path: this.publimodule.$path,\n          new_meta,\n        })\n        .catch((err) => {\n          this.$alertify.delay(4000).error(err);\n          throw err;\n        });\n    },\n    onDuplicateModule(meta_filename) {\n      const path =\n        this.publimodule.$path.substring(\n          0,\n          this.publimodule.$path.lastIndexOf(\"/\") + 1\n        ) + meta_filename;\n      setTimeout(() => {\n        this.$eventHub.$emit(`module.setActive`, path);\n      }, 100);\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n._moveableItem {\n  // not all because of rotate\n  // transition-property: left, top, right, bottom;\n  // transition-duration: 0.15s;\n  // transition-timing-function: cubic-bezier(0.19, 1, 0.22, 1);\n\n  &.is--locked {\n    pointer-events: none;\n  }\n  &.is--active {\n    // z-index: 1500;\n  }\n\n  &.is--editable {\n    ::v-deep .u-floatingFsButton {\n      display: none;\n    }\n  }\n  &.is--editable:not(.is--beingEdited):not(.is--locked) {\n    cursor: pointer;\n    cursor: -webkit-grab;\n    cursor: -moz-grab;\n    cursor: grab;\n  }\n\n  &.is--editable:hover:not(.is--locked) {\n    outline: 2px dotted var(--c-noir);\n  }\n\n  &.is--beingEdited {\n    outline: 2px dotted var(--c-orange) !important;\n\n    ::v-deep {\n      // ._collaborativeEditor .ql-editor {\n      //   background: linear-gradient(rgba(255, 255, 255, 0.6) 55%, transparent);\n      //   padding-bottom: 250px;\n      // }\n    }\n  }\n\n  &.yoyoo-ddr:not(.is--beingEdited) {\n    &.active {\n      border: none;\n      outline: 2px dotted var(--c-orange) !important;\n\n      ::v-deep {\n        .bl,\n        .br,\n        .tl,\n        .tr {\n          background: var(--c-orange);\n        }\n      }\n    }\n    &.ddr-dragging {\n      cursor: -webkit-grabbing;\n      cursor: -moz-grabbing;\n      cursor: dragging;\n\n      // transition-property: left, top, right, bottom;\n      // transition-duration: 0.05s;\n      // transition-timing-function: cubic-bezier(0.19, 1, 0.22, 1);\n    }\n  }\n}\n\n._moveableItem--content {\n  height: 100%;\n  padding: 0;\n  transition: all 0.2s cubic-bezier(0.19, 1, 0.22, 1);\n\n  ::v-deep ._content {\n    height: 100%;\n    overflow: hidden;\n\n    ._moduleMosaic,\n    ._mediaGrid,\n    ._mediaGrid--item,\n    ._mediaContent {\n      height: 100%;\n    }\n    ._mediaContent--image {\n      position: absolute;\n      width: 100%;\n      height: 100%;\n      object-fit: var(--object-fit, cover);\n      object-position: center;\n    }\n    .plyr__poster {\n      background-size: var(--object-fit, cover);\n      background-position: center;\n      background-color: transparent;\n    }\n    .plyr--video,\n    .plyr__video-wrapper {\n      background-color: transparent;\n    }\n\n    .plyr__video-wrapper video {\n      object-fit: var(--object-fit, cover);\n      object-position: center;\n    }\n    .plyr--video {\n      min-width: 50px;\n    }\n  }\n}\n\n// custom props\n._moveableItem ::v-deep {\n  ._publicationModule:not(.is--shape) {\n    // border-radius: var(--set-borderRadius);\n    // overflow: hidden;\n    // outline-color: var(--set-outlineColor);\n    // outline-width: var(--set-outlineWidth);\n    // outline-style: solid;\n\n    .ql-editor {\n      font-size: var(--set-fontSize);\n    }\n    .ql-editor,\n    ._mediaContent--image,\n    ._mediaContent[data-filetype=\"video\"],\n    ._mediaContent[data-filetype=\"url\"],\n    ._mediaContent[data-filetype=\"audio\"] {\n      padding: var(--set-margins);\n      opacity: var(--set-opacity);\n      aspect-ratio: unset;\n\n      border-radius: var(--set-borderRadius);\n      overflow: hidden;\n\n      background: var(--set-backgroundColor);\n      border-color: var(--set-outlineColor);\n      border-width: var(--set-outlineWidth);\n      border-style: solid;\n    }\n  }\n\n  ._publicationModule.is--shape {\n    padding: var(--set-margins);\n    opacity: var(--set-opacity);\n\n    fill: var(--set-backgroundColor);\n    stroke: var(--set-outlineColor);\n    stroke-width: var(--set-outlineWidth);\n  }\n}\n\n._moveableItem.is--editable:not(.is--beingEdited):not(.is--locked) ._activator {\n  &::after {\n    content: \"\";\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background-color: var(--c-orange_clair);\n    opacity: 0;\n\n    transition: opacity 0.4s cubic-bezier(0.19, 1, 0.22, 1);\n  }\n\n  &:hover {\n    &::after {\n      opacity: 0.15;\n    }\n  }\n}\n._coords {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  background: white;\n  margin: calc(var(--spacing) * 1);\n  // padding: calc(var(--spacing) * 1);\n}\n\n._unlockBtn {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  pointer-events: none;\n  padding: calc(var(--spacing) / 2);\n\n  display: flex;\n  justify-content: flex-start;\n\n  > * {\n    // background: white;\n    pointer-events: auto;\n  }\n}\n</style>\n","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37[0].rules[0].use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./MoveableItem.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37[0].rules[0].use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./MoveableItem.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MoveableItem.vue?vue&type=template&id=2ccd65f4&scoped=true&\"\nimport script from \"./MoveableItem.vue?vue&type=script&lang=js&\"\nexport * from \"./MoveableItem.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MoveableItem.vue?vue&type=style&index=0&id=2ccd65f4&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2ccd65f4\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div\n    class=\"_singlePage\"\n    :class=\"{\n      'is--preview': context === 'preview',\n      'is--editable': can_edit,\n    }\"\n  >\n    <div class=\"_pagecontainer\" :style=\"page_styles\">\n      <div class=\"_pagecontent\">\n        <svg\n          v-if=\"can_edit && show_grid\"\n          class=\"_grid\"\n          width=\"100%\"\n          height=\"100%\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n        >\n          <defs>\n            <pattern\n              id=\"gridSmall\"\n              :width=\"gridstep\"\n              :height=\"gridstep\"\n              patternUnits=\"userSpaceOnUse\"\n            >\n              <path\n                :d=\"`M ${gridstep} 0 L 0 0 0 ${gridstep}`\"\n                fill=\"none\"\n                stroke=\"var(--c-gridlines)\"\n                strokeWidth=\"1\"\n              />\n            </pattern>\n            <pattern\n              id=\"grid\"\n              :width=\"gridstep * 5\"\n              :height=\"gridstep * 5\"\n              patternUnits=\"userSpaceOnUse\"\n            >\n              <rect\n                :width=\"gridstep * 5\"\n                :height=\"gridstep * 5\"\n                fill=\"url(#gridSmall)\"\n              ></rect>\n              <path\n                :d=\"`M ${gridstep * 5} 0 L 0 0 0 ${gridstep * 5}`\"\n                fill=\"none\"\n                stroke=\"var(--c-gridfiveslines)\"\n                strokeWidth=\"1\"\n              />\n            </pattern>\n          </defs>\n          <rect width=\"100%\" height=\"100%\" fill=\"url(#grid)\"></rect>\n        </svg>\n\n        <MoveableItem\n          class=\"_item\"\n          v-for=\"publimodule in page_modules\"\n          :context=\"context\"\n          :key=\"publimodule.$path\"\n          :publimodule=\"publimodule\"\n          :magnification=\"magnification\"\n          :gridstep=\"show_grid && snap_to_grid ? gridstep : 1\"\n          :scale=\"scale\"\n          :can_edit=\"can_edit\"\n          :is_active=\"active_module.$path === publimodule.$path\"\n        />\n\n        <svg\n          v-if=\"can_edit && l_margins\"\n          class=\"_margins\"\n          width=\"100%\"\n          height=\"100%\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n          fill=\"transparent\"\n        >\n          <rect\n            :x=\"magnify(l_margins.left)\"\n            :y=\"magnify(l_margins.top)\"\n            :width=\"magnify(page_width - l_margins.left - l_margins.right)\"\n            :height=\"magnify(page_height - l_margins.top - l_margins.bottom)\"\n          />\n        </svg>\n\n        <div\n          class=\"_pagination\"\n          v-if=\"pagination && !hide_pagination && page_number_corrected > 0\"\n          :style=\"pagination_styles\"\n        >\n          {{ page_number_corrected }}\n        </div>\n\n        <svg\n          v-if=\"can_edit && l_margins\"\n          class=\"_pageBorders\"\n          width=\"100%\"\n          height=\"100%\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n          fill=\"transparent\"\n        >\n          <rect\n            x=\"0\"\n            y=\"0\"\n            :width=\"magnify(page_width)\"\n            :height=\"magnify(page_height)\"\n            stroke=\"black\"\n          />\n\n          <!-- white overlay on everything outside the page -->\n          <!-- <rect\n            :x=\"-1000\"\n            :y=\"-1000\"\n            :width=\"magnify(page_width) / zoom\"\n            :height=\"magnify(page_height) / zoom\"\n            stroke=\"black\"\n            fill=\"rgba(255,255,255,.7)\"\n            mask=\"url(#globeOuterOnly)\"\n          /> -->\n\n          <!-- <defs>\n            <mask id=\"globeOuterOnly\">\n              <rect\n                :x=\"(-1 * magnify(page_width)) / zoom\"\n                :y=\"(-1 * magnify(page_height)) / zoom\"\n                :width=\"magnify(page_width) / zoom\"\n                :height=\"magnify(page_height) / zoom\"\n                fill=\"white\"\n              />\n              <rect\n                x=\"0\"\n                y=\"0\"\n                :width=\"magnify(page_width)\"\n                :height=\"magnify(page_height)\"\n                fill=\"black\"\n              />\n            </mask>\n          </defs> -->\n        </svg>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport MoveableItem from \"@/components/publications/page_by_page/MoveableItem.vue\";\n\nexport default {\n  props: {\n    context: String,\n    page_modules: Array,\n    page_width: Number,\n    page_height: Number,\n    layout_mode: {\n      type: String,\n      default: \"print\",\n    },\n    page_color: String,\n    hide_pagination: Boolean,\n    zoom: { type: Number, default: 1 },\n    scale: { type: Number, default: 1 },\n    show_grid: { type: Boolean, default: false },\n    snap_to_grid: { type: Boolean, default: false },\n    gridstep_in_mm: Number,\n    margins: Object,\n    page_number: Number,\n    pagination: [Boolean, Object],\n    active_module: [Boolean, Object],\n    page_is_left: Boolean,\n    can_edit: Boolean,\n  },\n  components: {\n    MoveableItem,\n  },\n  data() {\n    return {};\n  },\n  created() {},\n  mounted() {},\n  beforeDestroy() {},\n  watch: {},\n  computed: {\n    l_margins() {\n      if (Object.keys(this.margins).length === 0) return false;\n      if (this.page_is_left === true)\n        return {\n          left: this.margins.right,\n          right: this.margins.left,\n          top: this.margins.top,\n          bottom: this.margins.bottom,\n        };\n      else return this.margins;\n    },\n    gridstep() {\n      if (!this.gridstep_in_mm) return 0;\n      return this.magnify(this.gridstep_in_mm);\n    },\n    magnification() {\n      if (this.layout_mode === \"screen\") return 1;\n      return this.$root.page_magnification;\n    },\n    page_styles() {\n      const props = {};\n\n      if (this.page_width && this.page_height) {\n        props[\"--page-width\"] = `${this.magnify(this.page_width)}px`;\n        props[\"--page-height\"] = `${this.magnify(this.page_height)}px`;\n      }\n\n      props[\"--zoom\"] = this.zoom;\n      props[\"--page-color\"] = this.page_color || \"#fff\";\n\n      return props;\n    },\n    page_number_corrected() {\n      return this.page_number - this.pagination.pagination_start_on_page + 1;\n    },\n    pagination_styles() {\n      const props = {};\n\n      if (this.page_is_left === true) {\n        props[\"--pagination-left\"] = `${this.magnify(this.pagination.right)}px`;\n      } else {\n        props[\"--pagination-right\"] = `${this.magnify(\n          this.pagination.right\n        )}px`;\n      }\n\n      props[\"--pagination-bottom\"] = `${this.magnify(\n        this.pagination.bottom\n      )}px`;\n\n      return props;\n    },\n  },\n  methods: {\n    magnify(m) {\n      return m * this.magnification;\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n._singlePage {\n  // padding: calc(var(--spacing) * 1);\n}\n\n._pagecontainer {\n  width: calc(var(--page-width));\n  height: calc(var(--page-height));\n  padding: 0;\n  // margin: calc(var(--spacing) * 4);\n\n  transform: scale(var(--zoom));\n  transform-origin: 0 0;\n\n  transition: all 0.4s cubic-bezier(0.19, 1, 0.22, 1);\n\n  .is--preview & {\n    width: calc(var(--page-width) * var(--zoom));\n    height: calc(var(--page-height) * var(--zoom));\n\n    transform-origin: left top;\n    margin: 0 auto;\n    padding: 0;\n  }\n}\n\n._pagecontent {\n  display: block;\n  position: relative;\n  z-index: 0;\n\n  // margin: 0 auto;\n  margin: 0;\n  width: var(--page-width, 100mm);\n  height: var(--page-height, 100mm);\n  background: var(--page-color, white);\n\n  overflow: hidden;\n  box-shadow: 0 3px 6px rgba(0, 0, 0, 0.16), 0 3px 6px rgba(0, 0, 0, 0.23);\n\n  transition: background 0.4s cubic-bezier(0.19, 1, 0.22, 1);\n\n  ._singlePage.is--editable & {\n    overflow: visible;\n  }\n}\n\n._item {\n  // position: absolute;\n}\n\n._grid {\n  position: absolute;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n  opacity: 0.6;\n\n  z-index: -10000;\n\n  --c-gridlines: #aaa;\n  --c-gridfiveslines: #111;\n}\n._pageBorders {\n  position: absolute;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n  stroke-width: 2px;\n}\n._margins {\n  position: absolute;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n\n  stroke-width: 2px;\n  stroke: hsl(280, 97%, 70%);\n}\n\n._pagination {\n  position: absolute;\n  right: var(--pagination-right);\n  left: var(--pagination-left);\n  bottom: var(--pagination-bottom);\n  font-weight: 500;\n  line-height: 0.5;\n  font-size: var(--sl-font-size-large);\n}\n</style>\n","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37[0].rules[0].use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SinglePage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37[0].rules[0].use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SinglePage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SinglePage.vue?vue&type=template&id=799340e8&scoped=true&\"\nimport script from \"./SinglePage.vue?vue&type=script&lang=js&\"\nexport * from \"./SinglePage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SinglePage.vue?vue&type=style&index=0&id=799340e8&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"799340e8\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"_publicationView\"},[(!_vm.project || !_vm.publication)?_c('div',{key:\"loader\",staticClass:\"u-divCentered\"},[_c('LoaderSpinner')],1):(_vm.fetch_project_error)?_c('div',{key:\"err\"},[_vm._v(\" \"+_vm._s(_vm.fetch_project_error)+\" \")]):(_vm.publication.template === 'page_by_page')?[_c('div',{staticClass:\"reveal\"},[_c('div',{staticClass:\"slides\"},[(!_vm.is_spread)?_vm._l((_vm.pages),function(page,page_number){return _c('section',{key:'page-' + page.id,staticClass:\"_page\"},[_c('SinglePage',{attrs:{\"context\":'full',\"page_modules\":_vm.getModulesForPage({ modules: _vm.modules, page_id: page.id }),\"page_color\":page.page_color,\"layout_mode\":_vm.publication.layout_mode,\"hide_pagination\":page.hide_pagination === true,\"page_number\":page_number,\"pagination\":_vm.pagination,\"can_edit\":false}})],1)}):_vm._e(),_vm._l((_vm.spreads),function(spread,s_index){return _c('section',{key:s_index},[_c('div',{staticClass:\"_spread\"},_vm._l((spread),function(page,index){return _c('div',{key:page.id ? page.id : index,staticClass:\"_spread--page\"},[(page)?[_c('SinglePage',{attrs:{\"context\":'full',\"page_modules\":_vm.getModulesForPage({ modules: _vm.modules, page_id: page.id }),\"page_color\":page.page_color,\"layout_mode\":_vm.publication.layout_mode,\"hide_pagination\":page.hide_pagination === true,\"page_number\":s_index * 2 + index,\"pagination\":_vm.pagination,\"can_edit\":false}})]:_c('div',{staticClass:\"_noPage\"})],2)}),0)])})],2)])]:_vm._e()],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"_publicationView\">\n    <!-- <img src=\"./assets/logo.png\">\n    <HelloWorld msg=\"Welcome to Your Vue.js App\"/> -->\n    <div class=\"u-divCentered\" v-if=\"!project || !publication\" key=\"loader\">\n      <LoaderSpinner />\n    </div>\n    <div v-else-if=\"fetch_project_error\" key=\"err\">\n      {{ fetch_project_error }}\n    </div>\n    <template v-else-if=\"publication.template === 'page_by_page'\">\n      <div class=\"reveal\">\n        <div class=\"slides\">\n          <template v-if=\"!is_spread\">\n            <section\n              v-for=\"(page, page_number) in pages\"\n              class=\"_page\"\n              :key=\"'page-' + page.id\"\n            >\n              <SinglePage\n                :context=\"'full'\"\n                :page_modules=\"getModulesForPage({ modules, page_id: page.id })\"\n                :page_color=\"page.page_color\"\n                :layout_mode=\"publication.layout_mode\"\n                :hide_pagination=\"page.hide_pagination === true\"\n                :page_number=\"page_number\"\n                :pagination=\"pagination\"\n                :can_edit=\"false\"\n              />\n            </section>\n          </template>\n          <section v-for=\"(spread, s_index) in spreads\" :key=\"s_index\">\n            <div class=\"_spread\">\n              <div\n                v-for=\"(page, index) in spread\"\n                :key=\"page.id ? page.id : index\"\n                class=\"_spread--page\"\n              >\n                <template v-if=\"page\">\n                  <SinglePage\n                    :context=\"'full'\"\n                    :page_modules=\"\n                      getModulesForPage({ modules, page_id: page.id })\n                    \"\n                    :page_color=\"page.page_color\"\n                    :layout_mode=\"publication.layout_mode\"\n                    :hide_pagination=\"page.hide_pagination === true\"\n                    :page_number=\"s_index * 2 + index\"\n                    :pagination=\"pagination\"\n                    :can_edit=\"false\"\n                  />\n                </template>\n                <div v-else class=\"_noPage\" />\n              </div>\n            </div>\n          </section>\n        </div>\n      </div>\n    </template>\n  </div>\n</template>\n\n<script>\nimport SinglePage from \"@/components/publications/page_by_page/SinglePage.vue\";\nimport Reveal from \"reveal.js/js/reveal\";\n\nexport default {\n  name: \"app\",\n  components: { SinglePage },\n  data() {\n    return {\n      fetch_project_error: null,\n      project: null,\n      publication: null,\n      projectpanes: [],\n\n      display_mode: \"print\",\n    };\n  },\n  async mounted() {\n    if (this.$route.query?.display === \"slides\") this.display_mode = \"slides\";\n\n    await this.listProject();\n    // this.$eventHub.$emit(\"received.project\", this.project);\n    await this.listPublication();\n\n    if (this.publication.template === \"page_by_page\") {\n      if (this.publication.layout_mode === \"screen\")\n        document.body.style = `\n          --page-width: ${this.publication.page_width}px;\n          --page-height: ${this.publication.page_height}px;\n        `;\n      else if (this.publication.layout_mode === \"print\")\n        document.body.style = `\n          --page-width: ${this.publication.page_width}mm;\n          --page-height: calc(${this.publication.page_height}mm - 0.2mm);\n        `;\n      document.addEventListener(\"keydown\", this.keyPressed);\n    }\n\n    if (this.display_mode === \"slides\") {\n      this.startReveal();\n    }\n  },\n  beforeDestroy() {},\n  watch: {},\n  computed: {\n    pagination() {\n      return this.setPaginationFromPublication(this.publication);\n    },\n    project_path() {\n      return this.createPath({\n        space_slug: this.$route.params.space_slug,\n        project_slug: this.$route.params.project_slug,\n      });\n    },\n    publication_path() {\n      return `${this.project_path}/publications/${this.$route.params.publication_slug}`;\n    },\n    pages() {\n      return this.publication.pages;\n    },\n    modules() {\n      return this.publication.$files || [];\n    },\n    is_spread() {\n      return this.publication.page_spreads === true;\n    },\n    spreads() {\n      if (!this.is_spread) return false;\n      return this.makeSpread({\n        pages: this.pages,\n      });\n    },\n  },\n  methods: {\n    async startReveal() {\n      // load css conditionnally\n      const link = document.createElement(\"link\");\n      link.setAttribute(\"rel\", \"stylesheet\");\n      link.setAttribute(\"type\", \"text/css\");\n      link.setAttribute(\n        \"href\",\n        \"https://cdn.jsdelivr.net/npm/reveal.js@3.6.0/css/reveal.css\"\n      );\n      document.head.appendChild(link);\n      await new Promise((r) => setTimeout(r, 2000));\n      await Reveal.initialize({\n        width: this.publication.page_width,\n        height: this.publication.page_height,\n      });\n    },\n    async listProject() {\n      const project = await this.$api\n        .getFolder({\n          path: this.project_path,\n        })\n        .catch((err) => {\n          this.fetch_project_error = err.response;\n          this.is_loading = false;\n        });\n      this.project = project;\n    },\n    async listPublication() {\n      const publication = await this.$api\n        .getFolder({\n          path: this.publication_path,\n        })\n        .catch((err) => {\n          this.fetch_publication_error = err.response;\n        });\n      this.publication = publication;\n    },\n  },\n};\n</script>\n<style lang=\"scss\">\n// @import url(\"../../node_modules/reveal.js/css/reveal.css\");\n// @import url(\"../../node_modules/reveal.js/css/theme/white.css\");\n\nhtml,\nbody {\n  @media print {\n    background: white !important;\n  }\n}\n\nbody {\n  @media print {\n    width: var(--page-width);\n    height: calc(var(--page-height));\n  }\n}\n@page {\n  size: var(--page-width) var(--page-height);\n}\n._publicationView {\n  height: 100vh;\n}\n\n._singlePage ._pagecontent {\n  @media print {\n    box-shadow: none;\n    // fixes in Firefox, but bugs in chrome/puppeteer\n    // overflow: visible;\n  }\n}\n._page,\n._spread {\n  page-break-inside: avoid;\n  -webkit-region-break-inside: avoid;\n\n  &:not(:last-child) {\n    page-break-after: always;\n  }\n}\n\n._spread {\n  display: flex;\n  flex-flow: row nowrap;\n  width: max-content;\n\n  > * {\n    position: relative;\n    flex: 1 1 50%;\n  }\n}\n\n._noPage {\n  width: calc(var(--page-width));\n  height: calc(var(--page-height));\n}\n</style>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Pub2.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Pub2.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Pub2.vue?vue&type=template&id=3521980a&\"\nimport script from \"./Pub2.vue?vue&type=script&lang=js&\"\nexport * from \"./Pub2.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Pub2.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".yoyoo-ddr{position:absolute}.yoyoo-ddr .resize-handler.tm{left:50%}.yoyoo-ddr .resize-handler.r{top:50%}.yoyoo-ddr .resize-handler.bm{left:50%}.yoyoo-ddr .resize-handler.l{top:50%;cursor:pointer}.yoyoo-ddr .resize-handler,.yoyoo-ddr .rotate-handler{display:none;position:absolute;border:1px solid #607d8b;background:#fff;-webkit-box-sizing:border-box;box-sizing:border-box;border-radius:50%}.yoyoo-ddr .rotate-handler{left:50%;cursor:crosshair}.yoyoo-ddr.active{border:1px dashed #607d8b}.yoyoo-ddr.active>.resize-handler-wrapper>.resize-handler,.yoyoo-ddr.active>.rotate-handler{display:inline-block}.yoyoo-ddr .bl,.yoyoo-ddr .br,.yoyoo-ddr .tl,.yoyoo-ddr .tr{background:#607d8b}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"._mediaPicker[data-v-89343b6c]{width:100%;margin:0 auto}._addMediaBtn[data-v-89343b6c]{text-align:center;padding:calc(var(--spacing)*1)}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"._moduleMosaic[data-v-1c8913c0]{--number_of_medias:1;position:relative}._mediaGrid[data-v-1c8913c0]{position:relative;width:100%}._moduleMosaic.is--multipleMedias ._mediaGrid[data-v-1c8913c0]{display:flex;flex-flow:row nowrap;gap:calc(var(--spacing)/4);transition:flex .25s cubic-bezier(.19,1,.22,1)}._mediaGrid>._mediaGrid--item[data-v-1c8913c0]{position:relative;transition:flex .25s cubic-bezier(.19,1,.22,1)}._moduleMosaic.is--multipleMedias ._mediaGrid>._mediaGrid--item[data-v-1c8913c0]{aspect-ratio:1/1;overflow:hidden;background:var(--c-gris_clair);flex:1 1 calc(100%/var(--number_of_medias))}._moduleMosaic.is--multipleMedias ._mediaGrid>._mediaGrid--item[data-v-1c8913c0]  ._mediaContent{width:100%;height:100%}._moduleMosaic.is--multipleMedias ._mediaGrid>._mediaGrid--item[data-v-1c8913c0]  ._mediaContent ._mediaContent--iframe,._moduleMosaic.is--multipleMedias ._mediaGrid>._mediaGrid--item[data-v-1c8913c0]  ._mediaContent ._mediaContent--image,._moduleMosaic.is--multipleMedias ._mediaGrid>._mediaGrid--item[data-v-1c8913c0]  ._mediaContent .plyr--video{position:absolute;height:100%;width:100%;-o-object-fit:cover;object-fit:cover;-o-object-fit:var(--object-fit);object-fit:var(--object-fit)}._mediaPickerTile[data-v-1c8913c0]{position:absolute;top:0;left:auto;right:0;display:flex;place-content:center;height:100%;align-items:center;pointer-events:none}._mediaPickerTile>*[data-v-1c8913c0]{pointer-events:auto}._btnRow[data-v-1c8913c0]{position:absolute;padding:calc(var(--spacing)/2);top:0;right:0;left:auto;z-index:100;display:flex;flex-flow:row wrap;gap:calc(var(--spacing)/2)}._btnRow button[data-v-1c8913c0]{border-radius:4px;color:#fff;text-shadow:0 0 4px rgba(0,0,0,.8)}._dropzone[data-v-1c8913c0]{position:absolute;width:100%;height:100%}._dropzone[data-v-1c8913c0]  ._dropNotice{transform:rotate(-90deg)}sl-icon-button[data-v-1c8913c0]::part(base){font-size:1.5em;color:var(--c-bleuvert)}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"._publicationModule[data-v-2ca1ef5c]{position:relative;padding:0 calc(var(--spacing)*1)}._publicationModule.is--shape ._content[data-v-2ca1ef5c],._publicationModule.is--shape svg[data-v-2ca1ef5c]{overflow:visible;stroke-linejoin:arcs;stroke-linecap:round}._publicationModule.is--shape svg[data-v-2ca1ef5c]{width:100%;height:100%}._publicationModule ._content[data-v-2ca1ef5c]{width:calc(var(--module-width)*1%);margin-left:calc(var(--module-margin-left)*1%);transition:all .4s cubic-bezier(.19,1,.22,1)}._sideOptions[data-v-2ca1ef5c]{position:absolute;top:0;height:100%;right:100%;background:var(--active-color);pointer-events:none;display:flex;flex-flow:column nowrap;justify-content:space-between;--side-width:24px;width:var(--side-width);border-radius:calc(var(--side-width)/2)}._sideOptions.is--pageByPage[data-v-2ca1ef5c]{display:none}._sideOptions>*[data-v-2ca1ef5c]{pointer-events:auto}._sideBtns[data-v-2ca1ef5c]{display:block;width:var(--side-width);height:var(--side-width);padding:0;border-radius:calc(var(--side-width)/2);background:transparent}._sideBtns[data-v-2ca1ef5c]:focus,._sideBtns[data-v-2ca1ef5c]:hover{background:rgba(0,0,0,.1)}._advanced_menu[data-v-2ca1ef5c]{position:absolute;z-index:10;left:100%;top:50%;transform:translateY(-50%);background:#fff;background:var(--active-color);flex-flow:column nowrap}._advanced_menu[data-v-2ca1ef5c],._menu[data-v-2ca1ef5c]{padding:calc(var(--spacing)/2);display:flex;gap:calc(var(--spacing)/4)}._menu[data-v-2ca1ef5c]{width:100%;justify-content:flex-end}._menu.is--overlaid[data-v-2ca1ef5c]{position:absolute;top:0;right:0;z-index:10}._options[data-v-2ca1ef5c]{position:relative}._buttonRow[data-v-2ca1ef5c]{display:flex;gap:calc(var(--spacing)/4)}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"._moveableItem.is--locked[data-v-2ccd65f4]{pointer-events:none}._moveableItem.is--editable[data-v-2ccd65f4]  .u-floatingFsButton{display:none}._moveableItem.is--editable[data-v-2ccd65f4]:not(.is--beingEdited):not(.is--locked){cursor:pointer;cursor:grab}._moveableItem.is--editable[data-v-2ccd65f4]:hover:not(.is--locked){outline:2px dotted var(--c-noir)}._moveableItem.is--beingEdited[data-v-2ccd65f4]{outline:2px dotted var(--c-orange)!important}._moveableItem.yoyoo-ddr:not(.is--beingEdited).active[data-v-2ccd65f4]{border:none;outline:2px dotted var(--c-orange)!important}._moveableItem.yoyoo-ddr:not(.is--beingEdited).active[data-v-2ccd65f4]  .bl,._moveableItem.yoyoo-ddr:not(.is--beingEdited).active[data-v-2ccd65f4]  .br,._moveableItem.yoyoo-ddr:not(.is--beingEdited).active[data-v-2ccd65f4]  .tl,._moveableItem.yoyoo-ddr:not(.is--beingEdited).active[data-v-2ccd65f4]  .tr{background:var(--c-orange)}._moveableItem.yoyoo-ddr:not(.is--beingEdited).ddr-dragging[data-v-2ccd65f4]{cursor:-moz-grabbing;cursor:dragging}._moveableItem--content[data-v-2ccd65f4]{height:100%;padding:0;transition:all .2s cubic-bezier(.19,1,.22,1)}._moveableItem--content[data-v-2ccd65f4]  ._content{height:100%;overflow:hidden}._moveableItem--content[data-v-2ccd65f4]  ._content ._mediaContent,._moveableItem--content[data-v-2ccd65f4]  ._content ._mediaGrid,._moveableItem--content[data-v-2ccd65f4]  ._content ._mediaGrid--item,._moveableItem--content[data-v-2ccd65f4]  ._content ._moduleMosaic{height:100%}._moveableItem--content[data-v-2ccd65f4]  ._content ._mediaContent--image{position:absolute;width:100%;height:100%;-o-object-fit:var(--object-fit,cover);object-fit:var(--object-fit,cover);-o-object-position:center;object-position:center}._moveableItem--content[data-v-2ccd65f4]  ._content .plyr__poster{background-size:var(--object-fit,cover);background-position:50%;background-color:transparent}._moveableItem--content[data-v-2ccd65f4]  ._content .plyr--video,._moveableItem--content[data-v-2ccd65f4]  ._content .plyr__video-wrapper{background-color:transparent}._moveableItem--content[data-v-2ccd65f4]  ._content .plyr__video-wrapper video{-o-object-fit:var(--object-fit,cover);object-fit:var(--object-fit,cover);-o-object-position:center;object-position:center}._moveableItem--content[data-v-2ccd65f4]  ._content .plyr--video{min-width:50px}._moveableItem[data-v-2ccd65f4]  ._publicationModule:not(.is--shape) .ql-editor{font-size:var(--set-fontSize)}._moveableItem[data-v-2ccd65f4]  ._publicationModule:not(.is--shape) ._mediaContent--image,._moveableItem[data-v-2ccd65f4]  ._publicationModule:not(.is--shape) ._mediaContent[data-filetype=audio],._moveableItem[data-v-2ccd65f4]  ._publicationModule:not(.is--shape) ._mediaContent[data-filetype=url],._moveableItem[data-v-2ccd65f4]  ._publicationModule:not(.is--shape) ._mediaContent[data-filetype=video],._moveableItem[data-v-2ccd65f4]  ._publicationModule:not(.is--shape) .ql-editor{padding:var(--set-margins);opacity:var(--set-opacity);aspect-ratio:unset;border-radius:var(--set-borderRadius);overflow:hidden;background:var(--set-backgroundColor);border-color:var(--set-outlineColor);border-width:var(--set-outlineWidth);border-style:solid}._moveableItem[data-v-2ccd65f4]  ._publicationModule.is--shape{padding:var(--set-margins);opacity:var(--set-opacity);fill:var(--set-backgroundColor);stroke:var(--set-outlineColor);stroke-width:var(--set-outlineWidth)}._moveableItem.is--editable:not(.is--beingEdited):not(.is--locked) ._activator[data-v-2ccd65f4]:after{content:\\\"\\\";position:absolute;top:0;left:0;width:100%;height:100%;background-color:var(--c-orange_clair);opacity:0;transition:opacity .4s cubic-bezier(.19,1,.22,1)}._moveableItem.is--editable:not(.is--beingEdited):not(.is--locked) ._activator[data-v-2ccd65f4]:hover:after{opacity:.15}._coords[data-v-2ccd65f4]{bottom:0;background:#fff;margin:calc(var(--spacing)*1)}._coords[data-v-2ccd65f4],._unlockBtn[data-v-2ccd65f4]{position:absolute;left:0}._unlockBtn[data-v-2ccd65f4]{top:0;width:100%;pointer-events:none;padding:calc(var(--spacing)/2);display:flex;justify-content:flex-start}._unlockBtn>*[data-v-2ccd65f4]{pointer-events:auto}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"._pagecontainer[data-v-799340e8]{width:calc(var(--page-width));height:calc(var(--page-height));padding:0;transform:scale(var(--zoom));transform-origin:0 0;transition:all .4s cubic-bezier(.19,1,.22,1)}.is--preview ._pagecontainer[data-v-799340e8]{width:calc(var(--page-width)*var(--zoom));height:calc(var(--page-height)*var(--zoom));transform-origin:left top;margin:0 auto;padding:0}._pagecontent[data-v-799340e8]{display:block;position:relative;z-index:0;margin:0;width:var(--page-width,100mm);height:var(--page-height,100mm);background:var(--page-color,#fff);overflow:hidden;box-shadow:0 3px 6px rgba(0,0,0,.16),0 3px 6px rgba(0,0,0,.23);transition:background .4s cubic-bezier(.19,1,.22,1)}._singlePage.is--editable ._pagecontent[data-v-799340e8]{overflow:visible}._grid[data-v-799340e8]{position:absolute;top:0;width:100%;height:100%;pointer-events:none;opacity:.6;z-index:-10000;--c-gridlines:#aaa;--c-gridfiveslines:#111}._margins[data-v-799340e8],._pageBorders[data-v-799340e8]{position:absolute;top:0;width:100%;height:100%;pointer-events:none;stroke-width:2px}._margins[data-v-799340e8]{stroke:#cb68fd}._pagination[data-v-799340e8]{position:absolute;right:var(--pagination-right);left:var(--pagination-left);bottom:var(--pagination-bottom);font-weight:500;line-height:.5;font-size:var(--sl-font-size-large)}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"@media print{body,html{background:#fff!important}body{width:var(--page-width);height:calc(var(--page-height))}}@page{size:var(--page-width) var(--page-height)}._publicationView{height:100vh}@media print{._singlePage ._pagecontent{box-shadow:none}}._page,._spread{page-break-inside:avoid;-webkit-region-break-inside:avoid}._page:not(:last-child),._spread:not(:last-child){page-break-after:always}._spread{display:flex;flex-flow:row nowrap;width:-moz-max-content;width:max-content}._spread>*{position:relative;flex:1 1 50%}._noPage{width:calc(var(--page-width));height:calc(var(--page-height))}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".yoyoo-ddr{position:absolute}.yoyoo-ddr .resize-handler.tm{left:50%}.yoyoo-ddr .resize-handler.r{top:50%}.yoyoo-ddr .resize-handler.bm{left:50%}.yoyoo-ddr .resize-handler.l{top:50%;cursor:pointer}.yoyoo-ddr .resize-handler,.yoyoo-ddr .rotate-handler{display:none;position:absolute;border:1px solid #607d8b;background:#fff;box-sizing:border-box;border-radius:50%}.yoyoo-ddr .rotate-handler{left:50%;cursor:crosshair}.yoyoo-ddr.active{border:1px dashed #607d8b}.yoyoo-ddr.active>.resize-handler-wrapper>.resize-handler,.yoyoo-ddr.active>.rotate-handler{display:inline-block}.yoyoo-ddr .bl,.yoyoo-ddr .br,.yoyoo-ddr .tl,.yoyoo-ddr .tr{background:#607d8b}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","/*!\n * reveal.js\n * http://revealjs.com\n * MIT licensed\n *\n * Copyright (C) 2020 Hakim El Hattab, http://hakim.se\n */\n(function( root, factory ) {\n\tif( typeof define === 'function' && define.amd ) {\n\t\t// AMD. Register as an anonymous module.\n\t\tdefine( function() {\n\t\t\troot.Reveal = factory();\n\t\t\treturn root.Reveal;\n\t\t} );\n\t} else if( typeof exports === 'object' ) {\n\t\t// Node. Does not work with strict CommonJS.\n\t\tmodule.exports = factory();\n\t} else {\n\t\t// Browser globals.\n\t\troot.Reveal = factory();\n\t}\n}( this, function() {\n\n\t'use strict';\n\n\tvar Reveal;\n\n\t// The reveal.js version\n\tvar VERSION = '3.9.2';\n\n\tvar SLIDES_SELECTOR = '.slides section',\n\t\tHORIZONTAL_SLIDES_SELECTOR = '.slides>section',\n\t\tVERTICAL_SLIDES_SELECTOR = '.slides>section.present>section',\n\t\tHOME_SLIDE_SELECTOR = '.slides>section:first-of-type',\n\n\t\tUA = navigator.userAgent,\n\n\t\t// Methods that may not be invoked via the postMessage API\n\t\tPOST_MESSAGE_METHOD_BLACKLIST = /registerPlugin|registerKeyboardShortcut|addKeyBinding|addEventListener/,\n\n\t\t// Configuration defaults, can be overridden at initialization time\n\t\tconfig = {\n\n\t\t\t// The \"normal\" size of the presentation, aspect ratio will be preserved\n\t\t\t// when the presentation is scaled to fit different resolutions\n\t\t\twidth: 960,\n\t\t\theight: 700,\n\n\t\t\t// Factor of the display size that should remain empty around the content\n\t\t\tmargin: 0.04,\n\n\t\t\t// Bounds for smallest/largest possible scale to apply to content\n\t\t\tminScale: 0.2,\n\t\t\tmaxScale: 2.0,\n\n\t\t\t// Display presentation control arrows\n\t\t\tcontrols: true,\n\n\t\t\t// Help the user learn the controls by providing hints, for example by\n\t\t\t// bouncing the down arrow when they first encounter a vertical slide\n\t\t\tcontrolsTutorial: true,\n\n\t\t\t// Determines where controls appear, \"edges\" or \"bottom-right\"\n\t\t\tcontrolsLayout: 'bottom-right',\n\n\t\t\t// Visibility rule for backwards navigation arrows; \"faded\", \"hidden\"\n\t\t\t// or \"visible\"\n\t\t\tcontrolsBackArrows: 'faded',\n\n\t\t\t// Display a presentation progress bar\n\t\t\tprogress: true,\n\n\t\t\t// Display the page number of the current slide\n\t\t\t// - true:    Show slide number\n\t\t\t// - false:   Hide slide number\n\t\t\t//\n\t\t\t// Can optionally be set as a string that specifies the number formatting:\n\t\t\t// - \"h.v\":\t  Horizontal . vertical slide number (default)\n\t\t\t// - \"h/v\":\t  Horizontal / vertical slide number\n\t\t\t// - \"c\":\t  Flattened slide number\n\t\t\t// - \"c/t\":\t  Flattened slide number / total slides\n\t\t\t//\n\t\t\t// Alternatively, you can provide a function that returns the slide\n\t\t\t// number for the current slide. The function should take in a slide\n\t\t\t// object and return an array with one string [slideNumber] or\n\t\t\t// three strings [n1,delimiter,n2]. See #formatSlideNumber().\n\t\t\tslideNumber: false,\n\n\t\t\t// Can be used to limit the contexts in which the slide number appears\n\t\t\t// - \"all\":      Always show the slide number\n\t\t\t// - \"print\":    Only when printing to PDF\n\t\t\t// - \"speaker\":  Only in the speaker view\n\t\t\tshowSlideNumber: 'all',\n\n\t\t\t// Use 1 based indexing for # links to match slide number (default is zero\n\t\t\t// based)\n\t\t\thashOneBasedIndex: false,\n\n\t\t\t// Add the current slide number to the URL hash so that reloading the\n\t\t\t// page/copying the URL will return you to the same slide\n\t\t\thash: false,\n\n\t\t\t// Push each slide change to the browser history.  Implies `hash: true`\n\t\t\thistory: false,\n\n\t\t\t// Enable keyboard shortcuts for navigation\n\t\t\tkeyboard: true,\n\n\t\t\t// Optional function that blocks keyboard events when retuning false\n\t\t\tkeyboardCondition: null,\n\n\t\t\t// Enable the slide overview mode\n\t\t\toverview: true,\n\n\t\t\t// Disables the default reveal.js slide layout so that you can use\n\t\t\t// custom CSS layout\n\t\t\tdisableLayout: false,\n\n\t\t\t// Vertical centering of slides\n\t\t\tcenter: true,\n\n\t\t\t// Enables touch navigation on devices with touch input\n\t\t\ttouch: true,\n\n\t\t\t// Loop the presentation\n\t\t\tloop: false,\n\n\t\t\t// Change the presentation direction to be RTL\n\t\t\trtl: false,\n\n\t\t\t// Changes the behavior of our navigation directions.\n\t\t\t//\n\t\t\t// \"default\"\n\t\t\t// Left/right arrow keys step between horizontal slides, up/down\n\t\t\t// arrow keys step between vertical slides. Space key steps through\n\t\t\t// all slides (both horizontal and vertical).\n\t\t\t//\n\t\t\t// \"linear\"\n\t\t\t// Removes the up/down arrows. Left/right arrows step through all\n\t\t\t// slides (both horizontal and vertical).\n\t\t\t//\n\t\t\t// \"grid\"\n\t\t\t// When this is enabled, stepping left/right from a vertical stack\n\t\t\t// to an adjacent vertical stack will land you at the same vertical\n\t\t\t// index.\n\t\t\t//\n\t\t\t// Consider a deck with six slides ordered in two vertical stacks:\n\t\t\t// 1.1    2.1\n\t\t\t// 1.2    2.2\n\t\t\t// 1.3    2.3\n\t\t\t//\n\t\t\t// If you're on slide 1.3 and navigate right, you will normally move\n\t\t\t// from 1.3 -> 2.1. If \"grid\" is used, the same navigation takes you\n\t\t\t// from 1.3 -> 2.3.\n\t\t\tnavigationMode: 'default',\n\n\t\t\t// Randomizes the order of slides each time the presentation loads\n\t\t\tshuffle: false,\n\n\t\t\t// Turns fragments on and off globally\n\t\t\tfragments: true,\n\n\t\t\t// Flags whether to include the current fragment in the URL,\n\t\t\t// so that reloading brings you to the same fragment position\n\t\t\tfragmentInURL: false,\n\n\t\t\t// Flags if the presentation is running in an embedded mode,\n\t\t\t// i.e. contained within a limited portion of the screen\n\t\t\tembedded: false,\n\n\t\t\t// Flags if we should show a help overlay when the question-mark\n\t\t\t// key is pressed\n\t\t\thelp: true,\n\n\t\t\t// Flags if it should be possible to pause the presentation (blackout)\n\t\t\tpause: true,\n\n\t\t\t// Flags if speaker notes should be visible to all viewers\n\t\t\tshowNotes: false,\n\n\t\t\t// Global override for autolaying embedded media (video/audio/iframe)\n\t\t\t// - null:   Media will only autoplay if data-autoplay is present\n\t\t\t// - true:   All media will autoplay, regardless of individual setting\n\t\t\t// - false:  No media will autoplay, regardless of individual setting\n\t\t\tautoPlayMedia: null,\n\n\t\t\t// Global override for preloading lazy-loaded iframes\n\t\t\t// - null:   Iframes with data-src AND data-preload will be loaded when within\n\t\t\t//           the viewDistance, iframes with only data-src will be loaded when visible\n\t\t\t// - true:   All iframes with data-src will be loaded when within the viewDistance\n\t\t\t// - false:  All iframes with data-src will be loaded only when visible\n\t\t\tpreloadIframes: null,\n\n\t\t\t// Controls automatic progression to the next slide\n\t\t\t// - 0:      Auto-sliding only happens if the data-autoslide HTML attribute\n\t\t\t//           is present on the current slide or fragment\n\t\t\t// - 1+:     All slides will progress automatically at the given interval\n\t\t\t// - false:  No auto-sliding, even if data-autoslide is present\n\t\t\tautoSlide: 0,\n\n\t\t\t// Stop auto-sliding after user input\n\t\t\tautoSlideStoppable: true,\n\n\t\t\t// Use this method for navigation when auto-sliding (defaults to navigateNext)\n\t\t\tautoSlideMethod: null,\n\n\t\t\t// Specify the average time in seconds that you think you will spend\n\t\t\t// presenting each slide. This is used to show a pacing timer in the\n\t\t\t// speaker view\n\t\t\tdefaultTiming: null,\n\n\t\t\t// Enable slide navigation via mouse wheel\n\t\t\tmouseWheel: false,\n\n\t\t\t// Apply a 3D roll to links on hover\n\t\t\trollingLinks: false,\n\n\t\t\t// Hides the address bar on mobile devices\n\t\t\thideAddressBar: true,\n\n\t\t\t// Opens links in an iframe preview overlay\n\t\t\t// Add `data-preview-link` and `data-preview-link=\"false\"` to customise each link\n\t\t\t// individually\n\t\t\tpreviewLinks: false,\n\n\t\t\t// Exposes the reveal.js API through window.postMessage\n\t\t\tpostMessage: true,\n\n\t\t\t// Dispatches all reveal.js events to the parent window through postMessage\n\t\t\tpostMessageEvents: false,\n\n\t\t\t// Focuses body when page changes visibility to ensure keyboard shortcuts work\n\t\t\tfocusBodyOnPageVisibilityChange: true,\n\n\t\t\t// Transition style\n\t\t\ttransition: 'slide', // none/fade/slide/convex/concave/zoom\n\n\t\t\t// Transition speed\n\t\t\ttransitionSpeed: 'default', // default/fast/slow\n\n\t\t\t// Transition style for full page slide backgrounds\n\t\t\tbackgroundTransition: 'fade', // none/fade/slide/convex/concave/zoom\n\n\t\t\t// Parallax background image\n\t\t\tparallaxBackgroundImage: '', // CSS syntax, e.g. \"a.jpg\"\n\n\t\t\t// Parallax background size\n\t\t\tparallaxBackgroundSize: '', // CSS syntax, e.g. \"3000px 2000px\"\n\n\t\t\t// Parallax background repeat\n\t\t\tparallaxBackgroundRepeat: '', // repeat/repeat-x/repeat-y/no-repeat/initial/inherit\n\n\t\t\t// Parallax background position\n\t\t\tparallaxBackgroundPosition: '', // CSS syntax, e.g. \"top left\"\n\n\t\t\t// Amount of pixels to move the parallax background per slide step\n\t\t\tparallaxBackgroundHorizontal: null,\n\t\t\tparallaxBackgroundVertical: null,\n\n\t\t\t// The maximum number of pages a single slide can expand onto when printing\n\t\t\t// to PDF, unlimited by default\n\t\t\tpdfMaxPagesPerSlide: Number.POSITIVE_INFINITY,\n\n\t\t\t// Prints each fragment on a separate slide\n\t\t\tpdfSeparateFragments: true,\n\n\t\t\t// Offset used to reduce the height of content within exported PDF pages.\n\t\t\t// This exists to account for environment differences based on how you\n\t\t\t// print to PDF. CLI printing options, like phantomjs and wkpdf, can end\n\t\t\t// on precisely the total height of the document whereas in-browser\n\t\t\t// printing has to end one pixel before.\n\t\t\tpdfPageHeightOffset: -1,\n\n\t\t\t// Number of slides away from the current that are visible\n\t\t\tviewDistance: 3,\n\n\t\t\t// Number of slides away from the current that are visible on mobile\n\t\t\t// devices. It is advisable to set this to a lower number than\n\t\t\t// viewDistance in order to save resources.\n\t\t\tmobileViewDistance: 2,\n\n\t\t\t// The display mode that will be used to show slides\n\t\t\tdisplay: 'block',\n\n\t\t\t// Hide cursor if inactive\n\t\t\thideInactiveCursor: true,\n\n\t\t\t// Time before the cursor is hidden (in ms)\n\t\t\thideCursorTime: 5000,\n\n\t\t\t// Script dependencies to load\n\t\t\tdependencies: []\n\n\t\t},\n\n\t\t// Flags if Reveal.initialize() has been called\n\t\tinitialized = false,\n\n\t\t// Flags if reveal.js is loaded (has dispatched the 'ready' event)\n\t\tloaded = false,\n\n\t\t// Flags if the overview mode is currently active\n\t\toverview = false,\n\n\t\t// Holds the dimensions of our overview slides, including margins\n\t\toverviewSlideWidth = null,\n\t\toverviewSlideHeight = null,\n\n\t\t// The horizontal and vertical index of the currently active slide\n\t\tindexh,\n\t\tindexv,\n\n\t\t// The previous and current slide HTML elements\n\t\tpreviousSlide,\n\t\tcurrentSlide,\n\n\t\tpreviousBackground,\n\n\t\t// Remember which directions that the user has navigated towards\n\t\thasNavigatedRight = false,\n\t\thasNavigatedDown = false,\n\n\t\t// Slides may hold a data-state attribute which we pick up and apply\n\t\t// as a class to the body. This list contains the combined state of\n\t\t// all current slides.\n\t\tstate = [],\n\n\t\t// The current scale of the presentation (see width/height config)\n\t\tscale = 1,\n\n\t\t// CSS transform that is currently applied to the slides container,\n\t\t// split into two groups\n\t\tslidesTransform = { layout: '', overview: '' },\n\n\t\t// Cached references to DOM elements\n\t\tdom = {},\n\n\t\t// A list of registered reveal.js plugins\n\t\tplugins = {},\n\n\t\t// List of asynchronously loaded reveal.js dependencies\n\t\tasyncDependencies = [],\n\n\t\t// Features supported by the browser, see #checkCapabilities()\n\t\tfeatures = {},\n\n\t\t// Client is a mobile device, see #checkCapabilities()\n\t\tisMobileDevice,\n\n\t\t// Client is a desktop Chrome, see #checkCapabilities()\n\t\tisChrome,\n\n\t\t// Throttles mouse wheel navigation\n\t\tlastMouseWheelStep = 0,\n\n\t\t// Delays updates to the URL due to a Chrome thumbnailer bug\n\t\twriteURLTimeout = 0,\n\n\t\t// Is the mouse pointer currently hidden from view\n\t\tcursorHidden = false,\n\n\t\t// Timeout used to determine when the cursor is inactive\n\t\tcursorInactiveTimeout = 0,\n\n\t\t// Flags if the interaction event listeners are bound\n\t\teventsAreBound = false,\n\n\t\t// The current auto-slide duration\n\t\tautoSlide = 0,\n\n\t\t// Auto slide properties\n\t\tautoSlidePlayer,\n\t\tautoSlideTimeout = 0,\n\t\tautoSlideStartTime = -1,\n\t\tautoSlidePaused = false,\n\n\t\t// Holds information about the currently ongoing touch input\n\t\ttouch = {\n\t\t\tstartX: 0,\n\t\t\tstartY: 0,\n\t\t\tstartCount: 0,\n\t\t\tcaptured: false,\n\t\t\tthreshold: 40\n\t\t},\n\n\t\t// A key:value map of shortcut keyboard keys and descriptions of\n\t\t// the actions they trigger, generated in #configure()\n\t\tkeyboardShortcuts = {},\n\n\t\t// Holds custom key code mappings\n\t\tregisteredKeyBindings = {};\n\n\t/**\n\t * Starts up the presentation if the client is capable.\n\t */\n\tfunction initialize( options ) {\n\n\t\t// Make sure we only initialize once\n\t\tif( initialized === true ) return;\n\n\t\tinitialized = true;\n\n\t\tcheckCapabilities();\n\n\t\tif( !features.transforms2d && !features.transforms3d ) {\n\t\t\tdocument.body.setAttribute( 'class', 'no-transforms' );\n\n\t\t\t// Since JS won't be running any further, we load all lazy\n\t\t\t// loading elements upfront\n\t\t\tvar images = toArray( document.getElementsByTagName( 'img' ) ),\n\t\t\t\tiframes = toArray( document.getElementsByTagName( 'iframe' ) );\n\n\t\t\tvar lazyLoadable = images.concat( iframes );\n\n\t\t\tfor( var i = 0, len = lazyLoadable.length; i < len; i++ ) {\n\t\t\t\tvar element = lazyLoadable[i];\n\t\t\t\tif( element.getAttribute( 'data-src' ) ) {\n\t\t\t\t\telement.setAttribute( 'src', element.getAttribute( 'data-src' ) );\n\t\t\t\t\telement.removeAttribute( 'data-src' );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// If the browser doesn't support core features we won't be\n\t\t\t// using JavaScript to control the presentation\n\t\t\treturn;\n\t\t}\n\n\t\t// Cache references to key DOM elements\n\t\tdom.wrapper = document.querySelector( '.reveal' );\n\t\tdom.slides = document.querySelector( '.reveal .slides' );\n\n\t\t// Force a layout when the whole page, incl fonts, has loaded\n\t\twindow.addEventListener( 'load', layout, false );\n\n\t\tvar query = Reveal.getQueryHash();\n\n\t\t// Do not accept new dependencies via query config to avoid\n\t\t// the potential of malicious script injection\n\t\tif( typeof query['dependencies'] !== 'undefined' ) delete query['dependencies'];\n\n\t\t// Copy options over to our config object\n\t\textend( config, options );\n\t\textend( config, query );\n\n\t\t// Hide the address bar in mobile browsers\n\t\thideAddressBar();\n\n\t\t// Loads dependencies and continues to #start() once done\n\t\tload();\n\n\t}\n\n\t/**\n\t * Inspect the client to see what it's capable of, this\n\t * should only happens once per runtime.\n\t */\n\tfunction checkCapabilities() {\n\n\t\tisMobileDevice = /(iphone|ipod|ipad|android)/gi.test( UA ) ||\n\t\t\t\t\t\t\t( navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1 ); // iPadOS\n\t\tisChrome = /chrome/i.test( UA ) && !/edge/i.test( UA );\n\n\t\tvar testElement = document.createElement( 'div' );\n\n\t\tfeatures.transforms3d = 'WebkitPerspective' in testElement.style ||\n\t\t\t\t\t\t\t\t'MozPerspective' in testElement.style ||\n\t\t\t\t\t\t\t\t'msPerspective' in testElement.style ||\n\t\t\t\t\t\t\t\t'OPerspective' in testElement.style ||\n\t\t\t\t\t\t\t\t'perspective' in testElement.style;\n\n\t\tfeatures.transforms2d = 'WebkitTransform' in testElement.style ||\n\t\t\t\t\t\t\t\t'MozTransform' in testElement.style ||\n\t\t\t\t\t\t\t\t'msTransform' in testElement.style ||\n\t\t\t\t\t\t\t\t'OTransform' in testElement.style ||\n\t\t\t\t\t\t\t\t'transform' in testElement.style;\n\n\t\tfeatures.requestAnimationFrameMethod = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame;\n\t\tfeatures.requestAnimationFrame = typeof features.requestAnimationFrameMethod === 'function';\n\n\t\tfeatures.canvas = !!document.createElement( 'canvas' ).getContext;\n\n\t\t// Transitions in the overview are disabled in desktop and\n\t\t// Safari due to lag\n\t\tfeatures.overviewTransitions = !/Version\\/[\\d\\.]+.*Safari/.test( UA );\n\n\t\t// Flags if we should use zoom instead of transform to scale\n\t\t// up slides. Zoom produces crisper results but has a lot of\n\t\t// xbrowser quirks so we only use it in whitelsited browsers.\n\t\tfeatures.zoom = 'zoom' in testElement.style && !isMobileDevice &&\n\t\t\t\t\t\t( isChrome || /Version\\/[\\d\\.]+.*Safari/.test( UA ) );\n\n\t}\n\n\t/**\n\t * Loads the dependencies of reveal.js. Dependencies are\n\t * defined via the configuration option 'dependencies'\n\t * and will be loaded prior to starting/binding reveal.js.\n\t * Some dependencies may have an 'async' flag, if so they\n\t * will load after reveal.js has been started up.\n\t */\n\tfunction load() {\n\n\t\tvar scripts = [],\n\t\t\tscriptsToLoad = 0;\n\n\t\tconfig.dependencies.forEach( function( s ) {\n\t\t\t// Load if there's no condition or the condition is truthy\n\t\t\tif( !s.condition || s.condition() ) {\n\t\t\t\tif( s.async ) {\n\t\t\t\t\tasyncDependencies.push( s );\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tscripts.push( s );\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\n\t\tif( scripts.length ) {\n\t\t\tscriptsToLoad = scripts.length;\n\n\t\t\t// Load synchronous scripts\n\t\t\tscripts.forEach( function( s ) {\n\t\t\t\tloadScript( s.src, function() {\n\n\t\t\t\t\tif( typeof s.callback === 'function' ) s.callback();\n\n\t\t\t\t\tif( --scriptsToLoad === 0 ) {\n\t\t\t\t\t\tinitPlugins();\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\t\t\t} );\n\t\t}\n\t\telse {\n\t\t\tinitPlugins();\n\t\t}\n\n\t}\n\n\t/**\n\t * Initializes our plugins and waits for them to be ready\n\t * before proceeding.\n\t */\n\tfunction initPlugins() {\n\n\t\tvar pluginsToInitialize = Object.keys( plugins ).length;\n\n\t\t// If there are no plugins, skip this step\n\t\tif( pluginsToInitialize === 0 ) {\n\t\t\tloadAsyncDependencies();\n\t\t}\n\t\t// ... otherwise initialize plugins\n\t\telse {\n\n\t\t\tvar afterPlugInitialized = function() {\n\t\t\t\tif( --pluginsToInitialize === 0 ) {\n\t\t\t\t\tloadAsyncDependencies();\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tfor( var i in plugins ) {\n\n\t\t\t\tvar plugin = plugins[i];\n\n\t\t\t\t// If the plugin has an 'init' method, invoke it\n\t\t\t\tif( typeof plugin.init === 'function' ) {\n\t\t\t\t\tvar callback = plugin.init();\n\n\t\t\t\t\t// If the plugin returned a Promise, wait for it\n\t\t\t\t\tif( callback && typeof callback.then === 'function' ) {\n\t\t\t\t\t\tcallback.then( afterPlugInitialized );\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tafterPlugInitialized();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tafterPlugInitialized();\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Loads all async reveal.js dependencies.\n\t */\n\tfunction loadAsyncDependencies() {\n\n\t\tif( asyncDependencies.length ) {\n\t\t\tasyncDependencies.forEach( function( s ) {\n\t\t\t\tloadScript( s.src, s.callback );\n\t\t\t} );\n\t\t}\n\n\t\tstart();\n\n\t}\n\n\t/**\n\t * Loads a JavaScript file from the given URL and executes it.\n\t *\n\t * @param {string} url Address of the .js file to load\n\t * @param {function} callback Method to invoke when the script\n\t * has loaded and executed\n\t */\n\tfunction loadScript( url, callback ) {\n\n\t\tvar script = document.createElement( 'script' );\n\t\tscript.type = 'text/javascript';\n\t\tscript.async = false;\n\t\tscript.defer = false;\n\t\tscript.src = url;\n\n\t\tif( callback ) {\n\n\t\t\t// Success callback\n\t\t\tscript.onload = script.onreadystatechange = function( event ) {\n\t\t\t\tif( event.type === \"load\" || (/loaded|complete/.test( script.readyState ) ) ) {\n\n\t\t\t\t\t// Kill event listeners\n\t\t\t\t\tscript.onload = script.onreadystatechange = script.onerror = null;\n\n\t\t\t\t\tcallback();\n\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// Error callback\n\t\t\tscript.onerror = function( err ) {\n\n\t\t\t\t// Kill event listeners\n\t\t\t\tscript.onload = script.onreadystatechange = script.onerror = null;\n\n\t\t\t\tcallback( new Error( 'Failed loading script: ' + script.src + '\\n' + err) );\n\n\t\t\t};\n\n\t\t}\n\n\t\t// Append the script at the end of <head>\n\t\tvar head = document.querySelector( 'head' );\n\t\thead.insertBefore( script, head.lastChild );\n\n\t}\n\n\t/**\n\t * Starts up reveal.js by binding input events and navigating\n\t * to the current URL deeplink if there is one.\n\t */\n\tfunction start() {\n\n\t\tloaded = true;\n\n\t\t// Make sure we've got all the DOM elements we need\n\t\tsetupDOM();\n\n\t\t// Listen to messages posted to this window\n\t\tsetupPostMessage();\n\n\t\t// Prevent the slides from being scrolled out of view\n\t\tsetupScrollPrevention();\n\n\t\t// Resets all vertical slides so that only the first is visible\n\t\tresetVerticalSlides();\n\n\t\t// Updates the presentation to match the current configuration values\n\t\tconfigure();\n\n\t\t// Read the initial hash\n\t\treadURL();\n\n\t\t// Update all backgrounds\n\t\tupdateBackground( true );\n\n\t\t// Notify listeners that the presentation is ready but use a 1ms\n\t\t// timeout to ensure it's not fired synchronously after #initialize()\n\t\tsetTimeout( function() {\n\t\t\t// Enable transitions now that we're loaded\n\t\t\tdom.slides.classList.remove( 'no-transition' );\n\n\t\t\tdom.wrapper.classList.add( 'ready' );\n\n\t\t\tdispatchEvent( 'ready', {\n\t\t\t\t'indexh': indexh,\n\t\t\t\t'indexv': indexv,\n\t\t\t\t'currentSlide': currentSlide\n\t\t\t} );\n\t\t}, 1 );\n\n\t\t// Special setup and config is required when printing to PDF\n\t\tif( isPrintingPDF() ) {\n\t\t\tremoveEventListeners();\n\n\t\t\t// The document needs to have loaded for the PDF layout\n\t\t\t// measurements to be accurate\n\t\t\tif( document.readyState === 'complete' ) {\n\t\t\t\tsetupPDF();\n\t\t\t}\n\t\t\telse {\n\t\t\t\twindow.addEventListener( 'load', setupPDF );\n\t\t\t}\n\t\t}\n\n\t}\n\n\t/**\n\t * Finds and stores references to DOM elements which are\n\t * required by the presentation. If a required element is\n\t * not found, it is created.\n\t */\n\tfunction setupDOM() {\n\n\t\t// Prevent transitions while we're loading\n\t\tdom.slides.classList.add( 'no-transition' );\n\n\t\tif( isMobileDevice ) {\n\t\t\tdom.wrapper.classList.add( 'no-hover' );\n\t\t}\n\t\telse {\n\t\t\tdom.wrapper.classList.remove( 'no-hover' );\n\t\t}\n\n\t\tif( /iphone/gi.test( UA ) ) {\n\t\t\tdom.wrapper.classList.add( 'ua-iphone' );\n\t\t}\n\t\telse {\n\t\t\tdom.wrapper.classList.remove( 'ua-iphone' );\n\t\t}\n\n\t\t// Background element\n\t\tdom.background = createSingletonNode( dom.wrapper, 'div', 'backgrounds', null );\n\n\t\t// Progress bar\n\t\tdom.progress = createSingletonNode( dom.wrapper, 'div', 'progress', '<span></span>' );\n\t\tdom.progressbar = dom.progress.querySelector( 'span' );\n\n\t\t// Arrow controls\n\t\tdom.controls = createSingletonNode( dom.wrapper, 'aside', 'controls',\n\t\t\t'<button class=\"navigate-left\" aria-label=\"previous slide\"><div class=\"controls-arrow\"></div></button>' +\n\t\t\t'<button class=\"navigate-right\" aria-label=\"next slide\"><div class=\"controls-arrow\"></div></button>' +\n\t\t\t'<button class=\"navigate-up\" aria-label=\"above slide\"><div class=\"controls-arrow\"></div></button>' +\n\t\t\t'<button class=\"navigate-down\" aria-label=\"below slide\"><div class=\"controls-arrow\"></div></button>' );\n\n\t\t// Slide number\n\t\tdom.slideNumber = createSingletonNode( dom.wrapper, 'div', 'slide-number', '' );\n\n\t\t// Element containing notes that are visible to the audience\n\t\tdom.speakerNotes = createSingletonNode( dom.wrapper, 'div', 'speaker-notes', null );\n\t\tdom.speakerNotes.setAttribute( 'data-prevent-swipe', '' );\n\t\tdom.speakerNotes.setAttribute( 'tabindex', '0' );\n\n\t\t// Overlay graphic which is displayed during the paused mode\n\t\tdom.pauseOverlay = createSingletonNode( dom.wrapper, 'div', 'pause-overlay', config.controls ? '<button class=\"resume-button\">Resume presentation</button>' : null );\n\n\t\tdom.wrapper.setAttribute( 'role', 'application' );\n\n\t\t// There can be multiple instances of controls throughout the page\n\t\tdom.controlsLeft = toArray( document.querySelectorAll( '.navigate-left' ) );\n\t\tdom.controlsRight = toArray( document.querySelectorAll( '.navigate-right' ) );\n\t\tdom.controlsUp = toArray( document.querySelectorAll( '.navigate-up' ) );\n\t\tdom.controlsDown = toArray( document.querySelectorAll( '.navigate-down' ) );\n\t\tdom.controlsPrev = toArray( document.querySelectorAll( '.navigate-prev' ) );\n\t\tdom.controlsNext = toArray( document.querySelectorAll( '.navigate-next' ) );\n\n\t\t// The right and down arrows in the standard reveal.js controls\n\t\tdom.controlsRightArrow = dom.controls.querySelector( '.navigate-right' );\n\t\tdom.controlsDownArrow = dom.controls.querySelector( '.navigate-down' );\n\n\t\tdom.statusDiv = createStatusDiv();\n\t}\n\n\t/**\n\t * Creates a hidden div with role aria-live to announce the\n\t * current slide content. Hide the div off-screen to make it\n\t * available only to Assistive Technologies.\n\t *\n\t * @return {HTMLElement}\n\t */\n\tfunction createStatusDiv() {\n\n\t\tvar statusDiv = document.getElementById( 'aria-status-div' );\n\t\tif( !statusDiv ) {\n\t\t\tstatusDiv = document.createElement( 'div' );\n\t\t\tstatusDiv.style.position = 'absolute';\n\t\t\tstatusDiv.style.height = '1px';\n\t\t\tstatusDiv.style.width = '1px';\n\t\t\tstatusDiv.style.overflow = 'hidden';\n\t\t\tstatusDiv.style.clip = 'rect( 1px, 1px, 1px, 1px )';\n\t\t\tstatusDiv.setAttribute( 'id', 'aria-status-div' );\n\t\t\tstatusDiv.setAttribute( 'aria-live', 'polite' );\n\t\t\tstatusDiv.setAttribute( 'aria-atomic','true' );\n\t\t\tdom.wrapper.appendChild( statusDiv );\n\t\t}\n\t\treturn statusDiv;\n\n\t}\n\n\t/**\n\t * Converts the given HTML element into a string of text\n\t * that can be announced to a screen reader. Hidden\n\t * elements are excluded.\n\t */\n\tfunction getStatusText( node ) {\n\n\t\tvar text = '';\n\n\t\t// Text node\n\t\tif( node.nodeType === 3 ) {\n\t\t\ttext += node.textContent;\n\t\t}\n\t\t// Element node\n\t\telse if( node.nodeType === 1 ) {\n\n\t\t\tvar isAriaHidden = node.getAttribute( 'aria-hidden' );\n\t\t\tvar isDisplayHidden = window.getComputedStyle( node )['display'] === 'none';\n\t\t\tif( isAriaHidden !== 'true' && !isDisplayHidden ) {\n\n\t\t\t\ttoArray( node.childNodes ).forEach( function( child ) {\n\t\t\t\t\ttext += getStatusText( child );\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn text;\n\n\t}\n\n\t/**\n\t * Configures the presentation for printing to a static\n\t * PDF.\n\t */\n\tfunction setupPDF() {\n\n\t\tvar slideSize = getComputedSlideSize( window.innerWidth, window.innerHeight );\n\n\t\t// Dimensions of the PDF pages\n\t\tvar pageWidth = Math.floor( slideSize.width * ( 1 + config.margin ) ),\n\t\t\tpageHeight = Math.floor( slideSize.height * ( 1 + config.margin ) );\n\n\t\t// Dimensions of slides within the pages\n\t\tvar slideWidth = slideSize.width,\n\t\t\tslideHeight = slideSize.height;\n\n\t\t// Let the browser know what page size we want to print\n\t\tinjectStyleSheet( '@page{size:'+ pageWidth +'px '+ pageHeight +'px; margin: 0px;}' );\n\n\t\t// Limit the size of certain elements to the dimensions of the slide\n\t\tinjectStyleSheet( '.reveal section>img, .reveal section>video, .reveal section>iframe{max-width: '+ slideWidth +'px; max-height:'+ slideHeight +'px}' );\n\n\t\tdocument.body.classList.add( 'print-pdf' );\n\t\tdocument.body.style.width = pageWidth + 'px';\n\t\tdocument.body.style.height = pageHeight + 'px';\n\n\t\t// Make sure stretch elements fit on slide\n\t\tlayoutSlideContents( slideWidth, slideHeight );\n\n\t\t// Compute slide numbers now, before we start duplicating slides\n\t\tvar doingSlideNumbers = config.slideNumber && /all|print/i.test( config.showSlideNumber );\n\t\ttoArray( dom.wrapper.querySelectorAll( SLIDES_SELECTOR ) ).forEach( function( slide ) {\n\t\t\tslide.setAttribute( 'data-slide-number', getSlideNumber( slide ) );\n\t\t} );\n\n\t\t// Slide and slide background layout\n\t\ttoArray( dom.wrapper.querySelectorAll( SLIDES_SELECTOR ) ).forEach( function( slide ) {\n\n\t\t\t// Vertical stacks are not centred since their section\n\t\t\t// children will be\n\t\t\tif( slide.classList.contains( 'stack' ) === false ) {\n\t\t\t\t// Center the slide inside of the page, giving the slide some margin\n\t\t\t\tvar left = ( pageWidth - slideWidth ) / 2,\n\t\t\t\t\ttop = ( pageHeight - slideHeight ) / 2;\n\n\t\t\t\tvar contentHeight = slide.scrollHeight;\n\t\t\t\tvar numberOfPages = Math.max( Math.ceil( contentHeight / pageHeight ), 1 );\n\n\t\t\t\t// Adhere to configured pages per slide limit\n\t\t\t\tnumberOfPages = Math.min( numberOfPages, config.pdfMaxPagesPerSlide );\n\n\t\t\t\t// Center slides vertically\n\t\t\t\tif( numberOfPages === 1 && config.center || slide.classList.contains( 'center' ) ) {\n\t\t\t\t\ttop = Math.max( ( pageHeight - contentHeight ) / 2, 0 );\n\t\t\t\t}\n\n\t\t\t\t// Wrap the slide in a page element and hide its overflow\n\t\t\t\t// so that no page ever flows onto another\n\t\t\t\tvar page = document.createElement( 'div' );\n\t\t\t\tpage.className = 'pdf-page';\n\t\t\t\tpage.style.height = ( ( pageHeight + config.pdfPageHeightOffset ) * numberOfPages ) + 'px';\n\t\t\t\tslide.parentNode.insertBefore( page, slide );\n\t\t\t\tpage.appendChild( slide );\n\n\t\t\t\t// Position the slide inside of the page\n\t\t\t\tslide.style.left = left + 'px';\n\t\t\t\tslide.style.top = top + 'px';\n\t\t\t\tslide.style.width = slideWidth + 'px';\n\n\t\t\t\tif( slide.slideBackgroundElement ) {\n\t\t\t\t\tpage.insertBefore( slide.slideBackgroundElement, slide );\n\t\t\t\t}\n\n\t\t\t\t// Inject notes if `showNotes` is enabled\n\t\t\t\tif( config.showNotes ) {\n\n\t\t\t\t\t// Are there notes for this slide?\n\t\t\t\t\tvar notes = getSlideNotes( slide );\n\t\t\t\t\tif( notes ) {\n\n\t\t\t\t\t\tvar notesSpacing = 8;\n\t\t\t\t\t\tvar notesLayout = typeof config.showNotes === 'string' ? config.showNotes : 'inline';\n\t\t\t\t\t\tvar notesElement = document.createElement( 'div' );\n\t\t\t\t\t\tnotesElement.classList.add( 'speaker-notes' );\n\t\t\t\t\t\tnotesElement.classList.add( 'speaker-notes-pdf' );\n\t\t\t\t\t\tnotesElement.setAttribute( 'data-layout', notesLayout );\n\t\t\t\t\t\tnotesElement.innerHTML = notes;\n\n\t\t\t\t\t\tif( notesLayout === 'separate-page' ) {\n\t\t\t\t\t\t\tpage.parentNode.insertBefore( notesElement, page.nextSibling );\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tnotesElement.style.left = notesSpacing + 'px';\n\t\t\t\t\t\t\tnotesElement.style.bottom = notesSpacing + 'px';\n\t\t\t\t\t\t\tnotesElement.style.width = ( pageWidth - notesSpacing*2 ) + 'px';\n\t\t\t\t\t\t\tpage.appendChild( notesElement );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// Inject slide numbers if `slideNumbers` are enabled\n\t\t\t\tif( doingSlideNumbers ) {\n\t\t\t\t\tvar numberElement = document.createElement( 'div' );\n\t\t\t\t\tnumberElement.classList.add( 'slide-number' );\n\t\t\t\t\tnumberElement.classList.add( 'slide-number-pdf' );\n\t\t\t\t\tnumberElement.innerHTML = slide.getAttribute( 'data-slide-number' );\n\t\t\t\t\tpage.appendChild( numberElement );\n\t\t\t\t}\n\n\t\t\t\t// Copy page and show fragments one after another\n\t\t\t\tif( config.pdfSeparateFragments ) {\n\n\t\t\t\t\t// Each fragment 'group' is an array containing one or more\n\t\t\t\t\t// fragments. Multiple fragments that appear at the same time\n\t\t\t\t\t// are part of the same group.\n\t\t\t\t\tvar fragmentGroups = sortFragments( page.querySelectorAll( '.fragment' ), true );\n\n\t\t\t\t\tvar previousFragmentStep;\n\t\t\t\t\tvar previousPage;\n\n\t\t\t\t\tfragmentGroups.forEach( function( fragments ) {\n\n\t\t\t\t\t\t// Remove 'current-fragment' from the previous group\n\t\t\t\t\t\tif( previousFragmentStep ) {\n\t\t\t\t\t\t\tpreviousFragmentStep.forEach( function( fragment ) {\n\t\t\t\t\t\t\t\tfragment.classList.remove( 'current-fragment' );\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Show the fragments for the current index\n\t\t\t\t\t\tfragments.forEach( function( fragment ) {\n\t\t\t\t\t\t\tfragment.classList.add( 'visible', 'current-fragment' );\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t// Create a separate page for the current fragment state\n\t\t\t\t\t\tvar clonedPage = page.cloneNode( true );\n\t\t\t\t\t\tpage.parentNode.insertBefore( clonedPage, ( previousPage || page ).nextSibling );\n\n\t\t\t\t\t\tpreviousFragmentStep = fragments;\n\t\t\t\t\t\tpreviousPage = clonedPage;\n\n\t\t\t\t\t} );\n\n\t\t\t\t\t// Reset the first/original page so that all fragments are hidden\n\t\t\t\t\tfragmentGroups.forEach( function( fragments ) {\n\t\t\t\t\t\tfragments.forEach( function( fragment ) {\n\t\t\t\t\t\t\tfragment.classList.remove( 'visible', 'current-fragment' );\n\t\t\t\t\t\t} );\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\t\t\t\t// Show all fragments\n\t\t\t\telse {\n\t\t\t\t\ttoArray( page.querySelectorAll( '.fragment:not(.fade-out)' ) ).forEach( function( fragment ) {\n\t\t\t\t\t\tfragment.classList.add( 'visible' );\n\t\t\t\t\t} );\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} );\n\n\t\t// Notify subscribers that the PDF layout is good to go\n\t\tdispatchEvent( 'pdf-ready' );\n\n\t}\n\n\t/**\n\t * This is an unfortunate necessity. Some actions – such as\n\t * an input field being focused in an iframe or using the\n\t * keyboard to expand text selection beyond the bounds of\n\t * a slide – can trigger our content to be pushed out of view.\n\t * This scrolling can not be prevented by hiding overflow in\n\t * CSS (we already do) so we have to resort to repeatedly\n\t * checking if the slides have been offset :(\n\t */\n\tfunction setupScrollPrevention() {\n\n\t\tsetInterval( function() {\n\t\t\tif( dom.wrapper.scrollTop !== 0 || dom.wrapper.scrollLeft !== 0 ) {\n\t\t\t\tdom.wrapper.scrollTop = 0;\n\t\t\t\tdom.wrapper.scrollLeft = 0;\n\t\t\t}\n\t\t}, 1000 );\n\n\t}\n\n\t/**\n\t * Creates an HTML element and returns a reference to it.\n\t * If the element already exists the existing instance will\n\t * be returned.\n\t *\n\t * @param {HTMLElement} container\n\t * @param {string} tagname\n\t * @param {string} classname\n\t * @param {string} innerHTML\n\t *\n\t * @return {HTMLElement}\n\t */\n\tfunction createSingletonNode( container, tagname, classname, innerHTML ) {\n\n\t\t// Find all nodes matching the description\n\t\tvar nodes = container.querySelectorAll( '.' + classname );\n\n\t\t// Check all matches to find one which is a direct child of\n\t\t// the specified container\n\t\tfor( var i = 0; i < nodes.length; i++ ) {\n\t\t\tvar testNode = nodes[i];\n\t\t\tif( testNode.parentNode === container ) {\n\t\t\t\treturn testNode;\n\t\t\t}\n\t\t}\n\n\t\t// If no node was found, create it now\n\t\tvar node = document.createElement( tagname );\n\t\tnode.className = classname;\n\t\tif( typeof innerHTML === 'string' ) {\n\t\t\tnode.innerHTML = innerHTML;\n\t\t}\n\t\tcontainer.appendChild( node );\n\n\t\treturn node;\n\n\t}\n\n\t/**\n\t * Creates the slide background elements and appends them\n\t * to the background container. One element is created per\n\t * slide no matter if the given slide has visible background.\n\t */\n\tfunction createBackgrounds() {\n\n\t\tvar printMode = isPrintingPDF();\n\n\t\t// Clear prior backgrounds\n\t\tdom.background.innerHTML = '';\n\t\tdom.background.classList.add( 'no-transition' );\n\n\t\t// Iterate over all horizontal slides\n\t\ttoArray( dom.wrapper.querySelectorAll( HORIZONTAL_SLIDES_SELECTOR ) ).forEach( function( slideh ) {\n\n\t\t\tvar backgroundStack = createBackground( slideh, dom.background );\n\n\t\t\t// Iterate over all vertical slides\n\t\t\ttoArray( slideh.querySelectorAll( 'section' ) ).forEach( function( slidev ) {\n\n\t\t\t\tcreateBackground( slidev, backgroundStack );\n\n\t\t\t\tbackgroundStack.classList.add( 'stack' );\n\n\t\t\t} );\n\n\t\t} );\n\n\t\t// Add parallax background if specified\n\t\tif( config.parallaxBackgroundImage ) {\n\n\t\t\tdom.background.style.backgroundImage = 'url(\"' + config.parallaxBackgroundImage + '\")';\n\t\t\tdom.background.style.backgroundSize = config.parallaxBackgroundSize;\n\t\t\tdom.background.style.backgroundRepeat = config.parallaxBackgroundRepeat;\n\t\t\tdom.background.style.backgroundPosition = config.parallaxBackgroundPosition;\n\n\t\t\t// Make sure the below properties are set on the element - these properties are\n\t\t\t// needed for proper transitions to be set on the element via CSS. To remove\n\t\t\t// annoying background slide-in effect when the presentation starts, apply\n\t\t\t// these properties after short time delay\n\t\t\tsetTimeout( function() {\n\t\t\t\tdom.wrapper.classList.add( 'has-parallax-background' );\n\t\t\t}, 1 );\n\n\t\t}\n\t\telse {\n\n\t\t\tdom.background.style.backgroundImage = '';\n\t\t\tdom.wrapper.classList.remove( 'has-parallax-background' );\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Creates a background for the given slide.\n\t *\n\t * @param {HTMLElement} slide\n\t * @param {HTMLElement} container The element that the background\n\t * should be appended to\n\t * @return {HTMLElement} New background div\n\t */\n\tfunction createBackground( slide, container ) {\n\n\n\t\t// Main slide background element\n\t\tvar element = document.createElement( 'div' );\n\t\telement.className = 'slide-background ' + slide.className.replace( /present|past|future/, '' );\n\n\t\t// Inner background element that wraps images/videos/iframes\n\t\tvar contentElement = document.createElement( 'div' );\n\t\tcontentElement.className = 'slide-background-content';\n\n\t\telement.appendChild( contentElement );\n\t\tcontainer.appendChild( element );\n\n\t\tslide.slideBackgroundElement = element;\n\t\tslide.slideBackgroundContentElement = contentElement;\n\n\t\t// Syncs the background to reflect all current background settings\n\t\tsyncBackground( slide );\n\n\t\treturn element;\n\n\t}\n\n\t/**\n\t * Renders all of the visual properties of a slide background\n\t * based on the various background attributes.\n\t *\n\t * @param {HTMLElement} slide\n\t */\n\tfunction syncBackground( slide ) {\n\n\t\tvar element = slide.slideBackgroundElement,\n\t\t\tcontentElement = slide.slideBackgroundContentElement;\n\n\t\t// Reset the prior background state in case this is not the\n\t\t// initial sync\n\t\tslide.classList.remove( 'has-dark-background' );\n\t\tslide.classList.remove( 'has-light-background' );\n\n\t\telement.removeAttribute( 'data-loaded' );\n\t\telement.removeAttribute( 'data-background-hash' );\n\t\telement.removeAttribute( 'data-background-size' );\n\t\telement.removeAttribute( 'data-background-transition' );\n\t\telement.style.backgroundColor = '';\n\n\t\tcontentElement.style.backgroundSize = '';\n\t\tcontentElement.style.backgroundRepeat = '';\n\t\tcontentElement.style.backgroundPosition = '';\n\t\tcontentElement.style.backgroundImage = '';\n\t\tcontentElement.style.opacity = '';\n\t\tcontentElement.innerHTML = '';\n\n\t\tvar data = {\n\t\t\tbackground: slide.getAttribute( 'data-background' ),\n\t\t\tbackgroundSize: slide.getAttribute( 'data-background-size' ),\n\t\t\tbackgroundImage: slide.getAttribute( 'data-background-image' ),\n\t\t\tbackgroundVideo: slide.getAttribute( 'data-background-video' ),\n\t\t\tbackgroundIframe: slide.getAttribute( 'data-background-iframe' ),\n\t\t\tbackgroundColor: slide.getAttribute( 'data-background-color' ),\n\t\t\tbackgroundRepeat: slide.getAttribute( 'data-background-repeat' ),\n\t\t\tbackgroundPosition: slide.getAttribute( 'data-background-position' ),\n\t\t\tbackgroundTransition: slide.getAttribute( 'data-background-transition' ),\n\t\t\tbackgroundOpacity: slide.getAttribute( 'data-background-opacity' )\n\t\t};\n\n\t\tif( data.background ) {\n\t\t\t// Auto-wrap image urls in url(...)\n\t\t\tif( /^(http|file|\\/\\/)/gi.test( data.background ) || /\\.(svg|png|jpg|jpeg|gif|bmp)([?#\\s]|$)/gi.test( data.background ) ) {\n\t\t\t\tslide.setAttribute( 'data-background-image', data.background );\n\t\t\t}\n\t\t\telse {\n\t\t\t\telement.style.background = data.background;\n\t\t\t}\n\t\t}\n\n\t\t// Create a hash for this combination of background settings.\n\t\t// This is used to determine when two slide backgrounds are\n\t\t// the same.\n\t\tif( data.background || data.backgroundColor || data.backgroundImage || data.backgroundVideo || data.backgroundIframe ) {\n\t\t\telement.setAttribute( 'data-background-hash', data.background +\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.backgroundSize +\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.backgroundImage +\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.backgroundVideo +\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.backgroundIframe +\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.backgroundColor +\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.backgroundRepeat +\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.backgroundPosition +\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.backgroundTransition +\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.backgroundOpacity );\n\t\t}\n\n\t\t// Additional and optional background properties\n\t\tif( data.backgroundSize ) element.setAttribute( 'data-background-size', data.backgroundSize );\n\t\tif( data.backgroundColor ) element.style.backgroundColor = data.backgroundColor;\n\t\tif( data.backgroundTransition ) element.setAttribute( 'data-background-transition', data.backgroundTransition );\n\n\t\tif( slide.hasAttribute( 'data-preload' ) ) element.setAttribute( 'data-preload', '' );\n\n\t\t// Background image options are set on the content wrapper\n\t\tif( data.backgroundSize ) contentElement.style.backgroundSize = data.backgroundSize;\n\t\tif( data.backgroundRepeat ) contentElement.style.backgroundRepeat = data.backgroundRepeat;\n\t\tif( data.backgroundPosition ) contentElement.style.backgroundPosition = data.backgroundPosition;\n\t\tif( data.backgroundOpacity ) contentElement.style.opacity = data.backgroundOpacity;\n\n\t\t// If this slide has a background color, we add a class that\n\t\t// signals if it is light or dark. If the slide has no background\n\t\t// color, no class will be added\n\t\tvar contrastColor = data.backgroundColor;\n\n\t\t// If no bg color was found, check the computed background\n\t\tif( !contrastColor ) {\n\t\t\tvar computedBackgroundStyle = window.getComputedStyle( element );\n\t\t\tif( computedBackgroundStyle && computedBackgroundStyle.backgroundColor ) {\n\t\t\t\tcontrastColor = computedBackgroundStyle.backgroundColor;\n\t\t\t}\n\t\t}\n\n\t\tif( contrastColor ) {\n\t\t\tvar rgb = colorToRgb( contrastColor );\n\n\t\t\t// Ignore fully transparent backgrounds. Some browsers return\n\t\t\t// rgba(0,0,0,0) when reading the computed background color of\n\t\t\t// an element with no background\n\t\t\tif( rgb && rgb.a !== 0 ) {\n\t\t\t\tif( colorBrightness( contrastColor ) < 128 ) {\n\t\t\t\t\tslide.classList.add( 'has-dark-background' );\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tslide.classList.add( 'has-light-background' );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t}\n\n\t/**\n\t * Registers a listener to postMessage events, this makes it\n\t * possible to call all reveal.js API methods from another\n\t * window. For example:\n\t *\n\t * revealWindow.postMessage( JSON.stringify({\n\t *   method: 'slide',\n\t *   args: [ 2 ]\n\t * }), '*' );\n\t */\n\tfunction setupPostMessage() {\n\n\t\tif( config.postMessage ) {\n\t\t\twindow.addEventListener( 'message', function ( event ) {\n\t\t\t\tvar data = event.data;\n\n\t\t\t\t// Make sure we're dealing with JSON\n\t\t\t\tif( typeof data === 'string' && data.charAt( 0 ) === '{' && data.charAt( data.length - 1 ) === '}' ) {\n\t\t\t\t\tdata = JSON.parse( data );\n\n\t\t\t\t\t// Check if the requested method can be found\n\t\t\t\t\tif( data.method && typeof Reveal[data.method] === 'function' ) {\n\n\t\t\t\t\t\tif( POST_MESSAGE_METHOD_BLACKLIST.test( data.method ) === false ) {\n\n\t\t\t\t\t\t\tvar result = Reveal[data.method].apply( Reveal, data.args );\n\n\t\t\t\t\t\t\t// Dispatch a postMessage event with the returned value from\n\t\t\t\t\t\t\t// our method invocation for getter functions\n\t\t\t\t\t\t\tdispatchPostMessage( 'callback', { method: data.method, result: result } );\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tconsole.warn( 'reveal.js: \"'+ data.method +'\" is is blacklisted from the postMessage API' );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, false );\n\t\t}\n\n\t}\n\n\t/**\n\t * Applies the configuration settings from the config\n\t * object. May be called multiple times.\n\t *\n\t * @param {object} options\n\t */\n\tfunction configure( options ) {\n\n\t\tvar oldTransition = config.transition;\n\n\t\t// New config options may be passed when this method\n\t\t// is invoked through the API after initialization\n\t\tif( typeof options === 'object' ) extend( config, options );\n\n\t\t// Abort if reveal.js hasn't finished loading, config\n\t\t// changes will be applied automatically once loading\n\t\t// finishes\n\t\tif( loaded === false ) return;\n\n\t\tvar numberOfSlides = dom.wrapper.querySelectorAll( SLIDES_SELECTOR ).length;\n\n\t\t// Remove the previously configured transition class\n\t\tdom.wrapper.classList.remove( oldTransition );\n\n\t\t// Force linear transition based on browser capabilities\n\t\tif( features.transforms3d === false ) config.transition = 'linear';\n\n\t\tdom.wrapper.classList.add( config.transition );\n\n\t\tdom.wrapper.setAttribute( 'data-transition-speed', config.transitionSpeed );\n\t\tdom.wrapper.setAttribute( 'data-background-transition', config.backgroundTransition );\n\n\t\tdom.controls.style.display = config.controls ? 'block' : 'none';\n\t\tdom.progress.style.display = config.progress ? 'block' : 'none';\n\n\t\tdom.controls.setAttribute( 'data-controls-layout', config.controlsLayout );\n\t\tdom.controls.setAttribute( 'data-controls-back-arrows', config.controlsBackArrows );\n\n\t\tif( config.shuffle ) {\n\t\t\tshuffle();\n\t\t}\n\n\t\tif( config.rtl ) {\n\t\t\tdom.wrapper.classList.add( 'rtl' );\n\t\t}\n\t\telse {\n\t\t\tdom.wrapper.classList.remove( 'rtl' );\n\t\t}\n\n\t\tif( config.center ) {\n\t\t\tdom.wrapper.classList.add( 'center' );\n\t\t}\n\t\telse {\n\t\t\tdom.wrapper.classList.remove( 'center' );\n\t\t}\n\n\t\t// Exit the paused mode if it was configured off\n\t\tif( config.pause === false ) {\n\t\t\tresume();\n\t\t}\n\n\t\tif( config.showNotes ) {\n\t\t\tdom.speakerNotes.setAttribute( 'data-layout', typeof config.showNotes === 'string' ? config.showNotes : 'inline' );\n\t\t}\n\n\t\tif( config.mouseWheel ) {\n\t\t\tdocument.addEventListener( 'DOMMouseScroll', onDocumentMouseScroll, false ); // FF\n\t\t\tdocument.addEventListener( 'mousewheel', onDocumentMouseScroll, false );\n\t\t}\n\t\telse {\n\t\t\tdocument.removeEventListener( 'DOMMouseScroll', onDocumentMouseScroll, false ); // FF\n\t\t\tdocument.removeEventListener( 'mousewheel', onDocumentMouseScroll, false );\n\t\t}\n\n\t\t// Rolling 3D links\n\t\tif( config.rollingLinks ) {\n\t\t\tenableRollingLinks();\n\t\t}\n\t\telse {\n\t\t\tdisableRollingLinks();\n\t\t}\n\n\t\t// Auto-hide the mouse pointer when its inactive\n\t\tif( config.hideInactiveCursor ) {\n\t\t\tdocument.addEventListener( 'mousemove', onDocumentCursorActive, false );\n\t\t\tdocument.addEventListener( 'mousedown', onDocumentCursorActive, false );\n\t\t}\n\t\telse {\n\t\t\tshowCursor();\n\n\t\t\tdocument.removeEventListener( 'mousemove', onDocumentCursorActive, false );\n\t\t\tdocument.removeEventListener( 'mousedown', onDocumentCursorActive, false );\n\t\t}\n\n\t\t// Iframe link previews\n\t\tif( config.previewLinks ) {\n\t\t\tenablePreviewLinks();\n\t\t\tdisablePreviewLinks( '[data-preview-link=false]' );\n\t\t}\n\t\telse {\n\t\t\tdisablePreviewLinks();\n\t\t\tenablePreviewLinks( '[data-preview-link]:not([data-preview-link=false])' );\n\t\t}\n\n\t\t// Remove existing auto-slide controls\n\t\tif( autoSlidePlayer ) {\n\t\t\tautoSlidePlayer.destroy();\n\t\t\tautoSlidePlayer = null;\n\t\t}\n\n\t\t// Generate auto-slide controls if needed\n\t\tif( numberOfSlides > 1 && config.autoSlide && config.autoSlideStoppable && features.canvas && features.requestAnimationFrame ) {\n\t\t\tautoSlidePlayer = new Playback( dom.wrapper, function() {\n\t\t\t\treturn Math.min( Math.max( ( Date.now() - autoSlideStartTime ) / autoSlide, 0 ), 1 );\n\t\t\t} );\n\n\t\t\tautoSlidePlayer.on( 'click', onAutoSlidePlayerClick );\n\t\t\tautoSlidePaused = false;\n\t\t}\n\n\t\t// When fragments are turned off they should be visible\n\t\tif( config.fragments === false ) {\n\t\t\ttoArray( dom.slides.querySelectorAll( '.fragment' ) ).forEach( function( element ) {\n\t\t\t\telement.classList.add( 'visible' );\n\t\t\t\telement.classList.remove( 'current-fragment' );\n\t\t\t} );\n\t\t}\n\n\t\t// Slide numbers\n\t\tvar slideNumberDisplay = 'none';\n\t\tif( config.slideNumber && !isPrintingPDF() ) {\n\t\t\tif( config.showSlideNumber === 'all' ) {\n\t\t\t\tslideNumberDisplay = 'block';\n\t\t\t}\n\t\t\telse if( config.showSlideNumber === 'speaker' && isSpeakerNotes() ) {\n\t\t\t\tslideNumberDisplay = 'block';\n\t\t\t}\n\t\t}\n\n\t\tdom.slideNumber.style.display = slideNumberDisplay;\n\n\t\t// Add the navigation mode to the DOM so we can adjust styling\n\t\tif( config.navigationMode !== 'default' ) {\n\t\t\tdom.wrapper.setAttribute( 'data-navigation-mode', config.navigationMode );\n\t\t}\n\t\telse {\n\t\t\tdom.wrapper.removeAttribute( 'data-navigation-mode' );\n\t\t}\n\n\t\t// Define our contextual list of keyboard shortcuts\n\t\tif( config.navigationMode === 'linear' ) {\n\t\t\tkeyboardShortcuts['&#8594;  ,  &#8595;  ,  SPACE  ,  N  ,  L  ,  J'] = 'Next slide';\n\t\t\tkeyboardShortcuts['&#8592;  ,  &#8593;  ,  P  ,  H  ,  K']           = 'Previous slide';\n\t\t}\n\t\telse {\n\t\t\tkeyboardShortcuts['N  ,  SPACE']   = 'Next slide';\n\t\t\tkeyboardShortcuts['P']             = 'Previous slide';\n\t\t\tkeyboardShortcuts['&#8592;  ,  H'] = 'Navigate left';\n\t\t\tkeyboardShortcuts['&#8594;  ,  L'] = 'Navigate right';\n\t\t\tkeyboardShortcuts['&#8593;  ,  K'] = 'Navigate up';\n\t\t\tkeyboardShortcuts['&#8595;  ,  J'] = 'Navigate down';\n\t\t}\n\n\t\tkeyboardShortcuts['Home  ,  Shift &#8592;']        = 'First slide';\n\t\tkeyboardShortcuts['End  ,  Shift &#8594;']         = 'Last slide';\n\t\tkeyboardShortcuts['B  ,  .']                       = 'Pause';\n\t\tkeyboardShortcuts['F']                             = 'Fullscreen';\n\t\tkeyboardShortcuts['ESC, O']                        = 'Slide overview';\n\n\t\tsync();\n\n\t}\n\n\t/**\n\t * Binds all event listeners.\n\t */\n\tfunction addEventListeners() {\n\n\t\teventsAreBound = true;\n\n\t\twindow.addEventListener( 'hashchange', onWindowHashChange, false );\n\t\twindow.addEventListener( 'resize', onWindowResize, false );\n\n\t\tif( config.touch ) {\n\t\t\tif( 'onpointerdown' in window ) {\n\t\t\t\t// Use W3C pointer events\n\t\t\t\tdom.wrapper.addEventListener( 'pointerdown', onPointerDown, false );\n\t\t\t\tdom.wrapper.addEventListener( 'pointermove', onPointerMove, false );\n\t\t\t\tdom.wrapper.addEventListener( 'pointerup', onPointerUp, false );\n\t\t\t}\n\t\t\telse if( window.navigator.msPointerEnabled ) {\n\t\t\t\t// IE 10 uses prefixed version of pointer events\n\t\t\t\tdom.wrapper.addEventListener( 'MSPointerDown', onPointerDown, false );\n\t\t\t\tdom.wrapper.addEventListener( 'MSPointerMove', onPointerMove, false );\n\t\t\t\tdom.wrapper.addEventListener( 'MSPointerUp', onPointerUp, false );\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// Fall back to touch events\n\t\t\t\tdom.wrapper.addEventListener( 'touchstart', onTouchStart, false );\n\t\t\t\tdom.wrapper.addEventListener( 'touchmove', onTouchMove, false );\n\t\t\t\tdom.wrapper.addEventListener( 'touchend', onTouchEnd, false );\n\t\t\t}\n\t\t}\n\n\t\tif( config.keyboard ) {\n\t\t\tdocument.addEventListener( 'keydown', onDocumentKeyDown, false );\n\t\t\tdocument.addEventListener( 'keypress', onDocumentKeyPress, false );\n\t\t}\n\n\t\tif( config.progress && dom.progress ) {\n\t\t\tdom.progress.addEventListener( 'click', onProgressClicked, false );\n\t\t}\n\n\t\tdom.pauseOverlay.addEventListener( 'click', resume, false );\n\n\t\tif( config.focusBodyOnPageVisibilityChange ) {\n\t\t\tvar visibilityChange;\n\n\t\t\tif( 'hidden' in document ) {\n\t\t\t\tvisibilityChange = 'visibilitychange';\n\t\t\t}\n\t\t\telse if( 'msHidden' in document ) {\n\t\t\t\tvisibilityChange = 'msvisibilitychange';\n\t\t\t}\n\t\t\telse if( 'webkitHidden' in document ) {\n\t\t\t\tvisibilityChange = 'webkitvisibilitychange';\n\t\t\t}\n\n\t\t\tif( visibilityChange ) {\n\t\t\t\tdocument.addEventListener( visibilityChange, onPageVisibilityChange, false );\n\t\t\t}\n\t\t}\n\n\t\t// Listen to both touch and click events, in case the device\n\t\t// supports both\n\t\tvar pointerEvents = [ 'touchstart', 'click' ];\n\n\t\t// Only support touch for Android, fixes double navigations in\n\t\t// stock browser\n\t\tif( UA.match( /android/gi ) ) {\n\t\t\tpointerEvents = [ 'touchstart' ];\n\t\t}\n\n\t\tpointerEvents.forEach( function( eventName ) {\n\t\t\tdom.controlsLeft.forEach( function( el ) { el.addEventListener( eventName, onNavigateLeftClicked, false ); } );\n\t\t\tdom.controlsRight.forEach( function( el ) { el.addEventListener( eventName, onNavigateRightClicked, false ); } );\n\t\t\tdom.controlsUp.forEach( function( el ) { el.addEventListener( eventName, onNavigateUpClicked, false ); } );\n\t\t\tdom.controlsDown.forEach( function( el ) { el.addEventListener( eventName, onNavigateDownClicked, false ); } );\n\t\t\tdom.controlsPrev.forEach( function( el ) { el.addEventListener( eventName, onNavigatePrevClicked, false ); } );\n\t\t\tdom.controlsNext.forEach( function( el ) { el.addEventListener( eventName, onNavigateNextClicked, false ); } );\n\t\t} );\n\n\t}\n\n\t/**\n\t * Unbinds all event listeners.\n\t */\n\tfunction removeEventListeners() {\n\n\t\teventsAreBound = false;\n\n\t\tdocument.removeEventListener( 'keydown', onDocumentKeyDown, false );\n\t\tdocument.removeEventListener( 'keypress', onDocumentKeyPress, false );\n\t\twindow.removeEventListener( 'hashchange', onWindowHashChange, false );\n\t\twindow.removeEventListener( 'resize', onWindowResize, false );\n\n\t\tdom.wrapper.removeEventListener( 'pointerdown', onPointerDown, false );\n\t\tdom.wrapper.removeEventListener( 'pointermove', onPointerMove, false );\n\t\tdom.wrapper.removeEventListener( 'pointerup', onPointerUp, false );\n\n\t\tdom.wrapper.removeEventListener( 'MSPointerDown', onPointerDown, false );\n\t\tdom.wrapper.removeEventListener( 'MSPointerMove', onPointerMove, false );\n\t\tdom.wrapper.removeEventListener( 'MSPointerUp', onPointerUp, false );\n\n\t\tdom.wrapper.removeEventListener( 'touchstart', onTouchStart, false );\n\t\tdom.wrapper.removeEventListener( 'touchmove', onTouchMove, false );\n\t\tdom.wrapper.removeEventListener( 'touchend', onTouchEnd, false );\n\n\t\tdom.pauseOverlay.removeEventListener( 'click', resume, false );\n\n\t\tif ( config.progress && dom.progress ) {\n\t\t\tdom.progress.removeEventListener( 'click', onProgressClicked, false );\n\t\t}\n\n\t\t[ 'touchstart', 'click' ].forEach( function( eventName ) {\n\t\t\tdom.controlsLeft.forEach( function( el ) { el.removeEventListener( eventName, onNavigateLeftClicked, false ); } );\n\t\t\tdom.controlsRight.forEach( function( el ) { el.removeEventListener( eventName, onNavigateRightClicked, false ); } );\n\t\t\tdom.controlsUp.forEach( function( el ) { el.removeEventListener( eventName, onNavigateUpClicked, false ); } );\n\t\t\tdom.controlsDown.forEach( function( el ) { el.removeEventListener( eventName, onNavigateDownClicked, false ); } );\n\t\t\tdom.controlsPrev.forEach( function( el ) { el.removeEventListener( eventName, onNavigatePrevClicked, false ); } );\n\t\t\tdom.controlsNext.forEach( function( el ) { el.removeEventListener( eventName, onNavigateNextClicked, false ); } );\n\t\t} );\n\n\t}\n\n\t/**\n\t * Registers a new plugin with this reveal.js instance.\n\t *\n\t * reveal.js waits for all regisered plugins to initialize\n\t * before considering itself ready, as long as the plugin\n\t * is registered before calling `Reveal.initialize()`.\n\t */\n\tfunction registerPlugin( id, plugin ) {\n\n\t\tif( plugins[id] === undefined ) {\n\t\t\tplugins[id] = plugin;\n\n\t\t\t// If a plugin is registered after reveal.js is loaded,\n\t\t\t// initialize it right away\n\t\t\tif( loaded && typeof plugin.init === 'function' ) {\n\t\t\t\tplugin.init();\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tconsole.warn( 'reveal.js: \"'+ id +'\" plugin has already been registered' );\n\t\t}\n\n\t}\n\n\t/**\n\t * Checks if a specific plugin has been registered.\n\t *\n\t * @param {String} id Unique plugin identifier\n\t */\n\tfunction hasPlugin( id ) {\n\n\t\treturn !!plugins[id];\n\n\t}\n\n\t/**\n\t * Returns the specific plugin instance, if a plugin\n\t * with the given ID has been registered.\n\t *\n\t * @param {String} id Unique plugin identifier\n\t */\n\tfunction getPlugin( id ) {\n\n\t\treturn plugins[id];\n\n\t}\n\n\t/**\n\t * Add a custom key binding with optional description to\n\t * be added to the help screen.\n\t */\n\tfunction addKeyBinding( binding, callback ) {\n\n\t\tif( typeof binding === 'object' && binding.keyCode ) {\n\t\t\tregisteredKeyBindings[binding.keyCode] = {\n\t\t\t\tcallback: callback,\n\t\t\t\tkey: binding.key,\n\t\t\t\tdescription: binding.description\n\t\t\t};\n\t\t}\n\t\telse {\n\t\t\tregisteredKeyBindings[binding] = {\n\t\t\t\tcallback: callback,\n\t\t\t\tkey: null,\n\t\t\t\tdescription: null\n\t\t\t};\n\t\t}\n\n\t}\n\n\t/**\n\t * Removes the specified custom key binding.\n\t */\n\tfunction removeKeyBinding( keyCode ) {\n\n\t\tdelete registeredKeyBindings[keyCode];\n\n\t}\n\n\t/**\n\t * Extend object a with the properties of object b.\n\t * If there's a conflict, object b takes precedence.\n\t *\n\t * @param {object} a\n\t * @param {object} b\n\t */\n\tfunction extend( a, b ) {\n\n\t\tfor( var i in b ) {\n\t\t\ta[ i ] = b[ i ];\n\t\t}\n\n\t\treturn a;\n\n\t}\n\n\t/**\n\t * Converts the target object to an array.\n\t *\n\t * @param {object} o\n\t * @return {object[]}\n\t */\n\tfunction toArray( o ) {\n\n\t\treturn Array.prototype.slice.call( o );\n\n\t}\n\n\t/**\n\t * Utility for deserializing a value.\n\t *\n\t * @param {*} value\n\t * @return {*}\n\t */\n\tfunction deserialize( value ) {\n\n\t\tif( typeof value === 'string' ) {\n\t\t\tif( value === 'null' ) return null;\n\t\t\telse if( value === 'true' ) return true;\n\t\t\telse if( value === 'false' ) return false;\n\t\t\telse if( value.match( /^-?[\\d\\.]+$/ ) ) return parseFloat( value );\n\t\t}\n\n\t\treturn value;\n\n\t}\n\n\t/**\n\t * Measures the distance in pixels between point a\n\t * and point b.\n\t *\n\t * @param {object} a point with x/y properties\n\t * @param {object} b point with x/y properties\n\t *\n\t * @return {number}\n\t */\n\tfunction distanceBetween( a, b ) {\n\n\t\tvar dx = a.x - b.x,\n\t\t\tdy = a.y - b.y;\n\n\t\treturn Math.sqrt( dx*dx + dy*dy );\n\n\t}\n\n\t/**\n\t * Applies a CSS transform to the target element.\n\t *\n\t * @param {HTMLElement} element\n\t * @param {string} transform\n\t */\n\tfunction transformElement( element, transform ) {\n\n\t\telement.style.WebkitTransform = transform;\n\t\telement.style.MozTransform = transform;\n\t\telement.style.msTransform = transform;\n\t\telement.style.transform = transform;\n\n\t}\n\n\t/**\n\t * Applies CSS transforms to the slides container. The container\n\t * is transformed from two separate sources: layout and the overview\n\t * mode.\n\t *\n\t * @param {object} transforms\n\t */\n\tfunction transformSlides( transforms ) {\n\n\t\t// Pick up new transforms from arguments\n\t\tif( typeof transforms.layout === 'string' ) slidesTransform.layout = transforms.layout;\n\t\tif( typeof transforms.overview === 'string' ) slidesTransform.overview = transforms.overview;\n\n\t\t// Apply the transforms to the slides container\n\t\tif( slidesTransform.layout ) {\n\t\t\ttransformElement( dom.slides, slidesTransform.layout + ' ' + slidesTransform.overview );\n\t\t}\n\t\telse {\n\t\t\ttransformElement( dom.slides, slidesTransform.overview );\n\t\t}\n\n\t}\n\n\t/**\n\t * Injects the given CSS styles into the DOM.\n\t *\n\t * @param {string} value\n\t */\n\tfunction injectStyleSheet( value ) {\n\n\t\tvar tag = document.createElement( 'style' );\n\t\ttag.type = 'text/css';\n\t\tif( tag.styleSheet ) {\n\t\t\ttag.styleSheet.cssText = value;\n\t\t}\n\t\telse {\n\t\t\ttag.appendChild( document.createTextNode( value ) );\n\t\t}\n\t\tdocument.getElementsByTagName( 'head' )[0].appendChild( tag );\n\n\t}\n\n\t/**\n\t * Find the closest parent that matches the given\n\t * selector.\n\t *\n\t * @param {HTMLElement} target The child element\n\t * @param {String} selector The CSS selector to match\n\t * the parents against\n\t *\n\t * @return {HTMLElement} The matched parent or null\n\t * if no matching parent was found\n\t */\n\tfunction closestParent( target, selector ) {\n\n\t\tvar parent = target.parentNode;\n\n\t\twhile( parent ) {\n\n\t\t\t// There's some overhead doing this each time, we don't\n\t\t\t// want to rewrite the element prototype but should still\n\t\t\t// be enough to feature detect once at startup...\n\t\t\tvar matchesMethod = parent.matches || parent.matchesSelector || parent.msMatchesSelector;\n\n\t\t\t// If we find a match, we're all set\n\t\t\tif( matchesMethod && matchesMethod.call( parent, selector ) ) {\n\t\t\t\treturn parent;\n\t\t\t}\n\n\t\t\t// Keep searching\n\t\t\tparent = parent.parentNode;\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\t/**\n\t * Converts various color input formats to an {r:0,g:0,b:0} object.\n\t *\n\t * @param {string} color The string representation of a color\n\t * @example\n\t * colorToRgb('#000');\n\t * @example\n\t * colorToRgb('#000000');\n\t * @example\n\t * colorToRgb('rgb(0,0,0)');\n\t * @example\n\t * colorToRgb('rgba(0,0,0)');\n\t *\n\t * @return {{r: number, g: number, b: number, [a]: number}|null}\n\t */\n\tfunction colorToRgb( color ) {\n\n\t\tvar hex3 = color.match( /^#([0-9a-f]{3})$/i );\n\t\tif( hex3 && hex3[1] ) {\n\t\t\thex3 = hex3[1];\n\t\t\treturn {\n\t\t\t\tr: parseInt( hex3.charAt( 0 ), 16 ) * 0x11,\n\t\t\t\tg: parseInt( hex3.charAt( 1 ), 16 ) * 0x11,\n\t\t\t\tb: parseInt( hex3.charAt( 2 ), 16 ) * 0x11\n\t\t\t};\n\t\t}\n\n\t\tvar hex6 = color.match( /^#([0-9a-f]{6})$/i );\n\t\tif( hex6 && hex6[1] ) {\n\t\t\thex6 = hex6[1];\n\t\t\treturn {\n\t\t\t\tr: parseInt( hex6.substr( 0, 2 ), 16 ),\n\t\t\t\tg: parseInt( hex6.substr( 2, 2 ), 16 ),\n\t\t\t\tb: parseInt( hex6.substr( 4, 2 ), 16 )\n\t\t\t};\n\t\t}\n\n\t\tvar rgb = color.match( /^rgb\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)$/i );\n\t\tif( rgb ) {\n\t\t\treturn {\n\t\t\t\tr: parseInt( rgb[1], 10 ),\n\t\t\t\tg: parseInt( rgb[2], 10 ),\n\t\t\t\tb: parseInt( rgb[3], 10 )\n\t\t\t};\n\t\t}\n\n\t\tvar rgba = color.match( /^rgba\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\,\\s*([\\d]+|[\\d]*.[\\d]+)\\s*\\)$/i );\n\t\tif( rgba ) {\n\t\t\treturn {\n\t\t\t\tr: parseInt( rgba[1], 10 ),\n\t\t\t\tg: parseInt( rgba[2], 10 ),\n\t\t\t\tb: parseInt( rgba[3], 10 ),\n\t\t\t\ta: parseFloat( rgba[4] )\n\t\t\t};\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\t/**\n\t * Calculates brightness on a scale of 0-255.\n\t *\n\t * @param {string} color See colorToRgb for supported formats.\n\t * @see {@link colorToRgb}\n\t */\n\tfunction colorBrightness( color ) {\n\n\t\tif( typeof color === 'string' ) color = colorToRgb( color );\n\n\t\tif( color ) {\n\t\t\treturn ( color.r * 299 + color.g * 587 + color.b * 114 ) / 1000;\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\t/**\n\t * Returns the remaining height within the parent of the\n\t * target element.\n\t *\n\t * remaining height = [ configured parent height ] - [ current parent height ]\n\t *\n\t * @param {HTMLElement} element\n\t * @param {number} [height]\n\t */\n\tfunction getRemainingHeight( element, height ) {\n\n\t\theight = height || 0;\n\n\t\tif( element ) {\n\t\t\tvar newHeight, oldHeight = element.style.height;\n\n\t\t\t// Change the .stretch element height to 0 in order find the height of all\n\t\t\t// the other elements\n\t\t\telement.style.height = '0px';\n\n\t\t\t// In Overview mode, the parent (.slide) height is set of 700px.\n\t\t\t// Restore it temporarily to its natural height.\n\t\t\telement.parentNode.style.height = 'auto';\n\n\t\t\tnewHeight = height - element.parentNode.offsetHeight;\n\n\t\t\t// Restore the old height, just in case\n\t\t\telement.style.height = oldHeight + 'px';\n\n\t\t\t// Clear the parent (.slide) height. .removeProperty works in IE9+\n\t\t\telement.parentNode.style.removeProperty('height');\n\n\t\t\treturn newHeight;\n\t\t}\n\n\t\treturn height;\n\n\t}\n\n\t/**\n\t * Checks if this instance is being used to print a PDF.\n\t */\n\tfunction isPrintingPDF() {\n\n\t\treturn ( /print-pdf/gi ).test( window.location.search );\n\n\t}\n\n\t/**\n\t * Hides the address bar if we're on a mobile device.\n\t */\n\tfunction hideAddressBar() {\n\n\t\tif( config.hideAddressBar && isMobileDevice ) {\n\t\t\t// Events that should trigger the address bar to hide\n\t\t\twindow.addEventListener( 'load', removeAddressBar, false );\n\t\t\twindow.addEventListener( 'orientationchange', removeAddressBar, false );\n\t\t}\n\n\t}\n\n\t/**\n\t * Causes the address bar to hide on mobile devices,\n\t * more vertical space ftw.\n\t */\n\tfunction removeAddressBar() {\n\n\t\tsetTimeout( function() {\n\t\t\twindow.scrollTo( 0, 1 );\n\t\t}, 10 );\n\n\t}\n\n\t/**\n\t * Dispatches an event of the specified type from the\n\t * reveal DOM element.\n\t */\n\tfunction dispatchEvent( type, args ) {\n\n\t\tvar event = document.createEvent( 'HTMLEvents', 1, 2 );\n\t\tevent.initEvent( type, true, true );\n\t\textend( event, args );\n\t\tdom.wrapper.dispatchEvent( event );\n\n\t\t// If we're in an iframe, post each reveal.js event to the\n\t\t// parent window. Used by the notes plugin\n\t\tdispatchPostMessage( type );\n\n\t}\n\n\t/**\n\t * Dispatched a postMessage of the given type from our window.\n\t */\n\tfunction dispatchPostMessage( type, data ) {\n\n\t\tif( config.postMessageEvents && window.parent !== window.self ) {\n\t\t\tvar message = {\n\t\t\t\tnamespace: 'reveal',\n\t\t\t\teventName: type,\n\t\t\t\tstate: getState()\n\t\t\t};\n\n\t\t\textend( message, data );\n\n\t\t\twindow.parent.postMessage( JSON.stringify( message ), '*' );\n\t\t}\n\n\t}\n\n\t/**\n\t * Wrap all links in 3D goodness.\n\t */\n\tfunction enableRollingLinks() {\n\n\t\tif( features.transforms3d && !( 'msPerspective' in document.body.style ) ) {\n\t\t\tvar anchors = dom.wrapper.querySelectorAll( SLIDES_SELECTOR + ' a' );\n\n\t\t\tfor( var i = 0, len = anchors.length; i < len; i++ ) {\n\t\t\t\tvar anchor = anchors[i];\n\n\t\t\t\tif( anchor.textContent && !anchor.querySelector( '*' ) && ( !anchor.className || !anchor.classList.contains( anchor, 'roll' ) ) ) {\n\t\t\t\t\tvar span = document.createElement('span');\n\t\t\t\t\tspan.setAttribute('data-title', anchor.text);\n\t\t\t\t\tspan.innerHTML = anchor.innerHTML;\n\n\t\t\t\t\tanchor.classList.add( 'roll' );\n\t\t\t\t\tanchor.innerHTML = '';\n\t\t\t\t\tanchor.appendChild(span);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t}\n\n\t/**\n\t * Unwrap all 3D links.\n\t */\n\tfunction disableRollingLinks() {\n\n\t\tvar anchors = dom.wrapper.querySelectorAll( SLIDES_SELECTOR + ' a.roll' );\n\n\t\tfor( var i = 0, len = anchors.length; i < len; i++ ) {\n\t\t\tvar anchor = anchors[i];\n\t\t\tvar span = anchor.querySelector( 'span' );\n\n\t\t\tif( span ) {\n\t\t\t\tanchor.classList.remove( 'roll' );\n\t\t\t\tanchor.innerHTML = span.innerHTML;\n\t\t\t}\n\t\t}\n\n\t}\n\n\t/**\n\t * Bind preview frame links.\n\t *\n\t * @param {string} [selector=a] - selector for anchors\n\t */\n\tfunction enablePreviewLinks( selector ) {\n\n\t\tvar anchors = toArray( document.querySelectorAll( selector ? selector : 'a' ) );\n\n\t\tanchors.forEach( function( element ) {\n\t\t\tif( /^(http|www)/gi.test( element.getAttribute( 'href' ) ) ) {\n\t\t\t\telement.addEventListener( 'click', onPreviewLinkClicked, false );\n\t\t\t}\n\t\t} );\n\n\t}\n\n\t/**\n\t * Unbind preview frame links.\n\t */\n\tfunction disablePreviewLinks( selector ) {\n\n\t\tvar anchors = toArray( document.querySelectorAll( selector ? selector : 'a' ) );\n\n\t\tanchors.forEach( function( element ) {\n\t\t\tif( /^(http|www)/gi.test( element.getAttribute( 'href' ) ) ) {\n\t\t\t\telement.removeEventListener( 'click', onPreviewLinkClicked, false );\n\t\t\t}\n\t\t} );\n\n\t}\n\n\t/**\n\t * Opens a preview window for the target URL.\n\t *\n\t * @param {string} url - url for preview iframe src\n\t */\n\tfunction showPreview( url ) {\n\n\t\tcloseOverlay();\n\n\t\tdom.overlay = document.createElement( 'div' );\n\t\tdom.overlay.classList.add( 'overlay' );\n\t\tdom.overlay.classList.add( 'overlay-preview' );\n\t\tdom.wrapper.appendChild( dom.overlay );\n\n\t\tdom.overlay.innerHTML = [\n\t\t\t'<header>',\n\t\t\t\t'<a class=\"close\" href=\"#\"><span class=\"icon\"></span></a>',\n\t\t\t\t'<a class=\"external\" href=\"'+ url +'\" target=\"_blank\"><span class=\"icon\"></span></a>',\n\t\t\t'</header>',\n\t\t\t'<div class=\"spinner\"></div>',\n\t\t\t'<div class=\"viewport\">',\n\t\t\t\t'<iframe src=\"'+ url +'\"></iframe>',\n\t\t\t\t'<small class=\"viewport-inner\">',\n\t\t\t\t\t'<span class=\"x-frame-error\">Unable to load iframe. This is likely due to the site\\'s policy (x-frame-options).</span>',\n\t\t\t\t'</small>',\n\t\t\t'</div>'\n\t\t].join('');\n\n\t\tdom.overlay.querySelector( 'iframe' ).addEventListener( 'load', function( event ) {\n\t\t\tdom.overlay.classList.add( 'loaded' );\n\t\t}, false );\n\n\t\tdom.overlay.querySelector( '.close' ).addEventListener( 'click', function( event ) {\n\t\t\tcloseOverlay();\n\t\t\tevent.preventDefault();\n\t\t}, false );\n\n\t\tdom.overlay.querySelector( '.external' ).addEventListener( 'click', function( event ) {\n\t\t\tcloseOverlay();\n\t\t}, false );\n\n\t\tsetTimeout( function() {\n\t\t\tdom.overlay.classList.add( 'visible' );\n\t\t}, 1 );\n\n\t}\n\n\t/**\n\t * Open or close help overlay window.\n\t *\n\t * @param {Boolean} [override] Flag which overrides the\n\t * toggle logic and forcibly sets the desired state. True means\n\t * help is open, false means it's closed.\n\t */\n\tfunction toggleHelp( override ){\n\n\t\tif( typeof override === 'boolean' ) {\n\t\t\toverride ? showHelp() : closeOverlay();\n\t\t}\n\t\telse {\n\t\t\tif( dom.overlay ) {\n\t\t\t\tcloseOverlay();\n\t\t\t}\n\t\t\telse {\n\t\t\t\tshowHelp();\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Opens an overlay window with help material.\n\t */\n\tfunction showHelp() {\n\n\t\tif( config.help ) {\n\n\t\t\tcloseOverlay();\n\n\t\t\tdom.overlay = document.createElement( 'div' );\n\t\t\tdom.overlay.classList.add( 'overlay' );\n\t\t\tdom.overlay.classList.add( 'overlay-help' );\n\t\t\tdom.wrapper.appendChild( dom.overlay );\n\n\t\t\tvar html = '<p class=\"title\">Keyboard Shortcuts</p><br/>';\n\n\t\t\thtml += '<table><th>KEY</th><th>ACTION</th>';\n\t\t\tfor( var key in keyboardShortcuts ) {\n\t\t\t\thtml += '<tr><td>' + key + '</td><td>' + keyboardShortcuts[ key ] + '</td></tr>';\n\t\t\t}\n\n\t\t\t// Add custom key bindings that have associated descriptions\n\t\t\tfor( var binding in registeredKeyBindings ) {\n\t\t\t\tif( registeredKeyBindings[binding].key && registeredKeyBindings[binding].description ) {\n\t\t\t\t\thtml += '<tr><td>' + registeredKeyBindings[binding].key + '</td><td>' + registeredKeyBindings[binding].description + '</td></tr>';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\thtml += '</table>';\n\n\t\t\tdom.overlay.innerHTML = [\n\t\t\t\t'<header>',\n\t\t\t\t\t'<a class=\"close\" href=\"#\"><span class=\"icon\"></span></a>',\n\t\t\t\t'</header>',\n\t\t\t\t'<div class=\"viewport\">',\n\t\t\t\t\t'<div class=\"viewport-inner\">'+ html +'</div>',\n\t\t\t\t'</div>'\n\t\t\t].join('');\n\n\t\t\tdom.overlay.querySelector( '.close' ).addEventListener( 'click', function( event ) {\n\t\t\t\tcloseOverlay();\n\t\t\t\tevent.preventDefault();\n\t\t\t}, false );\n\n\t\t\tsetTimeout( function() {\n\t\t\t\tdom.overlay.classList.add( 'visible' );\n\t\t\t}, 1 );\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Closes any currently open overlay.\n\t */\n\tfunction closeOverlay() {\n\n\t\tif( dom.overlay ) {\n\t\t\tdom.overlay.parentNode.removeChild( dom.overlay );\n\t\t\tdom.overlay = null;\n\t\t}\n\n\t}\n\n\t/**\n\t * Applies JavaScript-controlled layout rules to the\n\t * presentation.\n\t */\n\tfunction layout() {\n\n\t\tif( dom.wrapper && !isPrintingPDF() ) {\n\n\t\t\tif( !config.disableLayout ) {\n\n\t\t\t\t// On some mobile devices '100vh' is taller than the visible\n\t\t\t\t// viewport which leads to part of the presentation being\n\t\t\t\t// cut off. To work around this we define our own '--vh' custom\n\t\t\t\t// property where 100x adds up to the correct height.\n\t\t\t\t//\n\t\t\t\t// https://css-tricks.com/the-trick-to-viewport-units-on-mobile/\n\t\t\t\tif( isMobileDevice ) {\n\t\t\t\t\tdocument.documentElement.style.setProperty( '--vh', ( window.innerHeight * 0.01 ) + 'px' );\n\t\t\t\t}\n\n\t\t\t\tvar size = getComputedSlideSize();\n\n\t\t\t\tvar oldScale = scale;\n\n\t\t\t\t// Layout the contents of the slides\n\t\t\t\tlayoutSlideContents( config.width, config.height );\n\n\t\t\t\tdom.slides.style.width = size.width + 'px';\n\t\t\t\tdom.slides.style.height = size.height + 'px';\n\n\t\t\t\t// Determine scale of content to fit within available space\n\t\t\t\tscale = Math.min( size.presentationWidth / size.width, size.presentationHeight / size.height );\n\n\t\t\t\t// Respect max/min scale settings\n\t\t\t\tscale = Math.max( scale, config.minScale );\n\t\t\t\tscale = Math.min( scale, config.maxScale );\n\n\t\t\t\t// Don't apply any scaling styles if scale is 1\n\t\t\t\tif( scale === 1 ) {\n\t\t\t\t\tdom.slides.style.zoom = '';\n\t\t\t\t\tdom.slides.style.left = '';\n\t\t\t\t\tdom.slides.style.top = '';\n\t\t\t\t\tdom.slides.style.bottom = '';\n\t\t\t\t\tdom.slides.style.right = '';\n\t\t\t\t\ttransformSlides( { layout: '' } );\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t// Zoom Scaling\n\t\t\t\t\t// Content remains crisp no matter how much we scale. Side\n\t\t\t\t\t// effects are minor differences in text layout and iframe\n\t\t\t\t\t// viewports changing size. A 200x200 iframe viewport in a\n\t\t\t\t\t// 2x zoomed presentation ends up having a 400x400 viewport.\n\t\t\t\t\tif( scale > 1 && features.zoom && window.devicePixelRatio < 2 ) {\n\t\t\t\t\t\tdom.slides.style.zoom = scale;\n\t\t\t\t\t\tdom.slides.style.left = '';\n\t\t\t\t\t\tdom.slides.style.top = '';\n\t\t\t\t\t\tdom.slides.style.bottom = '';\n\t\t\t\t\t\tdom.slides.style.right = '';\n\t\t\t\t\t\ttransformSlides( { layout: '' } );\n\t\t\t\t\t}\n\t\t\t\t\t// Transform Scaling\n\t\t\t\t\t// Content layout remains the exact same when scaled up.\n\t\t\t\t\t// Side effect is content becoming blurred, especially with\n\t\t\t\t\t// high scale values on ldpi screens.\n\t\t\t\t\telse {\n\t\t\t\t\t\tdom.slides.style.zoom = '';\n\t\t\t\t\t\tdom.slides.style.left = '50%';\n\t\t\t\t\t\tdom.slides.style.top = '50%';\n\t\t\t\t\t\tdom.slides.style.bottom = 'auto';\n\t\t\t\t\t\tdom.slides.style.right = 'auto';\n\t\t\t\t\t\ttransformSlides( { layout: 'translate(-50%, -50%) scale('+ scale +')' } );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Select all slides, vertical and horizontal\n\t\t\t\tvar slides = toArray( dom.wrapper.querySelectorAll( SLIDES_SELECTOR ) );\n\n\t\t\t\tfor( var i = 0, len = slides.length; i < len; i++ ) {\n\t\t\t\t\tvar slide = slides[ i ];\n\n\t\t\t\t\t// Don't bother updating invisible slides\n\t\t\t\t\tif( slide.style.display === 'none' ) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tif( config.center || slide.classList.contains( 'center' ) ) {\n\t\t\t\t\t\t// Vertical stacks are not centred since their section\n\t\t\t\t\t\t// children will be\n\t\t\t\t\t\tif( slide.classList.contains( 'stack' ) ) {\n\t\t\t\t\t\t\tslide.style.top = 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tslide.style.top = Math.max( ( size.height - slide.scrollHeight ) / 2, 0 ) + 'px';\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tslide.style.top = '';\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif( oldScale !== scale ) {\n\t\t\t\t\tdispatchEvent( 'resize', {\n\t\t\t\t\t\t'oldScale': oldScale,\n\t\t\t\t\t\t'scale': scale,\n\t\t\t\t\t\t'size': size\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tupdateProgress();\n\t\t\tupdateParallax();\n\n\t\t\tif( isOverview() ) {\n\t\t\t\tupdateOverview();\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Applies layout logic to the contents of all slides in\n\t * the presentation.\n\t *\n\t * @param {string|number} width\n\t * @param {string|number} height\n\t */\n\tfunction layoutSlideContents( width, height ) {\n\n\t\t// Handle sizing of elements with the 'stretch' class\n\t\ttoArray( dom.slides.querySelectorAll( 'section > .stretch' ) ).forEach( function( element ) {\n\n\t\t\t// Determine how much vertical space we can use\n\t\t\tvar remainingHeight = getRemainingHeight( element, height );\n\n\t\t\t// Consider the aspect ratio of media elements\n\t\t\tif( /(img|video)/gi.test( element.nodeName ) ) {\n\t\t\t\tvar nw = element.naturalWidth || element.videoWidth,\n\t\t\t\t\tnh = element.naturalHeight || element.videoHeight;\n\n\t\t\t\tvar es = Math.min( width / nw, remainingHeight / nh );\n\n\t\t\t\telement.style.width = ( nw * es ) + 'px';\n\t\t\t\telement.style.height = ( nh * es ) + 'px';\n\n\t\t\t}\n\t\t\telse {\n\t\t\t\telement.style.width = width + 'px';\n\t\t\t\telement.style.height = remainingHeight + 'px';\n\t\t\t}\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Calculates the computed pixel size of our slides. These\n\t * values are based on the width and height configuration\n\t * options.\n\t *\n\t * @param {number} [presentationWidth=dom.wrapper.offsetWidth]\n\t * @param {number} [presentationHeight=dom.wrapper.offsetHeight]\n\t */\n\tfunction getComputedSlideSize( presentationWidth, presentationHeight ) {\n\n\t\tvar size = {\n\t\t\t// Slide size\n\t\t\twidth: config.width,\n\t\t\theight: config.height,\n\n\t\t\t// Presentation size\n\t\t\tpresentationWidth: presentationWidth || dom.wrapper.offsetWidth,\n\t\t\tpresentationHeight: presentationHeight || dom.wrapper.offsetHeight\n\t\t};\n\n\t\t// Reduce available space by margin\n\t\tsize.presentationWidth -= ( size.presentationWidth * config.margin );\n\t\tsize.presentationHeight -= ( size.presentationHeight * config.margin );\n\n\t\t// Slide width may be a percentage of available width\n\t\tif( typeof size.width === 'string' && /%$/.test( size.width ) ) {\n\t\t\tsize.width = parseInt( size.width, 10 ) / 100 * size.presentationWidth;\n\t\t}\n\n\t\t// Slide height may be a percentage of available height\n\t\tif( typeof size.height === 'string' && /%$/.test( size.height ) ) {\n\t\t\tsize.height = parseInt( size.height, 10 ) / 100 * size.presentationHeight;\n\t\t}\n\n\t\treturn size;\n\n\t}\n\n\t/**\n\t * Stores the vertical index of a stack so that the same\n\t * vertical slide can be selected when navigating to and\n\t * from the stack.\n\t *\n\t * @param {HTMLElement} stack The vertical stack element\n\t * @param {string|number} [v=0] Index to memorize\n\t */\n\tfunction setPreviousVerticalIndex( stack, v ) {\n\n\t\tif( typeof stack === 'object' && typeof stack.setAttribute === 'function' ) {\n\t\t\tstack.setAttribute( 'data-previous-indexv', v || 0 );\n\t\t}\n\n\t}\n\n\t/**\n\t * Retrieves the vertical index which was stored using\n\t * #setPreviousVerticalIndex() or 0 if no previous index\n\t * exists.\n\t *\n\t * @param {HTMLElement} stack The vertical stack element\n\t */\n\tfunction getPreviousVerticalIndex( stack ) {\n\n\t\tif( typeof stack === 'object' && typeof stack.setAttribute === 'function' && stack.classList.contains( 'stack' ) ) {\n\t\t\t// Prefer manually defined start-indexv\n\t\t\tvar attributeName = stack.hasAttribute( 'data-start-indexv' ) ? 'data-start-indexv' : 'data-previous-indexv';\n\n\t\t\treturn parseInt( stack.getAttribute( attributeName ) || 0, 10 );\n\t\t}\n\n\t\treturn 0;\n\n\t}\n\n\t/**\n\t * Displays the overview of slides (quick nav) by scaling\n\t * down and arranging all slide elements.\n\t */\n\tfunction activateOverview() {\n\n\t\t// Only proceed if enabled in config\n\t\tif( config.overview && !isOverview() ) {\n\n\t\t\toverview = true;\n\n\t\t\tdom.wrapper.classList.add( 'overview' );\n\t\t\tdom.wrapper.classList.remove( 'overview-deactivating' );\n\n\t\t\tif( features.overviewTransitions ) {\n\t\t\t\tsetTimeout( function() {\n\t\t\t\t\tdom.wrapper.classList.add( 'overview-animated' );\n\t\t\t\t}, 1 );\n\t\t\t}\n\n\t\t\t// Don't auto-slide while in overview mode\n\t\t\tcancelAutoSlide();\n\n\t\t\t// Move the backgrounds element into the slide container to\n\t\t\t// that the same scaling is applied\n\t\t\tdom.slides.appendChild( dom.background );\n\n\t\t\t// Clicking on an overview slide navigates to it\n\t\t\ttoArray( dom.wrapper.querySelectorAll( SLIDES_SELECTOR ) ).forEach( function( slide ) {\n\t\t\t\tif( !slide.classList.contains( 'stack' ) ) {\n\t\t\t\t\tslide.addEventListener( 'click', onOverviewSlideClicked, true );\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\t// Calculate slide sizes\n\t\t\tvar margin = 70;\n\t\t\tvar slideSize = getComputedSlideSize();\n\t\t\toverviewSlideWidth = slideSize.width + margin;\n\t\t\toverviewSlideHeight = slideSize.height + margin;\n\n\t\t\t// Reverse in RTL mode\n\t\t\tif( config.rtl ) {\n\t\t\t\toverviewSlideWidth = -overviewSlideWidth;\n\t\t\t}\n\n\t\t\tupdateSlidesVisibility();\n\t\t\tlayoutOverview();\n\t\t\tupdateOverview();\n\n\t\t\tlayout();\n\n\t\t\t// Notify observers of the overview showing\n\t\t\tdispatchEvent( 'overviewshown', {\n\t\t\t\t'indexh': indexh,\n\t\t\t\t'indexv': indexv,\n\t\t\t\t'currentSlide': currentSlide\n\t\t\t} );\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Uses CSS transforms to position all slides in a grid for\n\t * display inside of the overview mode.\n\t */\n\tfunction layoutOverview() {\n\n\t\t// Layout slides\n\t\ttoArray( dom.wrapper.querySelectorAll( HORIZONTAL_SLIDES_SELECTOR ) ).forEach( function( hslide, h ) {\n\t\t\thslide.setAttribute( 'data-index-h', h );\n\t\t\ttransformElement( hslide, 'translate3d(' + ( h * overviewSlideWidth ) + 'px, 0, 0)' );\n\n\t\t\tif( hslide.classList.contains( 'stack' ) ) {\n\n\t\t\t\ttoArray( hslide.querySelectorAll( 'section' ) ).forEach( function( vslide, v ) {\n\t\t\t\t\tvslide.setAttribute( 'data-index-h', h );\n\t\t\t\t\tvslide.setAttribute( 'data-index-v', v );\n\n\t\t\t\t\ttransformElement( vslide, 'translate3d(0, ' + ( v * overviewSlideHeight ) + 'px, 0)' );\n\t\t\t\t} );\n\n\t\t\t}\n\t\t} );\n\n\t\t// Layout slide backgrounds\n\t\ttoArray( dom.background.childNodes ).forEach( function( hbackground, h ) {\n\t\t\ttransformElement( hbackground, 'translate3d(' + ( h * overviewSlideWidth ) + 'px, 0, 0)' );\n\n\t\t\ttoArray( hbackground.querySelectorAll( '.slide-background' ) ).forEach( function( vbackground, v ) {\n\t\t\t\ttransformElement( vbackground, 'translate3d(0, ' + ( v * overviewSlideHeight ) + 'px, 0)' );\n\t\t\t} );\n\t\t} );\n\n\t}\n\n\t/**\n\t * Moves the overview viewport to the current slides.\n\t * Called each time the current slide changes.\n\t */\n\tfunction updateOverview() {\n\n\t\tvar vmin = Math.min( window.innerWidth, window.innerHeight );\n\t\tvar scale = Math.max( vmin / 5, 150 ) / vmin;\n\n\t\ttransformSlides( {\n\t\t\toverview: [\n\t\t\t\t'scale('+ scale +')',\n\t\t\t\t'translateX('+ ( -indexh * overviewSlideWidth ) +'px)',\n\t\t\t\t'translateY('+ ( -indexv * overviewSlideHeight ) +'px)'\n\t\t\t].join( ' ' )\n\t\t} );\n\n\t}\n\n\t/**\n\t * Exits the slide overview and enters the currently\n\t * active slide.\n\t */\n\tfunction deactivateOverview() {\n\n\t\t// Only proceed if enabled in config\n\t\tif( config.overview ) {\n\n\t\t\toverview = false;\n\n\t\t\tdom.wrapper.classList.remove( 'overview' );\n\t\t\tdom.wrapper.classList.remove( 'overview-animated' );\n\n\t\t\t// Temporarily add a class so that transitions can do different things\n\t\t\t// depending on whether they are exiting/entering overview, or just\n\t\t\t// moving from slide to slide\n\t\t\tdom.wrapper.classList.add( 'overview-deactivating' );\n\n\t\t\tsetTimeout( function () {\n\t\t\t\tdom.wrapper.classList.remove( 'overview-deactivating' );\n\t\t\t}, 1 );\n\n\t\t\t// Move the background element back out\n\t\t\tdom.wrapper.appendChild( dom.background );\n\n\t\t\t// Clean up changes made to slides\n\t\t\ttoArray( dom.wrapper.querySelectorAll( SLIDES_SELECTOR ) ).forEach( function( slide ) {\n\t\t\t\ttransformElement( slide, '' );\n\n\t\t\t\tslide.removeEventListener( 'click', onOverviewSlideClicked, true );\n\t\t\t} );\n\n\t\t\t// Clean up changes made to backgrounds\n\t\t\ttoArray( dom.background.querySelectorAll( '.slide-background' ) ).forEach( function( background ) {\n\t\t\t\ttransformElement( background, '' );\n\t\t\t} );\n\n\t\t\ttransformSlides( { overview: '' } );\n\n\t\t\tslide( indexh, indexv );\n\n\t\t\tlayout();\n\n\t\t\tcueAutoSlide();\n\n\t\t\t// Notify observers of the overview hiding\n\t\t\tdispatchEvent( 'overviewhidden', {\n\t\t\t\t'indexh': indexh,\n\t\t\t\t'indexv': indexv,\n\t\t\t\t'currentSlide': currentSlide\n\t\t\t} );\n\n\t\t}\n\t}\n\n\t/**\n\t * Toggles the slide overview mode on and off.\n\t *\n\t * @param {Boolean} [override] Flag which overrides the\n\t * toggle logic and forcibly sets the desired state. True means\n\t * overview is open, false means it's closed.\n\t */\n\tfunction toggleOverview( override ) {\n\n\t\tif( typeof override === 'boolean' ) {\n\t\t\toverride ? activateOverview() : deactivateOverview();\n\t\t}\n\t\telse {\n\t\t\tisOverview() ? deactivateOverview() : activateOverview();\n\t\t}\n\n\t}\n\n\t/**\n\t * Checks if the overview is currently active.\n\t *\n\t * @return {Boolean} true if the overview is active,\n\t * false otherwise\n\t */\n\tfunction isOverview() {\n\n\t\treturn overview;\n\n\t}\n\n\t/**\n\t * Return a hash URL that will resolve to the given slide location.\n\t *\n\t * @param {HTMLElement} [slide=currentSlide] The slide to link to\n\t */\n\tfunction locationHash( slide ) {\n\n\t\tvar url = '/';\n\n\t\t// Attempt to create a named link based on the slide's ID\n\t\tvar s = slide || currentSlide;\n\t\tvar id = s ? s.getAttribute( 'id' ) : null;\n\t\tif( id ) {\n\t\t\tid = encodeURIComponent( id );\n\t\t}\n\n\t\tvar index = getIndices( slide );\n\t\tif( !config.fragmentInURL ) {\n\t\t\tindex.f = undefined;\n\t\t}\n\n\t\t// If the current slide has an ID, use that as a named link,\n\t\t// but we don't support named links with a fragment index\n\t\tif( typeof id === 'string' && id.length && index.f === undefined ) {\n\t\t\turl = '/' + id;\n\t\t}\n\t\t// Otherwise use the /h/v index\n\t\telse {\n\t\t\tvar hashIndexBase = config.hashOneBasedIndex ? 1 : 0;\n\t\t\tif( index.h > 0 || index.v > 0 || index.f !== undefined ) url += index.h + hashIndexBase;\n\t\t\tif( index.v > 0 || index.f !== undefined ) url += '/' + (index.v + hashIndexBase );\n\t\t\tif( index.f !== undefined ) url += '/' + index.f;\n\t\t}\n\n\t\treturn url;\n\n\t}\n\n\t/**\n\t * Checks if the current or specified slide is vertical\n\t * (nested within another slide).\n\t *\n\t * @param {HTMLElement} [slide=currentSlide] The slide to check\n\t * orientation of\n\t * @return {Boolean}\n\t */\n\tfunction isVerticalSlide( slide ) {\n\n\t\t// Prefer slide argument, otherwise use current slide\n\t\tslide = slide ? slide : currentSlide;\n\n\t\treturn slide && slide.parentNode && !!slide.parentNode.nodeName.match( /section/i );\n\n\t}\n\n\t/**\n\t * Handling the fullscreen functionality via the fullscreen API\n\t *\n\t * @see http://fullscreen.spec.whatwg.org/\n\t * @see https://developer.mozilla.org/en-US/docs/DOM/Using_fullscreen_mode\n\t */\n\tfunction enterFullscreen() {\n\n\t\tvar element = document.documentElement;\n\n\t\t// Check which implementation is available\n\t\tvar requestMethod = element.requestFullscreen ||\n\t\t\t\t\t\t\telement.webkitRequestFullscreen ||\n\t\t\t\t\t\t\telement.webkitRequestFullScreen ||\n\t\t\t\t\t\t\telement.mozRequestFullScreen ||\n\t\t\t\t\t\t\telement.msRequestFullscreen;\n\n\t\tif( requestMethod ) {\n\t\t\trequestMethod.apply( element );\n\t\t}\n\n\t}\n\n\t/**\n\t * Shows the mouse pointer after it has been hidden with\n\t * #hideCursor.\n\t */\n\tfunction showCursor() {\n\n\t\tif( cursorHidden ) {\n\t\t\tcursorHidden = false;\n\t\t\tdom.wrapper.style.cursor = '';\n\t\t}\n\n\t}\n\n\t/**\n\t * Hides the mouse pointer when it's on top of the .reveal\n\t * container.\n\t */\n\tfunction hideCursor() {\n\n\t\tif( cursorHidden === false ) {\n\t\t\tcursorHidden = true;\n\t\t\tdom.wrapper.style.cursor = 'none';\n\t\t}\n\n\t}\n\n\t/**\n\t * Enters the paused mode which fades everything on screen to\n\t * black.\n\t */\n\tfunction pause() {\n\n\t\tif( config.pause ) {\n\t\t\tvar wasPaused = dom.wrapper.classList.contains( 'paused' );\n\n\t\t\tcancelAutoSlide();\n\t\t\tdom.wrapper.classList.add( 'paused' );\n\n\t\t\tif( wasPaused === false ) {\n\t\t\t\tdispatchEvent( 'paused' );\n\t\t\t}\n\t\t}\n\n\t}\n\n\t/**\n\t * Exits from the paused mode.\n\t */\n\tfunction resume() {\n\n\t\tvar wasPaused = dom.wrapper.classList.contains( 'paused' );\n\t\tdom.wrapper.classList.remove( 'paused' );\n\n\t\tcueAutoSlide();\n\n\t\tif( wasPaused ) {\n\t\t\tdispatchEvent( 'resumed' );\n\t\t}\n\n\t}\n\n\t/**\n\t * Toggles the paused mode on and off.\n\t */\n\tfunction togglePause( override ) {\n\n\t\tif( typeof override === 'boolean' ) {\n\t\t\toverride ? pause() : resume();\n\t\t}\n\t\telse {\n\t\t\tisPaused() ? resume() : pause();\n\t\t}\n\n\t}\n\n\t/**\n\t * Checks if we are currently in the paused mode.\n\t *\n\t * @return {Boolean}\n\t */\n\tfunction isPaused() {\n\n\t\treturn dom.wrapper.classList.contains( 'paused' );\n\n\t}\n\n\t/**\n\t * Toggles the auto slide mode on and off.\n\t *\n\t * @param {Boolean} [override] Flag which sets the desired state.\n\t * True means autoplay starts, false means it stops.\n\t */\n\n\tfunction toggleAutoSlide( override ) {\n\n\t\tif( typeof override === 'boolean' ) {\n\t\t\toverride ? resumeAutoSlide() : pauseAutoSlide();\n\t\t}\n\n\t\telse {\n\t\t\tautoSlidePaused ? resumeAutoSlide() : pauseAutoSlide();\n\t\t}\n\n\t}\n\n\t/**\n\t * Checks if the auto slide mode is currently on.\n\t *\n\t * @return {Boolean}\n\t */\n\tfunction isAutoSliding() {\n\n\t\treturn !!( autoSlide && !autoSlidePaused );\n\n\t}\n\n\t/**\n\t * Steps from the current point in the presentation to the\n\t * slide which matches the specified horizontal and vertical\n\t * indices.\n\t *\n\t * @param {number} [h=indexh] Horizontal index of the target slide\n\t * @param {number} [v=indexv] Vertical index of the target slide\n\t * @param {number} [f] Index of a fragment within the\n\t * target slide to activate\n\t * @param {number} [o] Origin for use in multimaster environments\n\t */\n\tfunction slide( h, v, f, o ) {\n\n\t\t// Remember where we were at before\n\t\tpreviousSlide = currentSlide;\n\n\t\t// Query all horizontal slides in the deck\n\t\tvar horizontalSlides = dom.wrapper.querySelectorAll( HORIZONTAL_SLIDES_SELECTOR );\n\n\t\t// Abort if there are no slides\n\t\tif( horizontalSlides.length === 0 ) return;\n\n\t\t// If no vertical index is specified and the upcoming slide is a\n\t\t// stack, resume at its previous vertical index\n\t\tif( v === undefined && !isOverview() ) {\n\t\t\tv = getPreviousVerticalIndex( horizontalSlides[ h ] );\n\t\t}\n\n\t\t// If we were on a vertical stack, remember what vertical index\n\t\t// it was on so we can resume at the same position when returning\n\t\tif( previousSlide && previousSlide.parentNode && previousSlide.parentNode.classList.contains( 'stack' ) ) {\n\t\t\tsetPreviousVerticalIndex( previousSlide.parentNode, indexv );\n\t\t}\n\n\t\t// Remember the state before this slide\n\t\tvar stateBefore = state.concat();\n\n\t\t// Reset the state array\n\t\tstate.length = 0;\n\n\t\tvar indexhBefore = indexh || 0,\n\t\t\tindexvBefore = indexv || 0;\n\n\t\t// Activate and transition to the new slide\n\t\tindexh = updateSlides( HORIZONTAL_SLIDES_SELECTOR, h === undefined ? indexh : h );\n\t\tindexv = updateSlides( VERTICAL_SLIDES_SELECTOR, v === undefined ? indexv : v );\n\n\t\t// Update the visibility of slides now that the indices have changed\n\t\tupdateSlidesVisibility();\n\n\t\tlayout();\n\n\t\t// Update the overview if it's currently active\n\t\tif( isOverview() ) {\n\t\t\tupdateOverview();\n\t\t}\n\n\t\t// Find the current horizontal slide and any possible vertical slides\n\t\t// within it\n\t\tvar currentHorizontalSlide = horizontalSlides[ indexh ],\n\t\t\tcurrentVerticalSlides = currentHorizontalSlide.querySelectorAll( 'section' );\n\n\t\t// Store references to the previous and current slides\n\t\tcurrentSlide = currentVerticalSlides[ indexv ] || currentHorizontalSlide;\n\n\t\t// Show fragment, if specified\n\t\tif( typeof f !== 'undefined' ) {\n\t\t\tnavigateFragment( f );\n\t\t}\n\n\t\t// Dispatch an event if the slide changed\n\t\tvar slideChanged = ( indexh !== indexhBefore || indexv !== indexvBefore );\n\t\tif (!slideChanged) {\n\t\t\t// Ensure that the previous slide is never the same as the current\n\t\t\tpreviousSlide = null;\n\t\t}\n\n\t\t// Solves an edge case where the previous slide maintains the\n\t\t// 'present' class when navigating between adjacent vertical\n\t\t// stacks\n\t\tif( previousSlide && previousSlide !== currentSlide ) {\n\t\t\tpreviousSlide.classList.remove( 'present' );\n\t\t\tpreviousSlide.setAttribute( 'aria-hidden', 'true' );\n\n\t\t\t// Reset all slides upon navigate to home\n\t\t\t// Issue: #285\n\t\t\tif ( dom.wrapper.querySelector( HOME_SLIDE_SELECTOR ).classList.contains( 'present' ) ) {\n\t\t\t\t// Launch async task\n\t\t\t\tsetTimeout( function () {\n\t\t\t\t\tvar slides = toArray( dom.wrapper.querySelectorAll( HORIZONTAL_SLIDES_SELECTOR + '.stack') ), i;\n\t\t\t\t\tfor( i in slides ) {\n\t\t\t\t\t\tif( slides[i] ) {\n\t\t\t\t\t\t\t// Reset stack\n\t\t\t\t\t\t\tsetPreviousVerticalIndex( slides[i], 0 );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, 0 );\n\t\t\t}\n\t\t}\n\n\t\t// Apply the new state\n\t\tstateLoop: for( var i = 0, len = state.length; i < len; i++ ) {\n\t\t\t// Check if this state existed on the previous slide. If it\n\t\t\t// did, we will avoid adding it repeatedly\n\t\t\tfor( var j = 0; j < stateBefore.length; j++ ) {\n\t\t\t\tif( stateBefore[j] === state[i] ) {\n\t\t\t\t\tstateBefore.splice( j, 1 );\n\t\t\t\t\tcontinue stateLoop;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tdocument.documentElement.classList.add( state[i] );\n\n\t\t\t// Dispatch custom event matching the state's name\n\t\t\tdispatchEvent( state[i] );\n\t\t}\n\n\t\t// Clean up the remains of the previous state\n\t\twhile( stateBefore.length ) {\n\t\t\tdocument.documentElement.classList.remove( stateBefore.pop() );\n\t\t}\n\n\t\tif( slideChanged ) {\n\t\t\tdispatchEvent( 'slidechanged', {\n\t\t\t\t'indexh': indexh,\n\t\t\t\t'indexv': indexv,\n\t\t\t\t'previousSlide': previousSlide,\n\t\t\t\t'currentSlide': currentSlide,\n\t\t\t\t'origin': o\n\t\t\t} );\n\t\t}\n\n\t\t// Handle embedded content\n\t\tif( slideChanged || !previousSlide ) {\n\t\t\tstopEmbeddedContent( previousSlide );\n\t\t\tstartEmbeddedContent( currentSlide );\n\t\t}\n\n\t\t// Announce the current slide contents, for screen readers\n\t\tdom.statusDiv.textContent = getStatusText( currentSlide );\n\n\t\tupdateControls();\n\t\tupdateProgress();\n\t\tupdateBackground();\n\t\tupdateParallax();\n\t\tupdateSlideNumber();\n\t\tupdateNotes();\n\t\tupdateFragments();\n\n\t\t// Update the URL hash\n\t\twriteURL();\n\n\t\tcueAutoSlide();\n\n\t}\n\n\t/**\n\t * Syncs the presentation with the current DOM. Useful\n\t * when new slides or control elements are added or when\n\t * the configuration has changed.\n\t */\n\tfunction sync() {\n\n\t\t// Subscribe to input\n\t\tremoveEventListeners();\n\t\taddEventListeners();\n\n\t\t// Force a layout to make sure the current config is accounted for\n\t\tlayout();\n\n\t\t// Reflect the current autoSlide value\n\t\tautoSlide = config.autoSlide;\n\n\t\t// Start auto-sliding if it's enabled\n\t\tcueAutoSlide();\n\n\t\t// Re-create the slide backgrounds\n\t\tcreateBackgrounds();\n\n\t\t// Write the current hash to the URL\n\t\twriteURL();\n\n\t\tsortAllFragments();\n\n\t\tupdateControls();\n\t\tupdateProgress();\n\t\tupdateSlideNumber();\n\t\tupdateSlidesVisibility();\n\t\tupdateBackground( true );\n\t\tupdateNotesVisibility();\n\t\tupdateNotes();\n\n\t\tformatEmbeddedContent();\n\n\t\t// Start or stop embedded content depending on global config\n\t\tif( config.autoPlayMedia === false ) {\n\t\t\tstopEmbeddedContent( currentSlide, { unloadIframes: false } );\n\t\t}\n\t\telse {\n\t\t\tstartEmbeddedContent( currentSlide );\n\t\t}\n\n\t\tif( isOverview() ) {\n\t\t\tlayoutOverview();\n\t\t}\n\n\t}\n\n\t/**\n\t * Updates reveal.js to keep in sync with new slide attributes. For\n\t * example, if you add a new `data-background-image` you can call\n\t * this to have reveal.js render the new background image.\n\t *\n\t * Similar to #sync() but more efficient when you only need to\n\t * refresh a specific slide.\n\t *\n\t * @param {HTMLElement} slide\n\t */\n\tfunction syncSlide( slide ) {\n\n\t\t// Default to the current slide\n\t\tslide = slide || currentSlide;\n\n\t\tsyncBackground( slide );\n\t\tsyncFragments( slide );\n\n\t\tloadSlide( slide );\n\n\t\tupdateBackground();\n\t\tupdateNotes();\n\n\t}\n\n\t/**\n\t * Formats the fragments on the given slide so that they have\n\t * valid indices. Call this if fragments are changed in the DOM\n\t * after reveal.js has already initialized.\n\t *\n\t * @param {HTMLElement} slide\n\t * @return {Array} a list of the HTML fragments that were synced\n\t */\n\tfunction syncFragments( slide ) {\n\n\t\t// Default to the current slide\n\t\tslide = slide || currentSlide;\n\n\t\treturn sortFragments( slide.querySelectorAll( '.fragment' ) );\n\n\t}\n\n\t/**\n\t * Resets all vertical slides so that only the first\n\t * is visible.\n\t */\n\tfunction resetVerticalSlides() {\n\n\t\tvar horizontalSlides = toArray( dom.wrapper.querySelectorAll( HORIZONTAL_SLIDES_SELECTOR ) );\n\t\thorizontalSlides.forEach( function( horizontalSlide ) {\n\n\t\t\tvar verticalSlides = toArray( horizontalSlide.querySelectorAll( 'section' ) );\n\t\t\tverticalSlides.forEach( function( verticalSlide, y ) {\n\n\t\t\t\tif( y > 0 ) {\n\t\t\t\t\tverticalSlide.classList.remove( 'present' );\n\t\t\t\t\tverticalSlide.classList.remove( 'past' );\n\t\t\t\t\tverticalSlide.classList.add( 'future' );\n\t\t\t\t\tverticalSlide.setAttribute( 'aria-hidden', 'true' );\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Sorts and formats all of fragments in the\n\t * presentation.\n\t */\n\tfunction sortAllFragments() {\n\n\t\tvar horizontalSlides = toArray( dom.wrapper.querySelectorAll( HORIZONTAL_SLIDES_SELECTOR ) );\n\t\thorizontalSlides.forEach( function( horizontalSlide ) {\n\n\t\t\tvar verticalSlides = toArray( horizontalSlide.querySelectorAll( 'section' ) );\n\t\t\tverticalSlides.forEach( function( verticalSlide, y ) {\n\n\t\t\t\tsortFragments( verticalSlide.querySelectorAll( '.fragment' ) );\n\n\t\t\t} );\n\n\t\t\tif( verticalSlides.length === 0 ) sortFragments( horizontalSlide.querySelectorAll( '.fragment' ) );\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Randomly shuffles all slides in the deck.\n\t */\n\tfunction shuffle() {\n\n\t\tvar slides = toArray( dom.wrapper.querySelectorAll( HORIZONTAL_SLIDES_SELECTOR ) );\n\n\t\tslides.forEach( function( slide ) {\n\n\t\t\t// Insert this slide next to another random slide. This may\n\t\t\t// cause the slide to insert before itself but that's fine.\n\t\t\tdom.slides.insertBefore( slide, slides[ Math.floor( Math.random() * slides.length ) ] );\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Updates one dimension of slides by showing the slide\n\t * with the specified index.\n\t *\n\t * @param {string} selector A CSS selector that will fetch\n\t * the group of slides we are working with\n\t * @param {number} index The index of the slide that should be\n\t * shown\n\t *\n\t * @return {number} The index of the slide that is now shown,\n\t * might differ from the passed in index if it was out of\n\t * bounds.\n\t */\n\tfunction updateSlides( selector, index ) {\n\n\t\t// Select all slides and convert the NodeList result to\n\t\t// an array\n\t\tvar slides = toArray( dom.wrapper.querySelectorAll( selector ) ),\n\t\t\tslidesLength = slides.length;\n\n\t\tvar printMode = isPrintingPDF();\n\n\t\tif( slidesLength ) {\n\n\t\t\t// Should the index loop?\n\t\t\tif( config.loop ) {\n\t\t\t\tindex %= slidesLength;\n\n\t\t\t\tif( index < 0 ) {\n\t\t\t\t\tindex = slidesLength + index;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Enforce max and minimum index bounds\n\t\t\tindex = Math.max( Math.min( index, slidesLength - 1 ), 0 );\n\n\t\t\tfor( var i = 0; i < slidesLength; i++ ) {\n\t\t\t\tvar element = slides[i];\n\n\t\t\t\tvar reverse = config.rtl && !isVerticalSlide( element );\n\n\t\t\t\telement.classList.remove( 'past' );\n\t\t\t\telement.classList.remove( 'present' );\n\t\t\t\telement.classList.remove( 'future' );\n\n\t\t\t\t// http://www.w3.org/html/wg/drafts/html/master/editing.html#the-hidden-attribute\n\t\t\t\telement.setAttribute( 'hidden', '' );\n\t\t\t\telement.setAttribute( 'aria-hidden', 'true' );\n\n\t\t\t\t// If this element contains vertical slides\n\t\t\t\tif( element.querySelector( 'section' ) ) {\n\t\t\t\t\telement.classList.add( 'stack' );\n\t\t\t\t}\n\n\t\t\t\t// If we're printing static slides, all slides are \"present\"\n\t\t\t\tif( printMode ) {\n\t\t\t\t\telement.classList.add( 'present' );\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif( i < index ) {\n\t\t\t\t\t// Any element previous to index is given the 'past' class\n\t\t\t\t\telement.classList.add( reverse ? 'future' : 'past' );\n\n\t\t\t\t\tif( config.fragments ) {\n\t\t\t\t\t\t// Show all fragments in prior slides\n\t\t\t\t\t\ttoArray( element.querySelectorAll( '.fragment' ) ).forEach( function( fragment ) {\n\t\t\t\t\t\t\tfragment.classList.add( 'visible' );\n\t\t\t\t\t\t\tfragment.classList.remove( 'current-fragment' );\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if( i > index ) {\n\t\t\t\t\t// Any element subsequent to index is given the 'future' class\n\t\t\t\t\telement.classList.add( reverse ? 'past' : 'future' );\n\n\t\t\t\t\tif( config.fragments ) {\n\t\t\t\t\t\t// Hide all fragments in future slides\n\t\t\t\t\t\ttoArray( element.querySelectorAll( '.fragment.visible' ) ).forEach( function( fragment ) {\n\t\t\t\t\t\t\tfragment.classList.remove( 'visible' );\n\t\t\t\t\t\t\tfragment.classList.remove( 'current-fragment' );\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Mark the current slide as present\n\t\t\tslides[index].classList.add( 'present' );\n\t\t\tslides[index].removeAttribute( 'hidden' );\n\t\t\tslides[index].removeAttribute( 'aria-hidden' );\n\n\t\t\t// If this slide has a state associated with it, add it\n\t\t\t// onto the current state of the deck\n\t\t\tvar slideState = slides[index].getAttribute( 'data-state' );\n\t\t\tif( slideState ) {\n\t\t\t\tstate = state.concat( slideState.split( ' ' ) );\n\t\t\t}\n\n\t\t}\n\t\telse {\n\t\t\t// Since there are no slides we can't be anywhere beyond the\n\t\t\t// zeroth index\n\t\t\tindex = 0;\n\t\t}\n\n\t\treturn index;\n\n\t}\n\n\t/**\n\t * Optimization method; hide all slides that are far away\n\t * from the present slide.\n\t */\n\tfunction updateSlidesVisibility() {\n\n\t\t// Select all slides and convert the NodeList result to\n\t\t// an array\n\t\tvar horizontalSlides = toArray( dom.wrapper.querySelectorAll( HORIZONTAL_SLIDES_SELECTOR ) ),\n\t\t\thorizontalSlidesLength = horizontalSlides.length,\n\t\t\tdistanceX,\n\t\t\tdistanceY;\n\n\t\tif( horizontalSlidesLength && typeof indexh !== 'undefined' ) {\n\n\t\t\t// The number of steps away from the present slide that will\n\t\t\t// be visible\n\t\t\tvar viewDistance = isOverview() ? 10 : config.viewDistance;\n\n\t\t\t// Shorten the view distance on devices that typically have\n\t\t\t// less resources\n\t\t\tif( isMobileDevice ) {\n\t\t\t\tviewDistance = isOverview() ? 6 : config.mobileViewDistance;\n\t\t\t}\n\n\t\t\t// All slides need to be visible when exporting to PDF\n\t\t\tif( isPrintingPDF() ) {\n\t\t\t\tviewDistance = Number.MAX_VALUE;\n\t\t\t}\n\n\t\t\tfor( var x = 0; x < horizontalSlidesLength; x++ ) {\n\t\t\t\tvar horizontalSlide = horizontalSlides[x];\n\n\t\t\t\tvar verticalSlides = toArray( horizontalSlide.querySelectorAll( 'section' ) ),\n\t\t\t\t\tverticalSlidesLength = verticalSlides.length;\n\n\t\t\t\t// Determine how far away this slide is from the present\n\t\t\t\tdistanceX = Math.abs( ( indexh || 0 ) - x ) || 0;\n\n\t\t\t\t// If the presentation is looped, distance should measure\n\t\t\t\t// 1 between the first and last slides\n\t\t\t\tif( config.loop ) {\n\t\t\t\t\tdistanceX = Math.abs( ( ( indexh || 0 ) - x ) % ( horizontalSlidesLength - viewDistance ) ) || 0;\n\t\t\t\t}\n\n\t\t\t\t// Show the horizontal slide if it's within the view distance\n\t\t\t\tif( distanceX < viewDistance ) {\n\t\t\t\t\tloadSlide( horizontalSlide );\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tunloadSlide( horizontalSlide );\n\t\t\t\t}\n\n\t\t\t\tif( verticalSlidesLength ) {\n\n\t\t\t\t\tvar oy = getPreviousVerticalIndex( horizontalSlide );\n\n\t\t\t\t\tfor( var y = 0; y < verticalSlidesLength; y++ ) {\n\t\t\t\t\t\tvar verticalSlide = verticalSlides[y];\n\n\t\t\t\t\t\tdistanceY = x === ( indexh || 0 ) ? Math.abs( ( indexv || 0 ) - y ) : Math.abs( y - oy );\n\n\t\t\t\t\t\tif( distanceX + distanceY < viewDistance ) {\n\t\t\t\t\t\t\tloadSlide( verticalSlide );\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tunloadSlide( verticalSlide );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Flag if there are ANY vertical slides, anywhere in the deck\n\t\t\tif( hasVerticalSlides() ) {\n\t\t\t\tdom.wrapper.classList.add( 'has-vertical-slides' );\n\t\t\t}\n\t\t\telse {\n\t\t\t\tdom.wrapper.classList.remove( 'has-vertical-slides' );\n\t\t\t}\n\n\t\t\t// Flag if there are ANY horizontal slides, anywhere in the deck\n\t\t\tif( hasHorizontalSlides() ) {\n\t\t\t\tdom.wrapper.classList.add( 'has-horizontal-slides' );\n\t\t\t}\n\t\t\telse {\n\t\t\t\tdom.wrapper.classList.remove( 'has-horizontal-slides' );\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Pick up notes from the current slide and display them\n\t * to the viewer.\n\t *\n\t * @see {@link config.showNotes}\n\t */\n\tfunction updateNotes() {\n\n\t\tif( config.showNotes && dom.speakerNotes && currentSlide && !isPrintingPDF() ) {\n\n\t\t\tdom.speakerNotes.innerHTML = getSlideNotes() || '<span class=\"notes-placeholder\">No notes on this slide.</span>';\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Updates the visibility of the speaker notes sidebar that\n\t * is used to share annotated slides. The notes sidebar is\n\t * only visible if showNotes is true and there are notes on\n\t * one or more slides in the deck.\n\t */\n\tfunction updateNotesVisibility() {\n\n\t\tif( config.showNotes && hasNotes() ) {\n\t\t\tdom.wrapper.classList.add( 'show-notes' );\n\t\t}\n\t\telse {\n\t\t\tdom.wrapper.classList.remove( 'show-notes' );\n\t\t}\n\n\t}\n\n\t/**\n\t * Checks if there are speaker notes for ANY slide in the\n\t * presentation.\n\t */\n\tfunction hasNotes() {\n\n\t\treturn dom.slides.querySelectorAll( '[data-notes], aside.notes' ).length > 0;\n\n\t}\n\n\t/**\n\t * Updates the progress bar to reflect the current slide.\n\t */\n\tfunction updateProgress() {\n\n\t\t// Update progress if enabled\n\t\tif( config.progress && dom.progressbar ) {\n\n\t\t\tdom.progressbar.style.width = getProgress() * dom.wrapper.offsetWidth + 'px';\n\n\t\t}\n\n\t}\n\n\n\t/**\n\t * Updates the slide number to match the current slide.\n\t */\n\tfunction updateSlideNumber() {\n\n\t\t// Update slide number if enabled\n\t\tif( config.slideNumber && dom.slideNumber ) {\n\t\t\tdom.slideNumber.innerHTML = getSlideNumber();\n\t\t}\n\n\t}\n\n\t/**\n\t * Returns the HTML string corresponding to the current slide number,\n\t * including formatting.\n\t */\n\tfunction getSlideNumber( slide ) {\n\n\t\tvar value;\n\t\tvar format = 'h.v';\n\t\tif( slide === undefined ) {\n\t\t\tslide = currentSlide;\n\t\t}\n\n\t\tif ( typeof config.slideNumber === 'function' ) {\n\t\t\tvalue = config.slideNumber( slide );\n\t\t} else {\n\t\t\t// Check if a custom number format is available\n\t\t\tif( typeof config.slideNumber === 'string' ) {\n\t\t\t\tformat = config.slideNumber;\n\t\t\t}\n\n\t\t\t// If there are ONLY vertical slides in this deck, always use\n\t\t\t// a flattened slide number\n\t\t\tif( !/c/.test( format ) && dom.wrapper.querySelectorAll( HORIZONTAL_SLIDES_SELECTOR ).length === 1 ) {\n\t\t\t\tformat = 'c';\n\t\t\t}\n\n\t\t\tvalue = [];\n\t\t\tswitch( format ) {\n\t\t\t\tcase 'c':\n\t\t\t\t\tvalue.push( getSlidePastCount( slide ) + 1 );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'c/t':\n\t\t\t\t\tvalue.push( getSlidePastCount( slide ) + 1, '/', getTotalSlides() );\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tvar indices = getIndices( slide );\n\t\t\t\t\tvalue.push( indices.h + 1 );\n\t\t\t\t\tvar sep = format === 'h/v' ? '/' : '.';\n\t\t\t\t\tif( isVerticalSlide( slide ) ) value.push( sep, indices.v + 1 );\n\t\t\t}\n\t\t}\n\n\t\tvar url = '#' + locationHash( slide );\n\t\treturn formatSlideNumber( value[0], value[1], value[2], url );\n\n\t}\n\n\t/**\n\t * Applies HTML formatting to a slide number before it's\n\t * written to the DOM.\n\t *\n\t * @param {number} a Current slide\n\t * @param {string} delimiter Character to separate slide numbers\n\t * @param {(number|*)} b Total slides\n\t * @param {HTMLElement} [url='#'+locationHash()] The url to link to\n\t * @return {string} HTML string fragment\n\t */\n\tfunction formatSlideNumber( a, delimiter, b, url ) {\n\n\t\tif( url === undefined ) {\n\t\t\turl = '#' + locationHash();\n\t\t}\n\t\tif( typeof b === 'number' && !isNaN( b ) ) {\n\t\t\treturn  '<a href=\"' + url + '\">' +\n\t\t\t\t\t'<span class=\"slide-number-a\">'+ a +'</span>' +\n\t\t\t\t\t'<span class=\"slide-number-delimiter\">'+ delimiter +'</span>' +\n\t\t\t\t\t'<span class=\"slide-number-b\">'+ b +'</span>' +\n\t\t\t\t\t'</a>';\n\t\t}\n\t\telse {\n\t\t\treturn '<a href=\"' + url + '\">' +\n\t\t\t       '<span class=\"slide-number-a\">'+ a +'</span>' +\n\t\t\t       '</a>';\n\t\t}\n\n\t}\n\n\t/**\n\t * Updates the state of all control/navigation arrows.\n\t */\n\tfunction updateControls() {\n\n\t\tvar routes = availableRoutes();\n\t\tvar fragments = availableFragments();\n\n\t\t// Remove the 'enabled' class from all directions\n\t\tdom.controlsLeft.concat( dom.controlsRight )\n\t\t\t\t\t\t.concat( dom.controlsUp )\n\t\t\t\t\t\t.concat( dom.controlsDown )\n\t\t\t\t\t\t.concat( dom.controlsPrev )\n\t\t\t\t\t\t.concat( dom.controlsNext ).forEach( function( node ) {\n\t\t\tnode.classList.remove( 'enabled' );\n\t\t\tnode.classList.remove( 'fragmented' );\n\n\t\t\t// Set 'disabled' attribute on all directions\n\t\t\tnode.setAttribute( 'disabled', 'disabled' );\n\t\t} );\n\n\t\t// Add the 'enabled' class to the available routes; remove 'disabled' attribute to enable buttons\n\t\tif( routes.left ) dom.controlsLeft.forEach( function( el ) { el.classList.add( 'enabled' ); el.removeAttribute( 'disabled' ); } );\n\t\tif( routes.right ) dom.controlsRight.forEach( function( el ) { el.classList.add( 'enabled' ); el.removeAttribute( 'disabled' ); } );\n\t\tif( routes.up ) dom.controlsUp.forEach( function( el ) { el.classList.add( 'enabled' ); el.removeAttribute( 'disabled' ); } );\n\t\tif( routes.down ) dom.controlsDown.forEach( function( el ) { el.classList.add( 'enabled' ); el.removeAttribute( 'disabled' ); } );\n\n\t\t// Prev/next buttons\n\t\tif( routes.left || routes.up ) dom.controlsPrev.forEach( function( el ) { el.classList.add( 'enabled' ); el.removeAttribute( 'disabled' ); } );\n\t\tif( routes.right || routes.down ) dom.controlsNext.forEach( function( el ) { el.classList.add( 'enabled' ); el.removeAttribute( 'disabled' ); } );\n\n\t\t// Highlight fragment directions\n\t\tif( currentSlide ) {\n\n\t\t\t// Always apply fragment decorator to prev/next buttons\n\t\t\tif( fragments.prev ) dom.controlsPrev.forEach( function( el ) { el.classList.add( 'fragmented', 'enabled' ); el.removeAttribute( 'disabled' ); } );\n\t\t\tif( fragments.next ) dom.controlsNext.forEach( function( el ) { el.classList.add( 'fragmented', 'enabled' ); el.removeAttribute( 'disabled' ); } );\n\n\t\t\t// Apply fragment decorators to directional buttons based on\n\t\t\t// what slide axis they are in\n\t\t\tif( isVerticalSlide( currentSlide ) ) {\n\t\t\t\tif( fragments.prev ) dom.controlsUp.forEach( function( el ) { el.classList.add( 'fragmented', 'enabled' ); el.removeAttribute( 'disabled' ); } );\n\t\t\t\tif( fragments.next ) dom.controlsDown.forEach( function( el ) { el.classList.add( 'fragmented', 'enabled' ); el.removeAttribute( 'disabled' ); } );\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif( fragments.prev ) dom.controlsLeft.forEach( function( el ) { el.classList.add( 'fragmented', 'enabled' ); el.removeAttribute( 'disabled' ); } );\n\t\t\t\tif( fragments.next ) dom.controlsRight.forEach( function( el ) { el.classList.add( 'fragmented', 'enabled' ); el.removeAttribute( 'disabled' ); } );\n\t\t\t}\n\n\t\t}\n\n\t\tif( config.controlsTutorial ) {\n\n\t\t\t// Highlight control arrows with an animation to ensure\n\t\t\t// that the viewer knows how to navigate\n\t\t\tif( !hasNavigatedDown && routes.down ) {\n\t\t\t\tdom.controlsDownArrow.classList.add( 'highlight' );\n\t\t\t}\n\t\t\telse {\n\t\t\t\tdom.controlsDownArrow.classList.remove( 'highlight' );\n\n\t\t\t\tif( !hasNavigatedRight && routes.right && indexv === 0 ) {\n\t\t\t\t\tdom.controlsRightArrow.classList.add( 'highlight' );\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tdom.controlsRightArrow.classList.remove( 'highlight' );\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Updates the background elements to reflect the current\n\t * slide.\n\t *\n\t * @param {boolean} includeAll If true, the backgrounds of\n\t * all vertical slides (not just the present) will be updated.\n\t */\n\tfunction updateBackground( includeAll ) {\n\n\t\tvar currentBackground = null;\n\n\t\t// Reverse past/future classes when in RTL mode\n\t\tvar horizontalPast = config.rtl ? 'future' : 'past',\n\t\t\thorizontalFuture = config.rtl ? 'past' : 'future';\n\n\t\t// Update the classes of all backgrounds to match the\n\t\t// states of their slides (past/present/future)\n\t\ttoArray( dom.background.childNodes ).forEach( function( backgroundh, h ) {\n\n\t\t\tbackgroundh.classList.remove( 'past' );\n\t\t\tbackgroundh.classList.remove( 'present' );\n\t\t\tbackgroundh.classList.remove( 'future' );\n\n\t\t\tif( h < indexh ) {\n\t\t\t\tbackgroundh.classList.add( horizontalPast );\n\t\t\t}\n\t\t\telse if ( h > indexh ) {\n\t\t\t\tbackgroundh.classList.add( horizontalFuture );\n\t\t\t}\n\t\t\telse {\n\t\t\t\tbackgroundh.classList.add( 'present' );\n\n\t\t\t\t// Store a reference to the current background element\n\t\t\t\tcurrentBackground = backgroundh;\n\t\t\t}\n\n\t\t\tif( includeAll || h === indexh ) {\n\t\t\t\ttoArray( backgroundh.querySelectorAll( '.slide-background' ) ).forEach( function( backgroundv, v ) {\n\n\t\t\t\t\tbackgroundv.classList.remove( 'past' );\n\t\t\t\t\tbackgroundv.classList.remove( 'present' );\n\t\t\t\t\tbackgroundv.classList.remove( 'future' );\n\n\t\t\t\t\tif( v < indexv ) {\n\t\t\t\t\t\tbackgroundv.classList.add( 'past' );\n\t\t\t\t\t}\n\t\t\t\t\telse if ( v > indexv ) {\n\t\t\t\t\t\tbackgroundv.classList.add( 'future' );\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tbackgroundv.classList.add( 'present' );\n\n\t\t\t\t\t\t// Only if this is the present horizontal and vertical slide\n\t\t\t\t\t\tif( h === indexh ) currentBackground = backgroundv;\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\t\t\t}\n\n\t\t} );\n\n\t\t// Stop content inside of previous backgrounds\n\t\tif( previousBackground ) {\n\n\t\t\tstopEmbeddedContent( previousBackground, { unloadIframes: !shouldPreload( previousBackground ) } );\n\n\t\t}\n\n\t\t// Start content in the current background\n\t\tif( currentBackground ) {\n\n\t\t\tstartEmbeddedContent( currentBackground );\n\n\t\t\tvar currentBackgroundContent = currentBackground.querySelector( '.slide-background-content' );\n\t\t\tif( currentBackgroundContent ) {\n\n\t\t\t\tvar backgroundImageURL = currentBackgroundContent.style.backgroundImage || '';\n\n\t\t\t\t// Restart GIFs (doesn't work in Firefox)\n\t\t\t\tif( /\\.gif/i.test( backgroundImageURL ) ) {\n\t\t\t\t\tcurrentBackgroundContent.style.backgroundImage = '';\n\t\t\t\t\twindow.getComputedStyle( currentBackgroundContent ).opacity;\n\t\t\t\t\tcurrentBackgroundContent.style.backgroundImage = backgroundImageURL;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// Don't transition between identical backgrounds. This\n\t\t\t// prevents unwanted flicker.\n\t\t\tvar previousBackgroundHash = previousBackground ? previousBackground.getAttribute( 'data-background-hash' ) : null;\n\t\t\tvar currentBackgroundHash = currentBackground.getAttribute( 'data-background-hash' );\n\t\t\tif( currentBackgroundHash && currentBackgroundHash === previousBackgroundHash && currentBackground !== previousBackground ) {\n\t\t\t\tdom.background.classList.add( 'no-transition' );\n\t\t\t}\n\n\t\t\tpreviousBackground = currentBackground;\n\n\t\t}\n\n\t\t// If there's a background brightness flag for this slide,\n\t\t// bubble it to the .reveal container\n\t\tif( currentSlide ) {\n\t\t\t[ 'has-light-background', 'has-dark-background' ].forEach( function( classToBubble ) {\n\t\t\t\tif( currentSlide.classList.contains( classToBubble ) ) {\n\t\t\t\t\tdom.wrapper.classList.add( classToBubble );\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tdom.wrapper.classList.remove( classToBubble );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\t// Allow the first background to apply without transition\n\t\tsetTimeout( function() {\n\t\t\tdom.background.classList.remove( 'no-transition' );\n\t\t}, 1 );\n\n\t}\n\n\t/**\n\t * Updates the position of the parallax background based\n\t * on the current slide index.\n\t */\n\tfunction updateParallax() {\n\n\t\tif( config.parallaxBackgroundImage ) {\n\n\t\t\tvar horizontalSlides = dom.wrapper.querySelectorAll( HORIZONTAL_SLIDES_SELECTOR ),\n\t\t\t\tverticalSlides = dom.wrapper.querySelectorAll( VERTICAL_SLIDES_SELECTOR );\n\n\t\t\tvar backgroundSize = dom.background.style.backgroundSize.split( ' ' ),\n\t\t\t\tbackgroundWidth, backgroundHeight;\n\n\t\t\tif( backgroundSize.length === 1 ) {\n\t\t\t\tbackgroundWidth = backgroundHeight = parseInt( backgroundSize[0], 10 );\n\t\t\t}\n\t\t\telse {\n\t\t\t\tbackgroundWidth = parseInt( backgroundSize[0], 10 );\n\t\t\t\tbackgroundHeight = parseInt( backgroundSize[1], 10 );\n\t\t\t}\n\n\t\t\tvar slideWidth = dom.background.offsetWidth,\n\t\t\t\thorizontalSlideCount = horizontalSlides.length,\n\t\t\t\thorizontalOffsetMultiplier,\n\t\t\t\thorizontalOffset;\n\n\t\t\tif( typeof config.parallaxBackgroundHorizontal === 'number' ) {\n\t\t\t\thorizontalOffsetMultiplier = config.parallaxBackgroundHorizontal;\n\t\t\t}\n\t\t\telse {\n\t\t\t\thorizontalOffsetMultiplier = horizontalSlideCount > 1 ? ( backgroundWidth - slideWidth ) / ( horizontalSlideCount-1 ) : 0;\n\t\t\t}\n\n\t\t\thorizontalOffset = horizontalOffsetMultiplier * indexh * -1;\n\n\t\t\tvar slideHeight = dom.background.offsetHeight,\n\t\t\t\tverticalSlideCount = verticalSlides.length,\n\t\t\t\tverticalOffsetMultiplier,\n\t\t\t\tverticalOffset;\n\n\t\t\tif( typeof config.parallaxBackgroundVertical === 'number' ) {\n\t\t\t\tverticalOffsetMultiplier = config.parallaxBackgroundVertical;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tverticalOffsetMultiplier = ( backgroundHeight - slideHeight ) / ( verticalSlideCount-1 );\n\t\t\t}\n\n\t\t\tverticalOffset = verticalSlideCount > 0 ?  verticalOffsetMultiplier * indexv : 0;\n\n\t\t\tdom.background.style.backgroundPosition = horizontalOffset + 'px ' + -verticalOffset + 'px';\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Should the given element be preloaded?\n\t * Decides based on local element attributes and global config.\n\t *\n\t * @param {HTMLElement} element\n\t */\n\tfunction shouldPreload( element ) {\n\n\t\t// Prefer an explicit global preload setting\n\t\tvar preload = config.preloadIframes;\n\n\t\t// If no global setting is available, fall back on the element's\n\t\t// own preload setting\n\t\tif( typeof preload !== 'boolean' ) {\n\t\t\tpreload = element.hasAttribute( 'data-preload' );\n\t\t}\n\n\t\treturn preload;\n\t}\n\n\t/**\n\t * Called when the given slide is within the configured view\n\t * distance. Shows the slide element and loads any content\n\t * that is set to load lazily (data-src).\n\t *\n\t * @param {HTMLElement} slide Slide to show\n\t */\n\tfunction loadSlide( slide, options ) {\n\n\t\toptions = options || {};\n\n\t\t// Show the slide element\n\t\tslide.style.display = config.display;\n\n\t\t// Media elements with data-src attributes\n\t\ttoArray( slide.querySelectorAll( 'img[data-src], video[data-src], audio[data-src], iframe[data-src]' ) ).forEach( function( element ) {\n\t\t\tif( element.tagName !== 'IFRAME' || shouldPreload( element ) ) {\n\t\t\t\telement.setAttribute( 'src', element.getAttribute( 'data-src' ) );\n\t\t\t\telement.setAttribute( 'data-lazy-loaded', '' );\n\t\t\t\telement.removeAttribute( 'data-src' );\n\t\t\t}\n\t\t} );\n\n\t\t// Media elements with <source> children\n\t\ttoArray( slide.querySelectorAll( 'video, audio' ) ).forEach( function( media ) {\n\t\t\tvar sources = 0;\n\n\t\t\ttoArray( media.querySelectorAll( 'source[data-src]' ) ).forEach( function( source ) {\n\t\t\t\tsource.setAttribute( 'src', source.getAttribute( 'data-src' ) );\n\t\t\t\tsource.removeAttribute( 'data-src' );\n\t\t\t\tsource.setAttribute( 'data-lazy-loaded', '' );\n\t\t\t\tsources += 1;\n\t\t\t} );\n\n\t\t\t// If we rewrote sources for this video/audio element, we need\n\t\t\t// to manually tell it to load from its new origin\n\t\t\tif( sources > 0 ) {\n\t\t\t\tmedia.load();\n\t\t\t}\n\t\t} );\n\n\n\t\t// Show the corresponding background element\n\t\tvar background = slide.slideBackgroundElement;\n\t\tif( background ) {\n\t\t\tbackground.style.display = 'block';\n\n\t\t\tvar backgroundContent = slide.slideBackgroundContentElement;\n\t\t\tvar backgroundIframe = slide.getAttribute( 'data-background-iframe' );\n\n\t\t\t// If the background contains media, load it\n\t\t\tif( background.hasAttribute( 'data-loaded' ) === false ) {\n\t\t\t\tbackground.setAttribute( 'data-loaded', 'true' );\n\n\t\t\t\tvar backgroundImage = slide.getAttribute( 'data-background-image' ),\n\t\t\t\t\tbackgroundVideo = slide.getAttribute( 'data-background-video' ),\n\t\t\t\t\tbackgroundVideoLoop = slide.hasAttribute( 'data-background-video-loop' ),\n\t\t\t\t\tbackgroundVideoMuted = slide.hasAttribute( 'data-background-video-muted' );\n\n\t\t\t\t// Images\n\t\t\t\tif( backgroundImage ) {\n\t\t\t\t\tbackgroundContent.style.backgroundImage = 'url('+ encodeURI( backgroundImage ) +')';\n\t\t\t\t}\n\t\t\t\t// Videos\n\t\t\t\telse if ( backgroundVideo && !isSpeakerNotes() ) {\n\t\t\t\t\tvar video = document.createElement( 'video' );\n\n\t\t\t\t\tif( backgroundVideoLoop ) {\n\t\t\t\t\t\tvideo.setAttribute( 'loop', '' );\n\t\t\t\t\t}\n\n\t\t\t\t\tif( backgroundVideoMuted ) {\n\t\t\t\t\t\tvideo.muted = true;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Inline video playback works (at least in Mobile Safari) as\n\t\t\t\t\t// long as the video is muted and the `playsinline` attribute is\n\t\t\t\t\t// present\n\t\t\t\t\tif( isMobileDevice ) {\n\t\t\t\t\t\tvideo.muted = true;\n\t\t\t\t\t\tvideo.autoplay = true;\n\t\t\t\t\t\tvideo.setAttribute( 'playsinline', '' );\n\t\t\t\t\t}\n\n\t\t\t\t\t// Support comma separated lists of video sources\n\t\t\t\t\tbackgroundVideo.split( ',' ).forEach( function( source ) {\n\t\t\t\t\t\tvideo.innerHTML += '<source src=\"'+ source +'\">';\n\t\t\t\t\t} );\n\n\t\t\t\t\tbackgroundContent.appendChild( video );\n\t\t\t\t}\n\t\t\t\t// Iframes\n\t\t\t\telse if( backgroundIframe && options.excludeIframes !== true ) {\n\t\t\t\t\tvar iframe = document.createElement( 'iframe' );\n\t\t\t\t\tiframe.setAttribute( 'allowfullscreen', '' );\n\t\t\t\t\tiframe.setAttribute( 'mozallowfullscreen', '' );\n\t\t\t\t\tiframe.setAttribute( 'webkitallowfullscreen', '' );\n\t\t\t\t\tiframe.setAttribute( 'allow', 'autoplay' );\n\n\t\t\t\t\tiframe.setAttribute( 'data-src', backgroundIframe );\n\n\t\t\t\t\tiframe.style.width  = '100%';\n\t\t\t\t\tiframe.style.height = '100%';\n\t\t\t\t\tiframe.style.maxHeight = '100%';\n\t\t\t\t\tiframe.style.maxWidth = '100%';\n\n\t\t\t\t\tbackgroundContent.appendChild( iframe );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Start loading preloadable iframes\n\t\t\tvar backgroundIframeElement = backgroundContent.querySelector( 'iframe[data-src]' );\n\t\t\tif( backgroundIframeElement ) {\n\n\t\t\t\t// Check if this iframe is eligible to be preloaded\n\t\t\t\tif( shouldPreload( background ) && !/autoplay=(1|true|yes)/gi.test( backgroundIframe ) ) {\n\t\t\t\t\tif( backgroundIframeElement.getAttribute( 'src' ) !== backgroundIframe ) {\n\t\t\t\t\t\tbackgroundIframeElement.setAttribute( 'src', backgroundIframe );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Unloads and hides the given slide. This is called when the\n\t * slide is moved outside of the configured view distance.\n\t *\n\t * @param {HTMLElement} slide\n\t */\n\tfunction unloadSlide( slide ) {\n\n\t\t// Hide the slide element\n\t\tslide.style.display = 'none';\n\n\t\t// Hide the corresponding background element\n\t\tvar background = getSlideBackground( slide );\n\t\tif( background ) {\n\t\t\tbackground.style.display = 'none';\n\n\t\t\t// Unload any background iframes\n\t\t\ttoArray( background.querySelectorAll( 'iframe[src]' ) ).forEach( function( element ) {\n\t\t\t\telement.removeAttribute( 'src' );\n\t\t\t} );\n\t\t}\n\n\t\t// Reset lazy-loaded media elements with src attributes\n\t\ttoArray( slide.querySelectorAll( 'video[data-lazy-loaded][src], audio[data-lazy-loaded][src], iframe[data-lazy-loaded][src]' ) ).forEach( function( element ) {\n\t\t\telement.setAttribute( 'data-src', element.getAttribute( 'src' ) );\n\t\t\telement.removeAttribute( 'src' );\n\t\t} );\n\n\t\t// Reset lazy-loaded media elements with <source> children\n\t\ttoArray( slide.querySelectorAll( 'video[data-lazy-loaded] source[src], audio source[src]' ) ).forEach( function( source ) {\n\t\t\tsource.setAttribute( 'data-src', source.getAttribute( 'src' ) );\n\t\t\tsource.removeAttribute( 'src' );\n\t\t} );\n\n\t}\n\n\t/**\n\t * Determine what available routes there are for navigation.\n\t *\n\t * @return {{left: boolean, right: boolean, up: boolean, down: boolean}}\n\t */\n\tfunction availableRoutes() {\n\n\t\tvar horizontalSlides = dom.wrapper.querySelectorAll( HORIZONTAL_SLIDES_SELECTOR ),\n\t\t\tverticalSlides = dom.wrapper.querySelectorAll( VERTICAL_SLIDES_SELECTOR );\n\n\t\tvar routes = {\n\t\t\tleft: indexh > 0,\n\t\t\tright: indexh < horizontalSlides.length - 1,\n\t\t\tup: indexv > 0,\n\t\t\tdown: indexv < verticalSlides.length - 1\n\t\t};\n\n\t\t// Looped presentations can always be navigated as long as\n\t\t// there are slides available\n\t\tif( config.loop ) {\n\t\t\tif( horizontalSlides.length > 1 ) {\n\t\t\t\troutes.left = true;\n\t\t\t\troutes.right = true;\n\t\t\t}\n\n\t\t\tif( verticalSlides.length > 1 ) {\n\t\t\t\troutes.up = true;\n\t\t\t\troutes.down = true;\n\t\t\t}\n\t\t}\n\n\t\t// Reverse horizontal controls for rtl\n\t\tif( config.rtl ) {\n\t\t\tvar left = routes.left;\n\t\t\troutes.left = routes.right;\n\t\t\troutes.right = left;\n\t\t}\n\n\t\treturn routes;\n\n\t}\n\n\t/**\n\t * Returns an object describing the available fragment\n\t * directions.\n\t *\n\t * @return {{prev: boolean, next: boolean}}\n\t */\n\tfunction availableFragments() {\n\n\t\tif( currentSlide && config.fragments ) {\n\t\t\tvar fragments = currentSlide.querySelectorAll( '.fragment' );\n\t\t\tvar hiddenFragments = currentSlide.querySelectorAll( '.fragment:not(.visible)' );\n\n\t\t\treturn {\n\t\t\t\tprev: fragments.length - hiddenFragments.length > 0,\n\t\t\t\tnext: !!hiddenFragments.length\n\t\t\t};\n\t\t}\n\t\telse {\n\t\t\treturn { prev: false, next: false };\n\t\t}\n\n\t}\n\n\t/**\n\t * Enforces origin-specific format rules for embedded media.\n\t */\n\tfunction formatEmbeddedContent() {\n\n\t\tvar _appendParamToIframeSource = function( sourceAttribute, sourceURL, param ) {\n\t\t\ttoArray( dom.slides.querySelectorAll( 'iframe['+ sourceAttribute +'*=\"'+ sourceURL +'\"]' ) ).forEach( function( el ) {\n\t\t\t\tvar src = el.getAttribute( sourceAttribute );\n\t\t\t\tif( src && src.indexOf( param ) === -1 ) {\n\t\t\t\t\tel.setAttribute( sourceAttribute, src + ( !/\\?/.test( src ) ? '?' : '&' ) + param );\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\n\t\t// YouTube frames must include \"?enablejsapi=1\"\n\t\t_appendParamToIframeSource( 'src', 'youtube.com/embed/', 'enablejsapi=1' );\n\t\t_appendParamToIframeSource( 'data-src', 'youtube.com/embed/', 'enablejsapi=1' );\n\n\t\t// Vimeo frames must include \"?api=1\"\n\t\t_appendParamToIframeSource( 'src', 'player.vimeo.com/', 'api=1' );\n\t\t_appendParamToIframeSource( 'data-src', 'player.vimeo.com/', 'api=1' );\n\n\t}\n\n\t/**\n\t * Start playback of any embedded content inside of\n\t * the given element.\n\t *\n\t * @param {HTMLElement} element\n\t */\n\tfunction startEmbeddedContent( element ) {\n\n\t\tif( element && !isSpeakerNotes() ) {\n\n\t\t\t// Restart GIFs\n\t\t\ttoArray( element.querySelectorAll( 'img[src$=\".gif\"]' ) ).forEach( function( el ) {\n\t\t\t\t// Setting the same unchanged source like this was confirmed\n\t\t\t\t// to work in Chrome, FF & Safari\n\t\t\t\tel.setAttribute( 'src', el.getAttribute( 'src' ) );\n\t\t\t} );\n\n\t\t\t// HTML5 media elements\n\t\t\ttoArray( element.querySelectorAll( 'video, audio' ) ).forEach( function( el ) {\n\t\t\t\tif( closestParent( el, '.fragment' ) && !closestParent( el, '.fragment.visible' ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Prefer an explicit global autoplay setting\n\t\t\t\tvar autoplay = config.autoPlayMedia;\n\n\t\t\t\t// If no global setting is available, fall back on the element's\n\t\t\t\t// own autoplay setting\n\t\t\t\tif( typeof autoplay !== 'boolean' ) {\n\t\t\t\t\tautoplay = el.hasAttribute( 'data-autoplay' ) || !!closestParent( el, '.slide-background' );\n\t\t\t\t}\n\n\t\t\t\tif( autoplay && typeof el.play === 'function' ) {\n\n\t\t\t\t\t// If the media is ready, start playback\n\t\t\t\t\tif( el.readyState > 1 ) {\n\t\t\t\t\t\tstartEmbeddedMedia( { target: el } );\n\t\t\t\t\t}\n\t\t\t\t\t// Mobile devices never fire a loaded event so instead\n\t\t\t\t\t// of waiting, we initiate playback\n\t\t\t\t\telse if( isMobileDevice ) {\n\t\t\t\t\t\tvar promise = el.play();\n\n\t\t\t\t\t\t// If autoplay does not work, ensure that the controls are visible so\n\t\t\t\t\t\t// that the viewer can start the media on their own\n\t\t\t\t\t\tif( promise && typeof promise.catch === 'function' && el.controls === false ) {\n\t\t\t\t\t\t\tpromise.catch( function() {\n\t\t\t\t\t\t\t\tel.controls = true;\n\n\t\t\t\t\t\t\t\t// Once the video does start playing, hide the controls again\n\t\t\t\t\t\t\t\tel.addEventListener( 'play', function() {\n\t\t\t\t\t\t\t\t\tel.controls = false;\n\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t// If the media isn't loaded, wait before playing\n\t\t\t\t\telse {\n\t\t\t\t\t\tel.removeEventListener( 'loadeddata', startEmbeddedMedia ); // remove first to avoid dupes\n\t\t\t\t\t\tel.addEventListener( 'loadeddata', startEmbeddedMedia );\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\t// Normal iframes\n\t\t\ttoArray( element.querySelectorAll( 'iframe[src]' ) ).forEach( function( el ) {\n\t\t\t\tif( closestParent( el, '.fragment' ) && !closestParent( el, '.fragment.visible' ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tstartEmbeddedIframe( { target: el } );\n\t\t\t} );\n\n\t\t\t// Lazy loading iframes\n\t\t\ttoArray( element.querySelectorAll( 'iframe[data-src]' ) ).forEach( function( el ) {\n\t\t\t\tif( closestParent( el, '.fragment' ) && !closestParent( el, '.fragment.visible' ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif( el.getAttribute( 'src' ) !== el.getAttribute( 'data-src' ) ) {\n\t\t\t\t\tel.removeEventListener( 'load', startEmbeddedIframe ); // remove first to avoid dupes\n\t\t\t\t\tel.addEventListener( 'load', startEmbeddedIframe );\n\t\t\t\t\tel.setAttribute( 'src', el.getAttribute( 'data-src' ) );\n\t\t\t\t}\n\t\t\t} );\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Starts playing an embedded video/audio element after\n\t * it has finished loading.\n\t *\n\t * @param {object} event\n\t */\n\tfunction startEmbeddedMedia( event ) {\n\n\t\tvar isAttachedToDOM = !!closestParent( event.target, 'html' ),\n\t\t\tisVisible  \t\t= !!closestParent( event.target, '.present' );\n\n\t\tif( isAttachedToDOM && isVisible ) {\n\t\t\tevent.target.currentTime = 0;\n\t\t\tevent.target.play();\n\t\t}\n\n\t\tevent.target.removeEventListener( 'loadeddata', startEmbeddedMedia );\n\n\t}\n\n\t/**\n\t * \"Starts\" the content of an embedded iframe using the\n\t * postMessage API.\n\t *\n\t * @param {object} event\n\t */\n\tfunction startEmbeddedIframe( event ) {\n\n\t\tvar iframe = event.target;\n\n\t\tif( iframe && iframe.contentWindow ) {\n\n\t\t\tvar isAttachedToDOM = !!closestParent( event.target, 'html' ),\n\t\t\t\tisVisible  \t\t= !!closestParent( event.target, '.present' );\n\n\t\t\tif( isAttachedToDOM && isVisible ) {\n\n\t\t\t\t// Prefer an explicit global autoplay setting\n\t\t\t\tvar autoplay = config.autoPlayMedia;\n\n\t\t\t\t// If no global setting is available, fall back on the element's\n\t\t\t\t// own autoplay setting\n\t\t\t\tif( typeof autoplay !== 'boolean' ) {\n\t\t\t\t\tautoplay = iframe.hasAttribute( 'data-autoplay' ) || !!closestParent( iframe, '.slide-background' );\n\t\t\t\t}\n\n\t\t\t\t// YouTube postMessage API\n\t\t\t\tif( /youtube\\.com\\/embed\\//.test( iframe.getAttribute( 'src' ) ) && autoplay ) {\n\t\t\t\t\tiframe.contentWindow.postMessage( '{\"event\":\"command\",\"func\":\"playVideo\",\"args\":\"\"}', '*' );\n\t\t\t\t}\n\t\t\t\t// Vimeo postMessage API\n\t\t\t\telse if( /player\\.vimeo\\.com\\//.test( iframe.getAttribute( 'src' ) ) && autoplay ) {\n\t\t\t\t\tiframe.contentWindow.postMessage( '{\"method\":\"play\"}', '*' );\n\t\t\t\t}\n\t\t\t\t// Generic postMessage API\n\t\t\t\telse {\n\t\t\t\t\tiframe.contentWindow.postMessage( 'slide:start', '*' );\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Stop playback of any embedded content inside of\n\t * the targeted slide.\n\t *\n\t * @param {HTMLElement} element\n\t */\n\tfunction stopEmbeddedContent( element, options ) {\n\n\t\toptions = extend( {\n\t\t\t// Defaults\n\t\t\tunloadIframes: true\n\t\t}, options || {} );\n\n\t\tif( element && element.parentNode ) {\n\t\t\t// HTML5 media elements\n\t\t\ttoArray( element.querySelectorAll( 'video, audio' ) ).forEach( function( el ) {\n\t\t\t\tif( !el.hasAttribute( 'data-ignore' ) && typeof el.pause === 'function' ) {\n\t\t\t\t\tel.setAttribute('data-paused-by-reveal', '');\n\t\t\t\t\tel.pause();\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\t// Generic postMessage API for non-lazy loaded iframes\n\t\t\ttoArray( element.querySelectorAll( 'iframe' ) ).forEach( function( el ) {\n\t\t\t\tif( el.contentWindow ) el.contentWindow.postMessage( 'slide:stop', '*' );\n\t\t\t\tel.removeEventListener( 'load', startEmbeddedIframe );\n\t\t\t});\n\n\t\t\t// YouTube postMessage API\n\t\t\ttoArray( element.querySelectorAll( 'iframe[src*=\"youtube.com/embed/\"]' ) ).forEach( function( el ) {\n\t\t\t\tif( !el.hasAttribute( 'data-ignore' ) && el.contentWindow && typeof el.contentWindow.postMessage === 'function' ) {\n\t\t\t\t\tel.contentWindow.postMessage( '{\"event\":\"command\",\"func\":\"pauseVideo\",\"args\":\"\"}', '*' );\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Vimeo postMessage API\n\t\t\ttoArray( element.querySelectorAll( 'iframe[src*=\"player.vimeo.com/\"]' ) ).forEach( function( el ) {\n\t\t\t\tif( !el.hasAttribute( 'data-ignore' ) && el.contentWindow && typeof el.contentWindow.postMessage === 'function' ) {\n\t\t\t\t\tel.contentWindow.postMessage( '{\"method\":\"pause\"}', '*' );\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif( options.unloadIframes === true ) {\n\t\t\t\t// Unload lazy-loaded iframes\n\t\t\t\ttoArray( element.querySelectorAll( 'iframe[data-src]' ) ).forEach( function( el ) {\n\t\t\t\t\t// Only removing the src doesn't actually unload the frame\n\t\t\t\t\t// in all browsers (Firefox) so we set it to blank first\n\t\t\t\t\tel.setAttribute( 'src', 'about:blank' );\n\t\t\t\t\tel.removeAttribute( 'src' );\n\t\t\t\t} );\n\t\t\t}\n\t\t}\n\n\t}\n\n\t/**\n\t * Returns the number of past slides. This can be used as a global\n\t * flattened index for slides.\n\t *\n\t * @param {HTMLElement} [slide=currentSlide] The slide we're counting before\n\t *\n\t * @return {number} Past slide count\n\t */\n\tfunction getSlidePastCount( slide ) {\n\n\t\tif( slide === undefined ) {\n\t\t\tslide = currentSlide;\n\t\t}\n\n\t\tvar horizontalSlides = toArray( dom.wrapper.querySelectorAll( HORIZONTAL_SLIDES_SELECTOR ) );\n\n\t\t// The number of past slides\n\t\tvar pastCount = 0;\n\n\t\t// Step through all slides and count the past ones\n\t\tmainLoop: for( var i = 0; i < horizontalSlides.length; i++ ) {\n\n\t\t\tvar horizontalSlide = horizontalSlides[i];\n\t\t\tvar verticalSlides = toArray( horizontalSlide.querySelectorAll( 'section' ) );\n\n\t\t\tfor( var j = 0; j < verticalSlides.length; j++ ) {\n\n\t\t\t\t// Stop as soon as we arrive at the present\n\t\t\t\tif( verticalSlides[j] === slide ) {\n\t\t\t\t\tbreak mainLoop;\n\t\t\t\t}\n\n\t\t\t\tpastCount++;\n\n\t\t\t}\n\n\t\t\t// Stop as soon as we arrive at the present\n\t\t\tif( horizontalSlide === slide ) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\t// Don't count the wrapping section for vertical slides\n\t\t\tif( horizontalSlide.classList.contains( 'stack' ) === false ) {\n\t\t\t\tpastCount++;\n\t\t\t}\n\n\t\t}\n\n\t\treturn pastCount;\n\n\t}\n\n\t/**\n\t * Returns a value ranging from 0-1 that represents\n\t * how far into the presentation we have navigated.\n\t *\n\t * @return {number}\n\t */\n\tfunction getProgress() {\n\n\t\t// The number of past and total slides\n\t\tvar totalCount = getTotalSlides();\n\t\tvar pastCount = getSlidePastCount();\n\n\t\tif( currentSlide ) {\n\n\t\t\tvar allFragments = currentSlide.querySelectorAll( '.fragment' );\n\n\t\t\t// If there are fragments in the current slide those should be\n\t\t\t// accounted for in the progress.\n\t\t\tif( allFragments.length > 0 ) {\n\t\t\t\tvar visibleFragments = currentSlide.querySelectorAll( '.fragment.visible' );\n\n\t\t\t\t// This value represents how big a portion of the slide progress\n\t\t\t\t// that is made up by its fragments (0-1)\n\t\t\t\tvar fragmentWeight = 0.9;\n\n\t\t\t\t// Add fragment progress to the past slide count\n\t\t\t\tpastCount += ( visibleFragments.length / allFragments.length ) * fragmentWeight;\n\t\t\t}\n\n\t\t}\n\n\t\treturn Math.min( pastCount / ( totalCount - 1 ), 1 );\n\n\t}\n\n\t/**\n\t * Checks if this presentation is running inside of the\n\t * speaker notes window.\n\t *\n\t * @return {boolean}\n\t */\n\tfunction isSpeakerNotes() {\n\n\t\treturn !!window.location.search.match( /receiver/gi );\n\n\t}\n\n\t/**\n\t * Reads the current URL (hash) and navigates accordingly.\n\t */\n\tfunction readURL() {\n\n\t\tvar hash = window.location.hash;\n\n\t\t// Attempt to parse the hash as either an index or name\n\t\tvar bits = hash.slice( 2 ).split( '/' ),\n\t\t\tname = hash.replace( /#|\\//gi, '' );\n\n\t\t// If the first bit is not fully numeric and there is a name we\n\t\t// can assume that this is a named link\n\t\tif( !/^[0-9]*$/.test( bits[0] ) && name.length ) {\n\t\t\tvar element;\n\n\t\t\t// Ensure the named link is a valid HTML ID attribute\n\t\t\ttry {\n\t\t\t\telement = document.getElementById( decodeURIComponent( name ) );\n\t\t\t}\n\t\t\tcatch ( error ) { }\n\n\t\t\t// Ensure that we're not already on a slide with the same name\n\t\t\tvar isSameNameAsCurrentSlide = currentSlide ? currentSlide.getAttribute( 'id' ) === name : false;\n\n\t\t\tif( element ) {\n\t\t\t\t// If the slide exists and is not the current slide...\n\t\t\t\tif ( !isSameNameAsCurrentSlide ) {\n\t\t\t\t\t// ...find the position of the named slide and navigate to it\n\t\t\t\t\tvar indices = Reveal.getIndices(element);\n\t\t\t\t\tslide(indices.h, indices.v);\n\t\t\t\t}\n\t\t\t}\n\t\t\t// If the slide doesn't exist, navigate to the current slide\n\t\t\telse {\n\t\t\t\tslide( indexh || 0, indexv || 0 );\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tvar hashIndexBase = config.hashOneBasedIndex ? 1 : 0;\n\n\t\t\t// Read the index components of the hash\n\t\t\tvar h = ( parseInt( bits[0], 10 ) - hashIndexBase ) || 0,\n\t\t\t\tv = ( parseInt( bits[1], 10 ) - hashIndexBase ) || 0,\n\t\t\t\tf;\n\n\t\t\tif( config.fragmentInURL ) {\n\t\t\t\tf = parseInt( bits[2], 10 );\n\t\t\t\tif( isNaN( f ) ) {\n\t\t\t\t\tf = undefined;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif( h !== indexh || v !== indexv || f !== undefined ) {\n\t\t\t\tslide( h, v, f );\n\t\t\t}\n\t\t}\n\n\t}\n\n\t/**\n\t * Updates the page URL (hash) to reflect the current\n\t * state.\n\t *\n\t * @param {number} delay The time in ms to wait before\n\t * writing the hash\n\t */\n\tfunction writeURL( delay ) {\n\n\t\t// Make sure there's never more than one timeout running\n\t\tclearTimeout( writeURLTimeout );\n\n\t\t// If a delay is specified, timeout this call\n\t\tif( typeof delay === 'number' ) {\n\t\t\twriteURLTimeout = setTimeout( writeURL, delay );\n\t\t}\n\t\telse if( currentSlide ) {\n\t\t\t// If we're configured to push to history OR the history\n\t\t\t// API is not avaialble.\n\t\t\tif( config.history || !window.history ) {\n\t\t\t\twindow.location.hash = locationHash();\n\t\t\t}\n\t\t\t// If we're configured to reflect the current slide in the\n\t\t\t// URL without pushing to history.\n\t\t\telse if( config.hash ) {\n\t\t\t\twindow.history.replaceState( null, null, '#' + locationHash() );\n\t\t\t}\n\t\t\t// If history and hash are both disabled, a hash may still\n\t\t\t// be added to the URL by clicking on a href with a hash\n\t\t\t// target. Counter this by always removing the hash.\n\t\t\telse {\n\t\t\t\twindow.history.replaceState( null, null, window.location.pathname + window.location.search );\n\t\t\t}\n\t\t}\n\n\t}\n\t/**\n\t * Retrieves the h/v location and fragment of the current,\n\t * or specified, slide.\n\t *\n\t * @param {HTMLElement} [slide] If specified, the returned\n\t * index will be for this slide rather than the currently\n\t * active one\n\t *\n\t * @return {{h: number, v: number, f: number}}\n\t */\n\tfunction getIndices( slide ) {\n\n\t\t// By default, return the current indices\n\t\tvar h = indexh,\n\t\t\tv = indexv,\n\t\t\tf;\n\n\t\t// If a slide is specified, return the indices of that slide\n\t\tif( slide ) {\n\t\t\tvar isVertical = isVerticalSlide( slide );\n\t\t\tvar slideh = isVertical ? slide.parentNode : slide;\n\n\t\t\t// Select all horizontal slides\n\t\t\tvar horizontalSlides = toArray( dom.wrapper.querySelectorAll( HORIZONTAL_SLIDES_SELECTOR ) );\n\n\t\t\t// Now that we know which the horizontal slide is, get its index\n\t\t\th = Math.max( horizontalSlides.indexOf( slideh ), 0 );\n\n\t\t\t// Assume we're not vertical\n\t\t\tv = undefined;\n\n\t\t\t// If this is a vertical slide, grab the vertical index\n\t\t\tif( isVertical ) {\n\t\t\t\tv = Math.max( toArray( slide.parentNode.querySelectorAll( 'section' ) ).indexOf( slide ), 0 );\n\t\t\t}\n\t\t}\n\n\t\tif( !slide && currentSlide ) {\n\t\t\tvar hasFragments = currentSlide.querySelectorAll( '.fragment' ).length > 0;\n\t\t\tif( hasFragments ) {\n\t\t\t\tvar currentFragment = currentSlide.querySelector( '.current-fragment' );\n\t\t\t\tif( currentFragment && currentFragment.hasAttribute( 'data-fragment-index' ) ) {\n\t\t\t\t\tf = parseInt( currentFragment.getAttribute( 'data-fragment-index' ), 10 );\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tf = currentSlide.querySelectorAll( '.fragment.visible' ).length - 1;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn { h: h, v: v, f: f };\n\n\t}\n\n\t/**\n\t * Retrieves all slides in this presentation.\n\t */\n\tfunction getSlides() {\n\n\t\treturn toArray( dom.wrapper.querySelectorAll( SLIDES_SELECTOR + ':not(.stack)' ) );\n\n\t}\n\n\t/**\n\t * Returns a list of all horizontal slides in the deck. Each\n\t * vertical stack is included as one horizontal slide in the\n\t * resulting array.\n\t */\n\tfunction getHorizontalSlides() {\n\n\t\treturn toArray( dom.wrapper.querySelectorAll( HORIZONTAL_SLIDES_SELECTOR ) );\n\n\t}\n\n\t/**\n\t * Returns all vertical slides that exist within this deck.\n\t */\n\tfunction getVerticalSlides() {\n\n\t\treturn toArray( dom.wrapper.querySelectorAll( '.slides>section>section' ) );\n\n\t}\n\n\t/**\n\t * Returns true if there are at least two horizontal slides.\n\t */\n\tfunction hasHorizontalSlides() {\n\n\t\treturn getHorizontalSlides().length > 1;\n\t}\n\n\t/**\n\t * Returns true if there are at least two vertical slides.\n\t */\n\tfunction hasVerticalSlides() {\n\n\t\treturn getVerticalSlides().length > 1;\n\n\t}\n\n\t/**\n\t * Returns an array of objects where each object represents the\n\t * attributes on its respective slide.\n\t */\n\tfunction getSlidesAttributes() {\n\n\t\treturn getSlides().map( function( slide ) {\n\n\t\t\tvar attributes = {};\n\t\t\tfor( var i = 0; i < slide.attributes.length; i++ ) {\n\t\t\t\tvar attribute = slide.attributes[ i ];\n\t\t\t\tattributes[ attribute.name ] = attribute.value;\n\t\t\t}\n\t\t\treturn attributes;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Retrieves the total number of slides in this presentation.\n\t *\n\t * @return {number}\n\t */\n\tfunction getTotalSlides() {\n\n\t\treturn getSlides().length;\n\n\t}\n\n\t/**\n\t * Returns the slide element matching the specified index.\n\t *\n\t * @return {HTMLElement}\n\t */\n\tfunction getSlide( x, y ) {\n\n\t\tvar horizontalSlide = dom.wrapper.querySelectorAll( HORIZONTAL_SLIDES_SELECTOR )[ x ];\n\t\tvar verticalSlides = horizontalSlide && horizontalSlide.querySelectorAll( 'section' );\n\n\t\tif( verticalSlides && verticalSlides.length && typeof y === 'number' ) {\n\t\t\treturn verticalSlides ? verticalSlides[ y ] : undefined;\n\t\t}\n\n\t\treturn horizontalSlide;\n\n\t}\n\n\t/**\n\t * Returns the background element for the given slide.\n\t * All slides, even the ones with no background properties\n\t * defined, have a background element so as long as the\n\t * index is valid an element will be returned.\n\t *\n\t * @param {mixed} x Horizontal background index OR a slide\n\t * HTML element\n\t * @param {number} y Vertical background index\n\t * @return {(HTMLElement[]|*)}\n\t */\n\tfunction getSlideBackground( x, y ) {\n\n\t\tvar slide = typeof x === 'number' ? getSlide( x, y ) : x;\n\t\tif( slide ) {\n\t\t\treturn slide.slideBackgroundElement;\n\t\t}\n\n\t\treturn undefined;\n\n\t}\n\n\t/**\n\t * Retrieves the speaker notes from a slide. Notes can be\n\t * defined in two ways:\n\t * 1. As a data-notes attribute on the slide <section>\n\t * 2. As an <aside class=\"notes\"> inside of the slide\n\t *\n\t * @param {HTMLElement} [slide=currentSlide]\n\t * @return {(string|null)}\n\t */\n\tfunction getSlideNotes( slide ) {\n\n\t\t// Default to the current slide\n\t\tslide = slide || currentSlide;\n\n\t\t// Notes can be specified via the data-notes attribute...\n\t\tif( slide.hasAttribute( 'data-notes' ) ) {\n\t\t\treturn slide.getAttribute( 'data-notes' );\n\t\t}\n\n\t\t// ... or using an <aside class=\"notes\"> element\n\t\tvar notesElement = slide.querySelector( 'aside.notes' );\n\t\tif( notesElement ) {\n\t\t\treturn notesElement.innerHTML;\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\t/**\n\t * Retrieves the current state of the presentation as\n\t * an object. This state can then be restored at any\n\t * time.\n\t *\n\t * @return {{indexh: number, indexv: number, indexf: number, paused: boolean, overview: boolean}}\n\t */\n\tfunction getState() {\n\n\t\tvar indices = getIndices();\n\n\t\treturn {\n\t\t\tindexh: indices.h,\n\t\t\tindexv: indices.v,\n\t\t\tindexf: indices.f,\n\t\t\tpaused: isPaused(),\n\t\t\toverview: isOverview()\n\t\t};\n\n\t}\n\n\t/**\n\t * Restores the presentation to the given state.\n\t *\n\t * @param {object} state As generated by getState()\n\t * @see {@link getState} generates the parameter `state`\n\t */\n\tfunction setState( state ) {\n\n\t\tif( typeof state === 'object' ) {\n\t\t\tslide( deserialize( state.indexh ), deserialize( state.indexv ), deserialize( state.indexf ) );\n\n\t\t\tvar pausedFlag = deserialize( state.paused ),\n\t\t\t\toverviewFlag = deserialize( state.overview );\n\n\t\t\tif( typeof pausedFlag === 'boolean' && pausedFlag !== isPaused() ) {\n\t\t\t\ttogglePause( pausedFlag );\n\t\t\t}\n\n\t\t\tif( typeof overviewFlag === 'boolean' && overviewFlag !== isOverview() ) {\n\t\t\t\ttoggleOverview( overviewFlag );\n\t\t\t}\n\t\t}\n\n\t}\n\n\t/**\n\t * Return a sorted fragments list, ordered by an increasing\n\t * \"data-fragment-index\" attribute.\n\t *\n\t * Fragments will be revealed in the order that they are returned by\n\t * this function, so you can use the index attributes to control the\n\t * order of fragment appearance.\n\t *\n\t * To maintain a sensible default fragment order, fragments are presumed\n\t * to be passed in document order. This function adds a \"fragment-index\"\n\t * attribute to each node if such an attribute is not already present,\n\t * and sets that attribute to an integer value which is the position of\n\t * the fragment within the fragments list.\n\t *\n\t * @param {object[]|*} fragments\n\t * @param {boolean} grouped If true the returned array will contain\n\t * nested arrays for all fragments with the same index\n\t * @return {object[]} sorted Sorted array of fragments\n\t */\n\tfunction sortFragments( fragments, grouped ) {\n\n\t\tfragments = toArray( fragments );\n\n\t\tvar ordered = [],\n\t\t\tunordered = [],\n\t\t\tsorted = [];\n\n\t\t// Group ordered and unordered elements\n\t\tfragments.forEach( function( fragment, i ) {\n\t\t\tif( fragment.hasAttribute( 'data-fragment-index' ) ) {\n\t\t\t\tvar index = parseInt( fragment.getAttribute( 'data-fragment-index' ), 10 );\n\n\t\t\t\tif( !ordered[index] ) {\n\t\t\t\t\tordered[index] = [];\n\t\t\t\t}\n\n\t\t\t\tordered[index].push( fragment );\n\t\t\t}\n\t\t\telse {\n\t\t\t\tunordered.push( [ fragment ] );\n\t\t\t}\n\t\t} );\n\n\t\t// Append fragments without explicit indices in their\n\t\t// DOM order\n\t\tordered = ordered.concat( unordered );\n\n\t\t// Manually count the index up per group to ensure there\n\t\t// are no gaps\n\t\tvar index = 0;\n\n\t\t// Push all fragments in their sorted order to an array,\n\t\t// this flattens the groups\n\t\tordered.forEach( function( group ) {\n\t\t\tgroup.forEach( function( fragment ) {\n\t\t\t\tsorted.push( fragment );\n\t\t\t\tfragment.setAttribute( 'data-fragment-index', index );\n\t\t\t} );\n\n\t\t\tindex ++;\n\t\t} );\n\n\t\treturn grouped === true ? ordered : sorted;\n\n\t}\n\n\t/**\n\t * Refreshes the fragments on the current slide so that they\n\t * have the appropriate classes (.visible + .current-fragment).\n\t *\n\t * @param {number} [index] The index of the current fragment\n\t * @param {array} [fragments] Array containing all fragments\n\t * in the current slide\n\t *\n\t * @return {{shown: array, hidden: array}}\n\t */\n\tfunction updateFragments( index, fragments ) {\n\n\t\tvar changedFragments = {\n\t\t\tshown: [],\n\t\t\thidden: []\n\t\t};\n\n\t\tif( currentSlide && config.fragments ) {\n\n\t\t\tfragments = fragments || sortFragments( currentSlide.querySelectorAll( '.fragment' ) );\n\n\t\t\tif( fragments.length ) {\n\n\t\t\t\tvar maxIndex = 0;\n\n\t\t\t\tif( typeof index !== 'number' ) {\n\t\t\t\t\tvar currentFragment = sortFragments( currentSlide.querySelectorAll( '.fragment.visible' ) ).pop();\n\t\t\t\t\tif( currentFragment ) {\n\t\t\t\t\t\tindex = parseInt( currentFragment.getAttribute( 'data-fragment-index' ) || 0, 10 );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\ttoArray( fragments ).forEach( function( el, i ) {\n\n\t\t\t\t\tif( el.hasAttribute( 'data-fragment-index' ) ) {\n\t\t\t\t\t\ti = parseInt( el.getAttribute( 'data-fragment-index' ), 10 );\n\t\t\t\t\t}\n\n\t\t\t\t\tmaxIndex = Math.max( maxIndex, i );\n\n\t\t\t\t\t// Visible fragments\n\t\t\t\t\tif( i <= index ) {\n\t\t\t\t\t\tif( !el.classList.contains( 'visible' ) ) changedFragments.shown.push( el );\n\t\t\t\t\t\tel.classList.add( 'visible' );\n\t\t\t\t\t\tel.classList.remove( 'current-fragment' );\n\n\t\t\t\t\t\t// Announce the fragments one by one to the Screen Reader\n\t\t\t\t\t\tdom.statusDiv.textContent = getStatusText( el );\n\n\t\t\t\t\t\tif( i === index ) {\n\t\t\t\t\t\t\tel.classList.add( 'current-fragment' );\n\t\t\t\t\t\t\tstartEmbeddedContent( el );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t// Hidden fragments\n\t\t\t\t\telse {\n\t\t\t\t\t\tif( el.classList.contains( 'visible' ) ) changedFragments.hidden.push( el );\n\t\t\t\t\t\tel.classList.remove( 'visible' );\n\t\t\t\t\t\tel.classList.remove( 'current-fragment' );\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t\t// Write the current fragment index to the slide <section>.\n\t\t\t\t// This can be used by end users to apply styles based on\n\t\t\t\t// the current fragment index.\n\t\t\t\tindex = typeof index === 'number' ? index : -1;\n\t\t\t\tindex = Math.max( Math.min( index, maxIndex ), -1 );\n\t\t\t\tcurrentSlide.setAttribute( 'data-fragment', index );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn changedFragments;\n\n\t}\n\n\t/**\n\t * Navigate to the specified slide fragment.\n\t *\n\t * @param {?number} index The index of the fragment that\n\t * should be shown, -1 means all are invisible\n\t * @param {number} offset Integer offset to apply to the\n\t * fragment index\n\t *\n\t * @return {boolean} true if a change was made in any\n\t * fragments visibility as part of this call\n\t */\n\tfunction navigateFragment( index, offset ) {\n\n\t\tif( currentSlide && config.fragments ) {\n\n\t\t\tvar fragments = sortFragments( currentSlide.querySelectorAll( '.fragment' ) );\n\t\t\tif( fragments.length ) {\n\n\t\t\t\t// If no index is specified, find the current\n\t\t\t\tif( typeof index !== 'number' ) {\n\t\t\t\t\tvar lastVisibleFragment = sortFragments( currentSlide.querySelectorAll( '.fragment.visible' ) ).pop();\n\n\t\t\t\t\tif( lastVisibleFragment ) {\n\t\t\t\t\t\tindex = parseInt( lastVisibleFragment.getAttribute( 'data-fragment-index' ) || 0, 10 );\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tindex = -1;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// If an offset is specified, apply it to the index\n\t\t\t\tif( typeof offset === 'number' ) {\n\t\t\t\t\tindex += offset;\n\t\t\t\t}\n\n\t\t\t\tvar changedFragments = updateFragments( index, fragments );\n\n\t\t\t\tif( changedFragments.hidden.length ) {\n\t\t\t\t\tdispatchEvent( 'fragmenthidden', { fragment: changedFragments.hidden[0], fragments: changedFragments.hidden } );\n\t\t\t\t}\n\n\t\t\t\tif( changedFragments.shown.length ) {\n\t\t\t\t\tdispatchEvent( 'fragmentshown', { fragment: changedFragments.shown[0], fragments: changedFragments.shown } );\n\t\t\t\t}\n\n\t\t\t\tupdateControls();\n\t\t\t\tupdateProgress();\n\n\t\t\t\tif( config.fragmentInURL ) {\n\t\t\t\t\twriteURL();\n\t\t\t\t}\n\n\t\t\t\treturn !!( changedFragments.shown.length || changedFragments.hidden.length );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\t/**\n\t * Navigate to the next slide fragment.\n\t *\n\t * @return {boolean} true if there was a next fragment,\n\t * false otherwise\n\t */\n\tfunction nextFragment() {\n\n\t\treturn navigateFragment( null, 1 );\n\n\t}\n\n\t/**\n\t * Navigate to the previous slide fragment.\n\t *\n\t * @return {boolean} true if there was a previous fragment,\n\t * false otherwise\n\t */\n\tfunction previousFragment() {\n\n\t\treturn navigateFragment( null, -1 );\n\n\t}\n\n\t/**\n\t * Cues a new automated slide if enabled in the config.\n\t */\n\tfunction cueAutoSlide() {\n\n\t\tcancelAutoSlide();\n\n\t\tif( currentSlide && config.autoSlide !== false ) {\n\n\t\t\tvar fragment = currentSlide.querySelector( '.current-fragment' );\n\n\t\t\t// When the slide first appears there is no \"current\" fragment so\n\t\t\t// we look for a data-autoslide timing on the first fragment\n\t\t\tif( !fragment ) fragment = currentSlide.querySelector( '.fragment' );\n\n\t\t\tvar fragmentAutoSlide = fragment ? fragment.getAttribute( 'data-autoslide' ) : null;\n\t\t\tvar parentAutoSlide = currentSlide.parentNode ? currentSlide.parentNode.getAttribute( 'data-autoslide' ) : null;\n\t\t\tvar slideAutoSlide = currentSlide.getAttribute( 'data-autoslide' );\n\n\t\t\t// Pick value in the following priority order:\n\t\t\t// 1. Current fragment's data-autoslide\n\t\t\t// 2. Current slide's data-autoslide\n\t\t\t// 3. Parent slide's data-autoslide\n\t\t\t// 4. Global autoSlide setting\n\t\t\tif( fragmentAutoSlide ) {\n\t\t\t\tautoSlide = parseInt( fragmentAutoSlide, 10 );\n\t\t\t}\n\t\t\telse if( slideAutoSlide ) {\n\t\t\t\tautoSlide = parseInt( slideAutoSlide, 10 );\n\t\t\t}\n\t\t\telse if( parentAutoSlide ) {\n\t\t\t\tautoSlide = parseInt( parentAutoSlide, 10 );\n\t\t\t}\n\t\t\telse {\n\t\t\t\tautoSlide = config.autoSlide;\n\t\t\t}\n\n\t\t\t// If there are media elements with data-autoplay,\n\t\t\t// automatically set the autoSlide duration to the\n\t\t\t// length of that media. Not applicable if the slide\n\t\t\t// is divided up into fragments.\n\t\t\t// playbackRate is accounted for in the duration.\n\t\t\tif( currentSlide.querySelectorAll( '.fragment' ).length === 0 ) {\n\t\t\t\ttoArray( currentSlide.querySelectorAll( 'video, audio' ) ).forEach( function( el ) {\n\t\t\t\t\tif( el.hasAttribute( 'data-autoplay' ) ) {\n\t\t\t\t\t\tif( autoSlide && (el.duration * 1000 / el.playbackRate ) > autoSlide ) {\n\t\t\t\t\t\t\tautoSlide = ( el.duration * 1000 / el.playbackRate ) + 1000;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\t// Cue the next auto-slide if:\n\t\t\t// - There is an autoSlide value\n\t\t\t// - Auto-sliding isn't paused by the user\n\t\t\t// - The presentation isn't paused\n\t\t\t// - The overview isn't active\n\t\t\t// - The presentation isn't over\n\t\t\tif( autoSlide && !autoSlidePaused && !isPaused() && !isOverview() && ( !Reveal.isLastSlide() || availableFragments().next || config.loop === true ) ) {\n\t\t\t\tautoSlideTimeout = setTimeout( function() {\n\t\t\t\t\ttypeof config.autoSlideMethod === 'function' ? config.autoSlideMethod() : navigateNext();\n\t\t\t\t\tcueAutoSlide();\n\t\t\t\t}, autoSlide );\n\t\t\t\tautoSlideStartTime = Date.now();\n\t\t\t}\n\n\t\t\tif( autoSlidePlayer ) {\n\t\t\t\tautoSlidePlayer.setPlaying( autoSlideTimeout !== -1 );\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Cancels any ongoing request to auto-slide.\n\t */\n\tfunction cancelAutoSlide() {\n\n\t\tclearTimeout( autoSlideTimeout );\n\t\tautoSlideTimeout = -1;\n\n\t}\n\n\tfunction pauseAutoSlide() {\n\n\t\tif( autoSlide && !autoSlidePaused ) {\n\t\t\tautoSlidePaused = true;\n\t\t\tdispatchEvent( 'autoslidepaused' );\n\t\t\tclearTimeout( autoSlideTimeout );\n\n\t\t\tif( autoSlidePlayer ) {\n\t\t\t\tautoSlidePlayer.setPlaying( false );\n\t\t\t}\n\t\t}\n\n\t}\n\n\tfunction resumeAutoSlide() {\n\n\t\tif( autoSlide && autoSlidePaused ) {\n\t\t\tautoSlidePaused = false;\n\t\t\tdispatchEvent( 'autoslideresumed' );\n\t\t\tcueAutoSlide();\n\t\t}\n\n\t}\n\n\tfunction navigateLeft() {\n\n\t\t// Reverse for RTL\n\t\tif( config.rtl ) {\n\t\t\tif( ( isOverview() || nextFragment() === false ) && availableRoutes().left ) {\n\t\t\t\tslide( indexh + 1, config.navigationMode === 'grid' ? indexv : undefined );\n\t\t\t}\n\t\t}\n\t\t// Normal navigation\n\t\telse if( ( isOverview() || previousFragment() === false ) && availableRoutes().left ) {\n\t\t\tslide( indexh - 1, config.navigationMode === 'grid' ? indexv : undefined );\n\t\t}\n\n\t}\n\n\tfunction navigateRight() {\n\n\t\thasNavigatedRight = true;\n\n\t\t// Reverse for RTL\n\t\tif( config.rtl ) {\n\t\t\tif( ( isOverview() || previousFragment() === false ) && availableRoutes().right ) {\n\t\t\t\tslide( indexh - 1, config.navigationMode === 'grid' ? indexv : undefined );\n\t\t\t}\n\t\t}\n\t\t// Normal navigation\n\t\telse if( ( isOverview() || nextFragment() === false ) && availableRoutes().right ) {\n\t\t\tslide( indexh + 1, config.navigationMode === 'grid' ? indexv : undefined );\n\t\t}\n\n\t}\n\n\tfunction navigateUp() {\n\n\t\t// Prioritize hiding fragments\n\t\tif( ( isOverview() || previousFragment() === false ) && availableRoutes().up ) {\n\t\t\tslide( indexh, indexv - 1 );\n\t\t}\n\n\t}\n\n\tfunction navigateDown() {\n\n\t\thasNavigatedDown = true;\n\n\t\t// Prioritize revealing fragments\n\t\tif( ( isOverview() || nextFragment() === false ) && availableRoutes().down ) {\n\t\t\tslide( indexh, indexv + 1 );\n\t\t}\n\n\t}\n\n\t/**\n\t * Navigates backwards, prioritized in the following order:\n\t * 1) Previous fragment\n\t * 2) Previous vertical slide\n\t * 3) Previous horizontal slide\n\t */\n\tfunction navigatePrev() {\n\n\t\t// Prioritize revealing fragments\n\t\tif( previousFragment() === false ) {\n\t\t\tif( availableRoutes().up ) {\n\t\t\t\tnavigateUp();\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// Fetch the previous horizontal slide, if there is one\n\t\t\t\tvar previousSlide;\n\n\t\t\t\tif( config.rtl ) {\n\t\t\t\t\tpreviousSlide = toArray( dom.wrapper.querySelectorAll( HORIZONTAL_SLIDES_SELECTOR + '.future' ) ).pop();\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tpreviousSlide = toArray( dom.wrapper.querySelectorAll( HORIZONTAL_SLIDES_SELECTOR + '.past' ) ).pop();\n\t\t\t\t}\n\n\t\t\t\tif( previousSlide ) {\n\t\t\t\t\tvar v = ( previousSlide.querySelectorAll( 'section' ).length - 1 ) || undefined;\n\t\t\t\t\tvar h = indexh - 1;\n\t\t\t\t\tslide( h, v );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t}\n\n\t/**\n\t * The reverse of #navigatePrev().\n\t */\n\tfunction navigateNext() {\n\n\t\thasNavigatedRight = true;\n\t\thasNavigatedDown = true;\n\n\t\t// Prioritize revealing fragments\n\t\tif( nextFragment() === false ) {\n\n\t\t\tvar routes = availableRoutes();\n\n\t\t\t// When looping is enabled `routes.down` is always available\n\t\t\t// so we need a separate check for when we've reached the\n\t\t\t// end of a stack and should move horizontally\n\t\t\tif( routes.down && routes.right && config.loop && Reveal.isLastVerticalSlide( currentSlide ) ) {\n\t\t\t\troutes.down = false;\n\t\t\t}\n\n\t\t\tif( routes.down ) {\n\t\t\t\tnavigateDown();\n\t\t\t}\n\t\t\telse if( config.rtl ) {\n\t\t\t\tnavigateLeft();\n\t\t\t}\n\t\t\telse {\n\t\t\t\tnavigateRight();\n\t\t\t}\n\t\t}\n\n\t}\n\n\t/**\n\t * Checks if the target element prevents the triggering of\n\t * swipe navigation.\n\t */\n\tfunction isSwipePrevented( target ) {\n\n\t\twhile( target && typeof target.hasAttribute === 'function' ) {\n\t\t\tif( target.hasAttribute( 'data-prevent-swipe' ) ) return true;\n\t\t\ttarget = target.parentNode;\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\n\t// --------------------------------------------------------------------//\n\t// ----------------------------- EVENTS -------------------------------//\n\t// --------------------------------------------------------------------//\n\n\t/**\n\t * Called by all event handlers that are based on user\n\t * input.\n\t *\n\t * @param {object} [event]\n\t */\n\tfunction onUserInput( event ) {\n\n\t\tif( config.autoSlideStoppable ) {\n\t\t\tpauseAutoSlide();\n\t\t}\n\n\t}\n\n\t/**\n\t * Called whenever there is mouse input at the document level\n\t * to determine if the cursor is active or not.\n\t *\n\t * @param {object} event\n\t */\n\tfunction onDocumentCursorActive( event ) {\n\n\t\tshowCursor();\n\n\t\tclearTimeout( cursorInactiveTimeout );\n\n\t\tcursorInactiveTimeout = setTimeout( hideCursor, config.hideCursorTime );\n\n\t}\n\n\t/**\n\t * Handler for the document level 'keypress' event.\n\t *\n\t * @param {object} event\n\t */\n\tfunction onDocumentKeyPress( event ) {\n\n\t\t// Check if the pressed key is question mark\n\t\tif( event.shiftKey && event.charCode === 63 ) {\n\t\t\ttoggleHelp();\n\t\t}\n\n\t}\n\n\t/**\n\t * Handler for the document level 'keydown' event.\n\t *\n\t * @param {object} event\n\t */\n\tfunction onDocumentKeyDown( event ) {\n\n\t\t// If there's a condition specified and it returns false,\n\t\t// ignore this event\n\t\tif( typeof config.keyboardCondition === 'function' && config.keyboardCondition(event) === false ) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// Shorthand\n\t\tvar keyCode = event.keyCode;\n\n\t\t// Remember if auto-sliding was paused so we can toggle it\n\t\tvar autoSlideWasPaused = autoSlidePaused;\n\n\t\tonUserInput( event );\n\n\t\t// Is there a focused element that could be using the keyboard?\n\t\tvar activeElementIsCE = document.activeElement && document.activeElement.contentEditable !== 'inherit';\n\t\tvar activeElementIsInput = document.activeElement && document.activeElement.tagName && /input|textarea/i.test( document.activeElement.tagName );\n\t\tvar activeElementIsNotes = document.activeElement && document.activeElement.className && /speaker-notes/i.test( document.activeElement.className);\n\n\t\t// Whitelist specific modified + keycode combinations\n\t\tvar prevSlideShortcut = event.shiftKey && event.keyCode === 32;\n\t\tvar firstSlideShortcut = event.shiftKey && keyCode === 37;\n\t\tvar lastSlideShortcut = event.shiftKey && keyCode === 39;\n\n\t\t// Prevent all other events when a modifier is pressed\n\t\tvar unusedModifier = \t!prevSlideShortcut && !firstSlideShortcut && !lastSlideShortcut &&\n\t\t\t\t\t\t\t\t( event.shiftKey || event.altKey || event.ctrlKey || event.metaKey );\n\n\t\t// Disregard the event if there's a focused element or a\n\t\t// keyboard modifier key is present\n\t\tif( activeElementIsCE || activeElementIsInput || activeElementIsNotes || unusedModifier ) return;\n\n\t\t// While paused only allow resume keyboard events; 'b', 'v', '.'\n\t\tvar resumeKeyCodes = [66,86,190,191];\n\t\tvar key;\n\n\t\t// Custom key bindings for togglePause should be able to resume\n\t\tif( typeof config.keyboard === 'object' ) {\n\t\t\tfor( key in config.keyboard ) {\n\t\t\t\tif( config.keyboard[key] === 'togglePause' ) {\n\t\t\t\t\tresumeKeyCodes.push( parseInt( key, 10 ) );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif( isPaused() && resumeKeyCodes.indexOf( keyCode ) === -1 ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Use linear navigation if we're configured to OR if\n\t\t// the presentation is one-dimensional\n\t\tvar useLinearMode = config.navigationMode === 'linear' || !hasHorizontalSlides() || !hasVerticalSlides();\n\n\t\tvar triggered = false;\n\n\t\t// 1. User defined key bindings\n\t\tif( typeof config.keyboard === 'object' ) {\n\n\t\t\tfor( key in config.keyboard ) {\n\n\t\t\t\t// Check if this binding matches the pressed key\n\t\t\t\tif( parseInt( key, 10 ) === keyCode ) {\n\n\t\t\t\t\tvar value = config.keyboard[ key ];\n\n\t\t\t\t\t// Callback function\n\t\t\t\t\tif( typeof value === 'function' ) {\n\t\t\t\t\t\tvalue.apply( null, [ event ] );\n\t\t\t\t\t}\n\t\t\t\t\t// String shortcuts to reveal.js API\n\t\t\t\t\telse if( typeof value === 'string' && typeof Reveal[ value ] === 'function' ) {\n\t\t\t\t\t\tReveal[ value ].call();\n\t\t\t\t\t}\n\n\t\t\t\t\ttriggered = true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// 2. Registered custom key bindings\n\t\tif( triggered === false ) {\n\n\t\t\tfor( key in registeredKeyBindings ) {\n\n\t\t\t\t// Check if this binding matches the pressed key\n\t\t\t\tif( parseInt( key, 10 ) === keyCode ) {\n\n\t\t\t\t\tvar action = registeredKeyBindings[ key ].callback;\n\n\t\t\t\t\t// Callback function\n\t\t\t\t\tif( typeof action === 'function' ) {\n\t\t\t\t\t\taction.apply( null, [ event ] );\n\t\t\t\t\t}\n\t\t\t\t\t// String shortcuts to reveal.js API\n\t\t\t\t\telse if( typeof action === 'string' && typeof Reveal[ action ] === 'function' ) {\n\t\t\t\t\t\tReveal[ action ].call();\n\t\t\t\t\t}\n\n\t\t\t\t\ttriggered = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// 3. System defined key bindings\n\t\tif( triggered === false ) {\n\n\t\t\t// Assume true and try to prove false\n\t\t\ttriggered = true;\n\n\t\t\t// P, PAGE UP\n\t\t\tif( keyCode === 80 || keyCode === 33 ) {\n\t\t\t\tnavigatePrev();\n\t\t\t}\n\t\t\t// N, PAGE DOWN\n\t\t\telse if( keyCode === 78 || keyCode === 34 ) {\n\t\t\t\tnavigateNext();\n\t\t\t}\n\t\t\t// H, LEFT\n\t\t\telse if( keyCode === 72 || keyCode === 37 ) {\n\t\t\t\tif( firstSlideShortcut ) {\n\t\t\t\t\tslide( 0 );\n\t\t\t\t}\n\t\t\t\telse if( !isOverview() && useLinearMode ) {\n\t\t\t\t\tnavigatePrev();\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tnavigateLeft();\n\t\t\t\t}\n\t\t\t}\n\t\t\t// L, RIGHT\n\t\t\telse if( keyCode === 76 || keyCode === 39 ) {\n\t\t\t\tif( lastSlideShortcut ) {\n\t\t\t\t\tslide( Number.MAX_VALUE );\n\t\t\t\t}\n\t\t\t\telse if( !isOverview() && useLinearMode ) {\n\t\t\t\t\tnavigateNext();\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tnavigateRight();\n\t\t\t\t}\n\t\t\t}\n\t\t\t// K, UP\n\t\t\telse if( keyCode === 75 || keyCode === 38 ) {\n\t\t\t\tif( !isOverview() && useLinearMode ) {\n\t\t\t\t\tnavigatePrev();\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tnavigateUp();\n\t\t\t\t}\n\t\t\t}\n\t\t\t// J, DOWN\n\t\t\telse if( keyCode === 74 || keyCode === 40 ) {\n\t\t\t\tif( !isOverview() && useLinearMode ) {\n\t\t\t\t\tnavigateNext();\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tnavigateDown();\n\t\t\t\t}\n\t\t\t}\n\t\t\t// HOME\n\t\t\telse if( keyCode === 36 ) {\n\t\t\t\tslide( 0 );\n\t\t\t}\n\t\t\t// END\n\t\t\telse if( keyCode === 35 ) {\n\t\t\t\tslide( Number.MAX_VALUE );\n\t\t\t}\n\t\t\t// SPACE\n\t\t\telse if( keyCode === 32 ) {\n\t\t\t\tif( isOverview() ) {\n\t\t\t\t\tdeactivateOverview();\n\t\t\t\t}\n\t\t\t\tif( event.shiftKey ) {\n\t\t\t\t\tnavigatePrev();\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tnavigateNext();\n\t\t\t\t}\n\t\t\t}\n\t\t\t// TWO-SPOT, SEMICOLON, B, V, PERIOD, LOGITECH PRESENTER TOOLS \"BLACK SCREEN\" BUTTON\n\t\t\telse if( keyCode === 58 || keyCode === 59 || keyCode === 66 || keyCode === 86 || keyCode === 190 || keyCode === 191 ) {\n\t\t\t\ttogglePause();\n\t\t\t}\n\t\t\t// F\n\t\t\telse if( keyCode === 70 ) {\n\t\t\t\tenterFullscreen();\n\t\t\t}\n\t\t\t// A\n\t\t\telse if( keyCode === 65 ) {\n\t\t\t\tif ( config.autoSlideStoppable ) {\n\t\t\t\t\ttoggleAutoSlide( autoSlideWasPaused );\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\ttriggered = false;\n\t\t\t}\n\n\t\t}\n\n\t\t// If the input resulted in a triggered action we should prevent\n\t\t// the browsers default behavior\n\t\tif( triggered ) {\n\t\t\tevent.preventDefault && event.preventDefault();\n\t\t}\n\t\t// ESC or O key\n\t\telse if ( ( keyCode === 27 || keyCode === 79 ) && features.transforms3d ) {\n\t\t\tif( dom.overlay ) {\n\t\t\t\tcloseOverlay();\n\t\t\t}\n\t\t\telse {\n\t\t\t\ttoggleOverview();\n\t\t\t}\n\n\t\t\tevent.preventDefault && event.preventDefault();\n\t\t}\n\n\t\t// If auto-sliding is enabled we need to cue up\n\t\t// another timeout\n\t\tcueAutoSlide();\n\n\t}\n\n\t/**\n\t * Handler for the 'touchstart' event, enables support for\n\t * swipe and pinch gestures.\n\t *\n\t * @param {object} event\n\t */\n\tfunction onTouchStart( event ) {\n\n\t\tif( isSwipePrevented( event.target ) ) return true;\n\n\t\ttouch.startX = event.touches[0].clientX;\n\t\ttouch.startY = event.touches[0].clientY;\n\t\ttouch.startCount = event.touches.length;\n\n\t}\n\n\t/**\n\t * Handler for the 'touchmove' event.\n\t *\n\t * @param {object} event\n\t */\n\tfunction onTouchMove( event ) {\n\n\t\tif( isSwipePrevented( event.target ) ) return true;\n\n\t\t// Each touch should only trigger one action\n\t\tif( !touch.captured ) {\n\t\t\tonUserInput( event );\n\n\t\t\tvar currentX = event.touches[0].clientX;\n\t\t\tvar currentY = event.touches[0].clientY;\n\n\t\t\t// There was only one touch point, look for a swipe\n\t\t\tif( event.touches.length === 1 && touch.startCount !== 2 ) {\n\n\t\t\t\tvar deltaX = currentX - touch.startX,\n\t\t\t\t\tdeltaY = currentY - touch.startY;\n\n\t\t\t\tif( deltaX > touch.threshold && Math.abs( deltaX ) > Math.abs( deltaY ) ) {\n\t\t\t\t\ttouch.captured = true;\n\t\t\t\t\tif( config.navigationMode === 'linear' ) {\n\t\t\t\t\t\tif( config.rtl ) {\n\t\t\t\t\t\t\tnavigateNext();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tnavigatePrev();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tnavigateLeft();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if( deltaX < -touch.threshold && Math.abs( deltaX ) > Math.abs( deltaY ) ) {\n\t\t\t\t\ttouch.captured = true;\n\t\t\t\t\tif( config.navigationMode === 'linear' ) {\n\t\t\t\t\t\tif( config.rtl ) {\n\t\t\t\t\t\t\tnavigatePrev();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tnavigateNext();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tnavigateRight();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if( deltaY > touch.threshold ) {\n\t\t\t\t\ttouch.captured = true;\n\t\t\t\t\tif( config.navigationMode === 'linear' ) {\n\t\t\t\t\t\tnavigatePrev();\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tnavigateUp();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if( deltaY < -touch.threshold ) {\n\t\t\t\t\ttouch.captured = true;\n\t\t\t\t\tif( config.navigationMode === 'linear' ) {\n\t\t\t\t\t\tnavigateNext();\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tnavigateDown();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// If we're embedded, only block touch events if they have\n\t\t\t\t// triggered an action\n\t\t\t\tif( config.embedded ) {\n\t\t\t\t\tif( touch.captured || isVerticalSlide( currentSlide ) ) {\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// Not embedded? Block them all to avoid needless tossing\n\t\t\t\t// around of the viewport in iOS\n\t\t\t\telse {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\t\t// There's a bug with swiping on some Android devices unless\n\t\t// the default action is always prevented\n\t\telse if( UA.match( /android/gi ) ) {\n\t\t\tevent.preventDefault();\n\t\t}\n\n\t}\n\n\t/**\n\t * Handler for the 'touchend' event.\n\t *\n\t * @param {object} event\n\t */\n\tfunction onTouchEnd( event ) {\n\n\t\ttouch.captured = false;\n\n\t}\n\n\t/**\n\t * Convert pointer down to touch start.\n\t *\n\t * @param {object} event\n\t */\n\tfunction onPointerDown( event ) {\n\n\t\tif( event.pointerType === event.MSPOINTER_TYPE_TOUCH || event.pointerType === \"touch\" ) {\n\t\t\tevent.touches = [{ clientX: event.clientX, clientY: event.clientY }];\n\t\t\tonTouchStart( event );\n\t\t}\n\n\t}\n\n\t/**\n\t * Convert pointer move to touch move.\n\t *\n\t * @param {object} event\n\t */\n\tfunction onPointerMove( event ) {\n\n\t\tif( event.pointerType === event.MSPOINTER_TYPE_TOUCH || event.pointerType === \"touch\" )  {\n\t\t\tevent.touches = [{ clientX: event.clientX, clientY: event.clientY }];\n\t\t\tonTouchMove( event );\n\t\t}\n\n\t}\n\n\t/**\n\t * Convert pointer up to touch end.\n\t *\n\t * @param {object} event\n\t */\n\tfunction onPointerUp( event ) {\n\n\t\tif( event.pointerType === event.MSPOINTER_TYPE_TOUCH || event.pointerType === \"touch\" )  {\n\t\t\tevent.touches = [{ clientX: event.clientX, clientY: event.clientY }];\n\t\t\tonTouchEnd( event );\n\t\t}\n\n\t}\n\n\t/**\n\t * Handles mouse wheel scrolling, throttled to avoid skipping\n\t * multiple slides.\n\t *\n\t * @param {object} event\n\t */\n\tfunction onDocumentMouseScroll( event ) {\n\n\t\tif( Date.now() - lastMouseWheelStep > 600 ) {\n\n\t\t\tlastMouseWheelStep = Date.now();\n\n\t\t\tvar delta = event.detail || -event.wheelDelta;\n\t\t\tif( delta > 0 ) {\n\t\t\t\tnavigateNext();\n\t\t\t}\n\t\t\telse if( delta < 0 ) {\n\t\t\t\tnavigatePrev();\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Clicking on the progress bar results in a navigation to the\n\t * closest approximate horizontal slide using this equation:\n\t *\n\t * ( clickX / presentationWidth ) * numberOfSlides\n\t *\n\t * @param {object} event\n\t */\n\tfunction onProgressClicked( event ) {\n\n\t\tonUserInput( event );\n\n\t\tevent.preventDefault();\n\n\t\tvar slidesTotal = toArray( dom.wrapper.querySelectorAll( HORIZONTAL_SLIDES_SELECTOR ) ).length;\n\t\tvar slideIndex = Math.floor( ( event.clientX / dom.wrapper.offsetWidth ) * slidesTotal );\n\n\t\tif( config.rtl ) {\n\t\t\tslideIndex = slidesTotal - slideIndex;\n\t\t}\n\n\t\tslide( slideIndex );\n\n\t}\n\n\t/**\n\t * Event handler for navigation control buttons.\n\t */\n\tfunction onNavigateLeftClicked( event ) { event.preventDefault(); onUserInput(); config.navigationMode === 'linear' ? navigatePrev() : navigateLeft(); }\n\tfunction onNavigateRightClicked( event ) { event.preventDefault(); onUserInput(); config.navigationMode === 'linear' ? navigateNext() : navigateRight(); }\n\tfunction onNavigateUpClicked( event ) { event.preventDefault(); onUserInput(); navigateUp(); }\n\tfunction onNavigateDownClicked( event ) { event.preventDefault(); onUserInput(); navigateDown(); }\n\tfunction onNavigatePrevClicked( event ) { event.preventDefault(); onUserInput(); navigatePrev(); }\n\tfunction onNavigateNextClicked( event ) { event.preventDefault(); onUserInput(); navigateNext(); }\n\n\t/**\n\t * Handler for the window level 'hashchange' event.\n\t *\n\t * @param {object} [event]\n\t */\n\tfunction onWindowHashChange( event ) {\n\n\t\treadURL();\n\n\t}\n\n\t/**\n\t * Handler for the window level 'resize' event.\n\t *\n\t * @param {object} [event]\n\t */\n\tfunction onWindowResize( event ) {\n\n\t\tlayout();\n\n\t}\n\n\t/**\n\t * Handle for the window level 'visibilitychange' event.\n\t *\n\t * @param {object} [event]\n\t */\n\tfunction onPageVisibilityChange( event ) {\n\n\t\tvar isHidden =  document.webkitHidden ||\n\t\t\t\t\t\tdocument.msHidden ||\n\t\t\t\t\t\tdocument.hidden;\n\n\t\t// If, after clicking a link or similar and we're coming back,\n\t\t// focus the document.body to ensure we can use keyboard shortcuts\n\t\tif( isHidden === false && document.activeElement !== document.body ) {\n\t\t\t// Not all elements support .blur() - SVGs among them.\n\t\t\tif( typeof document.activeElement.blur === 'function' ) {\n\t\t\t\tdocument.activeElement.blur();\n\t\t\t}\n\t\t\tdocument.body.focus();\n\t\t}\n\n\t}\n\n\t/**\n\t * Invoked when a slide is and we're in the overview.\n\t *\n\t * @param {object} event\n\t */\n\tfunction onOverviewSlideClicked( event ) {\n\n\t\t// TODO There's a bug here where the event listeners are not\n\t\t// removed after deactivating the overview.\n\t\tif( eventsAreBound && isOverview() ) {\n\t\t\tevent.preventDefault();\n\n\t\t\tvar element = event.target;\n\n\t\t\twhile( element && !element.nodeName.match( /section/gi ) ) {\n\t\t\t\telement = element.parentNode;\n\t\t\t}\n\n\t\t\tif( element && !element.classList.contains( 'disabled' ) ) {\n\n\t\t\t\tdeactivateOverview();\n\n\t\t\t\tif( element.nodeName.match( /section/gi ) ) {\n\t\t\t\t\tvar h = parseInt( element.getAttribute( 'data-index-h' ), 10 ),\n\t\t\t\t\t\tv = parseInt( element.getAttribute( 'data-index-v' ), 10 );\n\n\t\t\t\t\tslide( h, v );\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\n\t}\n\n\t/**\n\t * Handles clicks on links that are set to preview in the\n\t * iframe overlay.\n\t *\n\t * @param {object} event\n\t */\n\tfunction onPreviewLinkClicked( event ) {\n\n\t\tif( event.currentTarget && event.currentTarget.hasAttribute( 'href' ) ) {\n\t\t\tvar url = event.currentTarget.getAttribute( 'href' );\n\t\t\tif( url ) {\n\t\t\t\tshowPreview( url );\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t}\n\n\t}\n\n\t/**\n\t * Handles click on the auto-sliding controls element.\n\t *\n\t * @param {object} [event]\n\t */\n\tfunction onAutoSlidePlayerClick( event ) {\n\n\t\t// Replay\n\t\tif( Reveal.isLastSlide() && config.loop === false ) {\n\t\t\tslide( 0, 0 );\n\t\t\tresumeAutoSlide();\n\t\t}\n\t\t// Resume\n\t\telse if( autoSlidePaused ) {\n\t\t\tresumeAutoSlide();\n\t\t}\n\t\t// Pause\n\t\telse {\n\t\t\tpauseAutoSlide();\n\t\t}\n\n\t}\n\n\n\t// --------------------------------------------------------------------//\n\t// ------------------------ PLAYBACK COMPONENT ------------------------//\n\t// --------------------------------------------------------------------//\n\n\n\t/**\n\t * Constructor for the playback component, which displays\n\t * play/pause/progress controls.\n\t *\n\t * @param {HTMLElement} container The component will append\n\t * itself to this\n\t * @param {function} progressCheck A method which will be\n\t * called frequently to get the current progress on a range\n\t * of 0-1\n\t */\n\tfunction Playback( container, progressCheck ) {\n\n\t\t// Cosmetics\n\t\tthis.diameter = 100;\n\t\tthis.diameter2 = this.diameter/2;\n\t\tthis.thickness = 6;\n\n\t\t// Flags if we are currently playing\n\t\tthis.playing = false;\n\n\t\t// Current progress on a 0-1 range\n\t\tthis.progress = 0;\n\n\t\t// Used to loop the animation smoothly\n\t\tthis.progressOffset = 1;\n\n\t\tthis.container = container;\n\t\tthis.progressCheck = progressCheck;\n\n\t\tthis.canvas = document.createElement( 'canvas' );\n\t\tthis.canvas.className = 'playback';\n\t\tthis.canvas.width = this.diameter;\n\t\tthis.canvas.height = this.diameter;\n\t\tthis.canvas.style.width = this.diameter2 + 'px';\n\t\tthis.canvas.style.height = this.diameter2 + 'px';\n\t\tthis.context = this.canvas.getContext( '2d' );\n\n\t\tthis.container.appendChild( this.canvas );\n\n\t\tthis.render();\n\n\t}\n\n\t/**\n\t * @param value\n\t */\n\tPlayback.prototype.setPlaying = function( value ) {\n\n\t\tvar wasPlaying = this.playing;\n\n\t\tthis.playing = value;\n\n\t\t// Start repainting if we weren't already\n\t\tif( !wasPlaying && this.playing ) {\n\t\t\tthis.animate();\n\t\t}\n\t\telse {\n\t\t\tthis.render();\n\t\t}\n\n\t};\n\n\tPlayback.prototype.animate = function() {\n\n\t\tvar progressBefore = this.progress;\n\n\t\tthis.progress = this.progressCheck();\n\n\t\t// When we loop, offset the progress so that it eases\n\t\t// smoothly rather than immediately resetting\n\t\tif( progressBefore > 0.8 && this.progress < 0.2 ) {\n\t\t\tthis.progressOffset = this.progress;\n\t\t}\n\n\t\tthis.render();\n\n\t\tif( this.playing ) {\n\t\t\tfeatures.requestAnimationFrameMethod.call( window, this.animate.bind( this ) );\n\t\t}\n\n\t};\n\n\t/**\n\t * Renders the current progress and playback state.\n\t */\n\tPlayback.prototype.render = function() {\n\n\t\tvar progress = this.playing ? this.progress : 0,\n\t\t\tradius = ( this.diameter2 ) - this.thickness,\n\t\t\tx = this.diameter2,\n\t\t\ty = this.diameter2,\n\t\t\ticonSize = 28;\n\n\t\t// Ease towards 1\n\t\tthis.progressOffset += ( 1 - this.progressOffset ) * 0.1;\n\n\t\tvar endAngle = ( - Math.PI / 2 ) + ( progress * ( Math.PI * 2 ) );\n\t\tvar startAngle = ( - Math.PI / 2 ) + ( this.progressOffset * ( Math.PI * 2 ) );\n\n\t\tthis.context.save();\n\t\tthis.context.clearRect( 0, 0, this.diameter, this.diameter );\n\n\t\t// Solid background color\n\t\tthis.context.beginPath();\n\t\tthis.context.arc( x, y, radius + 4, 0, Math.PI * 2, false );\n\t\tthis.context.fillStyle = 'rgba( 0, 0, 0, 0.4 )';\n\t\tthis.context.fill();\n\n\t\t// Draw progress track\n\t\tthis.context.beginPath();\n\t\tthis.context.arc( x, y, radius, 0, Math.PI * 2, false );\n\t\tthis.context.lineWidth = this.thickness;\n\t\tthis.context.strokeStyle = 'rgba( 255, 255, 255, 0.2 )';\n\t\tthis.context.stroke();\n\n\t\tif( this.playing ) {\n\t\t\t// Draw progress on top of track\n\t\t\tthis.context.beginPath();\n\t\t\tthis.context.arc( x, y, radius, startAngle, endAngle, false );\n\t\t\tthis.context.lineWidth = this.thickness;\n\t\t\tthis.context.strokeStyle = '#fff';\n\t\t\tthis.context.stroke();\n\t\t}\n\n\t\tthis.context.translate( x - ( iconSize / 2 ), y - ( iconSize / 2 ) );\n\n\t\t// Draw play/pause icons\n\t\tif( this.playing ) {\n\t\t\tthis.context.fillStyle = '#fff';\n\t\t\tthis.context.fillRect( 0, 0, iconSize / 2 - 4, iconSize );\n\t\t\tthis.context.fillRect( iconSize / 2 + 4, 0, iconSize / 2 - 4, iconSize );\n\t\t}\n\t\telse {\n\t\t\tthis.context.beginPath();\n\t\t\tthis.context.translate( 4, 0 );\n\t\t\tthis.context.moveTo( 0, 0 );\n\t\t\tthis.context.lineTo( iconSize - 4, iconSize / 2 );\n\t\t\tthis.context.lineTo( 0, iconSize );\n\t\t\tthis.context.fillStyle = '#fff';\n\t\t\tthis.context.fill();\n\t\t}\n\n\t\tthis.context.restore();\n\n\t};\n\n\tPlayback.prototype.on = function( type, listener ) {\n\t\tthis.canvas.addEventListener( type, listener, false );\n\t};\n\n\tPlayback.prototype.off = function( type, listener ) {\n\t\tthis.canvas.removeEventListener( type, listener, false );\n\t};\n\n\tPlayback.prototype.destroy = function() {\n\n\t\tthis.playing = false;\n\n\t\tif( this.canvas.parentNode ) {\n\t\t\tthis.container.removeChild( this.canvas );\n\t\t}\n\n\t};\n\n\n\t// --------------------------------------------------------------------//\n\t// ------------------------------- API --------------------------------//\n\t// --------------------------------------------------------------------//\n\n\n\tReveal = {\n\t\tVERSION: VERSION,\n\n\t\tinitialize: initialize,\n\t\tconfigure: configure,\n\n\t\tsync: sync,\n\t\tsyncSlide: syncSlide,\n\t\tsyncFragments: syncFragments,\n\n\t\t// Navigation methods\n\t\tslide: slide,\n\t\tleft: navigateLeft,\n\t\tright: navigateRight,\n\t\tup: navigateUp,\n\t\tdown: navigateDown,\n\t\tprev: navigatePrev,\n\t\tnext: navigateNext,\n\n\t\t// Fragment methods\n\t\tnavigateFragment: navigateFragment,\n\t\tprevFragment: previousFragment,\n\t\tnextFragment: nextFragment,\n\n\t\t// Deprecated aliases\n\t\tnavigateTo: slide,\n\t\tnavigateLeft: navigateLeft,\n\t\tnavigateRight: navigateRight,\n\t\tnavigateUp: navigateUp,\n\t\tnavigateDown: navigateDown,\n\t\tnavigatePrev: navigatePrev,\n\t\tnavigateNext: navigateNext,\n\n\t\t// Forces an update in slide layout\n\t\tlayout: layout,\n\n\t\t// Randomizes the order of slides\n\t\tshuffle: shuffle,\n\n\t\t// Returns an object with the available routes as booleans (left/right/top/bottom)\n\t\tavailableRoutes: availableRoutes,\n\n\t\t// Returns an object with the available fragments as booleans (prev/next)\n\t\tavailableFragments: availableFragments,\n\n\t\t// Toggles a help overlay with keyboard shortcuts\n\t\ttoggleHelp: toggleHelp,\n\n\t\t// Toggles the overview mode on/off\n\t\ttoggleOverview: toggleOverview,\n\n\t\t// Toggles the \"black screen\" mode on/off\n\t\ttogglePause: togglePause,\n\n\t\t// Toggles the auto slide mode on/off\n\t\ttoggleAutoSlide: toggleAutoSlide,\n\n\t\t// State checks\n\t\tisOverview: isOverview,\n\t\tisPaused: isPaused,\n\t\tisAutoSliding: isAutoSliding,\n\t\tisSpeakerNotes: isSpeakerNotes,\n\n\t\t// Slide preloading\n\t\tloadSlide: loadSlide,\n\t\tunloadSlide: unloadSlide,\n\n\t\t// Adds or removes all internal event listeners (such as keyboard)\n\t\taddEventListeners: addEventListeners,\n\t\tremoveEventListeners: removeEventListeners,\n\n\t\t// Facility for persisting and restoring the presentation state\n\t\tgetState: getState,\n\t\tsetState: setState,\n\n\t\t// Presentation progress\n\t\tgetSlidePastCount: getSlidePastCount,\n\n\t\t// Presentation progress on range of 0-1\n\t\tgetProgress: getProgress,\n\n\t\t// Returns the indices of the current, or specified, slide\n\t\tgetIndices: getIndices,\n\n\t\t// Returns an Array of all slides\n\t\tgetSlides: getSlides,\n\n\t\t// Returns an Array of objects representing the attributes on\n\t\t// the slides\n\t\tgetSlidesAttributes: getSlidesAttributes,\n\n\t\t// Returns the total number of slides\n\t\tgetTotalSlides: getTotalSlides,\n\n\t\t// Returns the slide element at the specified index\n\t\tgetSlide: getSlide,\n\n\t\t// Returns the slide background element at the specified index\n\t\tgetSlideBackground: getSlideBackground,\n\n\t\t// Returns the speaker notes string for a slide, or null\n\t\tgetSlideNotes: getSlideNotes,\n\n\t\t// Returns an array with all horizontal/vertical slides in the deck\n\t\tgetHorizontalSlides: getHorizontalSlides,\n\t\tgetVerticalSlides: getVerticalSlides,\n\n\t\t// Checks if the presentation contains two or more\n\t\t// horizontal/vertical slides\n\t\thasHorizontalSlides: hasHorizontalSlides,\n\t\thasVerticalSlides: hasVerticalSlides,\n\n\t\t// Returns the previous slide element, may be null\n\t\tgetPreviousSlide: function() {\n\t\t\treturn previousSlide;\n\t\t},\n\n\t\t// Returns the current slide element\n\t\tgetCurrentSlide: function() {\n\t\t\treturn currentSlide;\n\t\t},\n\n\t\t// Returns the current scale of the presentation content\n\t\tgetScale: function() {\n\t\t\treturn scale;\n\t\t},\n\n\t\t// Returns the current configuration object\n\t\tgetConfig: function() {\n\t\t\treturn config;\n\t\t},\n\n\t\t// Helper method, retrieves query string as a key/value hash\n\t\tgetQueryHash: function() {\n\t\t\tvar query = {};\n\n\t\t\tlocation.search.replace( /[A-Z0-9]+?=([\\w\\.%-]*)/gi, function(a) {\n\t\t\t\tquery[ a.split( '=' ).shift() ] = a.split( '=' ).pop();\n\t\t\t} );\n\n\t\t\t// Basic deserialization\n\t\t\tfor( var i in query ) {\n\t\t\t\tvar value = query[ i ];\n\n\t\t\t\tquery[ i ] = deserialize( unescape( value ) );\n\t\t\t}\n\n\t\t\treturn query;\n\t\t},\n\n\t\t// Returns the top-level DOM element\n\t\tgetRevealElement: function() {\n\t\t\treturn dom.wrapper || document.querySelector( '.reveal' );\n\t\t},\n\n\t\t// Returns a hash with all registered plugins\n\t\tgetPlugins: function() {\n\t\t\treturn plugins;\n\t\t},\n\n\t\t// Returns true if we're currently on the first slide\n\t\tisFirstSlide: function() {\n\t\t\treturn ( indexh === 0 && indexv === 0 );\n\t\t},\n\n\t\t// Returns true if we're currently on the last slide\n\t\tisLastSlide: function() {\n\t\t\tif( currentSlide ) {\n\t\t\t\t// Does this slide have a next sibling?\n\t\t\t\tif( currentSlide.nextElementSibling ) return false;\n\n\t\t\t\t// If it's vertical, does its parent have a next sibling?\n\t\t\t\tif( isVerticalSlide( currentSlide ) && currentSlide.parentNode.nextElementSibling ) return false;\n\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t},\n\n\t\t// Returns true if we're on the last slide in the current\n\t\t// vertical stack\n\t\tisLastVerticalSlide: function() {\n\t\t\tif( currentSlide && isVerticalSlide( currentSlide ) ) {\n\t\t\t\t// Does this slide have a next sibling?\n\t\t\t\tif( currentSlide.nextElementSibling ) return false;\n\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t},\n\n\t\t// Checks if reveal.js has been loaded and is ready for use\n\t\tisReady: function() {\n\t\t\treturn loaded;\n\t\t},\n\n\t\t// Forward event binding to the reveal DOM element\n\t\taddEventListener: function( type, listener, useCapture ) {\n\t\t\tif( 'addEventListener' in window ) {\n\t\t\t\tReveal.getRevealElement().addEventListener( type, listener, useCapture );\n\t\t\t}\n\t\t},\n\t\tremoveEventListener: function( type, listener, useCapture ) {\n\t\t\tif( 'addEventListener' in window ) {\n\t\t\t\tReveal.getRevealElement().removeEventListener( type, listener, useCapture );\n\t\t\t}\n\t\t},\n\n\t\t// Adds/removes a custom key binding\n\t\taddKeyBinding: addKeyBinding,\n\t\tremoveKeyBinding: removeKeyBinding,\n\n\t\t// API for registering and retrieving plugins\n\t\tregisterPlugin: registerPlugin,\n\t\thasPlugin: hasPlugin,\n\t\tgetPlugin: getPlugin,\n\n\t\t// Programmatically triggers a keyboard event\n\t\ttriggerKey: function( keyCode ) {\n\t\t\tonDocumentKeyDown( { keyCode: keyCode } );\n\t\t},\n\n\t\t// Registers a new shortcut to include in the help overlay\n\t\tregisterKeyboardShortcut: function( key, value ) {\n\t\t\tkeyboardShortcuts[key] = value;\n\t\t}\n\t};\n\n\treturn Reveal;\n\n}));\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../css-loader/dist/cjs.js??clonedRuleSet-11[0].rules[0].use[1]!../../postcss-loader/dist/cjs.js??clonedRuleSet-11[0].rules[0].use[2]!../../postcss-loader/dist/cjs.js??clonedRuleSet-11[0].rules[0].use[3]!./yoyoo-ddr.css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"9124acb2\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[2]!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[3]!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[4]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./MediaPicker.vue?vue&type=style&index=0&id=89343b6c&lang=scss&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"2ebe0dec\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[2]!../../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[3]!../../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[4]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ModuleMosaic.vue?vue&type=style&index=0&id=1c8913c0&lang=scss&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"061fbe70\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[2]!../../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[3]!../../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[4]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PublicationModule.vue?vue&type=style&index=0&id=2ca1ef5c&lang=scss&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"4e12e394\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[2]!../../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[3]!../../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[4]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./MoveableItem.vue?vue&type=style&index=0&id=2ccd65f4&lang=scss&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"59447ba2\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[2]!../../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[3]!../../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[4]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SinglePage.vue?vue&type=style&index=0&id=799340e8&lang=scss&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"19bfc455\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[2]!../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[3]!../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[4]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Pub2.vue?vue&type=style&index=0&lang=scss&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"924080b2\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-29[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-29[0].rules[0].use[2]!../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-29[0].rules[0].use[3]!../../node_modules/less-loader/dist/cjs.js??clonedRuleSet-29[0].rules[0].use[4]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=less&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"7060f4ae\", content, true, {\"sourceMap\":false,\"shadowMode\":false});"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","current_project_path","on","$event","$emit","staticRenderFns","props","publication_path","components","data","beforeDestroy","watch","computed","methods","component","class","is_shape","can_edit","page_template","$listeners","hasOwnProperty","module_position","staticStyle","_e","show_advanced_menu","stopPropagation","_v","_s","$t","publimodule","size","updateMeta","align","duplicateModule","removeModule","style","module_type","context","number_of_max_medias","first_media","ref","$path","$content","$el","outline_width","magnification","borderRadius","key","is_multiple_medias","medias_with_linked","_l","media_with_linked","index","_linked_media","itemStyle","single_media_displayed_at_full_ratio","objectFit","frameFit","opt","removeMediaAtIndex","length","show_media_picker","selectMedia","show_dropzone","type","default","MediaPicker","created","mounted","Math","source_media","path_to_source_media","source_medias","path","Object","showDropzone","hideDropzone","media","medias","ModuleMosaic","ModuleCarousel","module_meta_filename","media_styles","new_meta","catch","enableEditForText","addtl_meta_to_module","og_module","deleteItem","show_grid","gridstep","snap_to_grid","scale","active_module","l_margins","magnify","left","top","page_width","right","page_height","bottom","pagination","hide_pagination","page_number_corrected","component_key","locked","is_active","content_is_edited","transform","aspect_ratio","grid","dragStart","onDrag","dragEnd","resizeStart","resizeEnd","rotateEnd","setActive","dblClick","turnCMtoPX","border_radius","onDuplicateModule","contentIsEdited","contentIsNotEdited","unlock","lock","Vector","constructor","lst","_values","toString","join","dot","vector","map","item","reduce","a","b","Error","get","Matrix","values","static","shape","Array","fill","valueOf","JSON","parse","stringify","rows","cols","rowVector","row","slice","colVector","col","v","forEach","v1","newMatrix","zeros","i","j","T","_","colIndex","rowIndex","pointMap","br","bm","bl","l","tl","tm","tr","r","handlerPointMap","pointMap2","widthMap","heightMap","tr2bl","deg2rad","deg","PI","rad2deg","rad","getPoints","x","y","width","height","rotation","zoom","wc","hc","cos","sin","rect","getSize","dis","pressAngle","startAngle","w","h","currentAngle","atan2","cursorMap","handlerMap","getHandler","originIndex","currentIndex","floor","name","value","handlerSize","active","resizeHandler","resizable","rotatable","draggable","acceptRatio","minWidth","minHeight","maxWidth","maxHeight","parent","beforeActive","id","renderContent","stop","prevent","axis","currentRatio","isInitialRatio","isDragging","isResizing","isRotating","isReadyToDrag","isReadyToResize","isReadyToRotate","rotateHandler","handleDefaultEvent","e","getNewHandler","cursor","emitChange","handleMouseDown","clientX","clientY","minLeft","maxLeft","minTop","maxTop","maxLeftWidth","maxRightWidth","maxTopHeight","maxBottomHeight","document","handleMouseMove","doMove","restrictToLeftOfParent","restrictToTopOfParent","restrictHeight","restrictWidth","handleMouseUp","drag","resize","rotate","handleResizeStart","matrix","opposite","opp2","offsetX","offsetY","handleResizeMove","handleRotateStart","cx","cy","handleRotateMove","roundRotate","getClassNames","DDR","PublicationModule","handler","deep","module_z_index","z_index","module_styles","setNewComponentKey","setTransformFromPubli","was_updated","turnPXtoCM","roundToDec","firstMedia","event","panTo","editText","setTimeout","page_modules","layout_mode","page_color","gridstep_in_mm","margins","page_number","page_is_left","MoveableItem","page_styles","pagination_styles","project","publication","fetch_project_error","template","is_spread","page","getModulesForPage","modules","page_id","spread","s_index","SinglePage","projectpanes","display_mode","project_path","space_slug","project_slug","pages","spreads","link","getFolder","___CSS_LOADER_EXPORT___","push","module","root","factory","define","Reveal","indexh","indexv","previousSlide","currentSlide","previousBackground","isMobileDevice","isChrome","autoSlidePlayer","VERSION","SLIDES_SELECTOR","HORIZONTAL_SLIDES_SELECTOR","VERTICAL_SLIDES_SELECTOR","HOME_SLIDE_SELECTOR","UA","navigator","userAgent","POST_MESSAGE_METHOD_BLACKLIST","config","margin","minScale","maxScale","controls","controlsTutorial","controlsLayout","controlsBackArrows","progress","slideNumber","showSlideNumber","hashOneBasedIndex","hash","history","keyboard","keyboardCondition","overview","disableLayout","center","touch","loop","rtl","navigationMode","shuffle","fragments","fragmentInURL","embedded","help","pause","showNotes","autoPlayMedia","preloadIframes","autoSlide","autoSlideStoppable","autoSlideMethod","defaultTiming","mouseWheel","rollingLinks","hideAddressBar","previewLinks","postMessage","postMessageEvents","focusBodyOnPageVisibilityChange","transition","transitionSpeed","backgroundTransition","parallaxBackgroundImage","parallaxBackgroundSize","parallaxBackgroundRepeat","parallaxBackgroundPosition","parallaxBackgroundHorizontal","parallaxBackgroundVertical","pdfMaxPagesPerSlide","Number","POSITIVE_INFINITY","pdfSeparateFragments","pdfPageHeightOffset","viewDistance","mobileViewDistance","display","hideInactiveCursor","hideCursorTime","dependencies","initialized","loaded","overviewSlideWidth","overviewSlideHeight","hasNavigatedRight","hasNavigatedDown","state","slidesTransform","layout","dom","plugins","asyncDependencies","features","lastMouseWheelStep","writeURLTimeout","cursorHidden","cursorInactiveTimeout","eventsAreBound","autoSlideTimeout","autoSlideStartTime","autoSlidePaused","startX","startY","startCount","captured","threshold","keyboardShortcuts","registeredKeyBindings","initialize","options","checkCapabilities","transforms2d","transforms3d","wrapper","querySelector","slides","window","addEventListener","query","getQueryHash","extend","load","body","setAttribute","images","toArray","getElementsByTagName","iframes","lazyLoadable","concat","len","element","getAttribute","removeAttribute","test","platform","maxTouchPoints","testElement","createElement","requestAnimationFrameMethod","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","canvas","getContext","overviewTransitions","scripts","scriptsToLoad","s","condition","async","loadScript","src","callback","initPlugins","pluginsToInitialize","keys","loadAsyncDependencies","afterPlugInitialized","plugin","init","then","start","url","script","defer","onload","onreadystatechange","readyState","onerror","err","head","insertBefore","lastChild","setupDOM","setupPostMessage","setupScrollPrevention","resetVerticalSlides","configure","readURL","updateBackground","classList","remove","add","dispatchEvent","isPrintingPDF","removeEventListeners","setupPDF","background","createSingletonNode","progressbar","speakerNotes","pauseOverlay","controlsLeft","querySelectorAll","controlsRight","controlsUp","controlsDown","controlsPrev","controlsNext","controlsRightArrow","controlsDownArrow","statusDiv","createStatusDiv","getElementById","position","overflow","clip","appendChild","getStatusText","node","text","nodeType","textContent","isAriaHidden","isDisplayHidden","getComputedStyle","childNodes","child","slideSize","getComputedSlideSize","innerWidth","innerHeight","pageWidth","pageHeight","slideWidth","slideHeight","injectStyleSheet","layoutSlideContents","doingSlideNumbers","slide","getSlideNumber","contains","contentHeight","scrollHeight","numberOfPages","max","ceil","min","className","parentNode","slideBackgroundElement","notes","getSlideNotes","notesSpacing","notesLayout","notesElement","innerHTML","nextSibling","numberElement","previousFragmentStep","previousPage","fragmentGroups","sortFragments","fragment","clonedPage","cloneNode","setInterval","scrollTop","scrollLeft","container","tagname","classname","nodes","testNode","createBackgrounds","slideh","backgroundStack","createBackground","slidev","backgroundImage","backgroundSize","backgroundRepeat","backgroundPosition","replace","contentElement","slideBackgroundContentElement","syncBackground","backgroundColor","opacity","backgroundVideo","backgroundIframe","backgroundOpacity","hasAttribute","contrastColor","computedBackgroundStyle","rgb","colorToRgb","colorBrightness","charAt","method","result","apply","args","dispatchPostMessage","console","warn","oldTransition","numberOfSlides","resume","onDocumentMouseScroll","removeEventListener","enableRollingLinks","disableRollingLinks","onDocumentCursorActive","showCursor","enablePreviewLinks","disablePreviewLinks","destroy","Playback","Date","now","onAutoSlidePlayerClick","slideNumberDisplay","isSpeakerNotes","sync","addEventListeners","visibilityChange","onWindowHashChange","onWindowResize","onPointerDown","onPointerMove","onPointerUp","msPointerEnabled","onTouchStart","onTouchMove","onTouchEnd","onDocumentKeyDown","onDocumentKeyPress","onProgressClicked","onPageVisibilityChange","pointerEvents","match","eventName","el","onNavigateLeftClicked","onNavigateRightClicked","onNavigateUpClicked","onNavigateDownClicked","onNavigatePrevClicked","onNavigateNextClicked","registerPlugin","undefined","hasPlugin","getPlugin","addKeyBinding","binding","keyCode","description","removeKeyBinding","o","prototype","call","deserialize","parseFloat","transformElement","WebkitTransform","MozTransform","msTransform","transformSlides","transforms","tag","styleSheet","cssText","createTextNode","closestParent","target","selector","matchesMethod","matches","matchesSelector","msMatchesSelector","color","hex3","parseInt","g","hex6","substr","rgba","getRemainingHeight","newHeight","oldHeight","offsetHeight","removeProperty","location","search","removeAddressBar","scrollTo","createEvent","initEvent","self","message","namespace","getState","anchors","anchor","span","onPreviewLinkClicked","showPreview","closeOverlay","overlay","preventDefault","toggleHelp","override","showHelp","html","removeChild","documentElement","setProperty","oldScale","presentationWidth","presentationHeight","devicePixelRatio","updateProgress","updateParallax","isOverview","updateOverview","remainingHeight","nodeName","nw","naturalWidth","videoWidth","nh","naturalHeight","videoHeight","es","offsetWidth","setPreviousVerticalIndex","stack","getPreviousVerticalIndex","attributeName","activateOverview","cancelAutoSlide","onOverviewSlideClicked","updateSlidesVisibility","layoutOverview","hslide","vslide","hbackground","vbackground","vmin","deactivateOverview","cueAutoSlide","toggleOverview","locationHash","encodeURIComponent","getIndices","f","hashIndexBase","isVerticalSlide","enterFullscreen","requestMethod","requestFullscreen","webkitRequestFullscreen","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullscreen","hideCursor","wasPaused","togglePause","isPaused","toggleAutoSlide","resumeAutoSlide","pauseAutoSlide","isAutoSliding","horizontalSlides","stateBefore","indexhBefore","indexvBefore","updateSlides","currentHorizontalSlide","currentVerticalSlides","navigateFragment","slideChanged","stateLoop","splice","pop","stopEmbeddedContent","startEmbeddedContent","updateControls","updateSlideNumber","updateNotes","updateFragments","writeURL","sortAllFragments","updateNotesVisibility","formatEmbeddedContent","unloadIframes","syncSlide","syncFragments","loadSlide","horizontalSlide","verticalSlides","verticalSlide","random","slidesLength","printMode","reverse","slideState","split","distanceX","distanceY","horizontalSlidesLength","MAX_VALUE","verticalSlidesLength","abs","unloadSlide","oy","hasVerticalSlides","hasHorizontalSlides","hasNotes","getProgress","format","getSlidePastCount","getTotalSlides","indices","sep","formatSlideNumber","delimiter","isNaN","routes","availableRoutes","availableFragments","up","down","prev","next","includeAll","currentBackground","horizontalPast","horizontalFuture","backgroundh","backgroundv","shouldPreload","currentBackgroundContent","backgroundImageURL","previousBackgroundHash","currentBackgroundHash","classToBubble","backgroundWidth","backgroundHeight","horizontalOffsetMultiplier","horizontalOffset","horizontalSlideCount","verticalOffsetMultiplier","verticalOffset","verticalSlideCount","preload","tagName","sources","source","backgroundContent","backgroundVideoLoop","backgroundVideoMuted","encodeURI","video","muted","autoplay","excludeIframes","iframe","backgroundIframeElement","getSlideBackground","hiddenFragments","_appendParamToIframeSource","sourceAttribute","sourceURL","param","indexOf","play","startEmbeddedMedia","promise","startEmbeddedIframe","isAttachedToDOM","isVisible","currentTime","contentWindow","pastCount","mainLoop","totalCount","allFragments","visibleFragments","fragmentWeight","bits","decodeURIComponent","error","isSameNameAsCurrentSlide","delay","clearTimeout","replaceState","pathname","isVertical","hasFragments","currentFragment","getSlides","getHorizontalSlides","getVerticalSlides","getSlidesAttributes","attributes","attribute","getSlide","indexf","paused","setState","pausedFlag","overviewFlag","grouped","ordered","unordered","sorted","group","changedFragments","shown","hidden","maxIndex","offset","lastVisibleFragment","nextFragment","previousFragment","fragmentAutoSlide","parentAutoSlide","slideAutoSlide","duration","playbackRate","isLastSlide","navigateNext","setPlaying","navigateLeft","navigateRight","navigateUp","navigateDown","navigatePrev","isLastVerticalSlide","isSwipePrevented","onUserInput","shiftKey","charCode","autoSlideWasPaused","activeElementIsCE","activeElement","contentEditable","activeElementIsInput","activeElementIsNotes","prevSlideShortcut","firstSlideShortcut","lastSlideShortcut","unusedModifier","altKey","ctrlKey","metaKey","resumeKeyCodes","useLinearMode","triggered","action","touches","currentX","currentY","deltaX","deltaY","pointerType","MSPOINTER_TYPE_TOUCH","delta","detail","wheelDelta","slidesTotal","slideIndex","isHidden","webkitHidden","msHidden","blur","focus","currentTarget","progressCheck","diameter","diameter2","thickness","playing","progressOffset","wasPlaying","animate","progressBefore","bind","radius","iconSize","endAngle","save","clearRect","beginPath","arc","fillStyle","lineWidth","strokeStyle","stroke","translate","fillRect","moveTo","lineTo","restore","listener","off","prevFragment","navigateTo","getPreviousSlide","getCurrentSlide","getScale","getConfig","shift","unescape","getRevealElement","getPlugins","isFirstSlide","nextElementSibling","isReady","useCapture","triggerKey","registerKeyboardShortcut","content","__esModule","locals","exports"],"sourceRoot":""}