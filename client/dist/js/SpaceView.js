(self["webpackChunkapp"]=self["webpackChunkapp"]||[]).push([[119],{27071:function(t,e,a){"use strict";a.d(e,{Z:function(){return st}});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"_projectInfos",class:{"is--list":"list"===t.context,"u-card":"list"===t.context,"is--linkToProject":"full"!==t.context,"is--mobileView":t.$root.is_mobile_view}},[a("div",{staticClass:"_projectInfos--cover"},[a("CoverField",{attrs:{context:t.context,cover:t.project.$cover,path:t.project.$path,can_edit:t.can_edit}}),a("transition",{attrs:{name:"toggleLock",mode:"out-in"}},["finished"===t.project.$status?a("sl-icon",{key:t.project.$status,staticClass:"_icon _check",attrs:{name:"check-circle-fill"}}):"private"===t.project.$status?a("sl-icon",{key:t.project.$status,staticClass:"_icon _private",attrs:{name:"file-lock2-fill"}}):t._e()],1)],1),a("div",{staticClass:"_projectInfos--infos"},["full"===t.context?a("StatusTag",{attrs:{status:t.project.$status,path:t.project.$path,can_edit:t.can_edit}}):t._e(),a("TitleField",{staticClass:"_title",attrs:{field_name:"title",label:"full"===t.context&&t.can_edit&&!t.project.title?t.$t("title"):"",content:t.project.title,path:t.project.$path,required:!0,maxlength:40,tag:"full"===t.context?"h1":"h3",can_edit:t.can_edit,instructions:t.$t("project_title_instructions")}}),t.show_description?a("TitleField",{staticClass:"_description",attrs:{field_name:"description",label:"full"!==t.context||t.project.description?"":t.$t("description"),content:t.project.description,path:t.project.$path,maxlength:1280,input_type:"markdown",can_edit:t.can_edit,instructions:t.$t("project_desc_instructions")}}):t._e(),"full"===t.context?a("div",{staticClass:"_allTags"},[t.project.keywords&&t.project.keywords.length>0?a("TagsList",{attrs:{tags:t.project.keywords,tag_type:"keywords",clickable:!1}}):t._e(),t.project.machines&&t.project.machines.length>0?a("TagsList",{attrs:{tags:t.project.machines,tag_type:"machines",clickable:!1}}):t._e(),t.project.materials&&t.project.materials.length>0?a("TagsList",{attrs:{tags:t.project.materials,tag_type:"materials",clickable:!1}}):t._e()],1):t._e()],1),"full"===t.context?a("div",{staticClass:"_projectInfos--meta",class:{"is--hidden":!t.show_meta}},[a("CardMeta",{attrs:{project:t.project,can_edit:t.can_edit}}),a("CardLicense",{attrs:{project:t.project,can_edit:t.can_edit}}),a("CardFiles",{attrs:{project:t.project,can_edit:t.can_edit}}),a("CardCompetences",{attrs:{project:t.project,can_edit:t.can_edit}}),a("CardMachinesMaterials",{attrs:{project:t.project,can_edit:t.can_edit}}),a("CardKeywords",{attrs:{project:t.project,can_edit:t.can_edit}})],1):t._e(),"list"===t.context?a("div",{staticClass:"_projectInfos--open"},[a("router-link",{attrs:{to:{path:t.createURLFromPath(t.project.$path)}}},[a("div",{staticClass:"_clickZone"})])],1):t._e()])},i=[],o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ProjectCard",{attrs:{header:t.$t("informations"),icon:"info-square",open:""}},[a("AdminsAndContributorsField",{attrs:{show_section:["admins","contributors"],folder:t.project,can_edit:t.can_edit,admin_label:t.$t("referent"),admin_instructions:t.$t("project_admin_instructions"),contrib_instructions:t.$t("project_contrib_instructions")}}),a("div",{staticClass:"u-spacingBottom"}),a("div",{staticClass:"u-spacingBottom"},[a("DateField",{attrs:{title:t.$t("date_created"),date:t.project.$date_created}}),a("DateField",{attrs:{title:t.$t("date_modified"),date:t.project.$date_modified}})],1),t.can_edit?a("div",{staticClass:"u-mediaOptions"},[a("DuplicateFolder",{attrs:{path:t.project.$path,source_title:t.project.title}}),a("RemoveMenu",{attrs:{remove_text:t.$t("remove_project")},on:{remove:t.removeProject}})],1):t._e(),t.$root.app_infos.is_electron&&t.is_instance_admin?a("div",{},[a("DLabel",{attrs:{str:t.$t("open_in_finder")}}),a("button",{staticClass:"u-button u-button_bleumarine u-button_small",attrs:{type:"button"},domProps:{innerHTML:t._s(t.project_path_wrappable)},on:{click:t.openInFinder}})],1):t._e()],1)},r=[],c=(a(74916),a(15306),a(68757),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("details",{staticClass:"_projectCard"},[a("summary",[a("div",{staticClass:"_icon"},[t.icon?a("sl-icon",{attrs:{name:t.icon}}):t._e()],1),a("span",{staticClass:"_name"},[t._v(" "+t._s(t.header)+" ")]),void 0!==t.has_items?a("div",{staticClass:"_itemsNut",attrs:{"data-isfilled":t.has_items}},["number"===typeof t.has_items?[t._v(" "+t._s(t.has_items)+" ")]:!0===t.has_items?[a("sl-icon",{attrs:{name:"check"}})]:[t._v("â€“")]],2):t._e()]),a("div",{staticClass:"_content"},[t._t("default")],2)])}),n=[],l={props:{header:String,icon:String,has_items:void 0},components:{},data(){return{}},created(){},mounted(){},beforeDestroy(){},watch:{},computed:{},methods:{}},p=l,d=(a(31848),a(1001)),_=(0,d.Z)(p,c,n,!1,null,"b9aa0212",null),u=_.exports,h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("button",{staticClass:"u-buttonLink",attrs:{type:"button"},on:{click:function(e){t.show_modal=!0}}},[a("sl-icon",{attrs:{name:"file-plus"}}),t._v(" "+t._s(t.$t("duplicate_or_move_project"))+" ")],1),t.show_modal?a("BaseModal2",{attrs:{title:t.$t("duplicate_or_move")},on:{close:function(e){t.show_modal=!1}}},[a("div",{},[a("div",{staticClass:"u-instructions"},[a("small",[t._v(" "+t._s(t.$t("dm_instr"))+" ")])]),a("br"),a("div",{},[a("DLabel",{attrs:{str:t.$t("source_space")}}),a("select",{directives:[{name:"model",rawName:"v-model",value:t.destination_space_path,expression:"destination_space_path"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.destination_space_path=e.target.multiple?a:a[0]}}},t._l(t.spaces,(function(e){return a("option",{key:e.$path,attrs:{disabled:""},domProps:{value:e.$path,textContent:t._s(e.title)}})})),0),a("div",{staticClass:"u-instructions"},[a("small",[t._v(" "+t._s(t.$t("feature_not_implemented_yet"))+" ")])])],1),a("br"),a("div",{},[a("div",{},[a("DLabel",{attrs:{str:t.$t("title_of_copy")}}),a("TextInput",{attrs:{content:t.new_title,maxlength:40,required:!0},on:{"update:content":function(e){t.new_title=e}}})],1),a("br"),a("div",{},[a("ToggleInput",{attrs:{content:t.remove_original,label:t.$t("remove_original"),options:{true:t.$t("remove_original_after_copy"),false:t.$t("keep_original_after_copy")}},on:{"update:content":function(e){t.remove_original=e}}})],1)])]),a("div",{staticClass:"u-sameRow",attrs:{slot:"footer"},slot:"footer"},[t.url_to_copy?[a("router-link",{staticClass:"u-button u-button_bleuvert",attrs:{to:t.url_to_copy}},[t._v(" "+t._s(t.$t("open_copy"))+" ")])]:[t.is_copying?a("LoaderSpinner"):[a("button",{staticClass:"u-buttonLink",attrs:{type:"button"},on:{click:function(e){t.show_modal=!1}}},[t._v(" "+t._s(t.$t("cancel"))+" ")]),a("button",{staticClass:"u-button u-button_red",attrs:{type:"button",autofocus:""},on:{click:t.confirm}},[t.remove_original?[t._v(" "+t._s(t.$t("move"))+" ")]:[t._v(" "+t._s(t.$t("duplicate"))+" ")]],2)]]],2)]):t._e()],1)},f=[],m=(a(57658),{props:{path:String,source_title:String},components:{},data(){return{show_modal:!1,spaces:void 0,destination_space_path:void 0,url_to_copy:!1,remove_original:!1,new_title:this.$t("copy_of")+" "+this.source_title,is_copying:!1}},created(){},async mounted(){const{space_slug:t}=this.decomposePath(this.path);this.destination_space_path=this.createPath({space_slug:t}),this.spaces=await this.$api.getFolders({path:"spaces"})},beforeDestroy(){},watch:{},computed:{},methods:{async confirm(){this.is_copying=!0;const t=await this.$api.copyFolder({path:this.path,new_meta:{title:this.new_title}});this.$alertify.closeLogOnClick(!0).delay(4e3).success(this.$t("folder_copied"));const e=this.createURLFromPath(t);this.remove_original?(this.is_copying=!1,await this.$api.deleteItem({path:this.path}),this.$router.push(e)):(this.url_to_copy=e,this.is_copying=!1)}}}),v=m,b=(0,d.Z)(v,h,f,!1,null,"122068f6",null),g=b.exports,y={props:{project:Object,can_edit:Boolean},components:{ProjectCard:u,DuplicateFolder:g},data(){return{}},created(){},mounted(){},beforeDestroy(){},watch:{},computed:{project_path_wrappable(){return this.project.$path.replaceAll("/","/<wbr>")}},methods:{openInFinder(){window.electronAPI.send("toMain",{type:"open_path",path:this.project.$path})},async removeProject(){this.fetch_status="pending",this.fetch_error=null;try{const t=await this.$api.deleteItem({path:this.project.$path});this.response=t.data,this.fetch_status="success"}catch(t){this.fetch_status="error",this.fetch_error=t.response.data}}}},j=y,w=(0,d.Z)(j,o,r,!1,null,"8afe0052",null),x=w.exports,$=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ProjectCard",{attrs:{header:t.keywords_title,icon:"tag",has_items:!!t.project.keywords}},[a("div",{},[a("TagsField",{attrs:{field_name:"keywords",content:t.project.keywords,path:t.project.$path,can_edit:t.can_edit}})],1)])},k=[],C={props:{project:Object,can_edit:Boolean},components:{ProjectCard:u},data(){return{}},created(){},mounted(){},beforeDestroy(){},watch:{},computed:{keywords_title(){return this.$t("keywords")}},methods:{}},P=C,I=(0,d.Z)(P,$,k,!1,null,"30a8949d",null),L=I.exports,F=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ProjectCard",{attrs:{header:t.$t("levels_and_competences"),icon:"bookmark-star",has_items:!!t.project.level}},[a("div",{staticClass:"u-spacingBottom"},[a("DLabel",{attrs:{str:t.$t("fabrication_level")}}),a("SelectField",{attrs:{field_name:"level",content:t.project.level||"-",path:t.project.$path,can_edit:t.can_edit,options:t.basic_competences}})],1),a("div",{staticClass:"u-spacingBottom"},[a("DLabel",{attrs:{str:t.$t("target_audience")}}),a("RadioCheckboxField",{attrs:{field_name:"target_audience",input_type:"checkbox",content:t.project.target_audience,path:t.project.$path,can_edit:t.can_edit,options:t.target_audience_options}})],1),a("div",{},[a("DLabel",{attrs:{str:t.$t("disciplines")}}),a("RadioCheckboxField",{attrs:{field_name:"discipline",input_type:"checkbox",content:t.project.discipline,path:t.project.$path,can_edit:t.can_edit,options:t.discipline_options}})],1)])},S=[],D={props:{project:Object,can_edit:Boolean},components:{ProjectCard:u},data(){return{basic_competences:[{key:"-",text:"â€“"},{key:"beginner",text:this.$t("beginner")},{key:"intermediate",text:this.$t("intermediate")},{key:"experienced",text:this.$t("experienced")}],target_audience_options:[{key:"cycle-1",label:this.$t("ta_cycle_1"),instructions:this.$t("ta_cycle_1_instr")},{key:"cycle-2",label:this.$t("ta_cycle_2"),instructions:this.$t("ta_cycle_2_instr")},{key:"cycle-3",label:this.$t("ta_cycle_3"),instructions:this.$t("ta_cycle_3_instr")},{key:"cycle-4",label:this.$t("ta_cycle_4"),instructions:this.$t("ta_cycle_4_instr")},{key:"ulis",label:this.$t("ta_ulis")},{key:"cap",label:this.$t("ta_cap")},{key:"lycee",label:this.$t("ta_lycee")},{key:"lycee2",label:this.$t("ta_lycee2")},{key:"post",label:this.$t("ta_post")}],discipline_options:[{key:"math",label:this.$t("di_math")},{key:"french",label:this.$t("di_french")},{key:"langs",label:this.$t("di_langs")},{key:"history",label:this.$t("di_history")},{key:"geography",label:this.$t("di_geography")},{key:"biology",label:this.$t("di_biology")},{key:"physics",label:this.$t("di_physics")},{key:"chemistry",label:this.$t("di_chemistry")},{key:"sports",label:this.$t("di_sports")},{key:"civics",label:this.$t("di_civics")},{key:"arts",label:this.$t("di_arts")},{key:"transdisciplinary",label:this.$t("di_transdisciplinary")}]}},created(){},mounted(){},beforeDestroy(){},watch:{},computed:{},methods:{}},M=D,T=(0,d.Z)(M,F,S,!1,null,"d67ce718",null),Z=T.exports,A=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ProjectCard",{attrs:{header:t.$t("machines_and_materials"),icon:"tools",has_items:t.machines_materials_items_length>0&&t.machines_materials_items_length}},[a("div",{staticClass:"u-spacingBottom"},[a("TagsField",{attrs:{label:t.$t("materials"),field_name:"materials",content:t.project.materials,path:t.project.$path,can_edit:t.can_edit}})],1),a("div",{},[a("TagsField",{attrs:{label:t.$t("machines"),field_name:"machines",content:t.project.machines,path:t.project.$path,can_edit:t.can_edit}})],1)])},O=[],B={props:{project:Object,can_edit:Boolean},components:{ProjectCard:u},data(){return{}},created(){},mounted(){},beforeDestroy(){},watch:{},computed:{machines_materials_items_length(){let t=0;return this.project.materials&&Array.isArray(this.project.materials)&&(t+=this.project.materials.length),this.project.machines&&Array.isArray(this.project.machines)&&(t+=this.project.machines.length),t}},methods:{}},R=B,N=(0,d.Z)(R,A,O,!1,null,"4581a3ea",null),E=N.exports,q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ProjectCard",{attrs:{header:t.$t("authors_and_license"),icon:"people",has_items:!!t.project.license}},[a("div",{staticClass:"u-spacingBottom"},[a("TitleField",{attrs:{label:t.$t("authors"),field_name:"authors_list",content:t.project.authors_list,input_type:"markdown",path:t.project.$path,can_edit:t.can_edit}})],1),a("div",{staticClass:"u-spacingBottom"},[a("DLabel",{attrs:{str:t.$t("license"),instructions:t.can_edit?t.$t("licence_instructions"):""}}),a("RadioCheckboxField",{attrs:{field_name:"license",input_type:"radio",content:t.project.license,path:t.project.$path,can_edit:t.can_edit,options:t.license_options}})],1)])},z=[],V={props:{project:Object,can_edit:Boolean},components:{ProjectCard:u},data(){return{license_options:[{key:"",label:this.$t("none_f")},{key:"creativecommons_by_nc_sa",label:this.$t("creativecommons_by_nc_sa"),instructions:this.$t("creativecommons_by_nc_sa_explanations")},{key:"all_rights_reserved",label:this.$t("all_rights_reserved"),instructions:this.$t("all_rights_reserved_explanations")},{key:"copyleft",label:this.$t("copyleft"),instructions:this.$t("copyleft_explanations")},{key:"custom_license",label:this.$t("custom_license"),instructions:this.$t("custom_license_explanations")}]}},created(){},mounted(){},beforeDestroy(){},watch:{},computed:{},methods:{}},U=V,J=(0,d.Z)(U,q,z,!1,null,"79a36ed0",null),H=J.exports,W=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ProjectCard",{attrs:{header:t.$t("files"),icon:"file-earmark-arrow-down",has_items:t.downloadable_files.length>0&&t.downloadable_files.length}},[a("FilesModule",{attrs:{folder_path:t.project.$path,downloadable_files:t.downloadable_files,can_edit:t.can_edit}})],1)},K=[],Y={props:{project:Object,can_edit:Boolean},components:{ProjectCard:u},data(){return{}},created(){},mounted(){},beforeDestroy(){},watch:{},computed:{downloadable_files(){return this.project.downloadable_files||[]}},methods:{}},G=Y,Q=(0,d.Z)(G,W,K,!1,null,"e19f3c22",null),X=Q.exports,tt={props:{project:Object,context:String,can_edit:Boolean},components:{CardMeta:x,CardKeywords:L,CardCompetences:Z,CardMachinesMaterials:E,CardLicense:H,CardFiles:X},data(){return{fetch_status:null,fetch_error:null,response:null,show_meta:!0,show_description:!0}},created(){"list"===this.context&&(this.show_description=!1)},mounted(){},beforeDestroy(){},watch:{"$root.is_mobile_view"(){this.$root.is_mobile_view&&(this.show_meta=!0)}},computed:{},methods:{}},et=tt,at=(a(16825),(0,d.Z)(et,s,i,!1,null,"5e0f2978",null)),st=at.exports},23816:function(t,e,a){"use strict";a.d(e,{Z:function(){return m}});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"_projectsListWithFilter"},[a("div",{staticClass:"_filterSortBar"},[a("button",{staticClass:"u-button u-button_small u-button_bleumarine",class:{"is--active":t.show_sidebar},attrs:{type:"button"},on:{click:function(e){t.show_sidebar=!t.show_sidebar}}},[t._v(" "+t._s(t.$t("filters"))+" ")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.order_key,expression:"order_key"}],staticClass:"_orderSelect",attrs:{size:"small",disabled:t.filtered_projects.length<=1},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.order_key=e.target.multiple?a:a[0]}}},t._l(t.order_options,(function(e){return a("option",{key:e.key,domProps:{value:e.key,textContent:t._s(e.text)}})})),0)]),a("div",{staticClass:"_cont"},[t.show_sidebar?a("div",{staticClass:"_sidebar"},[a("div",{staticClass:"u-switch u-switch-xs"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.show_only_finished,expression:"show_only_finished"}],attrs:{id:"only_finished",type:"checkbox"},domProps:{checked:Array.isArray(t.show_only_finished)?t._i(t.show_only_finished,null)>-1:t.show_only_finished},on:{change:function(e){var a=t.show_only_finished,s=e.target,i=!!s.checked;if(Array.isArray(a)){var o=null,r=t._i(a,o);s.checked?r<0&&(t.show_only_finished=a.concat([o])):r>-1&&(t.show_only_finished=a.slice(0,r).concat(a.slice(r+1)))}else t.show_only_finished=i}}}),a("label",{staticClass:"u-label",attrs:{for:"only_finished"}},[t._v(t._s(t.$t("only_finished")))])]),a("div",{staticClass:"u-sameRow",staticStyle:{width:"100%"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.search_project,expression:"search_project"}],attrs:{type:"text",placeholder:t.$t("search_by_title")},domProps:{value:t.search_project},on:{input:function(e){e.target.composing||(t.search_project=e.target.value)}}}),t.search_project.length>0?a("button",{staticClass:"u-button u-button_bleumarine",staticStyle:{flex:"0 0 auto"},attrs:{type:"button"},on:{click:function(e){t.search_project=""}}},[a("sl-icon",{attrs:{name:"x-lg"}})],1):t._e()]),a("div",{},[a("DLabel",{attrs:{str:t.$t("keywords")}}),a("TagsList",{attrs:{tags:t.all_keywords,tag_type:"keywords",clickable:!0,tags_active:t.getActiveTags("keywords")},on:{tagClick:function(e){return t.toggleFilter({filter_type:"keywords",value:e})}}})],1),a("div",{},[a("DLabel",{attrs:{str:t.$t("machines_and_materials")}}),a("TagsList",{attrs:{tags:t.all_materials,tag_type:"materials",clickable:!0,tags_active:t.getActiveTags("materials")},on:{tagClick:function(e){return t.toggleFilter({filter_type:"materials",value:e})}}})],1),a("div",{},[a("DLabel",{attrs:{str:t.$t("levels_and_competences")}}),a("TagsList",{attrs:{tags:t.all_levels,tag_type:"level",clickable:!0,translated:!0,tags_active:t.getActiveTags("level")},on:{tagClick:function(e){return t.toggleFilter({filter_type:"level",value:e})}}})],1)]):t._e(),a("div",{staticClass:"_listOfProjects"},[a("transition",{attrs:{name:"scaleInFade",mode:"out-in"}},[t.active_filters.length>0?a("transition-group",{staticClass:"_tagList",attrs:{tag:"section",name:"projectsList",appear:""}},[t._l(t.active_filters,(function(e){return a("SingleTag",{key:e.value,attrs:{tag_type:e.filter_type,name:e.value,clickable:!0,disableable:!0},on:{tagClick:function(a){return t.toggleFilter({filter_type:e.filter_type,value:e.value})}}})})),t.active_filters.length>1?a("button",{key:"reset_all",staticClass:"u-buttonLink",attrs:{type:"button"},on:{click:t.resetFilters}},[t._v(" "+t._s(t.$t("reset_all"))+" ")]):t._e()],2):t._e()],1),a("ProjectsList",{attrs:{projects:t.filtered_projects}})],1)])])},i=[],o=(a(26699),a(57658),a(85827),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition-group",{staticClass:"_projectsList",attrs:{tag:"section",name:"projectsList",appear:""}},[0===t.projects.length?a("div",{key:"noprojects",staticClass:"u-instructions"},[t._v(" "+t._s(t.$t("no_projects"))+" ")]):t._l(t.projects,(function(t){return a("ProjectPresentation",{key:t.$path,staticClass:"_project",attrs:{project:t,context:"list"}})}))],2)}),r=[],c=a(27071),n={props:{projects:Array},components:{ProjectPresentation:c.Z},data(){return{}},created(){},mounted(){},beforeDestroy(){},watch:{},computed:{},methods:{}},l=n,p=(a(73558),a(1001)),d=(0,p.Z)(l,o,r,!1,null,"4f3d9a98",null),_=d.exports,u={props:{projects:Array},components:{ProjectsList:_},data(){return{show_sidebar:!1,search_project:"",show_only_finished:!1,order_key:"$date_created",order_options:[{key:"$date_created",text:this.$t("date_created")},{key:"$date_modified",text:this.$t("date_modified")},{key:"alphabetical",text:this.$t("alphabetical")}]}},created(){},mounted(){},beforeDestroy(){},watch:{},computed:{all_keywords(){return this.extractArr(this.filtered_projects,"keywords")},all_materials(){return this.extractArr(this.filtered_projects,"materials")},all_levels(){return this.extractArr(this.filtered_projects,"level")},active_filters(){var t;if(null===(t=this.$route.query)||void 0===t||!t.pfilters)return[];const e=JSON.parse(this.$route.query.pfilters);return e.map((t=>({filter_type:t.filter_type,value:decodeURI(t.value)})))},sorted_projects(){return this.projects?this.projects.slice().filter((t=>this.canLoggedinSeeFolder({folder:t}))).sort(((t,e)=>"$date_created"===this.order_key?+new Date(e.$date_created)-+new Date(t.$date_created):"$date_modified"===this.order_key?+new Date(e.$date_modified)-+new Date(t.$date_modified):"alphabetical"===this.order_key?t.title.localeCompare(e.title):void 0)):[]},filtered_projects(){return this.sorted_projects.filter((t=>{if(0===this.active_filters.length&&0===this.search_project.length&&!1===this.show_only_finished)return!0;if(this.show_only_finished&&"finished"!==t.$status)return!1;for(const e of this.active_filters){const a=e.filter_type,s=e.value;if(!Object.prototype.hasOwnProperty.call(t,a))return!1;if(Array.isArray(t[a])&&!t[a].includes(s))return!1;if("string"===typeof t[a]&&t[a]!==s)return!1}return!this.search_project||t.title.toLowerCase().includes(this.search_project.toLowerCase())}))}},methods:{btnClassForMedia(t){return"keywords"===t?"u-button_orange":"materials"===t?"u-button_bleumarine":"level"===t?"u-button_rouge":"u-button_bleuvert"},toggleFilter({filter_type:t,value:e}){let a={};this.$route.query&&(a=JSON.parse(JSON.stringify(this.$route.query)));let s=a.pfilters?JSON.parse(a.pfilters):[];e&&!s.some((a=>a.filter_type===t&&a.value===encodeURI(e)))?s.push({filter_type:t,value:encodeURI(e)}):s=s.filter((a=>!(a.filter_type===t&&a.value===encodeURI(e)))),a.pfilters=JSON.stringify(s),this.$router.push({query:a})},resetFilters(){var t;let e={};null!==(t=this.$route.query)&&void 0!==t&&t.pfilters&&(e=JSON.parse(JSON.stringify(this.$route.query)),delete e.pfilters,this.$router.push({query:e}))},getActiveTags(t){return this.active_filters.reduce(((e,a)=>(a.filter_type===t&&e.push(a.value),e)),[])}}},h=u,f=(a(95215),(0,p.Z)(h,s,i,!1,null,"0735db62",null)),m=f.exports},5568:function(t,e,a){"use strict";a.d(e,{Z:function(){return l}});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"_spacePresentation",attrs:{"data-context":t.context}},[a("div",{staticClass:"_spaceCover"},[a("CoverField",{attrs:{context:t.context,cover:t.space.$cover,path:t.space.$path,can_edit:t.can_edit}}),a("transition",{attrs:{name:"toggleLock",mode:"out-in"}},["private"===t.space.$status?a("sl-icon",{key:t.space.$status,staticClass:"_icon _private",attrs:{name:"file-lock2-fill"}}):t._e()],1)],1),a("div",{staticClass:"_textBloc"},[t.can_edit?a("StatusTag",{attrs:{status:t.space.$status||"public",status_options:["public","private"],path:t.space.$path,can_edit:t.can_edit}}):t._e(),a("div",{},[a("TitleField",{staticClass:"_title",attrs:{field_name:"title",label:"full"===t.context&&t.can_edit&&!t.space.title?t.$t("title"):"",tag:"full"===t.context?"h1":"h3",content:t.space.title,path:t.space.$path,maxlength:280,can_edit:t.can_edit}}),t.can_edit||t.space.subtitle?a("TitleField",{staticClass:"_subtitle",attrs:{field_name:"subtitle",label:"full"===t.context&&t.can_edit&&!t.space.subtitle?t.$t("subtitle"):"",tag:"full"===t.context?"h2":"h4",content:t.space.subtitle,path:t.space.$path,maxlength:280,can_edit:t.can_edit}}):t._e()],1),"full"===t.context&&(t.can_edit||t.space.description)?a("TitleField",{staticClass:"_description",attrs:{field_name:"description",label:t.can_edit?t.$t("description"):void 0,content:t.space.description,path:t.space.$path,input_type:"markdown",maxlength:480,can_edit:t.can_edit}}):t._e(),"full"===t.context?[a("AdminsAndContributorsField",{attrs:{folder:t.space,can_edit:t.can_edit,admin_label:t.$t("referent"),admin_instructions:t.$t("space_admin_instructions"),contrib_instructions:t.$t("space_contrib_instructions")}}),t.can_edit?a("div",{staticClass:"u-mediaOptions"},[a("RemoveMenu",{attrs:{remove_text:t.$t("remove_space")},on:{remove:t.removeSpace}})],1):t._e()]:t._e()],2),"list"===t.context?a("div",{staticClass:"_openSpace"},[a("router-link",{attrs:{to:{path:t.createURLFromPath(t.space.$path)}}},[a("div",{staticClass:"_clickZone"})])],1):t._e()])},i=[],o={props:{space:Object,context:String,can_edit:Boolean},components:{},data(){return{}},created(){},mounted(){},beforeDestroy(){},watch:{},computed:{},methods:{async removeSpace(){try{await this.$api.deleteItem({path:this.space.$path})}catch(t){}}}},r=o,c=(a(20047),a(1001)),n=(0,c.Z)(r,s,i,!1,null,"5ccbf313",null),l=n.exports},9698:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return v}});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"_spaceView"},[t.space?a("div",[a("div",{staticClass:"_topSpace"},[a("SpacePresentation",{attrs:{space:t.space,context:"full",can_edit:t.can_edit_space}})],1),a("div",{staticClass:"_projectsList"},[a("div",{staticClass:"u-sameRow u-spacingBottom"},[a("DLabel",{attrs:{str:t.$t("list_of_projects"),tag:"h2"}}),t.can_contribute_to_space?a("button",{staticClass:"u-button u-button_red u-button_small",attrs:{type:"button"},on:{click:function(e){t.show_create_modal=!0}}},[a("svg",{staticStyle:{"enable-background":"new 0 0 168 168"},attrs:{version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 168 168","xml:space":"preserve"}},[a("path",{staticStyle:{fill:"#fc4b60"},attrs:{d:"M24.6,24.4c-32.8,32.8-32.8,86.1,0,119c32.8,32.8,85.9,32.8,118.7,0c32.8-32.8,32.8-85.9,0-118.7\n\t\tC110.5-8.2,57.5-8.2,24.6,24.4z"}}),a("polygon",{staticStyle:{fill:"#ffbe32"},attrs:{points:"132.3,73.4 132.3,94.4 94.6,94.4 94.6,132.1 73.6,132.1 73.6,94.4 35.9,94.4 35.9,73.4 \n\t\t73.6,73.4 73.6,35.7 94.6,35.7 94.6,73.4 \t\t"}})]),t._v(" Â  "+t._s(t.$t("create_a_project"))+" ")]):t._e()],1),t.show_create_modal?a("CreateProject",{attrs:{path:t.projects_path},on:{close:function(e){t.show_create_modal=!1},openNewProject:t.openNewProject}}):t._e(),void 0!==t.projects?a("ProjectsListWithFilter",{attrs:{projects:t.projects}}):t._e()],1)]):t._e()])},i=[],o=(a(57658),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("BaseModal2",{attrs:{title:t.$t("create_a_project")},on:{close:function(e){return t.$emit("close")}}},[a("form",{staticClass:"input-validation-required",on:{submit:function(e){return e.preventDefault(),t.createProject.apply(null,arguments)}}},[a("DLabel",{attrs:{str:t.$t("title")}}),a("TextInput",{attrs:{content:t.new_project_title,maxlength:40,required:!0},on:{"update:content":function(e){t.new_project_title=e},toggleValidity:function(e){return t.allow_save=e}}}),a("br"),a("div",{},[a("ToggleInput",{attrs:{content:t.new_project_is_private,label:t.$t("private"),options:{true:t.$t("private_status_explanations_projects"),false:t.$t("public_status_explanations_projects")}},on:{"update:content":function(e){t.new_project_is_private=e}}})],1),a("br"),a("button",{staticClass:"u-button u-button_bleuvert",attrs:{slot:"footer",type:"submit",loading:t.is_creating_project},slot:"footer"},[t._v(" "+t._s(t.$t("create_and_open"))+" ")]),t.error_msg?[a("br"),a("br"),a("div",{staticClass:"u-errorMsg",domProps:{textContent:t._s(t.error_msg)}})]:t._e()],2)])}),r=[],c={props:{path:String},components:{},data(){return{new_project_title:"",new_project_is_private:!1,is_creating_project:!1,allow_save:!1,error_msg:""}},created(){},mounted(){},beforeDestroy(){},watch:{},computed:{},methods:{async createProject(){this.is_creating_project=!0;const t=this.setDefaultContentAdmins();try{const e=await this.$api.createFolder({path:this.path,additional_meta:{title:this.new_project_title,requested_slug:this.new_project_title,$status:!0===this.new_project_is_private?"private":"draft",$admins:t}});setTimeout((()=>{this.$emit("openNewProject",e)}),50)}catch(e){this.error_msg="Error: "+e.message,setTimeout((()=>{this.error_msg=""}),5e3),this.is_creating_project=!1}}}},n=c,l=a(1001),p=(0,l.Z)(n,o,r,!1,null,"0e8499c0",null),d=p.exports,_=a(23816),u=a(5568),h={props:{},components:{CreateProject:d,ProjectsListWithFilter:_.Z,SpacePresentation:u.Z},data(){return{space:void 0,projects:void 0,show_create_modal:!1}},created(){},async mounted(){await this.getSpace(),this.$api.join({room:this.space_path}),this.$eventHub.$emit("received.space",this.space),await this.getProjects(),this.$api.join({room:this.projects_path}),this.$eventHub.$on("folder.removed",this.closeOnRemove)},beforeDestroy(){this.$api.leave({room:this.space_path}),this.$api.leave({room:this.projects_path}),this.$eventHub.$off("folder.removed",this.closeOnRemove)},watch:{},computed:{space_path(){return this.createPath({space_slug:this.$route.params.space_slug})},projects_path(){return this.space_path+"/projects"},can_edit_space(){return this.canLoggedinEditFolder({folder:this.space})},can_contribute_to_space(){return this.canLoggedinContributeToFolder({folder:this.space})}},methods:{async getSpace(){this.space=await this.$api.getFolder({path:this.space_path}).catch((()=>{}))},async getProjects(){this.projects=await this.$api.getFolders({path:this.projects_path}).catch((()=>{}))},openNewProject(t){this.show_create_modal=!1;const e=this.createURLFromPath(this.projects_path+"/"+t);this.$router.push(e)},closeOnRemove({path:t}){t===this.space.$path&&(this.$alertify.closeLogOnClick(!0).delay(4e3).log(this.$t("notifications.space_was_removed")),this.$router.push("/"))}}},f=h,m=(a(19576),(0,l.Z)(f,s,i,!1,null,"3e1b9642",null)),v=m.exports},13498:function(t,e,a){"use strict";a.r(e);var s=a(8081),i=a.n(s),o=a(23645),r=a.n(o),c=r()(i());c.push([t.id,'._projectCard[data-v-b9aa0212]{background:#fff;display:flex;flex-flow:row nowrap}._projectCard ._icon[data-v-b9aa0212]{font-size:110%;width:30px;height:30px;padding:calc(var(--spacing)/2);color:currentColor;line-height:0}._projectCard ._name[data-v-b9aa0212]{flex:1 1 auto}._projectCard ._itemsNut[data-v-b9aa0212]{display:flex;line-height:1;align-items:center;justify-content:center;min-width:18px;height:auto;aspect-ratio:1;border-radius:50%;font-family:Fira Code;padding:calc(var(--spacing)/16);margin:calc(var(--spacing)/4);font-weight:500}._projectCard ._itemsNut[data-isfilled][data-v-b9aa0212]{background:var(--c-bleuvert);color:#fff}._projectCard[data-v-b9aa0212] ::marker{display:none;content:""}._projectCard summary[data-v-b9aa0212]{position:sticky;top:0;z-index:1;display:flex;flex-flow:row nowrap;align-items:center;padding:calc(var(--spacing)/8);gap:calc(var(--spacing)/2);cursor:pointer;color:#000}._projectCard summary[data-v-b9aa0212]:focus-visible,._projectCard summary[data-v-b9aa0212]:hover{color:#fff;background-color:var(--c-gris_fonce)}._projectCard ._content[data-v-b9aa0212]{padding:calc(var(--spacing)/2)}._projectCard[open] summary[data-v-b9aa0212]{color:#fff;background-color:var(--c-noir)}._projectCard[open] ._content[data-v-b9aa0212]{border:1px solid var(--c-noir);border-top:none}',""]),e["default"]=c},93947:function(t,e,a){"use strict";a.r(e);var s=a(8081),i=a.n(s),o=a(23645),r=a.n(o),c=r()(i());c.push([t.id,"._projectInfos[data-v-5e0f2978]{position:relative;display:flex;flex-flow:row nowrap;align-items:stretch;width:100%;max-width:calc(var(--max-column-width));margin:0 auto;overflow:hidden;background:#fff;transition:all .4s cubic-bezier(.19,1,.22,1)}._projectInfos.is--linkToProject[data-v-5e0f2978]:hover{transform:translateY(-8px);box-shadow:0 3px 6px rgba(0,0,0,.16),0 3px 6px rgba(0,0,0,.23)}._projectInfos.is--list[data-v-5e0f2978]{box-shadow:0 1px 4px rgba(0,0,0,.2);border-radius:4px}._projectInfos.is--list ._description[data-v-5e0f2978],._projectInfos.is--list ._title[data-v-5e0f2978]{font-size:90%}._projectInfos.is--list[data-v-5e0f2978]{display:block}._projectInfos.is--mobileView[data-v-5e0f2978]{flex-flow:row wrap}._projectInfos>*[data-v-5e0f2978]{flex:10 1 320px;transition:all .4s cubic-bezier(.19,1,.22,1)}._projectInfos>._projectInfos--meta[data-v-5e0f2978]{flex:1 0 260px}._projectInfos>._projectInfos--meta.is--hidden[data-v-5e0f2978]{flex:0 0 0;opacity:0}._projectInfos.is--mobileView ._projectInfos--meta[data-v-5e0f2978]{flex:0 0 100%}._projectInfos--infos[data-v-5e0f2978]{display:flex;flex-flow:column nowrap;place-content:center;gap:calc(var(--spacing)/1);padding:calc(var(--spacing)/1);transition:all .4s}.is--list ._projectInfos--infos[data-v-5e0f2978]{gap:calc(var(--spacing)/4);order:0;padding-top:calc(var(--spacing)/2);pointer-events:none}.is--list ._projectInfos--infos ._showDescription[data-v-5e0f2978]{pointer-events:auto}._projectInfos--infos>*[data-v-5e0f2978]{max-width:56ch}._imageSelect[data-v-5e0f2978]{background:#fff;position:relative}._projectInfos--cover[data-v-5e0f2978]{position:relative;aspect-ratio:1/1;width:45vh;height:45vh;flex:0 0 45vh}@supports not (aspect-ratio:1/1){._projectInfos--cover[data-v-5e0f2978]{width:500px;height:500px}}.is--list ._projectInfos--cover[data-v-5e0f2978]{padding:2px;width:100%;height:auto}.is--mobileView ._projectInfos--cover[data-v-5e0f2978]{flex:1 1 auto;max-height:40vh;max-width:40vh;height:auto}._projectInfos--cover ._icon[data-v-5e0f2978]{position:absolute;top:0;right:0;margin:calc(var(--spacing)/1);font-size:125%}._projectInfos--cover ._check[data-v-5e0f2978]{color:var(--c-bleuvert)}._projectInfos--meta[data-v-5e0f2978]{display:flex;flex-flow:column nowrap;font-size:90%;overflow-x:hidden;overflow-y:auto;height:45vh}._projectInfos--meta[data-v-5e0f2978]::-webkit-scrollbar{height:18px;width:18px;background-color:transparent}._projectInfos--meta[data-v-5e0f2978]::-webkit-scrollbar-thumb,._projectInfos--meta[data-v-5e0f2978]::-webkit-scrollbar-track{border:6px solid hsla(0,0%,100%,0);border-radius:24px;background-clip:padding-box;-webkit-transition:all .4s;transition:all .4s}._projectInfos--meta[data-v-5e0f2978]::-webkit-scrollbar-track{background-color:transparent}._projectInfos--meta[data-v-5e0f2978]::-webkit-scrollbar-thumb{background-color:var(--c-noir)}._projectInfos--meta[data-v-5e0f2978]::-webkit-scrollbar-thumb:hover{background-color:var(--c-gris);border:6px solid hsla(0,0%,100%,0)}.is--mobileView ._projectInfos--meta[data-v-5e0f2978]{flex-flow:row nowrap;max-height:none;overflow-x:auto;overflow-y:hidden;height:auto}._projectInfos--meta>*[data-v-5e0f2978]{flex:0 0 auto;min-width:220px}.is--mobileView ._projectInfos--meta>*[data-v-5e0f2978]{flex:1 0 220px}._projectInfos--open[data-v-5e0f2978]{display:flex;justify-content:center}._projectInfos--open ._clickZone[data-v-5e0f2978]{position:absolute;top:0;left:0;width:100%;height:100%}._showMeta[data-v-5e0f2978]{position:absolute;top:0;right:0;z-index:100;background:#fff;margin:calc(var(--spacing)/4)}._showDescription[data-v-5e0f2978]{position:relative;z-index:100;padding:0;text-align:left}._allTags[data-v-5e0f2978]{display:flex;flex-flow:row wrap;gap:calc(var(--spacing)/4)}",""]),e["default"]=c},2019:function(t,e,a){"use strict";a.r(e);var s=a(8081),i=a.n(s),o=a(23645),r=a.n(o),c=r()(i());c.push([t.id,"._projectsList[data-v-4f3d9a98]{display:grid;grid-auto-rows:max-content;grid-gap:calc(var(--spacing)/1);align-items:stretch;grid-template-columns:repeat(auto-fill,minmax(180px,1fr))}._projectsList>*[data-v-4f3d9a98]{margin:0}._project[data-v-4f3d9a98]{box-shadow:0 1px 4px rgba(0,0,0,.1);cursor:pointer}._project[data-v-4f3d9a98]  ._projectInfos{min-height:100%}",""]),e["default"]=c},30416:function(t,e,a){"use strict";a.r(e);var s=a(8081),i=a.n(s),o=a(23645),r=a.n(o),c=r()(i());c.push([t.id,'._projectsListWithFilter[data-v-0735db62]{margin-top:calc(var(--spacing)*1);width:100%;min-height:70vh;max-width:calc(var(--max-column-width));margin:0 auto}._cont[data-v-0735db62]{flex-flow:row wrap;gap:calc(var(--spacing)/1)}._cont[data-v-0735db62],._sidebar[data-v-0735db62]{display:flex;align-items:flex-start}._sidebar[data-v-0735db62]{flex:0 0 240px;position:sticky;overflow:hidden;top:0;flex-flow:column nowrap;justify-content:flex-start;gap:calc(var(--spacing)/2);padding-top:calc(var(--spacing)*1)}._sidebar[data-v-0735db62]  button{white-space:nowrap;overflow:hidden;text-overflow:" [..]"}._listOfProjects[data-v-0735db62]{flex:1 1 auto;margin-top:calc(var(--spacing)/1)}._tagList[data-v-0735db62]{display:flex;gap:calc(var(--spacing)/2);margin-bottom:calc(var(--spacing)*1)}._orderSelect[data-v-0735db62]{max-width:22ch}._filterSortBar[data-v-0735db62]{display:flex;flex-flow:row nowrap;justify-content:flex-start;align-items:center;gap:calc(var(--spacing)/2)}',""]),e["default"]=c},78485:function(t,e,a){"use strict";a.r(e);var s=a(8081),i=a.n(s),o=a(23645),r=a.n(o),c=r()(i());c.push([t.id,"._spacePresentation[data-v-5ccbf313]{position:relative;display:flex;flex-flow:row wrap;align-items:center;width:100%;margin:0 auto;transition:all .25s cubic-bezier(.19,1,.22,1)}._spacePresentation[data-context=full][data-v-5ccbf313]{gap:calc(var(--spacing)/2)}._spacePresentation[data-context=list][data-v-5ccbf313]{box-shadow:0 1px 4px rgba(0,0,0,.1)}._spacePresentation[data-context=list][data-v-5ccbf313]:hover{box-shadow:0 1px 10px rgba(0,0,0,.1)}._spaceCover[data-v-5ccbf313]{position:relative;aspect-ratio:1/1;align-self:flex-start;flex:1 0 80px}._textBloc[data-v-5ccbf313]{padding:calc(var(--spacing)/2);flex:5 1 0;display:flex;flex-flow:column nowrap;gap:calc(var(--spacing)/2)}._subtitle[data-v-5ccbf313]{color:var(--c-gris_fonce)}._description[data-v-5ccbf313]{display:block;max-width:88ch;font-size:var(--sl-font-size-small)}._openSpace[data-v-5ccbf313]{display:flex;justify-content:center}._openSpace[data-v-5ccbf313],._openSpace ._clickZone[data-v-5ccbf313]{position:absolute;top:0;left:0;width:100%;height:100%}._icon[data-v-5ccbf313]{position:absolute;top:0;right:0;margin:calc(var(--spacing)/1)}",""]),e["default"]=c},28929:function(t,e,a){"use strict";a.r(e);var s=a(8081),i=a.n(s),o=a(23645),r=a.n(o),c=r()(i());c.push([t.id,"._spaceView[data-v-3e1b9642]{margin:0 auto}._topSpace[data-v-3e1b9642]{max-width:var(--max-column-width);max-width:100ch;box-shadow:0 1px 40px rgba(0,0,0,.1);margin:calc(var(--spacing)*4) auto}._projectsList[data-v-3e1b9642],._topSpace[data-v-3e1b9642]{padding:calc(var(--spacing)*1)}",""]),e["default"]=c},31848:function(t,e,a){var s=a(13498);s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[t.id,s,""]]),s.locals&&(t.exports=s.locals);var i=a(31982).Z;i("0dcfb8f8",s,!0,{sourceMap:!1,shadowMode:!1})},16825:function(t,e,a){var s=a(93947);s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[t.id,s,""]]),s.locals&&(t.exports=s.locals);var i=a(31982).Z;i("2771c818",s,!0,{sourceMap:!1,shadowMode:!1})},73558:function(t,e,a){var s=a(2019);s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[t.id,s,""]]),s.locals&&(t.exports=s.locals);var i=a(31982).Z;i("16e3b0b8",s,!0,{sourceMap:!1,shadowMode:!1})},95215:function(t,e,a){var s=a(30416);s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[t.id,s,""]]),s.locals&&(t.exports=s.locals);var i=a(31982).Z;i("417b835b",s,!0,{sourceMap:!1,shadowMode:!1})},20047:function(t,e,a){var s=a(78485);s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[t.id,s,""]]),s.locals&&(t.exports=s.locals);var i=a(31982).Z;i("b63d1c56",s,!0,{sourceMap:!1,shadowMode:!1})},19576:function(t,e,a){var s=a(28929);s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[t.id,s,""]]),s.locals&&(t.exports=s.locals);var i=a(31982).Z;i("6fab6df8",s,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=SpaceView.js.map