(self["webpackChunkapp"]=self["webpackChunkapp"]||[]).push([[160],{4040:function(t,e,i){"use strict";i.d(e,{Z:function(){return L}});var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"_singlePage",class:{"is--preview":"preview"===t.context,"is--editable":t.can_edit}},[i("div",{staticClass:"_pagecontainer",style:t.page_styles},[i("div",{staticClass:"_pagecontent"},[t.can_edit&&t.show_grid?i("svg",{staticClass:"_grid",attrs:{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg"}},[i("defs",[i("pattern",{attrs:{id:"gridSmall",width:t.gridstep,height:t.gridstep,patternUnits:"userSpaceOnUse"}},[i("path",{attrs:{d:"M "+t.gridstep+" 0 L 0 0 0 "+t.gridstep,fill:"none",stroke:"var(--c-gridlines)",strokeWidth:"1"}})]),i("pattern",{attrs:{id:"grid",width:5*t.gridstep,height:5*t.gridstep,patternUnits:"userSpaceOnUse"}},[i("rect",{attrs:{width:5*t.gridstep,height:5*t.gridstep,fill:"url(#gridSmall)"}}),i("path",{attrs:{d:"M "+5*t.gridstep+" 0 L 0 0 0 "+5*t.gridstep,fill:"none",stroke:"var(--c-gridfiveslines)",strokeWidth:"1"}})])]),i("rect",{attrs:{width:"100%",height:"100%",fill:"url(#grid)"}})]):t._e(),t._l(t.page_modules,(function(e){return i("MoveableItem",{key:e.$path,staticClass:"_item",attrs:{context:t.context,publimodule:e,magnification:t.magnification,gridstep:t.show_grid&&t.snap_to_grid?t.gridstep:1,scale:t.scale,can_edit:t.can_edit,is_active:t.active_module.$path===e.$path}})})),t.can_edit&&t.l_margins?i("svg",{staticClass:"_margins",attrs:{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",fill:"transparent"}},[i("rect",{attrs:{x:t.magnify(t.l_margins.left),y:t.magnify(t.l_margins.top),width:t.magnify(t.page_width-t.l_margins.left-t.l_margins.right),height:t.magnify(t.page_height-t.l_margins.top-t.l_margins.bottom)}})]):t._e(),t.pagination&&!t.hide_pagination&&t.page_number_corrected>0?i("div",{staticClass:"_pagination",style:t.pagination_styles},[t._v(" "+t._s(t.page_number_corrected)+" ")]):t._e(),t.can_edit&&t.l_margins?i("svg",{staticClass:"_pageBorders",attrs:{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",fill:"transparent"}},[i("rect",{attrs:{x:"0",y:"0",width:t.magnify(t.page_width),height:t.magnify(t.page_height),stroke:"black"}})]):t._e()],2)])])},n=[],a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("DDR",{key:t.component_key,staticClass:"_moveableItem",class:{"is--locked":!0===t.publimodule.locked,"is--editable":t.can_edit,"is--active":t.can_edit&&t.is_active,"is--beingEdited":t.content_is_edited,"panzoom-exclude":t.can_edit},style:t.module_z_index,attrs:{active:t.can_edit&&t.is_active&&!0!==t.publimodule.locked&&!0!==t.content_is_edited,value:t.transform,parent:!1,acceptRatio:t.aspect_ratio,handlerSize:15,grid:t.grid,id:t.publimodule.$path,zoom:t.scale},on:{dragstart:t.dragStart,drag:t.onDrag,dragend:t.dragEnd,resizestart:t.resizeStart,resizeend:t.resizeEnd,rotateend:t.rotateEnd}},[i("span",{staticClass:"_activator",on:{mousedown:t.setActive,dblclick:t.dblClick}},[i("PublicationModule",{staticClass:"_moveableItem--content",style:t.module_styles,attrs:{publimodule:t.publimodule,can_edit:t.can_edit&&t.is_active,borderRadius:t.turnCMtoPX(t.publimodule.border_radius)||0,context:t.context,page_template:"page_by_page",number_of_max_medias:1,magnification:t.magnification},on:{duplicate:t.onDuplicateModule,contentIsEdited:t.contentIsEdited,contentIsNotEdited:t.contentIsNotEdited}})],1),t.can_edit?i("div",{staticClass:"_unlockBtn"},[!0===t.publimodule.locked?i("button",{staticClass:"u-button u-button_orange u-button_small u-button_round u-colorBlack",attrs:{type:"button"},on:{click:function(e){return t.unlock()}}},[i("sl-icon",{attrs:{name:"lock"}})],1):t._e(),!t.can_edit||!t.is_active||t.content_is_edited||t.publimodule.locked&&!1!==t.publimodule.locked?t._e():i("button",{staticClass:"u-button u-button_orange u-button_small u-button_round u-colorBlack",attrs:{type:"button"},on:{click:function(e){return t.lock()}}},[i("sl-icon",{attrs:{name:"unlock"}})],1)]):t._e()])},r=[];i(52262),i(24506),i(26699),i(57658),i(21703),i(85827);class s{constructor(t){this._values=t}toString(){return`Vector(${this._values.join(", ")})`}get length(){return this._values.length}dot(t){if(t instanceof s&&this.length===t.length)return this._values.map(((e,i)=>e*t._values[i])).reduce(((t,e)=>t+e));throw Error("The param `vector` must instance of Vector")}get(t){return this._values[t]}}var l=s;class c{constructor(t){this._values=t}static zeros(t){return new c(new Array(t[0]).fill(null).map((()=>new Array(t[1]).fill(0))))}valueOf(){return JSON.parse(JSON.stringify(this._values))}toString(){return"Matrix ( "+this._values.map((t=>t.join(" "))).join(", ")+" )"}rows(){return this._values.length}cols(){return this._values[0].length}rowVector(t){return new l(this._values[t].slice(0))}colVector(t){let e=new Array(this.rows()).fill(0);return this._values.forEach(((i,o)=>{e[o]=i[t]})),new l(e)}dot(t){if(t instanceof l&&this.cols()===t.length)return new l(new Array(t.length).fill(null).map(((e,i)=>this.rowVector(i).dot(t))));if(t instanceof c&&this.cols()===t.rows()){let e,i=t.cols(),o=t.rows(),n=c.zeros([o,i]);for(let a=0;a<i;a++){e=this.dot(t.colVector(a));for(let t=0;t<o;t++)n._values[t][a]=e.get(t)}return n}throw Error("expected a Vector or Matrix but got "+typeof t)}get(t,e){return this._values[t][e]}T(){return new c(new Array(this.cols()).fill(null).map(((t,e)=>new Array(this.rows()).fill(0).map(((t,i)=>this.get(i,e))))))}}var d=c;const u={br:0,bm:1,bl:2,l:3,tl:4,tm:5,tr:6,r:7},p={tl:0,tm:1,tr:2,r:3,br:4,bm:5,bl:6,l:7},h={br:0,bm:0,bl:2,l:2,tl:4,tm:4,tr:6,r:6},g={l:1,r:1},m={tm:1,bm:1},_={tr:1,bl:1,r:1,l:1};function v(t){return t*Math.PI/180}function f(t){return 180*t/Math.PI}function b({x:t,y:e,width:i,height:o,rotation:n},a){let r=n*Math.PI/180,s=i/2*a,l=o/2*a,c=new d([[Math.cos(r),Math.sin(r)],[-Math.sin(r),Math.cos(r)]]),u=new d([[-s,l],[0,l],[s,l],[s,0],[s,-l],[0,-l],[-s,-l],[-s,0]]);return c.dot(u.T()).T().valueOf().map((i=>({x:i[0]+s+t*a,y:-(i[1]-l)+e*a})))}function w({type:t,x:e,y:i,dis:o,pressAngle:n,startAngle:a}){let r,s,l=f(Math.atan2(i,e)),c=v(n+l-a);return _[t]?(s=Math.cos(c)*o,r=Math.sin(c)*o):(s=Math.sin(c)*o,r=Math.cos(c)*o),{w:r,h:s}}const y=["nw","n","ne","e","se","s","sw","w"],x={tl:0,tm:1,tr:2,r:3,br:4,bm:5,bl:6,l:7};function C(t,e){let i=x[t],o=(i+Math.floor(e/45))%8;return y[o]}var M,z,$={name:"ddr",props:{value:{default:function(){return{x:0,y:0,width:100,height:100,rotation:0}},type:Object},handlerSize:{type:Number,default:11},active:{default:!0,type:Boolean},resizeHandler:{default:function(){return["tl","tm","tr","r","br","bm","bl","l"]},type:Array},resizable:{default:!0,type:Boolean},rotatable:{default:!0,type:Boolean},draggable:{default:!0,type:Boolean},acceptRatio:{default:!1,type:Boolean},minWidth:{type:Number,default:1},minHeight:{type:Number,default:1},maxWidth:{type:Number,default:1e8},maxHeight:{type:Number,default:1e8},parent:{type:Boolean,default:!1},beforeActive:{type:Function,default:()=>!1},id:[Number,String],renderContent:Function,grid:{type:Array,default:()=>[1,1]},stop:{default:!0,type:Boolean},prevent:{default:!0,type:Boolean},zoom:{default:1,type:Number},axis:{type:String,default:"xy"}},data(){return{transform:Object.assign({},this.value),currentRatio:1,isInitialRatio:!1,isDragging:!1,isResizing:!1,isRotating:!1,isReadyToDrag:!1,isReadyToResize:!1,isReadyToRotate:!1}},created(){this.localeTransform={...this.transform}},watch:{value(t){this.transform={...t}}},computed:{rotateHandler(){let t=Math.ceil(this.handlerSize/this.zoom)+"px";return`width:${t};height:${t};top:-25px;margin-left:${-Math.floor(this.handlerSize/2)}px`},style(){let t=this.transform;return`left:${t.x}px;top:${t.y}px;width:${t.width}px;height:${t.height}px;transform:rotate(${t.rotation}deg)`}},methods:{handleDefaultEvent(t){this.stop&&t.stopPropagation(),this.prevent&&t.preventDefault()},getNewHandler(t){let e=C(t,this.transform.rotation),{handlerSize:i}=this,o={},n=-Math.floor(i/2)+"px";switch(t){case"tl":o={top:n,left:n};break;case"tm":o={top:n,"margin-left":n};break;case"tr":o={right:n,top:n};break;case"r":o={right:n,"margin-top":n};break;case"br":o={bottom:n,right:n};break;case"bm":o={"margin-left":n,bottom:n};break;case"bl":o={left:n,bottom:n};break;case"l":o={"margin-top":n,left:n};break}let a={cursor:e+"-resize",width:Math.ceil(i/this.zoom)+"px",height:Math.ceil(i/this.zoom)+"px",...o};return Object.keys(a).map((t=>`${t}:${a[t]}`)).join(";")},emitChange(){this.$emit("input",{...this.transform})},handleMouseDown(t){if(!this.active&&!this.beforeActive(this.id))return;this.handleDefaultEvent(t);let e=t.touches?t.touches[0]:t,{clientX:i,clientY:o}=e;if(this._lastX=i,this._lastY=o,this._activeTarget=t.target,this._parentRect=this.$refs.wrapper.parentNode.getBoundingClientRect(),this._resizeHandler=t.target.dataset.resizetype,this.localeTransform={...this.transform},this.parent){let t=0,e=this._parentRect.width/this.zoom-this.transform.width,i=0,o=this._parentRect.height/this.zoom-this.transform.height,n=this.transform.x+this.transform.width,a=this._parentRect.width/this.zoom-this.transform.x,r=this.transform.y+this.transform.height,s=this._parentRect.height/this.zoom-this.transform.y;this.bounday={minLeft:t,maxLeft:e,minTop:i,maxTop:o,maxLeftWidth:n,maxRightWidth:a,maxTopHeight:r,maxBottomHeight:s}}document.addEventListener("mousemove",this.handleMouseMove,!1),document.addEventListener("touchmove",this.handleMouseMove,!1),document.addEventListener("touchend",this.handleMouseUp,!1),document.addEventListener("mouseup",this.handleMouseUp,!1),"rotate"===t.target.dataset.type?(this._handlerType="rotate",this.isReadyToRotate=!0,this.handleRotateStart(t),this.$emit("rotatestart",t,this.transform)):this._activeTarget.dataset.resizetype?(this._handlerType="resize",this.isReadyToResize=!0,this.handleResizeStart(t),this.$emit("resizestart",t,this.transform)):(this._handlerType="drag",this.isReadyToDrag=!0,this.draggable&&this.$emit("dragstart",t,this.transform))},handleMouseMove(t){this.handleDefaultEvent(t);let{clientX:e,clientY:i}=t.touches?t.touches[0]:t;this.isReadyToDrag=!1,this.isReadyToResize=!1,this.isReadyToRotate=!1,this._deltaX=e-this._lastX,this._deltaY=i-this._lastY,this._lastX=e,this._lastY=i,"resize"===this._handlerType?(this.isResizing=!0,this.handleResizeMove(t),this.$emit("resize",t,this.transform)):"drag"===this._handlerType&&this.draggable?(this.isDragging=!0,this.doMove(t),this.$emit("drag",t,this.transform)):"rotate"===this._handlerType&&(this.isRotating=!0,this.handleRotateMove(t),this.$emit("rotate",t,this.transform)),this.emitChange()},doMove(){let[t,e]=this.grid,i=this._deltaX/this.zoom,o=this._deltaY/this.zoom,n=this.localeTransform.x=Math.round(this.localeTransform.x+i),a=this.localeTransform.y=Math.round(this.localeTransform.y+o);this.axis.includes("x")&&(n>this.transform.x?this.transform.x=this.restrictToLeftOfParent(n-n%t):n<this.transform.x&&(this.transform.x=this.restrictToLeftOfParent(n-(n%t-t)))),this.axis.includes("y")&&(a>this.transform.y?this.transform.y=this.restrictToTopOfParent(a-a%e):a<this.transform.y&&(this.transform.y=this.restrictToTopOfParent(a-(a%e-e))))},restrictToLeftOfParent(t){return this.parent?(t=Math.max(this.bounday.minLeft,t),t=Math.min(this.bounday.maxLeft,t),t):t},restrictToTopOfParent(t){return this.parent?(t=Math.max(this.bounday.minTop,t),t=Math.min(this.bounday.maxTop,t),t):t},restrictHeight(t,e){return!this.parent||this.transform.rotation>0?t:["bl","bm","br"].includes(e)?Math.min(this.bounday.maxBottomHeight,t):["tl","tm","tr"].includes(e)?Math.min(this.bounday.maxTopHeight,t):t},restrictWidth(t,e){return!this.parent||this.transform.rotation>0?t:["tl","l","bl"].includes(e)?Math.min(this.bounday.maxLeftWidth,t):["tr","r","br"].includes(e)?Math.min(this.bounday.maxRightWidth,t):t},handleMouseUp(t){this.handleDefaultEvent(t),document.removeEventListener("mousemove",this.handleMouseMove,!1),document.removeEventListener("mouseup",this.handleMouseUp,!1),document.removeEventListener("touchmove",this.handleMouseMove,!1),document.removeEventListener("touchend",this.handleMouseUp,!1);let e={drag:"draggable",resize:"resizable",rotate:"rotatable"};this.isInitialRatio=this.isDragging=this.isResizing=this.isRotating=!1,this.isReadyToDrag=this.isReadyToResize=this.isReadyToRotate=!1,this[e[this._handlerType]]&&this.$emit(this._handlerType+"end",t,this.transform)},handleResizeStart(t){let e,i=this._resizeHandler,o=this.transform,n=b(o,this.zoom),a=n[u[i]],r=n[h[i]],{clientX:s,clientY:l}=t.touches?t.touches[0]:t,c=n[p[i]],d=s-c.x,v=l-c.y,w=s-r.x-d,y=l-r.y-v,x=o.width,C=o.height;e=_[i]?f(Math.atan2(x,g[i]?C/2:C)):f(Math.atan2(C,m[i]?x/2:x));let M=f(Math.atan2(y,w));this._resizeOpt={matrix:n,rect:o,type:i,opposite:a,opp2:r,pressAngle:e,startAngle:M,offsetX:d,offsetY:v}},handleResizeMove(t){let{clientX:e,clientY:i}=t.touches?t.touches[0]:t,{opposite:o,opp2:n,type:a,pressAngle:r,startAngle:s,offsetX:l,offsetY:c}=this._resizeOpt,d=e-n.x-l,p=i-n.y-c,h=Math.hypot(p,d),_=t.shiftKey||this.acceptRatio,[v,f]=this.grid;!this.isInitialRatio&&_&&(this.currentRatio=this.transform.width/this.transform.height,this.isInitialRatio=!0),_||(this.isInitialRatio=!1);let{w:y,h:x}=w({type:a,dis:h,x:d,y:p,startAngle:s,pressAngle:r}),C={...this.localeTransform};this.isInitialRatio&&(g[a]?x=y/this.currentRatio:y=x*this.currentRatio),y/=this.zoom,x/=this.zoom,y=Math.min(Math.max(Math.round(y),this.minWidth),this.maxWidth),x=Math.min(Math.max(Math.round(x),this.minHeight),this.maxHeight),g[a]&&!_?C.width=y:(m[a]&&!_||(C.width=y),C.height=x);let M=this._resizeHandler;C.width%v>0&&(C.width>this.localeTransform.width?C.width=C.width-C.width%v:C.width=C.width-(C.width%v-v)),C.height%f>0&&(C.height>this.localeTransform.height?C.height=C.height-C.height%f:C.height=C.height-(C.height%f-f)),C.height=this.restrictHeight(C.height,M),C.width=this.restrictWidth(C.width,M);let z=b(C,this.zoom),$=z[u[a]],k=-($.x-o.x)/this.zoom,S=-($.y-o.y)/this.zoom;C.x=Math.round(C.x+k),C.y=Math.round(C.y+S),this.transform=C},handleRotateStart(t){let{clientX:e,clientY:i}=t.touches?t.touches[0]:t,o=this.$refs.wrapper.getBoundingClientRect(),n=o.left+o.width/2,a=o.top+o.height/2,r=180/Math.PI*Math.atan2(i-a,e-n),s=this.transform.rotation;this._rotateOpt={cx:n,cy:a,startAngle:r,rotation:s}},handleRotateMove(t){let{cx:e,cy:i,startAngle:o,rotation:n}=this._rotateOpt,{clientX:a,clientY:r}=t.touches?t.touches[0]:t,s=a-e,l=r-i,c=180/Math.PI*Math.atan2(l,s),d=c-o,u=n+d;u%=360,u=u<0?u+360:u,u=this.roundRotate(u),this.transform.rotation=Math.floor(u)},roundRotate(t){const e=5;return t>360-e||t<0+e?0:t>90-e&&t<90+e?90:t>180-e&&t<180+e?180:t>270-e&&t<270+e?270:t},getClassNames(){const t=["yoyoo-ddr"];return this.active&&t.push("active"),this.isDragging&&t.push("ddr-dragging"),this.isResizing&&t.push("ddr-resizing"),this.isRotating&&t.push("ddr-rotating"),this.isReadyToDrag&&t.push("ddr-ready-drag"),this.isReadyToResize&&t.push("ddr-ready-resize"),this.isReadyToRotate&&t.push("ddr-ready-rotate"),t}},render(){const t=arguments[0];return t("div",{ref:"wrapper",style:this.style,class:this.getClassNames(),on:{touchstart:this.handleMouseDown,mousedown:this.handleMouseDown}},[this.renderContent?this.renderContent(this):this.$slots.default,this.resizable&&t("div",{class:"resize-handler-wrapper"},[this.resizeHandler.map((e=>t("span",{attrs:{"data-resizetype":e},key:e,style:this.getNewHandler(e),class:`resize-handler ${e}`})))]),this.rotatable&&t("span",{style:this.rotateHandler,attrs:{"data-type":"rotate"},class:"rotate-handler"})])}},k=$,S=(i(52046),i(1001)),P=(0,S.Z)(k,M,z,!1,null,null,null),E=P.exports,T=(i(13382),i(83171)),D={name:"app",props:{context:String,publimodule:Object,can_edit:Boolean,magnification:Number,gridstep:Number,scale:Number,is_active:Boolean},components:{DDR:E,PublicationModule:T.Z},data(){return{transform:{x:0,y:0,width:300,height:300,rotation:0},component_key:1,aspect_ratio:!0,content_is_edited:!1}},created(){this.setTransformFromPubli(),this.setNewComponentKey()},mounted(){this.$eventHub.$on(`module.panTo.${this.module_meta_filename}`,this.panTo),this.$eventHub.$on(`module.enable_edit.${this.module_meta_filename}`,this.setActive)},beforeDestroy(){this.$eventHub.$off(`module.panTo.${this.module_meta_filename}`,this.panTo),this.$eventHub.$off(`module.enable_edit.${this.module_meta_filename}`,this.setActive)},watch:{publimodule:{handler(){const t=this.setTransformFromPubli();t&&this.setNewComponentKey()},deep:!0},magnification(){const t=this.setTransformFromPubli();t&&this.setNewComponentKey()},is_active(){this.is_active||this.contentIsNotEdited()}},computed:{module_meta_filename(){return this.publimodule.$path.split("/").at(-1)},grid(){return[this.gridstep,this.gridstep]},module_z_index(){return`\n        z-index: ${this.publimodule.z_index?this.publimodule.z_index:0}\n      `},module_styles(){return{"--set-margins":(this.turnCMtoPX(this.publimodule.margins)||0)+"px","--set-opacity":this.publimodule.opacity||1,"--set-borderRadius":(this.turnCMtoPX(this.publimodule.border_radius)||0)+"px","--set-backgroundColor":this.publimodule.background_color||"transparent","--set-outlineColor":this.publimodule.outline_color||"black","--set-outlineWidth":(this.turnCMtoPX(this.publimodule.outline_width)||0)+"px"}}},methods:{setNewComponentKey(){this.component_key=(new Date).getTime()},setTransformFromPubli(){let t=!1;return Object.keys(this.transform).map((e=>{if("number"===typeof this.publimodule[e])if(["x","y","width","height"].includes(e)){const i=this.turnCMtoPX(this.publimodule[e]);this.transform[e]!==i&&(this.transform[e]=i,t=!0)}else"rotation"===e&&this.transform[e]!==this.publimodule[e]&&(this.transform[e]=this.publimodule[e],t=!0)})),t},turnCMtoPX(t){return!!t&&this.roundToDec(t*this.magnification)},turnPXtoCM(t){return this.roundToDec(t/this.magnification)},contentIsEdited(t){this.$eventHub.$emit("module.text_editing_enabled",t),this.content_is_edited=!0},contentIsNotEdited(){this.$eventHub.$emit("module.text_editing_disabled"),this.content_is_edited=!1},roundToDec(t){return Math.round(100*(t+Number.EPSILON))/100},firstMedia(t){if(!t)return!1;try{const e=t.source_medias[0],i=this.getParent(t.$path);return this.getSourceMedia({source_media:e,folder_path:i})}catch(e){return!1}},dragStart(){},onDrag(t){},dragEnd(t,e){return JSON.stringify(e)!==JSON.stringify(this.transform)&&((this.turnPXtoCM(e.x)!==this.turnPXtoCM(this.transform.x)||this.turnPXtoCM(e.y)!==this.turnPXtoCM(this.transform.y))&&(this.updateTransform(e),void t.stopPropagation()))},resizeStart(t,e){return t.target.classList.contains("br")||t.target.classList.contains("bl")||t.target.classList.contains("tl")||t.target.classList.contains("tr")?this.aspect_ratio=!0:this.aspect_ratio=!1},resizeEnd(t,e){if(JSON.stringify(e)===JSON.stringify(this.transform))return!1;this.updateTransform(e),t.stopPropagation()},rotateEnd(t,e){if(JSON.stringify(e)===JSON.stringify(this.transform))return!1;this.updateTransform(e),t.stopPropagation()},async updateTransform(t){let e=JSON.parse(JSON.stringify(t));Object.keys(e).map((t=>{e[t]!==this.transform[t]?["x","y","width","height"].includes(t)?(e[t]=this.turnPXtoCM(e[t]),this.transform[t]=this.turnCMtoPX(e[t])):this.transform[t]=this.turnCMtoPX(this.turnPXtoCM(e[t])):delete e[t]})),await this.updateModuleMeta({new_meta:e})},panTo(){this.$eventHub.$emit("panzoom.panTo",{x:this.transform.x,y:this.transform.y})},setActive(t){return!this.is_active&&(this.content_is_edited?t.stopPropagation():void(this.can_edit&&!this.is_active&&!0!==this.publimodule.locked&&this.$eventHub.$emit("module.setActive",this.publimodule.$path)))},async dblClick(){if(!this.is_active)return;const t=this.firstMedia(this.publimodule);if(t)if("text"===t.$type)this.editText();else{var e;const i=null===(e=t.$infos)||void 0===e?void 0:e.ratio,o=this.publimodule.width*i;await this.updateModuleMeta({new_meta:{height:o}})}},editText(){const t=this.publimodule.$path.substring(this.publimodule.$path.lastIndexOf("/")+1);this.$eventHub.$emit(`module.enable_edit.${t}`)},async lock(){const t={locked:!0};await this.updateModuleMeta({new_meta:t}),this.$eventHub.$emit("module.setActive",!1)},async unlock(){const t={locked:!1};await this.updateModuleMeta({new_meta:t}),setTimeout((()=>{this.setActive()}),100)},async updateModuleMeta({new_meta:t}){await this.$api.updateMeta({path:this.publimodule.$path,new_meta:t}).catch((t=>{throw this.$alertify.delay(4e3).error(t),t}))},onDuplicateModule(t){const e=this.publimodule.$path.substring(0,this.publimodule.$path.lastIndexOf("/")+1)+t;setTimeout((()=>{this.$eventHub.$emit("module.setActive",e)}),100)}}},R=D,O=(i(53316),(0,S.Z)(R,a,r,!1,null,"3dc80742",null)),X=O.exports,A={props:{context:String,page_modules:Array,page_width:Number,page_height:Number,layout_mode:{type:String,default:"print"},page_color:String,hide_pagination:Boolean,zoom:{type:Number,default:1},scale:{type:Number,default:1},show_grid:{type:Boolean,default:!1},snap_to_grid:{type:Boolean,default:!1},gridstep_in_mm:Number,margins:Object,page_number:Number,pagination:[Boolean,Object],active_module:[Boolean,Object],page_is_left:Boolean,can_edit:Boolean},components:{MoveableItem:X},data(){return{}},created(){},mounted(){},beforeDestroy(){},watch:{},computed:{l_margins(){return 0!==Object.keys(this.margins).length&&(!0===this.page_is_left?{left:this.margins.right,right:this.margins.left,top:this.margins.top,bottom:this.margins.bottom}:this.margins)},gridstep(){return this.gridstep_in_mm?this.magnify(this.gridstep_in_mm):0},magnification(){return"screen"===this.layout_mode?1:this.$root.page_magnification},page_styles(){const t={};return this.page_width&&this.page_height&&(t["--page-width"]=`${this.magnify(this.page_width)}px`,t["--page-height"]=`${this.magnify(this.page_height)}px`),t["--zoom"]=this.zoom,t["--page-color"]=this.page_color||"#fff",t},page_number_corrected(){return this.page_number-this.pagination.pagination_start_on_page+1},pagination_styles(){const t={};return!0===this.page_is_left?t["--pagination-left"]=`${this.magnify(this.pagination.right)}px`:t["--pagination-right"]=`${this.magnify(this.pagination.right)}px`,t["--pagination-bottom"]=`${this.magnify(this.pagination.bottom)}px`,t}},methods:{magnify(t){return t*this.magnification}}},B=A,Y=(i(52627),(0,S.Z)(B,o,n,!1,null,"799340e8",null)),L=Y.exports},5160:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return Hi}});var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"_pageTemplate"},[t.can_edit?i("RadioSwitch",{staticClass:"_switch",attrs:{content:t.current_view,options:[{label:t.$t("settings"),value:"settings"},{label:!0===t.publication.page_spreads?t.$t("list_of_spreads"):t.$t("list_of_pages"),value:"pages"}]},on:{"update:content":function(e){t.current_view=e}}}):t._e(),"settings"===t.current_view&&t.can_edit?i("PageSettings",{attrs:{publication:t.publication}}):i("PagesList",{attrs:{publication:t.publication,page_opened_id:t.page_opened_id,can_edit:t.can_edit},on:{togglePage:function(e){return t.$emit("togglePage",e)},closePublication:function(e){return t.$emit("closePublication")}}})],1)},n=[],a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"_pageSettings"},[i("WidthHeightField",{attrs:{publication:t.publication}}),i("br"),i("ToggleField",{attrs:{label:t.$t("page_spreads"),field_name:"page_spreads",content:t.publication.page_spreads,path:t.publication.$path,can_edit:!0}}),i("br"),i("SetMargins",{attrs:{publication:t.publication,is_spread:!0===t.publication.page_spreads}}),i("br"),i("PaginationOption",{attrs:{publication:t.publication,is_spread:!0===t.publication.page_spreads}})],1)},r=[],s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"_widthHeightField"},[i("fieldset",[i("legend",{staticClass:"u-label"},[t._v(t._s(t.$t("format")))]),i("DLabel",{staticClass:"_label",attrs:{str:t.$t("document_type"),tag:"h3"}}),i("br"),t._l([{key:"print",label:t.$t("print"),instructions:t.$t("print_instr")},{key:"screen",label:t.$t("screen"),instructions:t.$t("screen_instr")}],(function(e){return i("div",{key:e.key},[i("div",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.new_layout_mode,expression:"new_layout_mode"}],attrs:{type:"radio",name:e.key,id:"radioi-lmode-"+e.key,disabled:!t.edit_mode},domProps:{value:e.key,checked:t._q(t.new_layout_mode,e.key)},on:{change:function(i){t.new_layout_mode=e.key}}}),i("label",{attrs:{for:"radioi-lmode-"+e.key}},[t._v(" "+t._s(e.label)),i("br"),i("small",{domProps:{innerHTML:t._s(e.instructions)}})])]),i("br")])})),i("transition",{attrs:{name:"fade",mode:"out-in"}},[i("div",{key:t.new_layout_mode},[i("DLabel",{staticClass:"_label",attrs:{str:t.$t("format"),tag:"h3",instructions:t.$t("format_instructions")}}),i("br"),[i("select",{attrs:{disabled:!t.edit_mode},domProps:{value:t.predefined_format_from_width},on:{change:t.setSizeFromFormat}},t._l(t.format_options,(function(e){return i("option",{key:e.key,domProps:{value:e.key,textContent:t._s(e.text)}})})),0),i("br")],i("div",{staticClass:"u-sameRow"},[i("div",{},[i("DLabel",{attrs:{str:t.$t("width")}}),i("div",{staticClass:"u-inputGroup"},[i("input",{directives:[{name:"model",rawName:"v-model.number",value:t.new_page_width,expression:"new_page_width",modifiers:{number:!0}}],attrs:{type:"number",disabled:!t.edit_mode},domProps:{value:t.new_page_width},on:{input:function(e){e.target.composing||(t.new_page_width=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),i("span",{staticClass:"u-suffix",domProps:{textContent:t._s(t.unit)}})])],1),i("div",{},[i("DLabel",{attrs:{str:t.$t("height")}}),i("div",{staticClass:"u-inputGroup"},[i("input",{directives:[{name:"model",rawName:"v-model.number",value:t.new_page_height,expression:"new_page_height",modifiers:{number:!0}}],attrs:{type:"number",disabled:!t.edit_mode},domProps:{value:t.new_page_height},on:{input:function(e){e.target.composing||(t.new_page_height=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),i("span",{staticClass:"u-suffix",domProps:{textContent:t._s(t.unit)}})])],1)])],2)]),i("br"),t.can_edit&&!t.edit_mode?i("EditBtn",{on:{click:t.enableEditMode}}):t._e(),t.edit_mode?i("div",{staticClass:"_footer"},[i("SaveCancelButtons",{staticClass:"_scb",attrs:{is_saving:t.is_saving},on:{save:t.updateSize,cancel:t.cancel}})],1):t._e()],2)])},l=[],c={props:{publication:Object},components:{},data(){return{edit_mode:!1,is_saving:!1,can_edit:!0,new_layout_mode:void 0,new_page_width:void 0,new_page_height:void 0}},created(){},mounted(){this.initValues()},beforeDestroy(){},watch:{new_layout_mode(){const{width:t,height:e}=this.format_options[0];this.new_page_width=t,this.new_page_height=e}},computed:{format_options(){return"print"===this.new_layout_mode?[{key:"A4_portrait",text:this.$t("A4_portrait"),width:210,height:297},{key:"A4_landscape",text:this.$t("A4_landscape"),width:297,height:210},{key:"A5_portrait",text:this.$t("A5_portrait"),width:148,height:210},{key:"A5_landscape",text:this.$t("A5_landscape"),width:210,height:148},{key:"custom",text:this.$t("custom")}]:[{key:"recommended",text:this.$t("recommended"),width:960,height:700},{key:"desktop1080",text:this.$t("desktop_1080"),width:1920,height:1080},{key:"desktop720",text:this.$t("desktop_720"),width:1280,height:720},{key:"custom",text:this.$t("custom")}]},predefined_format_from_width(){const t=this.format_options.find((t=>t.width===this.new_page_width&&t.height===this.new_page_height));return t?t.key:"custom"},unit(){return"screen"===this.new_layout_mode?"px":"mm"}},methods:{initValues(){this.new_layout_mode=this.publication.layout_mode||"print",this.new_page_width=this.publication.page_width||210,this.new_page_height=this.publication.page_height||297},enableEditMode(){this.edit_mode=!0},setSizeFromFormat(t){const e=t.target.value;if("custom"===e)return;const i=this.format_options.find((t=>t.key===e));this.new_page_width=i.width,this.new_page_height=i.height},cancel(){this.edit_mode=!1,this.is_saving=!1,this.initValues()},async updateSize(){this.is_saving=!0;try{const t={layout_mode:this.new_layout_mode,page_width:this.new_page_width,page_height:this.new_page_height};await this.$api.updateMeta({path:this.publication.$path,new_meta:t}),this.edit_mode=!1,this.is_saving=!1}catch(t){this.is_saving=!1,this.edit_mode=!1,this.$alertify.closeLogOnClick(!0).delay(4e3).error(this.$t("notifications.couldntbesaved")),this.$alertify.closeLogOnClick(!0).error(t.response.data)}}}},d=c,u=i(1001),p=(0,u.Z)(d,s,l,!1,null,"18d6dd69",null),h=p.exports,g=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("fieldset",[i("legend",{staticClass:"u-label"},[t._v(t._s(t.$t("margins")))]),i("div",{staticClass:"u-instructions"},[i("small",[t._v(t._s(t.$t("margins_instructions")))])]),i("br"),i("div",{staticClass:"u-sameRow"},[i("div",{},[i("DLabel",{attrs:{str:t.$t("top")}}),i("div",{staticClass:"u-inputGroup"},[i("input",{directives:[{name:"model",rawName:"v-model.number",value:t.top,expression:"top",modifiers:{number:!0}}],attrs:{type:"number",disabled:!t.edit_mode},domProps:{value:t.top},on:{input:function(e){e.target.composing||(t.top=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),i("span",{staticClass:"u-suffix",domProps:{textContent:t._s(t.unit)}})])],1),i("div",{},[i("DLabel",{attrs:{str:t.$t("bottom")}}),i("div",{staticClass:"u-inputGroup"},[i("input",{directives:[{name:"model",rawName:"v-model.number",value:t.bottom,expression:"bottom",modifiers:{number:!0}}],attrs:{type:"number",disabled:!t.edit_mode},domProps:{value:t.bottom},on:{input:function(e){e.target.composing||(t.bottom=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),i("span",{staticClass:"u-suffix",domProps:{textContent:t._s(t.unit)}})])],1)]),i("br"),i("div",{staticClass:"u-sameRow"},[i("div",{},[i("DLabel",{attrs:{str:t.is_spread?t.$t("margins_inside"):t.$t("left")}}),i("div",{staticClass:"u-inputGroup"},[i("input",{directives:[{name:"model",rawName:"v-model.number",value:t.left,expression:"left",modifiers:{number:!0}}],attrs:{type:"number",disabled:!t.edit_mode},domProps:{value:t.left},on:{input:function(e){e.target.composing||(t.left=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),i("span",{staticClass:"u-suffix",domProps:{textContent:t._s(t.unit)}})])],1),i("br"),i("div",{},[i("DLabel",{attrs:{str:t.is_spread?t.$t("margins_outside"):t.$t("right")}}),i("div",{staticClass:"u-inputGroup"},[i("input",{directives:[{name:"model",rawName:"v-model.number",value:t.right,expression:"right",modifiers:{number:!0}}],attrs:{type:"number",disabled:!t.edit_mode},domProps:{value:t.right},on:{input:function(e){e.target.composing||(t.right=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),i("span",{staticClass:"u-suffix",domProps:{textContent:t._s(t.unit)}})])],1)]),i("br"),t.can_edit&&!t.edit_mode?i("EditBtn",{on:{click:t.enableEditMode}}):t._e(),t.edit_mode?i("div",{staticClass:"_footer"},[i("SaveCancelButtons",{staticClass:"_scb",attrs:{is_saving:t.is_saving},on:{save:t.updateMargins,cancel:t.cancel}})],1):t._e()],1)])},m=[],_={props:{publication:Object,is_spread:Boolean},components:{},data(){return{edit_mode:!1,is_saving:!1,can_edit:!0,top:this.publication.page_margin_top||0,bottom:this.publication.page_margin_bottom||0,left:this.publication.page_margin_left||0,right:this.publication.page_margin_right||0}},created(){},mounted(){},beforeDestroy(){},watch:{},computed:{unit(){return"screen"===this.publication.layout_mode?"px":"mm"}},methods:{enableEditMode(){this.edit_mode=!0},cancel(){this.edit_mode=!1,this.is_saving=!1},async updateMargins(){this.is_saving=!0;try{const t={page_margin_top:this.top,page_margin_bottom:this.bottom,page_margin_left:this.left,page_margin_right:this.right};await this.$api.updateMeta({path:this.publication.$path,new_meta:t}),this.edit_mode=!1,this.is_saving=!1}catch(t){this.is_saving=!1,this.edit_mode=!1,this.$alertify.closeLogOnClick(!0).delay(4e3).error(this.$t("notifications.couldntbesaved")),this.$alertify.closeLogOnClick(!0).error(t.response.data)}}}},v=_,f=(0,u.Z)(v,g,m,!1,null,"ed233974",null),b=f.exports,w=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("fieldset",[i("legend",{staticClass:"u-label"},[t._v(t._s(t.$t("pagination")))]),i("div",{staticClass:"u-instructions"},[i("small",[t._v(t._s(t.$t("pagination_instructions")))]),t.is_spread?i("small",[t._v(" "+t._s(t.$t("pagination_instructions_spread")))]):t._e()]),i("div",{staticClass:"u-sameRow"},[i("ToggleInput",{attrs:{content:t.enable_pagination,label:t.$t("enable"),disabled:!t.edit_mode},on:{"update:content":function(e){t.enable_pagination=e}}})],1),i("br"),i("div",{},[i("DLabel",{attrs:{str:t.$t("pagn_starts_on_page")}}),i("input",{directives:[{name:"model",rawName:"v-model.number",value:t.pagn_starts_on_page,expression:"pagn_starts_on_page",modifiers:{number:!0}}],attrs:{type:"number",disabled:!t.edit_mode},domProps:{value:t.pagn_starts_on_page},on:{input:function(e){e.target.composing||(t.pagn_starts_on_page=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})],1),i("br"),i("div",{staticClass:"u-sameRow"},[i("div",{},[i("DLabel",{attrs:{str:t.is_spread?t.$t("distance_to_outside"):t.$t("distance_to_right")}}),i("div",{staticClass:"u-inputGroup"},[i("input",{directives:[{name:"model",rawName:"v-model.number",value:t.right,expression:"right",modifiers:{number:!0}}],attrs:{type:"number",disabled:!t.edit_mode},domProps:{value:t.right},on:{input:function(e){e.target.composing||(t.right=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),i("span",{staticClass:"u-suffix",domProps:{textContent:t._s(t.unit)}})])],1),i("div",{},[i("DLabel",{attrs:{str:t.$t("distance_to_bottom")}}),i("div",{staticClass:"u-inputGroup"},[i("input",{directives:[{name:"model",rawName:"v-model.number",value:t.bottom,expression:"bottom",modifiers:{number:!0}}],attrs:{type:"number",disabled:!t.edit_mode},domProps:{value:t.bottom},on:{input:function(e){e.target.composing||(t.bottom=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),i("span",{staticClass:"u-suffix",domProps:{textContent:t._s(t.unit)}})])],1)]),i("br"),t.can_edit&&!t.edit_mode?i("EditBtn",{on:{click:t.enableEditMode}}):t._e(),t.edit_mode?i("div",{staticClass:"_footer"},[i("SaveCancelButtons",{staticClass:"_scb",attrs:{is_saving:t.is_saving},on:{save:t.updatePagination,cancel:t.cancel}})],1):t._e()],1)])},y=[],x={props:{publication:Object,is_spread:Boolean},components:{},data(){return{edit_mode:!1,is_saving:!1,can_edit:!0,enable_pagination:this.publication.enable_pagination||!1,pagn_starts_on_page:this.publication.pagn_starts_on_page||1,right:this.publication.pagn_right||2,bottom:this.publication.pagn_bottom||2}},created(){},mounted(){},beforeDestroy(){},watch:{},computed:{unit(){return"screen"===this.publication.layout_mode?"px":"mm"}},methods:{enableEditMode(){this.edit_mode=!0},cancel(){this.edit_mode=!1,this.is_saving=!1,this.enable_pagination=this.publication.enable_pagination,this.pagn_starts_on_page=this.publication.pagn_starts_on_page,this.right=this.publication.pagn_right||2,this.bottom=this.publication.pagn_bottom||2},async updatePagination(){this.is_saving=!0;try{const t={enable_pagination:this.enable_pagination,pagn_starts_on_page:this.pagn_starts_on_page,pagn_right:this.right,pagn_bottom:this.bottom};await this.$api.updateMeta({path:this.publication.$path,new_meta:t}),this.edit_mode=!1,this.is_saving=!1}catch(t){this.is_saving=!1,this.edit_mode=!1,this.$alertify.closeLogOnClick(!0).delay(4e3).error(this.$t("notifications.couldntbesaved")),this.$alertify.closeLogOnClick(!0).error(t.response.data)}}}},C=x,M=(0,u.Z)(C,w,y,!1,null,"6869aba0",null),z=M.exports,$={props:{publication:Object},components:{WidthHeightField:h,SetMargins:b,PaginationOption:z},data(){return{}},created(){},mounted(){},beforeDestroy(){},watch:{},computed:{},methods:{}},k=$,S=(i(13992),(0,u.Z)(k,a,r,!1,null,"6793dcf2",null)),P=S.exports,E=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("transition",{attrs:{name:"slideup"}},[t.page_opened_id?i("OpenedPageOrSpread",{key:"openedpage",attrs:{page_opened_id:t.page_opened_id,publication_title:t.publication.title,publication_path:t.publication.$path,pages:t.pages,spreads:t.spreads,modules:t.modules,is_spread:t.is_spread,page_width:t.publication.page_width,page_height:t.publication.page_height,layout_mode:t.publication.layout_mode,margins:t.margins,pagination:t.pagination,can_edit:t.can_edit},on:{togglePage:function(e){return t.$emit("togglePage",e)},updatePageOptions:t.updatePageOptions,closePublication:function(e){return t.$emit("closePublication")}}}):i("transition-group",{key:"allpages",staticClass:"_allPages",attrs:{tag:"div",name:"listComplete"}},[t.is_spread?t._l(t.spreads,(function(e,o){return i("div",{key:"spread-"+o,staticClass:"_spread"},t._l(e,(function(e,n){return i("div",{key:e?e.id:n},[e&&e.id?[i("div",{staticClass:"_preview"},[i("SinglePage",{attrs:{context:"preview",zoom:t.page_preview_zoom,page_modules:t.getModulesForPage({modules:t.modules,page_id:e.id}),page_width:t.publication.page_width,page_height:t.publication.page_height,layout_mode:t.publication.layout_mode,page_color:e.page_color,page_number:2*o+n,pagination:t.pagination,hide_pagination:!0===e.hide_pagination,page_is_left:0===n,can_edit:!1}}),i("button",{staticClass:"u-button _openPage",attrs:{type:"button"},domProps:{innerHTML:t._s(t.$t("open"))},on:{click:function(i){return t.$emit("togglePage",e.id)}}})],1),i("PageLabel",{attrs:{index:2*o+n-1,number_of_pages:t.pages.length,can_edit:t.can_edit},on:{movePage:function(e){return t.movePage({old_position:e.old_position,new_position:e.new_position})},duplicatePage:function(i){return t.duplicatePage(e.id)},removePage:function(i){return t.removePage(e.id)}}})]:t._e()],2)})),0)})):t._l(t.pages,(function(e,o){return i("div",{key:"page-"+e.id,staticClass:"_page"},[i("div",{staticClass:"_preview"},[i("SinglePage",{attrs:{context:"preview",zoom:t.page_preview_zoom,page_modules:t.getModulesForPage({modules:t.modules,page_id:e.id}),page_width:t.publication.page_width,page_height:t.publication.page_height,layout_mode:t.publication.layout_mode,page_color:e.page_color,page_number:o,pagination:t.pagination,hide_pagination:!0===e.hide_pagination,can_edit:!1}}),i("button",{staticClass:"u-button _openPage",attrs:{type:"button"},domProps:{innerHTML:t._s(t.$t("open"))},on:{click:function(i){return t.$emit("togglePage",e.id)}}})],1),i("PageLabel",{attrs:{index:o,number_of_pages:t.pages.length,can_edit:t.can_edit},on:{movePage:function(e){return t.movePage({old_position:e.old_position,new_position:e.new_position})},duplicatePage:function(i){return t.duplicatePage(e.id)},removePage:function(i){return t.removePage(e.id)}}})],1)})),t.can_edit?i("button",{key:"createPage",staticClass:"u-button u-button_white",attrs:{type:"button"},on:{click:t.createPage}},[t._v(" "+t._s(t.$t("create_page"))+" ")]):t._e()],2)],1)],1)},T=[],D=(i(57658),i(85827),i(4040)),R=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"_openedPage",class:{"is--editable":t.can_edit&&!t.display_as_public}},[i("div",{staticClass:"_spreadNavigator"},[i("div",{staticClass:"_spreadNavigator--content",on:{click:function(e){return e.target!==e.currentTarget?null:t.setActiveModule(!1)}}},[i("div",{staticClass:"_sideCont"},[i("div",{staticClass:"_content"},[i("PageMenu",{attrs:{can_edit:t.can_edit,pages:t.pages,active_page_number:t.active_page_number,active_spread_index:t.active_spread_index,scale:t.scale,show_grid:t.page_settings.show_grid,snap_to_grid:t.page_settings.snap_to_grid,gridstep_in_mm:t.page_settings.gridstep_in_mm,layout_mode:t.layout_mode,page_color:t.current_page.page_color,pagination:t.pagination,publication_path:t.publication_path,page_opened_id:t.page_opened_id,page_modules:t.getModulesForPage({modules:t.modules,page_id:t.page_opened_id}),active_module:t.active_module,display_as_public:t.display_as_public},on:{"update:show_grid":function(e){return t.$set(t.page_settings,"show_grid",e)},"update:snap_to_grid":function(e){return t.$set(t.page_settings,"snap_to_grid",e)},"update:gridstep_in_mm":function(e){return t.$set(t.page_settings,"gridstep_in_mm",e)},"update:display_as_public":function(e){t.display_as_public=e},updatePageOptions:function(e){return t.$emit("updatePageOptions",e)},"update:scale":function(e){t.scale=e},prevPage:function(e){return t.prevPage()},nextPage:function(e){return t.nextPage()},close:function(e){return t.setPageActive(!1)}}})],1)]),i("div",{staticClass:"_pagePan"},[i("PanZoom2",{attrs:{scale:t.scale,page_opened_id:t.page_opened_id},on:{"update:scale":function(e){t.scale=e}}},[i("transition",{attrs:{name:"pagechange",mode:"out-in"}},[i("div",{key:t.is_spread?"spread-"+JSON.stringify(t.active_spread.map((function(t){return t.id}))):"page-"+t.page_opened_id,staticClass:"_pageCont",on:{click:function(e){return e.target!==e.currentTarget?null:t.setActiveModule(!1)}}},[t.is_spread?t._l(t.active_spread,(function(e,o){return i("div",{key:e.id?e.id:o,staticClass:"_spreadNavigator--page",class:{"is--active":e.id===t.page_opened_id}},[e?[i("SinglePage",{attrs:{context:"full",page_modules:t.getModulesForPage({modules:t.modules,page_id:e.id}),page_width:t.page_width,page_height:t.page_height,layout_mode:t.layout_mode,page_color:e.page_color,scale:t.scale,show_grid:t.page_settings.show_grid,snap_to_grid:t.page_settings.snap_to_grid,gridstep_in_mm:t.page_settings.gridstep_in_mm,margins:t.margins,page_number:2*t.active_spread_index+o,pagination:t.pagination,hide_pagination:!0===t.current_page.hide_pagination,active_module:t.active_module,page_is_left:0===o,can_edit:t.can_edit&&e.id===t.page_opened_id&&!t.display_as_public},on:{close:function(e){return t.setPageActive(!1)}}}),e.id!==t.page_opened_id?[i("button",{staticClass:"_openAdjacentPageBtn panzoom-exclude",attrs:{type:"button"},on:{mousedown:function(i){return i.target!==i.currentTarget?null:t.setPageActive(e.id)}}})]:t._e()]:i("div",{staticClass:"_noPage"})],2)})):i("SinglePage",{staticClass:"_spreadNavigator--page is--active",attrs:{context:"full",page_modules:t.getModulesForPage({modules:t.modules,page_id:t.page_opened_id}),page_width:t.page_width,page_height:t.page_height,layout_mode:t.layout_mode,page_color:t.current_page.page_color,scale:t.scale,show_grid:t.page_settings.show_grid,snap_to_grid:t.page_settings.snap_to_grid,gridstep_in_mm:t.page_settings.gridstep_in_mm,margins:t.margins,page_number:t.active_page_number,pagination:t.pagination,hide_pagination:!0===t.current_page.hide_pagination,active_module:t.active_module,can_edit:t.can_edit&&!t.display_as_public},on:{close:function(e){return t.setPageActive(!1)}}})],2)])],1)],1)])])])},O=[],X=(i(26699),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"_pageMenu"},[i("div",{staticClass:"_pageMenu--pane"},[i("button",{staticClass:"u-buttonLink",attrs:{type:"button"},on:{click:function(e){return t.$emit("close")}}},[i("sl-icon",{attrs:{name:"arrow-left-short",label:""}}),t._v(" "+t._s(t.$t("close"))+" ")],1),i("div",{staticClass:"u-spacingBottom _titleRow"},[i("div",[i("button",{staticClass:"u-button u-button_transparent",attrs:{type:"button",disabled:t.active_page_number<=0},on:{click:function(e){return t.$emit("prevPage")}}},[i("sl-icon",{attrs:{name:"arrow-left-circle"}})],1)]),i("div",[i("transition",{attrs:{name:"fade_fast",mode:"out-in"}},[i("b",{key:t.active_page_number},[t._v(t._s(t.$t("page"))+" "+t._s(t.active_page_number+1))])]),!1!==t.active_spread_index?i("transition",{attrs:{name:"fade_fast",mode:"out-in"}},[i("span",{key:t.active_spread_index},[0===t.active_page_number?[t._v(" ("+t._s(t.$t("cover"))+") ")]:[t._v(" ("+t._s(t.$t("spread").toLowerCase())+" "+t._s(t.active_spread_index)+") ")]],2)]):t._e()],1),i("div",[i("button",{staticClass:"u-button u-button_transparent",attrs:{type:"button",disabled:t.active_page_number>=t.pages.length-1},on:{click:function(e){return t.$emit("nextPage")}}},[i("sl-icon",{attrs:{name:"arrow-right-circle"}})],1)])]),i("div",{staticClass:"_scale"},[i("RangeValueInput",{staticClass:"u-spacingBottom",attrs:{can_toggle:!1,label:t.$t("scale"),value:Math.round(100*t.scale),min:10,max:200,step:1,ticks:[10,25,50,100,200],default_value:100,suffix:"%"},on:{save:function(e){return t.$emit("update:scale",e/100)}}})],1),i("div",{},[i("ToggleInput",{attrs:{content:t.display_as_public,label:t.$t("preview")},on:{"update:content":function(e){return t.$emit("update:display_as_public",e)}}})],1)]),t.can_edit&&!t.display_as_public?[i("transition",{attrs:{name:"fade_fast",mode:"out-in"}},[t.has_editor_toolbar||t.active_module?!t.has_editor_toolbar&&t.active_module?i("div",{key:"media-"+t.active_module.$path,staticClass:"_pageMenu--pane"},[i("DLabel",{attrs:{str:t.$t("media"),instructions:t.$t("active_media_instr")}}),"mosaic"===t.active_module.module_type?i("MediaContent",{staticClass:"_activeModulePreview",attrs:{file:t.firstMedia(t.active_module),resolution:50,context:"preview"}}):"text"===t.active_module.module_type?i("span",{staticClass:"u-textEllipsis u-textEllipsis_3 _textExtract"},[i("CollaborativeEditor2",{ref:"textBloc",attrs:{path:t.firstMedia(t.active_module).$path,content:t.firstMedia(t.active_module).$content,can_edit:!1}})],1):i("span",[t._v(" "+t._s(t.$t(t.active_module.module_type))+" ")]),i("div",{staticClass:"u-mediaOptions"},[i("MoveToPage",{attrs:{pages:t.pages,current_page_id:t.pages[t.active_page_number].id},on:{submit:function(e){t.updateMediaPubliMeta({page_id:e}),t.setActive(!1)}}}),i("div",{},[i("button",{staticClass:"u-buttonLink",attrs:{type:"button"},on:{click:t.duplicateModule}},[i("sl-icon",{attrs:{name:"file-plus"}}),t._v(" "+t._s(t.$t("duplicate"))+" ")],1)]),i("div",{},[!0===t.active_module.locked?i("button",{staticClass:"u-buttonLink",attrs:{type:"button"},on:{click:function(e){return t.updateMediaPubliMeta({locked:!1})}}},[i("sl-icon",{attrs:{name:"unlock"}}),t._v(" "+t._s(t.$t("unlock"))+" ")],1):i("button",{staticClass:"u-buttonLink",attrs:{type:"button"},on:{click:function(e){return t.updateMediaPubliMeta({locked:!0})}}},[i("sl-icon",{attrs:{name:"lock"}}),t._v(" "+t._s(t.$t("lock"))+" ")],1)]),i("div",{},[i("button",{staticClass:"u-buttonLink",attrs:{type:"button"},on:{click:function(e){return t.setActive(!1)}}},[i("sl-icon",{attrs:{name:"dash-square-dotted"}}),t._v(" "+t._s(t.$t("unselect"))+" ")],1)]),i("RemoveMenu",{ref:"removeMenu",attrs:{remove_text:t.$t("withdraw_from_page")},on:{remove:t.removeModule}})],1),i("div",{staticClass:"u-sameRow"},[i("NumberInput",{staticClass:"u-spacingBottom",attrs:{label:t.$t("position")+"→",value:t.active_module.x,suffix:t.unit},on:{save:function(e){return t.updateMediaPubliMeta({x:e})}}}),i("NumberInput",{staticClass:"u-spacingBottom",attrs:{label:t.$t("position")+"↓",value:t.active_module.y,suffix:t.unit},on:{save:function(e){return t.updateMediaPubliMeta({y:e})}}})],1),i("div",{staticClass:"u-sameRow"},[i("NumberInput",{staticClass:"u-spacingBottom",attrs:{label:t.$t("width")+"↔",value:t.active_module.width,min:0,suffix:t.unit},on:{save:function(e){return t.updateMediaPubliMeta({width:e})}}}),i("NumberInput",{staticClass:"u-spacingBottom",attrs:{label:t.$t("height")+"↕",value:t.active_module.height,min:0,suffix:t.unit},on:{save:function(e){return t.updateMediaPubliMeta({height:e})}}})],1),i("RangeValueInput",{staticClass:"u-spacingBottom",attrs:{label:t.$t("angle"),value:t.active_module.rotation,min:0,max:360,step:1,ticks:[0,90,180,270,360],default_value:0,suffix:"°"},on:{save:function(e){return t.updateMediaPubliMeta({rotation:e})}}}),i("RangeValueInput",{staticClass:"u-spacingBottom",attrs:{label:t.$t("margins"),value:t.active_module.margins,min:0,max:50,step:1,default_value:0,suffix:t.unit},on:{save:function(e){return t.updateMediaPubliMeta({margins:e})}}}),"ellipsis"!==t.active_module.module_type&&"text"!==t.active_module.module_type?i("RangeValueInput",{staticClass:"u-spacingBottom",attrs:{label:t.$t("border_radius"),value:t.active_module.border_radius,min:0,max:50,step:1,default_value:0,suffix:t.unit},on:{save:function(e){return t.updateMediaPubliMeta({border_radius:e})}}}):t._e(),i("RangeValueInput",{staticClass:"u-spacingBottom",attrs:{label:t.$t("opacity"),value:Math.round(100*t.active_module.opacity),min:1,max:100,step:1,ticks:[1,100],default_value:100,suffix:"%"},on:{save:function(e){return t.updateMediaPubliMeta({opacity:e/100})}}}),i("ColorInput",{staticClass:"u-spacingBottom",attrs:{label:t.$t("background_color"),value:t.active_module.background_color,default_value:t.is_shape?"transparent":""},on:{save:function(e){return t.updateMediaPubliMeta({background_color:e})}}}),i("RangeValueInput",{staticClass:"u-spacingBottom",attrs:{label:t.$t("outline_width"),value:t.active_module.outline_width,min:0,max:20,step:1,ticks:[0,10,20],default_value:0,suffix:t.unit},on:{save:function(e){return t.updateMediaPubliMeta({outline_width:e})}}}),t.active_module.outline_width>0?i("ColorInput",{staticClass:"u-spacingBottom",attrs:{label:t.$t("outline_color"),value:t.active_module.outline_color,default_value:"#000000"},on:{save:function(e){return t.updateMediaPubliMeta({outline_color:e})}}}):t._e(),i("DepthInput",{staticClass:"u-spacingBottom",attrs:{label:t.$t("z_index"),value:t.active_module.z_index,page_modules:t.page_modules},on:{save:function(e){return t.updateMediaPubliMeta({z_index:e})}}}),"image"===t.firstMedia(t.active_module).$type?i("ToggleInput",{staticClass:"u-spacingBottom",attrs:{content:t.active_module.show_fs_button,label:t.$t("show_fs_button")},on:{"update:content":function(e){return t.updateMediaPubliMeta({show_fs_button:e})}}}):t._e()],1):t._e():i("div",{key:"page_options-"+t.active_page_number},[i("div",{staticClass:"_pageMenu--pane"},[i("div",{staticClass:"u-spacingBottom"},[i("DLabel",{attrs:{str:t.$t("add_on_page")}}),i("ModuleCreator",{attrs:{publication_path:t.publication_path,meta_filenames_already_present:t.meta_filenames_already_present,addtl_meta:t.new_module_meta,context:"page_by_page",show_shapes:!0,is_collapsed:!1},on:{addModule:t.enableModuleEdit}})],1),t.can_edit?i("div",{},[t.can_edit?i("ToggledSection",{staticClass:"u-spacingBottom",attrs:{label:t.$t("show_grid"),show_toggle:t.show_grid},on:{"update:show_toggle":function(e){return t.$emit("update:show_grid",e)}}},[i("RangeValueInput",{attrs:{label:t.$t("gridstep"),can_toggle:!1,value:t.gridstep_in_mm,min:1,max:20,step:1,ticks:[5,10,20,50],default_value:10,suffix:t.unit},on:{save:function(e){return t.$emit("update:gridstep_in_mm",e)}}}),i("ToggleInput",{staticClass:"u-spacingBottom",attrs:{content:t.snap_to_grid,label:t.$t("snap_to_grid")},on:{"update:content":function(e){return t.$emit("update:snap_to_grid",e)}}})],1):t._e()],1):t._e(),t.can_edit?i("div",{},[i("ColorInput",{staticClass:"u-spacingBottom",attrs:{label:t.$t("page_color"),value:t.page_color},on:{save:function(e){return t.$emit("updatePageOptions",{page_number:t.active_page_number,value:{page_color:e}})}}}),t.has_pagination?i("ToggleInput",{staticClass:"u-spacingBottom",attrs:{content:t.hide_pagination,label:t.$t("hide_pagination")},on:{"update:content":function(e){return t.$emit("updatePageOptions",{page_number:t.active_page_number,value:{hide_pagination:e}})}}}):t._e()],1):t._e()]),i("div",{staticClass:"_pageMenu--pane"},[i("DLabel",{attrs:{str:t.$t("list_of_medias"),instructions:t.$t("list_of_medias_instr")}}),i("div",{staticClass:"u-spacingBottom"},[t.can_edit?i("button",{staticClass:"u-buttonLink",attrs:{type:"button",disabled:0===t.page_modules.length},on:{click:function(e){t.show_all_medias=!t.show_all_medias}}},[i("sl-icon",{attrs:{name:"collection"}}),t.show_all_medias?[t._v(" "+t._s(t.$t("hide"))+" ")]:[t._v(" "+t._s(t.$t("show"))+" ")]],2):t._e()]),t.show_all_medias?i("div",{staticClass:"_mediaList"},t._l(t.page_modules,(function(e){return i("div",{key:e.$path,on:{click:function(i){return t.setActive(e.$path)}}},[t.firstMedia(e)?i("MediaContent",{staticClass:"_preview",attrs:{file:t.firstMedia(e),resolution:50,context:"preview"}}):t._e(),i("DateDisplay",{attrs:{title:t.$t("date_uploaded"),date:e.$date_uploaded}})],1)})),0):t._e()],1)])]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.has_editor_toolbar,expression:"has_editor_toolbar"}],key:"text-toolbar-"+t.active_page_number,staticClass:"_pageMenu--pane"},[i("div",{ref:"editor_toolbar",staticClass:"_editorToolbar"})])]:t._e()],2)}),A=[],B=i(91317),Y=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"_depthInput"},[t.label?i("DLabel",{attrs:{str:t.label,for:t.label}}):t._e(),i("div",{staticClass:"u-sameRow"},[i("button",{staticClass:"u-button u-button_black",attrs:{type:"button",disabled:t.value===t.max_z_index},on:{click:t.moveToFront}},[i("sl-icon",{attrs:{name:"front",label:t.$t("move_to_front")}}),t._v(" "+t._s(t.$t("move_to_front"))+" ")],1),i("button",{staticClass:"u-button u-button_black",attrs:{type:"button",disabled:t.value===t.min_z_index},on:{click:t.moveToBack}},[i("sl-icon",{attrs:{name:"back",label:t.$t("move_to_back")}}),t._v(" "+t._s(t.$t("move_to_back"))+" ")],1)])],1)},L=[],N={props:{label:String,value:Number,page_modules:Array},components:{},data(){return{}},created(){},mounted(){},beforeDestroy(){},watch:{},computed:{list_all_z_index(){return this.page_modules.map((t=>t.z_index||0))},max_z_index(){return Math.max(...this.list_all_z_index)},min_z_index(){return Math.min(...this.list_all_z_index)}},methods:{moveToBack(){this.$emit("save",this.min_z_index-1)},moveToFront(){this.$emit("save",this.max_z_index+1)}}},H=N,I=(0,u.Z)(H,Y,L,!1,null,"952a845c",null),j=I.exports,W=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("button",{staticClass:"u-buttonLink",attrs:{type:"button"},on:{click:function(e){t.show_confirm_move=!0}}},[i("sl-icon",{attrs:{name:"arrow-left-right"}}),t._v(" "+t._s(t.$t("move_to_page"))+" ")],1),t.show_confirm_move?i("BaseModal2",{attrs:{title:t.$t("move_to_page")},on:{close:function(e){t.show_confirm_move=!1}}},[i("div",{},[i("SelectField2",{attrs:{value:t.current_page_id,options:t.all_pages_in_select,can_edit:!0,hide_validation:!0},on:{change:t.setNewPage}})],1),i("div",{staticClass:"u-sameRow",attrs:{slot:"footer"},slot:"footer"},[i("button",{staticClass:"u-buttonLink",attrs:{type:"button"},on:{click:function(e){t.show_confirm_move=!1}}},[t._v(" "+t._s(t.$t("cancel"))+" ")]),i("button",{staticClass:"u-button u-button_red",attrs:{type:"button",autofocus:"",disabled:!t.page_id_to_move_to||t.page_id_to_move_to===t.current_page_id},on:{click:t.submit}},[t._v(" "+t._s(t.$t("move"))+" ")])])]):t._e()],1)},F=[],Z={props:{pages:Array,current_page_id:String},components:{},data(){return{show_confirm_move:!1,page_id_to_move_to:void 0}},created(){},mounted(){},beforeDestroy(){},watch:{},computed:{all_pages_in_select(){return this.pages.map(((t,e)=>({key:t.id,text:e+1})))}},methods:{setNewPage(t){this.page_id_to_move_to=t},submit(){this.$emit("submit",this.page_id_to_move_to),this.show_confirm_move=!1}}},V=Z,q=(0,u.Z)(V,W,F,!1,null,"42602880",null),G=q.exports,U={props:{can_edit:Boolean,pages:Array,active_page_number:Number,active_spread_index:[Boolean,Number],scale:Number,show_grid:Boolean,snap_to_grid:Boolean,gridstep_in_mm:Number,layout_mode:{type:String,default:"print"},page_color:String,pagination:[Boolean,Object],publication_path:String,page_modules:Array,page_opened_id:String,active_module:[Boolean,Object],display_as_public:Boolean},components:{DepthInput:j,ModuleCreator:B.Z,MoveToPage:G},data(){return{show_page_options:!1,show_all_medias:!1,has_editor_toolbar:!1}},created(){},mounted(){this.$eventHub.$on("module.text_editing_enabled",this.displayToolbar),this.$eventHub.$on("module.text_editing_disabled",this.removeToolbar),this.$eventHub.$on("module.open_remove_modal",this.openRemoveModal)},beforeDestroy(){this.$eventHub.$off("module.moveToolbar",this.displayToolbar),this.$eventHub.$off("module.text_editing_disabled",this.removeToolbar),this.$eventHub.$off("module.open_remove_modal",this.openRemoveModal)},watch:{},computed:{module_meta_filename(){return this.active_module.$path.substring(this.active_module.$path.lastIndexOf("/")+1)},is_shape(){return this.active_module&&["ellipsis","line","arrow","rectangle"].includes(this.active_module.module_type)},meta_filenames_already_present(){return this.page_modules.reduce(((t,e)=>(e.source_medias&&e.source_medias.map((e=>{e.meta_filename_in_project&&t.push(e.meta_filename_in_project)})),t)),[])},unit(){return"screen"===this.layout_mode?"px":"mm"},has_pagination(){return this.active_page_number-this.pagination.pagination_start_on_page>=0},hide_pagination(){return!0===this.pages[this.active_page_number].hide_pagination},new_module_meta(){const t=Math.max(...this.page_modules.map((t=>t.z_index||0)))+1;let e=this.$root.default_new_module_left,i=this.$root.default_new_module_top;return this.gridstep_in_mm,{page_id:this.page_opened_id,x:e,y:i,width:this.$root.default_new_module_width,height:this.$root.default_new_module_height,rotation:0,margins:0,opacity:1,outline_width:0,z_index:t}}},methods:{firstMedia(t){if(!t)return!1;try{const e=t.source_medias[0],i=this.getParent(t.$path);return this.getSourceMedia({source_media:e,folder_path:i})}catch(e){return!1}},displayToolbar(t){this.has_editor_toolbar=!0,this.$nextTick((()=>{this.$refs.editor_toolbar&&this.$refs.editor_toolbar.append(t)}))},removeToolbar(){this.has_editor_toolbar=!1},openRemoveModal(){this.$refs.removeMenu.show_confirm_delete=!0},enableModuleEdit({meta_filename:t}){setTimeout((()=>{this.$eventHub.$emit(`module.enable_edit.${t}`),this.$eventHub.$emit(`module.panTo.${t}`)}),150)},changeModulePage(){this.$eventHub.$emit(`module.move.${this.module_meta_filename}`)},duplicateModule(){this.$eventHub.$emit(`module.duplicate.${this.module_meta_filename}`)},removeModule(){this.$eventHub.$emit(`module.remove.${this.module_meta_filename}`),this.$eventHub.$emit("module.setActive",!1)},setActive(t){this.$eventHub.$emit("module.setActive",t),this.$nextTick((()=>{const e=this.getFilename(t);this.$eventHub.$emit(`module.panTo.${e}`)}))},async updateMediaPubliMeta(t){this.active_module&&await this.$api.updateMeta({path:this.active_module.$path,new_meta:t}).catch((t=>{throw this.$alertify.delay(4e3).error(t),t}))}}},J=U,K=(i(88007),(0,u.Z)(J,X,A,!1,null,"042fa8da",null)),Q=K.exports,tt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("vue-infinite-viewer",t._b({ref:"viewer",staticClass:"viewer",on:{scroll:t.onScroll,dragStart:t.dragStart,dragEnd:t.dragEnd,pinchStart:t.pinchStart,abortPinch:t.abortPinch,pinch:t.pinch}},"vue-infinite-viewer",t.viewerOptions,!1),[i("div",{staticClass:"viewport"},[t._t("default")],2)])},et=[],it=(i(21703),i(81299),i(74916),i(15306),i(24603),i(28450),"function"),ot="object",nt="string",at="undefined",rt=(typeof document!==at&&document,[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}]),st={cm:function(t){return 96*t/2.54},mm:function(t){return 96*t/254},in:function(t){return 96*t},pt:function(t){return 96*t/72},pc:function(t){return 96*t/6},"%":function(t,e){return t*e/100},vw:function(t,e){return void 0===e&&(e=window.innerWidth),t/100*e},vh:function(t,e){return void 0===e&&(e=window.innerHeight),t/100*e},vmax:function(t,e){return void 0===e&&(e=Math.max(window.innerWidth,window.innerHeight)),t/100*e},vmin:function(t,e){return void 0===e&&(e=Math.min(window.innerWidth,window.innerHeight)),t/100*e}};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
function lt(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var o=Array(t),n=0;for(e=0;e<i;e++)for(var a=arguments[e],r=0,s=a.length;r<s;r++,n++)o[n]=a[r];return o}function ct(t){return typeof t===at}function dt(t){return t&&typeof t===ot}function ut(t){return Array.isArray(t)}function pt(t){return typeof t===nt}function ht(t){return typeof t===it}function gt(t,e){var i=""===t||" "==t,o=""===e||" "==e;return o&&i||t===e}function mt(t,e,i,o,n){var a=_t(t,e,i);return a?i:vt(t,e,i+1,o,n)}function _t(t,e,i){if(!t.ignore)return null;var o=e.slice(Math.max(i-3,0),i+3).join("");return new RegExp(t.ignore).exec(o)}function vt(t,e,i,o,n){for(var a,r=function(i){var r=e[i].trim();if(r===t.close&&!_t(t,e,i))return{value:i};var s=i,l=Mt(n,(function(t){var e=t.open;return e===r}));if(l&&(s=mt(l,e,i,o,n)),-1===s)return a=i,"break";i=s,a=i},s=i;s<o;++s){var l=r(s);if(s=a,"object"===typeof l)return l.value;if("break"===l)break}return-1}function ft(t,e){var i=pt(e)?{separator:e}:e,o=i.separator,n=void 0===o?",":o,a=i.isSeparateFirst,r=i.isSeparateOnlyOpenClose,s=i.isSeparateOpenClose,l=void 0===s?r:s,c=i.openCloseCharacters,d=void 0===c?rt:c,u=d.map((function(t){var e=t.open,i=t.close;return e===i?e:e+"|"+i})).join("|"),p="(\\s*"+n+"\\s*|"+u+"|\\s+)",h=new RegExp(p,"g"),g=t.split(h).filter(Boolean),m=g.length,_=[],v=[];function f(){return!!v.length&&(_.push(v.join("")),v=[],!0)}for(var b,w=function(e){var i=g[e].trim(),o=e,s=Mt(d,(function(t){var e=t.open;return e===i})),c=Mt(d,(function(t){var e=t.close;return e===i}));if(s){if(o=mt(s,g,e,m,d),-1!==o&&l)return f()&&a?(b=e,"break"):(_.push(g.slice(e,o+1).join("")),e=o,a?(b=e,"break"):(b=e,"continue"))}else{if(c&&!_t(c,g,e)){var u=lt(d);return u.splice(d.indexOf(c),1),{value:ft(t,{separator:n,isSeparateFirst:a,isSeparateOnlyOpenClose:r,isSeparateOpenClose:l,openCloseCharacters:u})}}if(gt(i,n)&&!r)return f(),a?(b=e,"break"):(b=e,"continue")}-1===o&&(o=m-1),v.push(g.slice(e,o+1).join("")),e=o,b=e},y=0;y<m;++y){var x=w(y);if(y=b,"object"===typeof x)return x.value;if("break"===x)break}return v.length&&_.push(v.join("")),_}function bt(t){return ft(t,",")}function wt(t){var e=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!e)return{prefix:"",unit:"",value:NaN};var i=e[1],o=e[2],n=e[3];return{prefix:i,unit:n,value:parseFloat(o)}}function yt(t){return t.replace(/[\s-_]([a-z])/g,(function(t,e){return e.toUpperCase()}))}function xt(){return Date.now?Date.now():(new Date).getTime()}function Ct(t,e,i){void 0===i&&(i=-1);for(var o=t.length,n=0;n<o;++n)if(e(t[n],n,t))return n;return i}function Mt(t,e,i){var o=Ct(t,e);return o>-1?t[o]:i}function zt(t,e){var i=wt(t),o=i.value,n=i.unit;if(dt(e)){var a=e[n];if(a){if(ht(a))return a(o);if(st[n])return st[n](o,a)}}else if("%"===n)return o*e/100;return st[n]?st[n](o):o}function $t(t,e,i){return Math.max(e,Math.min(t,i))}function kt(t,e){if(!e)return t;var i=1/e;return Math.round(t/e)/i}function St(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function Pt(t,e,i,o){t.addEventListener(e,i,o)}function Et(t,e,i,o){t.removeEventListener(e,i,o)}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var Tt=function(){return Tt=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i],e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},Tt.apply(this,arguments)};function Dt(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var o=Array(t),n=0;for(e=0;e<i;e++)for(var a=arguments[e],r=0,s=a.length;r<s;r++,n++)o[n]=a[r];return o}var Rt=function(){function t(){this._events={}}var e=t.prototype;return e.on=function(t,e){if(dt(t))for(var i in t)this.on(i,t[i]);else this._addEvent(t,e,{});return this},e.off=function(t,e){if(t)if(dt(t))for(var i in t)this.off(i);else if(e){var o=this._events[t];if(o){var n=Ct(o,(function(t){return t.listener===e}));n>-1&&o.splice(n,1)}}else this._events[t]=[];else this._events={};return this},e.once=function(t,e){var i=this;return e&&this._addEvent(t,e,{once:!0}),new Promise((function(e){i._addEvent(t,e,{once:!0})}))},e.emit=function(t,e){var i=this;void 0===e&&(e={});var o=this._events[t];if(!t||!o)return!0;var n=!1;return e.eventType=t,e.stop=function(){n=!0},e.currentTarget=this,Dt(o).forEach((function(o){o.listener(e),o.once&&i.off(t,o.listener)})),!n},e.trigger=function(t,e){return void 0===e&&(e={}),this.emit(t,e)},e._addEvent=function(t,e,i){var o=this._events;o[t]=o[t]||[];var n=o[t];n.push(Tt({listener:e},i))},t}(),Ot=Rt,Xt=function(t,e){return Xt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},Xt(t,e)};function At(t,e){function i(){this.constructor=t}Xt(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var Bt=function(){return Bt=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i],e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},Bt.apply(this,arguments)};function Yt(t,e){var i=e[0]-t[0],o=e[1]-t[1],n=Math.atan2(o,i);return n>=0?n:n+2*Math.PI}function Lt(t){return Yt([t[0].clientX,t[0].clientY],[t[1].clientX,t[1].clientY])/Math.PI*180}function Nt(t){return t.touches&&t.touches.length>=2}function Ht(t){return t?t.touches?Ft(t.touches):[Zt(t)]:[]}function It(t){return t&&(t.type.indexOf("mouse")>-1||"button"in t)}function jt(t,e,i){var o=i.length,n=Vt(t,o),a=n.clientX,r=n.clientY,s=n.originalClientX,l=n.originalClientY,c=Vt(e,o),d=c.clientX,u=c.clientY,p=Vt(i,o),h=p.clientX,g=p.clientY,m=a-d,_=r-u,v=a-h,f=r-g;return{clientX:s,clientY:l,deltaX:m,deltaY:_,distX:v,distY:f}}function Wt(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function Ft(t){for(var e=Math.min(t.length,2),i=[],o=0;o<e;++o)i.push(Zt(t[o]));return i}function Zt(t){return{clientX:t.clientX,clientY:t.clientY}}function Vt(t,e){void 0===e&&(e=t.length);for(var i={clientX:0,clientY:0,originalClientX:0,originalClientY:0},o=0;o<e;++o){var n=t[o];i.originalClientX+="originalClientX"in n?n.originalClientX:n.clientX,i.originalClientY+="originalClientY"in n?n.originalClientY:n.clientY,i.clientX+=n.clientX,i.clientY+=n.clientY}return e?{clientX:i.clientX/e,clientY:i.clientY/e,originalClientX:i.originalClientX/e,originalClientY:i.originalClientY/e}:i}var qt=function(){function t(t){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=t,this.prevClients=t,this.length=t.length}return t.prototype.getAngle=function(t){return void 0===t&&(t=this.prevClients),Lt(t)},t.prototype.getRotation=function(t){return void 0===t&&(t=this.prevClients),Lt(t)-Lt(this.startClients)},t.prototype.getPosition=function(t,e){void 0===t&&(t=this.prevClients);var i=jt(t||this.prevClients,this.prevClients,this.startClients),o=i.deltaX,n=i.deltaY;return this.movement+=Math.sqrt(o*o+n*n),this.prevClients=t,i},t.prototype.getPositions=function(t){void 0===t&&(t=this.prevClients);var e=this.prevClients;return this.startClients.map((function(i,o){return jt([t[o]],[e[o]],[i])}))},t.prototype.getMovement=function(t){var e=this.movement;if(!t)return e;var i=Vt(t,this.length),o=Vt(this.prevClients,this.length),n=i.clientX-o.clientX,a=i.clientY-o.clientY;return Math.sqrt(n*n+a*a)+e},t.prototype.getDistance=function(t){return void 0===t&&(t=this.prevClients),Wt(t)},t.prototype.getScale=function(t){return void 0===t&&(t=this.prevClients),Wt(t)/Wt(this.startClients)},t.prototype.move=function(t,e){this.startClients.forEach((function(i){i.clientX-=t,i.clientY-=e})),this.prevClients.forEach((function(i){i.clientX-=t,i.clientY-=e}))},t}(),Gt=["textarea","input"],Ut=function(t){function e(e,i){void 0===i&&(i={});var o=t.call(this)||this;o.options={},o.flag=!1,o.pinchFlag=!1,o.data={},o.isDrag=!1,o.isPinch=!1,o.isMouse=!1,o.isTouch=!1,o.clientStores=[],o.targets=[],o.prevTime=0,o.doubleFlag=!1,o._dragFlag=!1,o._isTrusted=!1,o._isMouseEvent=!1,o._isSecondaryButton=!1,o._preventMouseEvent=!1,o.onDragStart=function(t,e){if(void 0===e&&(e=!0),o.flag||!1!==t.cancelable){var i=o.options,n=i.container,a=i.pinchOutside,r=i.preventWheelClick,s=i.preventRightClick,l=i.preventDefault,c=i.checkInput,d=i.preventClickEventOnDragStart,u=i.preventClickEventOnDrag,p=i.preventClickEventByCondition,h=o.isTouch,g=!o.flag;if(o._isSecondaryButton=3===t.which||2===t.button,r&&(2===t.which||1===t.button)||s&&(3===t.which||2===t.button))return o.stop(),!1;if(g){var m=document.activeElement,_=t.target;if(_){var v=_.tagName.toLowerCase(),f=Gt.indexOf(v)>-1,b=_.isContentEditable;if(f||b){if(c||m===_)return!1;if(m&&b&&m.isContentEditable&&m.contains(_))return!1}else if((l||"touchstart"===t.type)&&m){var w=m.tagName.toLowerCase();(m.isContentEditable||Gt.indexOf(w)>-1)&&m.blur()}(d||u||p)&&Pt(window,"click",o._onClick,!0)}o.clientStores=[new qt(Ht(t))],o.flag=!0,o.isDrag=!1,o._isTrusted=e,o._dragFlag=!0,o.data={},o.doubleFlag=xt()-o.prevTime<200,o._isMouseEvent=It(t),!o._isMouseEvent&&o._preventMouseEvent&&(o._preventMouseEvent=!1);var y=o._preventMouseEvent||o.emit("dragStart",Bt(Bt({data:o.data,datas:o.data,inputEvent:t,isMouseEvent:o._isMouseEvent,isSecondaryButton:o._isSecondaryButton,isTrusted:e,isDouble:o.doubleFlag},o.getCurrentStore().getPosition()),{preventDefault:function(){t.preventDefault()},preventDrag:function(){o._dragFlag=!1}}));!1===y&&o.stop(),o._isMouseEvent&&o.flag&&l&&t.preventDefault()}if(!o.flag)return!1;var x=0;if(g?(o._attchDragEvent(),h&&a&&(x=setTimeout((function(){Pt(n,"touchstart",o.onDragStart,{passive:!1})})))):h&&a&&Et(n,"touchstart",o.onDragStart),o.flag&&Nt(t)){if(clearTimeout(x),g&&t.touches.length!==t.changedTouches.length)return;o.pinchFlag||o.onPinchStart(t)}}},o.onDrag=function(t,e){if(o.flag){var i=o.options.preventDefault;!o._isMouseEvent&&i&&t.preventDefault();var n=Ht(t),a=o.moveClients(n,t,!1);if(o._dragFlag){if(o.pinchFlag||a.deltaX||a.deltaY){var r=o._preventMouseEvent||o.emit("drag",Bt(Bt({},a),{isScroll:!!e,inputEvent:t}));if(!1===r)return void o.stop()}o.pinchFlag&&o.onPinch(t,n)}o.getCurrentStore().getPosition(n,!0)}},o.onDragEnd=function(t){if(o.flag){var e=o.options,i=e.pinchOutside,n=e.container,a=e.preventClickEventOnDrag,r=e.preventClickEventOnDragStart,s=e.preventClickEventByCondition,l=o.isDrag;(a||r||s)&&requestAnimationFrame((function(){o._allowClickEvent()})),s||r||!a||l||o._allowClickEvent(),o.isTouch&&i&&Et(n,"touchstart",o.onDragStart),o.pinchFlag&&o.onPinchEnd(t);var c=(null===t||void 0===t?void 0:t.touches)?Ht(t):[],d=c.length;0!==d&&o.options.keepDragging?o._addStore(new qt(c)):o.flag=!1;var u=o._getPosition(),p=xt(),h=!l&&o.doubleFlag;o.prevTime=l||h?0:p,o.flag||(o._dettachDragEvent(),o._preventMouseEvent||o.emit("dragEnd",Bt({data:o.data,datas:o.data,isDouble:h,isDrag:l,isClick:!l,isMouseEvent:o._isMouseEvent,isSecondaryButton:o._isSecondaryButton,inputEvent:t,isTrusted:o._isTrusted},u)),o.clientStores=[],o._isMouseEvent||(o._preventMouseEvent=!0,requestAnimationFrame((function(){requestAnimationFrame((function(){o._preventMouseEvent=!1}))}))))}},o.onBlur=function(){o.onDragEnd()},o._allowClickEvent=function(){Et(window,"click",o._onClick,!0)},o._onClick=function(t){o._allowClickEvent(),o._preventMouseEvent=!1;var e=o.options.preventClickEventByCondition;(null===e||void 0===e?void 0:e(t))||(t.stopPropagation(),t.preventDefault())},o._onContextMenu=function(t){var e=o.options;e.preventRightClick?o.onDragEnd(t):t.preventDefault()},o._passCallback=function(){};var n=[].concat(e);o.options=Bt({checkInput:!1,container:n.length>1?window:n[0],preventRightClick:!0,preventWheelClick:!0,preventClickEventOnDragStart:!1,preventClickEventOnDrag:!1,preventClickEventByCondition:null,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},i);var a=o.options,r=a.container,s=a.events,l=a.checkWindowBlur;if(o.isTouch=s.indexOf("touch")>-1,o.isMouse=s.indexOf("mouse")>-1,o.targets=n,o.isMouse&&(n.forEach((function(t){Pt(t,"mousedown",o.onDragStart),Pt(t,"mousemove",o._passCallback)})),Pt(r,"contextmenu",o._onContextMenu)),l&&Pt(window,"blur",o.onBlur),o.isTouch){var c={passive:!1};n.forEach((function(t){Pt(t,"touchstart",o.onDragStart,c),Pt(t,"touchmove",o._passCallback,c)}))}return o}return At(e,t),e.prototype.stop=function(){this.isDrag=!1,this.data={},this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1,this._allowClickEvent(),this._dettachDragEvent()},e.prototype.getMovement=function(t){return this.getCurrentStore().getMovement(t)+this.clientStores.slice(1).reduce((function(t,e){return t+e.movement}),0)},e.prototype.isDragging=function(){return this.isDrag},e.prototype.isFlag=function(){return this.flag},e.prototype.isPinchFlag=function(){return this.pinchFlag},e.prototype.isDoubleFlag=function(){return this.doubleFlag},e.prototype.isPinching=function(){return this.isPinch},e.prototype.scrollBy=function(t,e,i,o){void 0===o&&(o=!0),this.flag&&(this.clientStores[0].move(t,e),o&&this.onDrag(i,!0))},e.prototype.move=function(t,e){var i=t[0],o=t[1],n=this.getCurrentStore(),a=n.prevClients;return this.moveClients(a.map((function(t){var e=t.clientX,n=t.clientY;return{clientX:e+i,clientY:n+o,originalClientX:e,originalClientY:n}})),e,!0)},e.prototype.triggerDragStart=function(t){this.onDragStart(t,!1)},e.prototype.setEventData=function(t){var e=this.data;for(var i in t)e[i]=t[i];return this},e.prototype.setEventDatas=function(t){return this.setEventData(t)},e.prototype.getCurrentEvent=function(t){return Bt(Bt({data:this.data,datas:this.data},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:t})},e.prototype.getEventData=function(){return this.data},e.prototype.getEventDatas=function(){return this.data},e.prototype.unset=function(){var t=this,e=this.targets,i=this.options.container;this.off(),Et(window,"blur",this.onBlur),this.isMouse&&(e.forEach((function(e){Et(e,"mousedown",t.onDragStart)})),Et(i,"contextmenu",this._onContextMenu)),this.isTouch&&(e.forEach((function(e){Et(e,"touchstart",t.onDragStart)})),Et(i,"touchstart",this.onDragStart)),this._allowClickEvent(),this._dettachDragEvent()},e.prototype.onPinchStart=function(t){var e=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>e)){var i=new qt(Ht(t));this.pinchFlag=!0,this._addStore(i);var o=this.emit("pinchStart",Bt(Bt({data:this.data,datas:this.data,angle:i.getAngle(),touches:this.getCurrentStore().getPositions()},i.getPosition()),{inputEvent:t,isTrusted:this._isTrusted}));!1===o&&(this.pinchFlag=!1)}},e.prototype.onPinch=function(t,e){if(this.flag&&this.pinchFlag&&!(e.length<2)){var i=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",Bt(Bt({data:this.data,datas:this.data,movement:this.getMovement(e),angle:i.getAngle(e),rotation:i.getRotation(e),touches:i.getPositions(e),scale:i.getScale(e),distance:i.getDistance(e)},i.getPosition(e)),{inputEvent:t,isTrusted:this._isTrusted}))}},e.prototype.onPinchEnd=function(t){if(this.pinchFlag){var e=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var i=this.getCurrentStore();this.emit("pinchEnd",Bt(Bt({data:this.data,datas:this.data,isPinch:e,touches:i.getPositions()},i.getPosition()),{inputEvent:t}))}},e.prototype.getCurrentStore=function(){return this.clientStores[0]},e.prototype.moveClients=function(t,e,i){var o=this._getPosition(t,i),n=this.isDrag;(o.deltaX||o.deltaY)&&(this.isDrag=!0);var a=!1;return!n&&this.isDrag&&(a=!0),Bt(Bt({data:this.data,datas:this.data},o),{movement:this.getMovement(t),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,isMouseEvent:this._isMouseEvent,isSecondaryButton:this._isSecondaryButton,inputEvent:e,isTrusted:this._isTrusted,isFirstDrag:a})},e.prototype._addStore=function(t){this.clientStores.splice(0,0,t)},e.prototype._getPosition=function(t,e){var i=this.getCurrentStore(),o=i.getPosition(t,e),n=this.clientStores.slice(1).reduce((function(t,e){var i=e.getPosition();return t.distX+=i.distX,t.distY+=i.distY,t}),o),a=n.distX,r=n.distY;return Bt(Bt({},o),{distX:a,distY:r})},e.prototype._attchDragEvent=function(){var t=this.options.container,e={passive:!1};this.isMouse&&(Pt(t,"mousemove",this.onDrag),Pt(t,"mouseup",this.onDragEnd)),this.isTouch&&(Pt(t,"touchmove",this.onDrag,e),Pt(t,"touchend",this.onDragEnd,e),Pt(t,"touchcancel",this.onDragEnd,e))},e.prototype._dettachDragEvent=function(){var t=this.options.container;this.isMouse&&(Et(t,"mousemove",this.onDrag),Et(t,"mouseup",this.onDragEnd)),this.isTouch&&(Et(t,"touchstart",this.onDragStart),Et(t,"touchmove",this.onDrag),Et(t,"touchend",this.onDragEnd),Et(t,"touchcancel",this.onDragEnd))},e}(Ot);function Jt(t,e){return e.replace(/([^}{]*){/gm,(function(e,i){return i.replace(/\.([^{,\s\d.]+)/g,"."+t+"$1")+"{"}))}function Kt(t,e){return function(i){var o=i.prototype;t.forEach((function(t){e(o,t)}))}}function Qt(t){var e=5381,i=t.length;while(i)e=33*e^t.charCodeAt(--i);return e>>>0}var te=Qt;function ee(t){return te(t).toString(36)}function ie(t){if(t&&t.getRootNode){var e=t.getRootNode();if(11===e.nodeType)return e}}function oe(t,e,i){return i.original?e:e.replace(/([^};{\s}][^};{]*|^\s*){/gm,(function(e,i){var o=i.trim();return(o?bt(o):[""]).map((function(e){var i=e.trim();return 0===i.indexOf("@")?i:i.indexOf(":global")>-1?i.replace(/\:global/g,""):i.indexOf(":host")>-1?""+i.replace(/\:host/g,"."+t):i?"."+t+" "+i:"."+t})).join(", ")+" {"}))}function ne(t,e,i,o){var n=document.createElement("style");return n.setAttribute("type","text/css"),n.setAttribute("data-styled-id",t),i.nonce&&n.setAttribute("nonce",i.nonce),n.innerHTML=oe(t,e,i),(o||document.head||document.body).appendChild(n),n}function ae(t){var e,i="rCS"+ee(t),o=0;return{className:i,inject:function(n,a){void 0===a&&(a={});var r,s=ie(n),l=0===o;return(s||l)&&(r=ne(i,t,a,s)),l&&(e=r),s||++o,{destroy:function(){s?(s.removeChild(r),r=null):(o>0&&--o,0===o&&e&&(e.parentNode.removeChild(e),e=null))}}}}}var re=ae;function se(t,e){for(var i=t.length,o=0;o<i;++o)if(e(t[o],o))return!0;return!1}function le(t,e){for(var i=t.length,o=0;o<i;++o)if(e(t[o],o))return t[o];return null}function ce(t){var e=t;if("undefined"===typeof e){if("undefined"===typeof navigator||!navigator)return"";e=navigator.userAgent||""}return e.toLowerCase()}function de(t,e){try{return new RegExp(t,"g").exec(e)}catch(i){return null}}function ue(){if("undefined"===typeof navigator||!navigator||!navigator.userAgentData)return!1;var t=navigator.userAgentData,e=t.brands||t.uaList;return!(!e||!e.length)}function pe(t,e){var i=de("("+t+")((?:\\/|\\s|:)([0-9|\\.|_]+))",e);return i?i[3]:""}function he(t){return t.replace(/_/g,".")}function ge(t,e){var i=null,o="-1";return se(t,(function(t){var n=de("("+t.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",e);return!(!n||t.brand)&&(i=t,o=n[3]||"-1",t.versionAlias?o=t.versionAlias:t.versionTest&&(o=pe(t.versionTest.toLowerCase(),e)||o),o=he(o),!0)})),{preset:i,version:o}}function me(t,e){var i={brand:"",version:"-1"};return se(t,(function(t){var o=_e(e,t);return!!o&&(i.brand=t.id,i.version=t.versionAlias||o.version,"-1"!==i.version)})),i}function _e(t,e){return le(t,(function(t){var i=t.brand;return de(""+e.test,i.toLowerCase())}))}var ve=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],fe=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],be=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],we=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],ye=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"win32|windows",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"macos|macintel|mac os x",id:"mac"},{test:"android|linux armv81",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function xe(t){return!!ge(we,t).preset}function Ce(t){var e=ce(t),i=!!/mobi/g.exec(e),o={name:"unknown",version:"-1",majorVersion:-1,webview:xe(e),chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},n={name:"unknown",version:"-1",majorVersion:-1},a=ge(ve,e),r=a.preset,s=a.version,l=ge(ye,e),c=l.preset,d=l.version,u=ge(fe,e);if(o.chromium=!!u.preset,o.chromiumVersion=u.version,!o.chromium){var p=ge(be,e);o.webkit=!!p.preset,o.webkitVersion=p.version}return c&&(n.name=c.id,n.version=d,n.majorVersion=parseInt(d,10)),r&&(o.name=r.id,o.version=s,o.webview&&"ios"===n.name&&"safari"!==o.name&&(o.webview=!1)),o.majorVersion=parseInt(o.version,10),{browser:o,os:n,isMobile:i,isHints:!1}}function Me(t){var e=navigator.userAgentData,i=(e.uaList||e.brands).slice(),o=t&&t.fullVersionList,n=e.mobile||!1,a=i[0],r=(t&&t.platform||e.platform||navigator.platform).toLowerCase(),s={name:a.brand,version:a.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!me(we,i).brand||xe(ce())},l={name:"unknown",version:"-1",majorVersion:-1};s.webkit=!s.chromium&&se(be,(function(t){return _e(i,t)}));var c=me(fe,i);if(s.chromium=!!c.brand,s.chromiumVersion=c.version,!s.chromium){var d=me(be,i);s.webkit=!!d.brand,s.webkitVersion=d.version}var u=le(ye,(function(t){return new RegExp(""+t.test,"g").exec(r)}));if(l.name=u?u.id:"",t&&(l.version=t.platformVersion),o&&o.length){var p=me(ve,o);s.name=p.brand||s.name,s.version=p.version||s.version}else{var h=me(ve,i);s.name=h.brand||s.name,s.version=h.brand&&t?t.uaFullVersion:h.version}return s.webkit&&(l.name=n?"ios":"mac"),"ios"===l.name&&s.webview&&(s.version="-1"),l.version=he(l.version),s.version=he(s.version),l.majorVersion=parseInt(l.version,10),s.majorVersion=parseInt(s.version,10),{browser:s,os:l,isMobile:n,isHints:!0}}function ze(t){return"undefined"===typeof t&&ue()?Me():Ce(t)}var $e=ze,ke=function(t,e){return ke=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},ke(t,e)};function Se(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}ke(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var Pe=function(){return Pe=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i],e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},Pe.apply(this,arguments)};function Ee(t,e,i,o){var n,a=arguments.length,r=a<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(t,e,i,o);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(r=(a<3?n(r):a>3?n(e,i,r):n(e,i))||r);return a>3&&r&&Object.defineProperty(e,i,r),r}function Te(t,e,i){if(i||2===arguments.length)for(var o,n=0,a=e.length;n<a;n++)!o&&n in e||(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))}var De=$e(),Re="safari"===De.browser.name,Oe="infinite-viewer-",Xe="".concat(Oe,"wrapper"),Ae="".concat(Oe,"scroll-area"),Be="".concat(Oe,"scroll-bar"),Ye="".concat(Oe,"horizontal-scroll-bar"),Le="".concat(Oe,"vertical-scroll-bar"),Ne="".concat(Oe,"scroll-thumb"),He=re(Jt(Oe,"\n{\n    position: relative;\n    overscroll-behavior: none;\n}\n.wrapper {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    overflow: auto;\n    top: 0;\n    left: 0;\n    will-change: scroll-position;\n}\n.restrict-wrapper {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    top: 0;\n    left: 0;\n}\n.wrapper::-webkit-scrollbar {\n    display: none;\n}\n.scroll-area {\n    position:absolute;\n    top:0;\n    left:0;\n    transform-origin: 0 0;\n}\n.scroll-bar {\n    position:absolute;\n    width: 10px;\n    height: 10px;\n    box-sizing: border-box;\n    right: 0;\n    bottom: 0;\n    overflow: hidden;\n}\n.horizontal-scroll-bar {\n    width: calc(100% - 20px);\n    right: 10px;\n    height: 14px;\n}\n.vertical-scroll-bar {\n    height: calc(100% - 20px);\n    bottom: 10px;\n    width: 14px;\n}\n.scroll-thumb {\n    position:relative;\n    opacity: 0.7;\n    background: #333;\n    border-radius: 3px;\n    left: 0px;\n    top: 0px;\n    z-index: 10;\n    width: 6px;\n    height: 6px;\n    transition: all ease 0.2s;\n}\n.horizontal-scroll-bar .scroll-thumb {\n    margin: 4px 0px;\n    transition-property: margin, height, border-radius;\n}\n.vertical-scroll-bar .scroll-thumb {\n    margin: 0px 4px;\n    transition-property: margin, width, border-radius;\n}\n.horizontal-scroll-bar:hover .scroll-thumb {\n    height: 10px;\n    margin: 2px 0px;\n    border-radius: 5px;\n}\n.vertical-scroll-bar:hover .scroll-thumb {\n    width: 10px;\n    margin: 0px 2px;\n    border-radius: 5px;\n}\n")),Ie={margin:500,threshold:100,zoom:1,zoomX:1,zoomY:1,rangeX:[-1/0,1/0],rangeY:[-1/0,1/0],rangeOffsetX:[0,0],rangeOffsetY:[0,0],wrapperElement:null,scrollAreaElement:null,horizontalScrollElement:null,verticalScrollElement:null,usePinch:!1,useAutoZoom:!1,useMouseDrag:!1,pinchThreshold:30,cspNonce:"",maxPinchWheel:1/0,wheelScale:.01,displayHorizontalScroll:!0,displayVerticalScroll:!0,useTransform:!0,useWheelPinch:!0,zoomRange:[.001,1/0],wheelPinchKey:"ctrl",useWheelScroll:Re,zoomOffsetX:"50%",zoomOffsetY:"50%",translateZ:0,useGesture:!0,useResizeObserver:!1,pinchDirection:"all",preventWheelClick:!0},je=function(t){return 1-Math.pow(1-t,3)},We={horizontal:{pos:"Left",coord:"X",size:"Width"},vertical:{pos:"Top",coord:"Y",size:"Height"}},Fe=He.className,Ze=["margin","threshold","zoomOffsetX","zoomOffsetY","zoom","zoomX","zoomY","rangeX","rangeY","rangeOffsetX","rangeOffsetY","usePinch","useMouseDrag","pinchThreshold","maxPinchWheel","wheelScale","displayVerticalScroll","displayHorizontalScroll","useWheelScroll","translateZ","useAutoZoom","wheelPinchKey","zoomRange","pinchDirection"],Ve=Te(Te([],Ze,!0),["preventWheelClick","useWheel","useGesture","cspNonce","wrapperElement","scrollAreaElement","verticalScrollElement","horizontalScrollElement","useResizeObserver","wheelContainer"],!1),qe=["scroll","abortPinch","dragStart","dragEnd","pinchStart","pinch"],Ge=["getScrollLeft","getScrollTop","getScrollWidth","getScrollHeight","getContainerWidth","getContainerHeight","getViewportWidth","getViewportHeight","getViewportScrollWidth","getViewportScrollHeight","scrollTo","scrollBy","zoomBy","scrollCenter","getContainer","getViewport","getWrapper","setZoom","getRangeX","getRangeY","resize","getZoom","getZoomX","getZoomY","getWheelContainer"],Ue=1e-6;function Je(t){var e=t.deltaX,i=t.deltaY,o=t.datas,n=Date.now(),a=o.speed;if(!a)return o.speed=[0,0],void(o.time=n);var r=n-o.time;o.speed=[a[0]/2+e/r,a[1]/2+i/r]}function Ke(t,e){var i=Math.sqrt(t[0]*t[0]+t[1]*t[1]);return Math.abs(i/e)}function Qe(t,e){var i=Ke(t,e);return[-t[0]/2*i,-t[1]/2*i]}function ti(t){return Math.abs(t)}function ei(t,e,i,o,n){var a=n||isFinite(i[0])?i[0]:Math.min(-1,Math.floor(t/e))*e-o,r=n||isFinite(i[1])?i[1]:Math.max(1,Math.ceil(t/e))*e+o;return[a,r]}function ii(t,e){return null!=t?t:e}function oi(t,e,i){var o=i.duration,n=i.easing||function(t){return 1-Math.pow(1-t,3)},a=Date.now(),r=a,s=function(){var i=Date.now(),l=i-a;o<l&&(l=o);var c=n(l/o),d=n((r-a)/o);r=i,t(c-d),l>=o||e(s)};e(s)}var ni=function(t){function e(e,i){var o=t.call(this)||this;o.type=e,o.isAppend=!1,o.size=0,o.scrollSize=0,o.isHorizontal=!1,o.onWheel=function(t){var e=o.isHorizontal?t.deltaX:t.deltaY;e&&t.preventDefault(),o.trigger("scroll",{delta:e})};var n,a="horizontal"===e,r=i;return i?n=i.querySelector(".".concat(Ne)):(r=document.createElement("div"),n=document.createElement("div"),r.insertBefore(n,null),o.isAppend=!0),St(r,a?Ye:Le),St(r,Be),St(n,Ne),o.thumbElement=n,o.barElement=r,o.isHorizontal=a,o.gesto=new Ut(r,{container:window}).on("dragStart",(function(t){var e=t.inputEvent.target,i=t.datas,n=o.thumbElement===e;n||setTimeout((function(){requestAnimationFrame((function(){var e=o.thumbElement.getBoundingClientRect(),i=e[a?"left":"top"],n=e[a?"width":"height"],r=i+n,s=t[a?"clientX":"clientY"],l=s-r,c=s-i;if(!(0<=c&&l<=0)){o.scrollSize;var d=n/o.size*o.scrollSize,u=(0<l?l:c)/d,p=u*o.size;console.log(o.scrollSize,u,p),o.scrollBy(p)}}))}),100),i.isThumb=n,t.inputEvent.stopPropagation(),t.inputEvent.preventDefault()})).on("drag",(function(t){t.datas.isThumb&&o.scrollBy(o.isHorizontal?t.deltaX:t.deltaY)})),Pt(o.barElement,"wheel",o.onWheel,{passive:!1}),o}Se(e,t);var i=e.prototype;return i.scrollBy=function(t){var e=t/this.size;this.trigger("scroll",{delta:this.scrollSize*e})},i.render=function(t,e,i){var o=i[0],n=i[1],a=kt(ti(o)+n,.001),r=e+a,s=t&&a?"block":"none",l=this.isHorizontal?["X","width"]:["Y","height"],c=l[0],d=l[1],u=e/r,p=n/r/u;this.size=e,this.scrollSize=r,this.barElement.style.cssText="display: ".concat(s,";"),this.thumbElement.style.cssText+="".concat(d,": ").concat(100*u,"%;")+"transform: translate".concat(c,"(").concat(100*p,"%)")},i.destroy=function(){Et(this.barElement,"wheel",this.onWheel),this.gesto.off(),this.off()},e}(Ot),ai=function(t){function e(e,i,o){void 0===i&&(i={}),void 0===o&&(o={});var n=t.call(this)||this;return n._containerElement=e,n.offsetX=0,n.offsetY=0,n.containerWidth=0,n.containerHeight=0,n.viewportWidth=0,n.viewportHeight=0,n.viewportScrollWidth=0,n.viewportScrollHeight=0,n.scrollLeft=0,n.scrollTop=0,n._scrollTimer=0,n._zoomTimer=0,n._viewportElement=null,n._wheelContainerElement=null,n.dragFlag=!1,n.isLoop=!1,n._tempScale=[1,1],n._tempRect=null,n._tempRectTimer=null,n._onDestroys=[],n._asLeft=0,n._asTop=0,n.resize=function(){var t=n._containerElement,e=t.offsetWidth,i=t.offsetHeight,o=n._viewportElement,a=o.offsetWidth,r=o.offsetHeight,s=o.scrollWidth,l=o.scrollHeight;n.containerWidth=e,n.containerHeight=i,n.viewportWidth=a,n.viewportHeight=r,n.viewportScrollWidth=Math.max(a,s),n.viewportScrollHeight=Math.max(a,l),n.render(),n._scrollBy(0,0)},n._onScroll=function(){var t=n.wrapperElement,e=t.scrollLeft,i=t.scrollTop,o=n.zoom,a=void 0===o?Ie.zoom:o,r=e-n.scrollLeft,s=i-n.scrollTop,l=n.getScrollLeft(),c=n.getScrollTop();n.isLoop&&(n.isLoop=!1),n.scrollLeft=e,n.scrollTop=i,n.scrollTo(l+r/a,c+s/a)},n.onWheel=function(t){var e=n.options,i=e.pinchDirection,o=e.maxPinchWheel||1/0,a=t["".concat(n.wheelPinchKey,"Key")]||t.ctrlKey;if(e.useWheelPinch&&a){var r=t.deltaY,s=r>=0?1:-1,l=Math.min(o,Math.abs(r));r=s*l;var c=-r,d=Math.max(1+c*(e.wheelScale||.01),Ue);clearTimeout(n._tempRectTimer),n._tempRectTimer=window.setTimeout((function(){n._tempRect=null}),100),n._triggerPinch({distance:l,scale:d,rotation:0,zoom:n.zoom*d,zoomX:n.zoomX*("vertical"===i?1:d),zoomY:n.zoomY*("horizontal"===i?1:d),inputEvent:t,isWheel:!0,clientX:t.clientX,clientY:t.clientY,ratioX:0,ratioY:0})}else{if(!e.useWheelScroll)return;var u=t.deltaX;r=t.deltaY;t.shiftKey&&!u&&(u=r,r=0),n.scrollBy(u/n.zoomX,r/n.zoomY)}t.preventDefault()},n.onGestureStart=function(t){n._tempScale=[n.zoomX,n.zoomY],n._setClientRect(),t.preventDefault()},n.onGestureChange=function(t){if(t.preventDefault(),!n.gesto.isFlag()&&n._tempScale){var e=t.scale,i=n._tempScale[0],o=n._tempScale[1],a=n.options.pinchDirection;n._triggerPinch({distance:0,scale:e,rotation:t.rotation,inputEvent:t,isWheel:!0,zoom:(i+o)*e/2,zoomX:i*("vertical"===a?1:e),zoomY:o*("horizontal"===a?1:e),clientX:t.clientX,clientY:t.clientY,ratioX:0,ratioY:0})}else n._tempScale=[1,1]},n.onGestureEnd=function(){},i instanceof Element?(n._viewportElement=i,n.options=Pe(Pe({},Ie),o)):(n._viewportElement=e.children[0],n.options=Pe(Pe({},Ie),i)),n.init(),n}Se(e,t);var i=e.prototype;return i.getContainer=function(){return this._containerElement},i.getWheelContainer=function(){return this._wheelContainerElement},i.getViewport=function(){return this._viewportElement},i.getWrapper=function(){return this.wrapperElement},i.geScrollArea=function(){return this.scrollAreaElement},i.destroy=function(){this.off(),this.gesto.unset(),this.verticalScrollbar.destroy(),this.horizontalScrollbar.destroy(),this.injectResult.destroy();var t=this._containerElement;this._onDestroys.forEach((function(t){t()})),Et(this.wrapperElement,"scroll",this._onScroll),Et(this._wheelContainerElement,"wheel",this.onWheel),Et(t,"gesturestart",this.onGestureStart),Et(t,"gesturechange",this.onGestureChange),Et(t,"gesturesend",this.onGestureEnd),this.gesto=null,this.injectResult=null,this._containerElement=null,this._viewportElement=null,this.options=null},i.getScrollTop=function(t){void 0===t&&(t={});var e=!1,i=!1;dt(t)?(e=t.range,i=t.absolute):e=t;var o=this.zoomY,n=this.scrollTop/o+this.offsetY+(e?ti(this.getRangeY()[0]):0);return i?n*o:n},i.getScrollLeft=function(t){void 0===t&&(t={});var e=!1,i=!1;dt(t)?(e=t.range,i=t.absolute):e=t;var o=this.zoomX,n=this.scrollLeft/o+this.offsetX+(e?ti(this.getRangeX()[0]):0);return i?n*o:n},i.getScrollWidth=function(t){var e=this._getScrollRangeX(),i=this.zoomX,o=this.containerWidth/i+ti(e[0])+e[1];return t?o:o*i},i.getScrollHeight=function(t){var e=this._getScrollRangeY(),i=this.zoomY,o=this.containerHeight/i+ti(e[0])+e[1];return t?o:o*i},i.scrollCenter=function(t){void 0===t&&(t={}),this.resize();var e=this.zoomX,i=this.zoomY,o=-(this.containerWidth/e-this.viewportWidth)/2,n=-(this.containerHeight/i-this.viewportHeight)/2;return t.absolute&&(o*=e,n*=i),!1===t.horizontal&&(o=this.getScrollLeft()),!1===t.vertical&&(n=this.getScrollTop()),this.scrollTo(o,n,t)},i.scrollBy=function(t,e,i){if(this._pauseScrollAnimation(),i&&i.duration)return this._startScrollAnimation([t,e],i),!0;var o=this.getScrollLeft(),n=this.getScrollTop();return(null===i||void 0===i?void 0:i.absolute)&&(o*=this.zoomX,n*=this.zoomY),this._scrollTo(o+t,n+e,i)},i.scrollTo=function(t,e,i){if(this._pauseScrollAnimation(),i&&i.duration){var o=this.getScrollLeft(),n=this.getScrollTop();return(null===i||void 0===i?void 0:i.absolute)&&(o*=this.zoomX,n*=this.zoomY),this.scrollBy(t-o,e-n,i)}return this._scrollTo(t,e,i)},i.zoomBy=function(t,e){this._pauseZoomAnimation();var i=ut(t)?t:[t,t],o=i[0],n=i[1];e&&e.duration?this._startZoomAnimation([o,n],e):this._setZoom([this.zoomX+o,this.zoomY+n],e)},i.setZoom=function(t,e){if(this._pauseZoomAnimation(),e&&e.duration){var i=ut(t)?t:[t,t],o=i[0],n=i[1];this._startZoomAnimation([o-this.zoomX,n-this.zoomY],e)}else this._setZoom(t,e)},i.getViewportWidth=function(){return this.viewportWidth},i.getViewportHeight=function(){return this.viewportWidth},i.getViewportScrollWidth=function(){return this.viewportScrollWidth},i.getViewportScrollHeight=function(){return this.viewportScrollHeight},i.getContainerWidth=function(){return this.containerWidth},i.getContainerHeight=function(){return this.containerHeight},i.getZoom=function(){return(this.zoomX+this.zoomY)/2},i.getZoomX=function(){return this.zoomX},i.getZoomY=function(){return this.zoomY},i.getRangeX=function(t,e){return this._getRangeCoord("horizontal",t,e)},i.getRangeY=function(t,e){return this._getRangeCoord("vertical",t,e)},i.init=function(){var t,e=this,i=this._containerElement,o=this.options,n=o.wrapperElement||i.querySelector(".".concat(Xe)),a=o.scrollAreaElement||i.querySelector(".".concat(Ae)),r=o.horizontalScrollElement||i.querySelector(".".concat(Ye)),s=o.verticalScrollElement||i.querySelector(".".concat(Le));n||(n=document.createElement("div"),n.insertBefore(this._viewportElement,null),i.insertBefore(n,null)),this.wrapperElement=n,a||(a=document.createElement("div"),n.insertBefore(a,n.firstChild)),this.scrollAreaElement=a,St(i,Fe),St(n,Xe),St(a,Ae),this.horizontalScrollbar=new ni("horizontal",r),this.verticalScrollbar=new ni("vertical",s),this.horizontalScrollbar.on("scroll",(function(t){e.scrollBy(t.delta/e.zoomX,0)})),this.verticalScrollbar.on("scroll",(function(t){e.scrollBy(0,t.delta/e.zoomY)})),this.horizontalScrollbar.isAppend&&i.insertBefore(this.horizontalScrollbar.barElement,null),this.verticalScrollbar.isAppend&&i.insertBefore(this.verticalScrollbar.barElement,null),this.injectResult=He.inject(i,{nonce:this.options.cspNonce});var l=o.wheelContainer,c=null;if(l&&(pt(l)?c=document.querySelector(l):l instanceof Node?c=l:("value"in l||"current"in l)&&(c=l.current||l.value)),c||(c=i),this._wheelContainerElement=c,this.gesto=new Ut(i,{container:window,events:["touch","mouse"],preventWheelClick:null===(t=this.options.preventWheelClick)||void 0===t||t}).on("dragStart",(function(t){var i=t.inputEvent,o=t.stop,n=t.datas;if(e.useMouseDrag||!t.isMouseEvent){e._pauseScrollAnimation(),e.dragFlag=!1;var a=e.trigger("dragStart",t);!1!==a?(i.preventDefault(),n.startEvent=i):o()}else o()})).on("drag",(function(t){!e.options.usePinch||t.isPinch||e.useMouseDrag&&t.isMouseEvent?(e.trigger("drag",Pe(Pe({},t),{inputEvent:t.inputEvent})),Je(t),e.scrollBy(-t.deltaX/e.zoomX,-t.deltaY/e.zoomY)):!e.dragFlag&&t.movement>o.pinchThreshold&&(e.dragFlag=!0,e.trigger("abortPinch",{inputEvent:t.datas.startEvent||t.inputEvent}))})).on("dragEnd",(function(t){e.trigger("dragEnd",{isDrag:t.isDrag,isDouble:t.isDouble,inputEvent:t.inputEvent}),e._startScrollAnimationBySpeed(t.datas.speed)})).on("pinchStart",(function(t){var i=t.inputEvent,o=t.datas,n=t.stop;i.preventDefault(),e._pauseScrollAnimation(),o.startZoom=[e.zoomX,e.zoomY];var a=e.trigger("pinchStart",{inputEvent:i});!1===a&&n(),e._setClientRect()})).on("pinch",(function(t){var i=t.scale,o=e.options.pinchDirection;e._triggerPinch({rotation:t.rotation,distance:t.distance,scale:t.scale,inputEvent:t.inputEvent,isWheel:!1,zoom:t.datas.startZoom*i,zoomX:e.zoomX*("vertical"===o?1:i),zoomY:e.zoomY*("horizontal"===o?1:i),clientX:t.clientX,clientY:t.clientY,ratioX:0,ratioY:0})})).on("pinchEnd",(function(){e._tempRect=null})),Pt(n,"scroll",this._onScroll),o.useResizeObserver){var d=new ResizeObserver((function(){e.resize()}));d.observe(this._viewportElement),d.observe(this._containerElement),this._onDestroys.push((function(){d.disconnect()}))}else Pt(window,"resize",this.resize),this._onDestroys.push((function(){Et(window,"resize",e.resize)}));(o.useWheelPinch||o.useWheelScroll)&&Pt(c,"wheel",this.onWheel,{passive:!1}),o.useGesture&&(Pt(i,"gesturestart",this.onGestureStart,{passive:!1}),Pt(i,"gesturechange",this.onGestureChange,{passive:!1})),this.resize()},i.render=function(){var t=this,e=t.offsetX,i=t.offsetY,o=t.zoomX,n=void 0===o?Ie.zoomX:o,a=t.zoomY,r=void 0===a?Ie.zoomY:a,s=t.translateZ,l=void 0===s?0:s,c=(t.rangeX,t.rangeY,t.containerWidth,t.containerHeight,this.options.useTransform),d=void 0===c?Ie.useTransform:c,u=-e*n,p=-i*r;this.scrollAreaElement.style.cssText="width:calc(100% + ".concat(this.getScrollAreaWidth(),"px);")+"height:calc(100% + ".concat(this.getScrollAreaHeight(),"px);");var h=this._viewportElement.style;h.cssText+=!1===d?"position: relative; left: ".concat(u,"px; top: ").concat(p,"px; "):"transform-origin: 0 0;"+"transform:translate3d(".concat(u,"px, ").concat(p,"px, ").concat(l,"px) scale(").concat(n,", ").concat(r,");"),this.renderScroll()},i.renderScroll=function(){var t=this,e=t.containerWidth,i=t.containerHeight,o=t.zoomX,n=t.zoomY;this.horizontalScrollbar.render(this.displayHorizontalScroll,e/o,this._getScrollRangeX()),this.verticalScrollbar.render(this.displayVerticalScroll,i/n,this._getScrollRangeY())},i.move=function(t,e){var i=this.wrapperElement;i.scrollLeft=t,i.scrollTop=e},i._startZoomAnimation=function(t,e){var i=this;if(t){var o=e.duration,n=e.easing||je;oi((function(o){return i._setZoom([i.zoomX+t[0]*o,i.zoomY+t[1]*o],e)}),(function(t){i._zoomTimer=requestAnimationFrame(t)}),{easing:n,duration:o})}},i._startScrollAnimation=function(t,e){var i=this;if(t[0]||t[1]){var o=e.duration,n=e.easing||je;oi((function(o){return i._scrollBy(t[0]*o,t[1]*o,e)}),(function(t){i._scrollTimer=requestAnimationFrame(t)}),{easing:n,duration:o})}},i._startScrollAnimationBySpeed=function(t){if(t&&(t[0]||t[1])){var e=-6e-4,i=Ke(t,e),o=Qe(t,e);return this._startScrollAnimation(o,{duration:i})}},i._pauseScrollAnimation=function(){cancelAnimationFrame(this._scrollTimer),this._scrollTimer=0},i._pauseZoomAnimation=function(){cancelAnimationFrame(this._zoomTimer),this._zoomTimer=0},i.getScrollAreaWidth=function(){var t=this.getRangeX(!0),e=t[0],i=t[1];return e||i?2*this.margin:0},i.getScrollAreaHeight=function(){var t=this.getRangeY(!0),e=t[0],i=t[1];return e||i?2*this.margin:0},i._triggerPinch=function(t){var e=t.clientX,i=t.clientY,o=t.zoomX,n=t.zoomY;this.useAutoZoom&&this._zoomByClient([o,n],e,i),this._tempRect||this._setClientRect();var a=this.zoomRange,r=this._tempRect,s=r.left,l=r.top,c=r.width,d=r.height,u=(e-s)/c*100,p=(i-l)/d*100;this.trigger("pinch",Pe(Pe({},t),{zoom:$t((o+n)/2,a[0],a[1]),zoomX:$t(o,a[0],a[1]),zoomY:$t(n,a[0],a[1]),ratioX:u,ratioY:p}))},i._setClientRect=function(){var t=this.getContainer().getBoundingClientRect();this._tempRect={left:t.left,top:t.top,width:t.width,height:t.height}},i._zoomByClient=function(t,e,i){this._tempRect||this._setClientRect();var o=this._tempRect,n=o.left,a=o.top,r=o.width,s=o.height,l=this.options,c=l.zoomOffsetX,d=l.zoomOffsetY;l.zoomOffsetX="".concat((e-n)/r*100,"%"),l.zoomOffsetY="".concat((i-a)/s*100,"%"),this._setZoom(t,{zoomBase:"screen"}),l.zoomOffsetX=c,l.zoomOffsetY=d},i._setZoom=function(t,e){void 0===e&&(e={});var i=e.zoomBase,o=this,n=o.containerWidth,a=o.containerHeight,r=o.zoomX,s=o.zoomY,l=o.zoomRange,c=this,d=c.zoomOffsetX,u=void 0===d?Ie.zoomOffsetX:d,p=c.zoomOffsetY,h=void 0===p?Ie.zoomOffsetY:p;"zoomOffsetX"in e&&(u=e.zoomOffsetX),"zoomOffsetY"in e&&(h=e.zoomOffsetY);var g=this.getScrollLeft(),m=this.getScrollTop(),_=ut(t)?t:[t,t],v=_[0],f=_[1],b=$t(v,l[0],l[1]),w=$t(f,l[0],l[1]),y=this.options;y.zoomX=b,y.zoomY=w,y.zoom=(b+w)/2;var x=this.getScrollLeft(),C=this.getScrollTop(),M=0,z=0;"viewport"===i?(M=(-g+zt("".concat(u),this.viewportWidth))*r,z=(-m+zt("".concat(h),this.viewportHeight))*s):(M=zt("".concat(u),n),z=zt("".concat(h),a));var $=g+M/r,k=m+z/s,S=x+M/b,P=C+z/w;this._scrollBy($-S,k-P,{zoom:!!(b-r||w-s)}),this.render()},i._scrollBy=function(t,e,i){var o=this.getScrollLeft(),n=this.getScrollTop();return(null===i||void 0===i?void 0:i.absolute)&&(o*=this.zoomX,n*=this.zoomY),this._scrollTo(o+t,n+e,i)},i._scrollTo=function(t,e,i){var o=this,n=this,a=n.scrollLeft,r=n.scrollTop,s=null===i||void 0===i?void 0:i.absolute;this._scrollToType("horizontal",t,s),this._scrollToType("vertical",e,s);var l=this.scrollLeft,c=this.scrollTop;this.render();var d=this.getScrollLeft(),u=this.getScrollTop();return this._emitScrollEvent(d,u,null===i||void 0===i?void 0:i.zoom),Math.round(a)===l&&Math.round(r)===c||(this.isLoop=!0,this.move(l,c),requestAnimationFrame((function(){if(o.isLoop){o.isLoop=!1;var t=o.wrapperElement,e=t.scrollLeft,i=t.scrollTop;o.scrollLeft=e,o.scrollTop=i,l===Math.round(e)&&c===Math.round(i)||o._scrollTo(d,u)}})),!1)},i._scrollToType=function(t,e,i){var o=We[t],n=this,a=n.margin,r=void 0===a?Ie.margin:a,s=n.threshold,l=void 0===s?Ie.threshold:s,c=this["scroll".concat(o.pos)],d=this["getRange".concat(o.coord)](!0,!0),u=d[0],p=d[1],h=Math.round(c),g=this["getScrollArea".concat(o.size)](),m=this["zoom".concat(o.coord)];i&&(e/=m);var _=e*m;if(u===p)h=u,e=u/m;else if(_-l<=u){var v=Math.max(0,_-u);h=v,e=(u+v)/m}else if(_+l>=p){var f=Math.max(0,p-_);h=g-f,e=(p-f)/m}else h<l?h+=r:h>g-l&&(h-=r);h=Math.round(h),this["scroll".concat(o.pos)]=h,this["offset".concat(o.coord)]=e-h/m},i._getRangeCoord=function(t,e,i){var o=this,n=o.margin,a=void 0===n?Ie.margin:n,r=o.threshold,s=We[t],l=ii(this["range".concat(s.coord)],Ie["range".concat(s.coord)]),c=ii(this["rangeOffset".concat(s.coord)],Ie["rangeOffset".concat(s.coord)]),d=this["zoom".concat(s.coord)],u=ei(this["getScroll".concat(s.pos)](),a,l,r,i);return e?[u[0]*d+c[0],u[1]*d+c[1]]:[u[0]+c[0],u[1]+c[1]]},i._emitScrollEvent=function(t,e,i){var o=this._asLeft,n=this._asTop;(i||o!==t||n!==e)&&(this._asLeft=t,this._asTop=e,this.trigger("scroll",{scrollLeft:t,scrollTop:e,zoomX:this.zoomX,zoomY:this.zoomY}))},i._getScrollRangeX=function(){var t=this.getScrollLeft(),e=Math.min(0,t),i=Math.max(0,t),o=this.viewportScrollWidth,n=Math.max(this.containerWidth/this.zoomX,o)-o,a=Math.min(0,n+e);return[a,i]},i._getScrollRangeY=function(){var t=this.getScrollTop(),e=Math.min(0,t),i=Math.max(0,t),o=this.viewportScrollHeight,n=Math.max(this.containerHeight/this.zoomY,o)-o,a=Math.min(0,n+e);return[a,i]},e=Ee([Kt(Ze,(function(t,e){var i={enumerable:!0,configurable:!0,get:function(){return this.options[e]}},o=yt("set ".concat(e));t[o]?i.set=function(t){this[o](t)}:i.set=function(t){this.options[e]=t},Object.defineProperty(t,e,i)}))],e),e}(Ot),ri=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Se(e,t),e}(ai),si=ri,li=function(){return li=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i],e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},li.apply(this,arguments)},ci={};Ge.forEach((function(t){ci[t]=function(){for(var e,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return(e=this.infiniteViewer)[t].apply(e,i)}}));var di={name:"infinite-viewer",methods:ci,props:Ve,mounted:function(){var t=this,e={},i=this.$props;Ve.forEach((function(t){var o=i[t];ct(o)||(e[t]=i[t])}));var o=this.$refs;this.infiniteViewer=new si(o.containerElement,o.scrollAreaElement.nextElementSibling,li(li({},e),{wrapperElement:o.wrapperElement,scrollAreaElement:o.scrollAreaElement,horizontalScrollElement:o.horizontalScrollElement,verticalScrollElement:o.verticalScrollElement}));var n=this.infiniteViewer;qe.forEach((function(e){n.on(e,(function(i){t.$emit(e,li({},i))}))}))},updated:function(){var t=this.$props,e=this.infiniteViewer;Ze.forEach((function(i){var o=t[i];e[i]===o||ct(o)||(e[i]=t[i])}))},beforeDestroy:function(){this.infiniteViewer.destroy()}};function ui(t,e,i,o,n,a,r,s,l,c){"boolean"!==typeof r&&(l=s,s=r,r=!1);const d="function"===typeof i?i.options:i;let u;if(t&&t.render&&(d.render=t.render,d.staticRenderFns=t.staticRenderFns,d._compiled=!0,n&&(d.functional=!0)),o&&(d._scopeId=o),a?(u=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,l(t)),t&&t._registeredComponents&&t._registeredComponents.add(a)},d._ssrRegister=u):e&&(u=r?function(t){e.call(this,c(t,this.$root.$options.shadowRoot))}:function(t){e.call(this,s(t))}),u)if(d.functional){const t=d.render;d.render=function(e,i){return u.call(i),t(e,i)}}else{const t=d.beforeCreate;d.beforeCreate=t?[].concat(t,u):[u]}return i}const pi=di;var hi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"containerElement"},[i("div",{ref:"wrapperElement"},[i("div",{ref:"scrollAreaElement"}),t._v(" "),t._t("default")],2),t._v(" "),i("div",{ref:"horizontalScrollElement"},[i("div",{staticClass:"infinite-viewer-scroll-thumb"})]),t._v(" "),i("div",{ref:"verticalScrollElement"},[i("div",{staticClass:"infinite-viewer-scroll-thumb"})])])},gi=[];hi._withStripped=!0;const mi=void 0,_i=void 0,vi=void 0,fi=!1,bi=ui({render:hi,staticRenderFns:gi},mi,pi,_i,fi,vi,!1,void 0,void 0,void 0);var wi={props:{scale:Number,page_opened_id:String},components:{VueInfiniteViewer:bi},data(){return{viewerOptions:{useMouseDrag:!0,useWheelScroll:!0,useAutoZoom:!0,zoomRange:[.1,10],maxPinchWheel:10,displayVerticalScroll:!0,displayHorizontalScroll:!0},scroll_left:void 0,scroll_top:void 0,debounce_zoom:void 0,debounce_scroll:void 0}},created(){},mounted(){this.$nextTick((()=>{this.scrollToCorner({animate:!1})})),this.$eventHub.$on("panzoom.panTo",this.panTo)},beforeDestroy(){this.$eventHub.$off("panzoom.panTo",this.panTo)},watch:{scale(){this.updateScale(this.scale)}},computed:{},methods:{onScroll(){this.debounce_scroll&&clearTimeout(this.debounce_scroll),this.debounce_scroll=setTimeout((async()=>{}),500)},dragStart(){console.log("dragStart")},dragEnd(t){console.log("dragEnd"),t.isDrag||this.disableActiveModule()},pinchStart(){console.log("pinchStart")},abortPinch(){console.log("abortPinch")},pinch(){this.debounce_zoom&&clearTimeout(this.debounce_zoom),this.debounce_zoom=setTimeout((async()=>{const t=this.$refs.viewer.getZoom();t!==this.scale&&this.$emit("update:scale",t)}),500)},panTo({x:t,y:e}){this.scrollToCorner({x:t,y:e,animate:!0})},scrollToCorner({x:t,y:e,animate:i}){const o=i?{duration:200}:void 0,n=document.querySelector("._sideCont").offsetWidth||280,a=10;let r=(t||0)+-(n+a)/this.scale,s=(e||0)+-a/this.scale;this.$refs.viewer.scrollTo(r,s,o)},updateScale(t){t!==this.$refs.viewer.getZoom()&&this.$refs.viewer.setZoom(t,{duration:200,zoomBase:"viewport",zoomOffsetX:document.querySelector("._sideCont").offsetWidth,zoomOffsetY:50})},disableActiveModule(){this.$eventHub.$emit("module.setActive",!1)}}},yi=wi,xi=(i(32968),(0,u.Z)(yi,tt,et,!1,null,"5f912aac",null)),Ci=xi.exports,Mi={props:{page_opened_id:String,publication_path:String,publication_title:String,pages:Array,spreads:[Boolean,Array],modules:Array,is_spread:Boolean,page_width:Number,page_height:Number,layout_mode:String,margins:Object,pagination:[Boolean,Object],can_edit:Boolean},components:{PageMenu:Q,SinglePage:D.Z,PanZoom2:Ci},data(){return{scale:1,page_settings:{show_grid:!1,snap_to_grid:!1,gridstep_in_mm:10},display_as_public:!1,active_module_path:!1}},created(){this.$eventHub.$on("module.setActive",this.setActiveModule),document.addEventListener("keydown",this.keyPressed),this.$root.default_new_module_top=15,this.$root.default_new_module_left=15,this.loadSettings()},mounted(){},beforeDestroy(){this.$eventHub.$off("module.setActive",this.setActiveModule),document.removeEventListener("keydown",this.keyPressed)},watch:{page_opened_id(){this.$nextTick((()=>{}))},page_settings:{handler(){this.saveSettings()},deep:!0}},computed:{active_module(){return!!this.active_module_path&&this.modules.find((t=>t.$path===this.active_module_path))},active_module_meta_filename(){return this.active_module.$path.substring(this.active_module.$path.lastIndexOf("/")+1)},active_page_number(){return this.pages.findIndex((t=>t.id===this.page_opened_id))},current_page(){return this.pages.find((t=>t.id===this.page_opened_id))},previous_page(){return this.pages[this.active_page_number-1]},next_page(){return this.pages[this.active_page_number+1]},active_spread(){return this.spreads[this.active_spread_index]},active_spread_index(){return this.is_spread&&this.spreads.findIndex((t=>t.find((t=>t&&t.id===this.page_opened_id))))}},methods:{loadSettings(){const t=localStorage.getItem(`publication.page_settings.${this.publication_path}`);t&&(this.page_settings=JSON.parse(t))},saveSettings(){localStorage.setItem(`publication.page_settings.${this.publication_path}`,JSON.stringify(this.page_settings))},keyPressed(t){if(this.$root.modal_is_opened||"input"===t.target.tagName.toLowerCase()||"textarea"===t.target.tagName.toLowerCase()||t.target.className.includes("ql-editor")||t.target.hasAttribute("contenteditable"))return;let e="";"Backspace"!==t.key&&"Delete"!==t.key||(e="remove",this.$eventHub.$emit("module.open_remove_modal")),e&&t.preventDefault()},setActiveModule(t){this.active_module_path=t},prevPage(){const t=this.active_page_number-1;this.setPageActive(this.pages[t].id)},nextPage(){const t=this.active_page_number+1;this.setPageActive(this.pages[t].id)},setPageActive(t){this.setActiveModule(!1),this.$emit("togglePage",t)},prevSpread(){const t=this.spreads[this.active_spread_index-1],e=t[1].id;this.setPageActive(e)},nextSpread(){const t=this.spreads[this.active_spread_index+1],e=t[0].id;this.setPageActive(e)}}},zi=Mi,$i=(i(94152),(0,u.Z)(zi,R,O,!1,null,"4f279865",null)),ki=$i.exports,Si=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"_label"},[i("div",{staticClass:"u-sameRow"},[i("b",{},[t._v(t._s(t.$t("page"))+" "+t._s(t.index+1))]),t.can_edit?i("EditBtn",{staticClass:"_editBtn",on:{click:function(e){t.edit_mode=!t.edit_mode}}}):t._e()],1),t.edit_mode?i("div",{staticClass:"u-sameRow"},[i("select",{domProps:{value:t.index},on:{change:function(e){t.$emit("movePage",{old_position:t.index,new_position:+e.target.value}),t.edit_mode=!1}}},t._l(t.number_of_pages,(function(e){return i("option",{key:e-1,domProps:{value:e-1,textContent:t._s(e)}})})),0),i("div",{},[i("button",{staticClass:"u-buttonLink",attrs:{type:"button"},on:{click:function(e){t.$emit("duplicatePage"),t.edit_mode=!1}}},[i("sl-icon",{attrs:{name:"clipboard2-plus"}})],1)]),t.can_edit?i("RemoveMenu",{attrs:{remove_text:t.$t("remove_page_and_content"),show_button_text:!1},on:{remove:function(e){return t.$emit("removePage")}}}):t._e()],1):t._e()])},Pi=[],Ei={props:{index:Number,number_of_pages:Number,can_edit:Boolean},components:{},data(){return{edit_mode:!1}},created(){},mounted(){},beforeDestroy(){},watch:{},computed:{},methods:{}},Ti=Ei,Di=(i(63384),(0,u.Z)(Ti,Si,Pi,!1,null,"584a6d60",null)),Ri=Di.exports,Oi={props:{publication:Object,page_opened_id:String,can_edit:Boolean},components:{SinglePage:D.Z,OpenedPageOrSpread:ki,PageLabel:Ri},data(){return{}},created(){},mounted(){},beforeDestroy(){},watch:{},computed:{pages(){return this.publication.pages},modules(){return this.publication.$files||[]},is_spread(){return!0===this.publication.page_spreads},page_preview_zoom(){return this.calculateZoomToFit({width:this.publication.page_width,height:this.publication.page_height,desired_largest_dimension:200,magnification:"screen"===this.publication.layout_mode?1:this.$root.page_magnification})},spreads(){return!!this.is_spread&&this.makeSpread({pages:this.pages})},margins(){return{left:this.publication.page_margin_left||0,right:this.publication.page_margin_right||0,top:this.publication.page_margin_top||0,bottom:this.publication.page_margin_bottom||0}},pagination(){return this.setPaginationFromPublication(this.publication)}},methods:{createPage(){const t=this.generatePageID();let e=this.publication.pages?this.publication.pages.slice():[];e.push({id:t,page_color:"white"}),this.updatePubliMeta({pages:e})},removePage(t){let e=this.publication.pages.slice();e=e.filter((e=>e.id!==t)),this.updatePubliMeta({pages:e})},async duplicatePage(t){let e=this.generatePageID();const i=this.publication.pages.reduce(((i,o)=>{if(i.push(o),o.id===t){const t=JSON.parse(JSON.stringify(o));t.id=e,i.push(t)}return i}),[]);await this.updatePubliMeta({pages:i});const o=this.getModulesForPage({modules:this.modules,page_id:t});if(0===o.length)return;const n={page_id:e};for(const a of o)await this.duplicateModuleWithSourceMedias({og_module:a,addtl_meta_to_module:n})},movePage({old_position:t,new_position:e}){let i=this.publication.pages.slice();function o(t,e,i){if(i>=t.length){var o=i-t.length+1;while(o--)t.push(void 0)}return t.splice(i,0,t.splice(e,1)[0]),t}o(i,t,e),this.updatePubliMeta({pages:i})},generatePageID(){return(Math.random().toString(36)+"00000000000000000").slice(2,8)},async updatePageOptions({page_number:t,value:e}){let i=this.publication.pages.slice();Object.assign(i[t],e),this.updatePubliMeta({pages:i})},async updatePubliMeta(t){return await this.$api.updateMeta({path:this.publication.$path,new_meta:t})}}},Xi=Oi,Ai=(i(69913),(0,u.Z)(Xi,E,T,!1,null,"4cc62350",null)),Bi=Ai.exports,Yi={props:{publication:Object,page_opened_id:String,can_edit:Boolean},components:{PageSettings:P,PagesList:Bi},data(){return{current_view:"pages"}},created(){},mounted(){},beforeDestroy(){},watch:{},computed:{},methods:{}},Li=Yi,Ni=(i(12093),(0,u.Z)(Li,o,n,!1,null,"6606ffef",null)),Hi=Ni.exports},71533:function(t,e,i){"use strict";i.r(e);var o=i(8081),n=i.n(o),a=i(23645),r=i.n(a),s=r()(n());s.push([t.id,".yoyoo-ddr{position:absolute}.yoyoo-ddr .resize-handler.tm{left:50%}.yoyoo-ddr .resize-handler.r{top:50%}.yoyoo-ddr .resize-handler.bm{left:50%}.yoyoo-ddr .resize-handler.l{top:50%;cursor:pointer}.yoyoo-ddr .resize-handler,.yoyoo-ddr .rotate-handler{display:none;position:absolute;border:1px solid #607d8b;background:#fff;-webkit-box-sizing:border-box;box-sizing:border-box;border-radius:50%}.yoyoo-ddr .rotate-handler{left:50%;cursor:crosshair}.yoyoo-ddr.active{border:1px dashed #607d8b}.yoyoo-ddr.active>.resize-handler-wrapper>.resize-handler,.yoyoo-ddr.active>.rotate-handler{display:inline-block}.yoyoo-ddr .bl,.yoyoo-ddr .br,.yoyoo-ddr .tl,.yoyoo-ddr .tr{background:#607d8b}",""]),e["default"]=s},39269:function(t,e,i){"use strict";i.r(e);var o=i(8081),n=i.n(o),a=i(23645),r=i.n(a),s=r()(n());s.push([t.id,'._moveableItem.is--locked[data-v-3dc80742]{pointer-events:none}._moveableItem.is--editable[data-v-3dc80742]:not(.is--beingEdited):not(.is--locked){cursor:pointer;cursor:grab}._moveableItem.is--editable[data-v-3dc80742]:hover:not(.is--locked){outline:2px dotted var(--c-noir)}._moveableItem.is--beingEdited[data-v-3dc80742]{outline:2px dotted var(--c-orange)!important}._moveableItem.yoyoo-ddr:not(.is--beingEdited).active[data-v-3dc80742]{border:none;outline:2px dotted var(--c-orange)!important}._moveableItem.yoyoo-ddr:not(.is--beingEdited).active[data-v-3dc80742]  .bl,._moveableItem.yoyoo-ddr:not(.is--beingEdited).active[data-v-3dc80742]  .br,._moveableItem.yoyoo-ddr:not(.is--beingEdited).active[data-v-3dc80742]  .tl,._moveableItem.yoyoo-ddr:not(.is--beingEdited).active[data-v-3dc80742]  .tr{background:var(--c-orange)}._moveableItem.yoyoo-ddr:not(.is--beingEdited).ddr-dragging[data-v-3dc80742]{cursor:-moz-grabbing;cursor:dragging}._moveableItem--content[data-v-3dc80742]{height:100%;padding:0;transition:all .2s cubic-bezier(.19,1,.22,1)}._moveableItem--content[data-v-3dc80742]  ._content{height:100%;overflow:hidden}._moveableItem--content[data-v-3dc80742]  ._content ._mediaContent,._moveableItem--content[data-v-3dc80742]  ._content ._mediaGrid,._moveableItem--content[data-v-3dc80742]  ._content ._mediaGrid--item,._moveableItem--content[data-v-3dc80742]  ._content ._moduleMosaic{height:100%}._moveableItem--content[data-v-3dc80742]  ._content ._mediaContent--image{position:absolute;width:100%;height:100%;-o-object-fit:var(--object-fit,cover);object-fit:var(--object-fit,cover);-o-object-position:center;object-position:center}._moveableItem--content[data-v-3dc80742]  ._content .plyr__poster{background-size:var(--object-fit,cover);background-position:50%;background-color:transparent}._moveableItem--content[data-v-3dc80742]  ._content .plyr--video,._moveableItem--content[data-v-3dc80742]  ._content .plyr__video-wrapper{background-color:transparent}._moveableItem--content[data-v-3dc80742]  ._content .plyr__video-wrapper video{-o-object-fit:var(--object-fit,cover);object-fit:var(--object-fit,cover);-o-object-position:center;object-position:center}._moveableItem--content[data-v-3dc80742]  ._content .plyr--video{min-width:50px}._moveableItem[data-v-3dc80742]  ._publicationModule:not(.is--shape) ._mediaContent--image,._moveableItem[data-v-3dc80742]  ._publicationModule:not(.is--shape) ._mediaContent[data-filetype=audio],._moveableItem[data-v-3dc80742]  ._publicationModule:not(.is--shape) ._mediaContent[data-filetype=pdf],._moveableItem[data-v-3dc80742]  ._publicationModule:not(.is--shape) ._mediaContent[data-filetype=url],._moveableItem[data-v-3dc80742]  ._publicationModule:not(.is--shape) ._mediaContent[data-filetype=video],._moveableItem[data-v-3dc80742]  ._publicationModule:not(.is--shape) .ql-editor{padding:var(--set-margins);opacity:var(--set-opacity);aspect-ratio:unset;border-radius:var(--set-borderRadius);overflow:hidden;background:var(--set-backgroundColor);border-color:var(--set-outlineColor);border-width:var(--set-outlineWidth);border-style:solid}._moveableItem[data-v-3dc80742]  ._publicationModule.is--shape{padding:var(--set-margins);opacity:var(--set-opacity);fill:var(--set-backgroundColor);stroke:var(--set-outlineColor);stroke-width:var(--set-outlineWidth)}._moveableItem.is--editable:not(.is--beingEdited):not(.is--locked) ._activator[data-v-3dc80742]:after{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background-color:var(--c-orange_clair);opacity:0;transition:opacity .4s cubic-bezier(.19,1,.22,1)}._moveableItem.is--editable:not(.is--beingEdited):not(.is--locked) ._activator[data-v-3dc80742]:hover:after{opacity:.15}._coords[data-v-3dc80742]{bottom:0;background:#fff;margin:calc(var(--spacing)*1)}._coords[data-v-3dc80742],._unlockBtn[data-v-3dc80742]{position:absolute;left:0}._unlockBtn[data-v-3dc80742]{top:0;width:100%;pointer-events:none;padding:calc(var(--spacing)/2);display:flex;justify-content:flex-start}._unlockBtn>*[data-v-3dc80742]{pointer-events:auto}',""]),e["default"]=s},70988:function(t,e,i){"use strict";i.r(e);var o=i(8081),n=i.n(o),a=i(23645),r=i.n(a),s=r()(n());s.push([t.id,'._openedPage[data-v-4f279865]{position:absolute;top:0;left:0;width:100%;height:100%;z-index:10;text-align:center;display:flex;flex-flow:column nowrap;background:var(--c-gris_clair);--pagemenu-width:280px}._openedPage.is--editable[data-v-4f279865]{background:var(--color-publish)}._openedPage>._topMenu[data-v-4f279865]{flex:0 0 auto}._openedPage>._spreadNavigator[data-v-4f279865]{flex:1 1 auto}._navBar[data-v-4f279865]{position:absolute;bottom:0;left:0;height:auto;width:100%;z-index:12;overflow:hidden;display:flex;flex-flow:row nowrap;justify-content:space-between;pointer-events:none}._navBar button[data-v-4f279865]{pointer-events:auto;display:flex;align-items:center;margin:calc(var(--spacing)/2);padding:calc(var(--spacing)/2);gap:1px;background:hsla(0,0%,100%,.4);-webkit-backdrop-filter:blur(12px);backdrop-filter:blur(12px);border-radius:4px}._topMenu[data-v-4f279865]{position:relative;z-index:10;padding:0 calc(var(--spacing)*1)}._topMenu--content[data-v-4f279865]{background:#fff;box-shadow:0 1px 4px rgba(0,0,0,.2);padding:calc(var(--spacing)/2) calc(var(--spacing)*1);display:flex;flex-flow:row wrap;justify-content:space-between;align-items:center}._spreadNavigator[data-v-4f279865]{overflow:hidden;width:100%;height:100%}._spreadNavigator[data-v-4f279865]::-webkit-scrollbar{height:18px;width:18px;background-color:transparent}._spreadNavigator[data-v-4f279865]::-webkit-scrollbar-thumb,._spreadNavigator[data-v-4f279865]::-webkit-scrollbar-track{border:6px solid hsla(0,0%,100%,0);border-radius:24px;background-clip:padding-box;-webkit-transition:all .4s;transition:all .4s}._spreadNavigator[data-v-4f279865]::-webkit-scrollbar-track{background-color:transparent}._spreadNavigator[data-v-4f279865]::-webkit-scrollbar-thumb{background-color:var(--c-noir)}._spreadNavigator[data-v-4f279865]::-webkit-scrollbar-thumb:hover{background-color:var(--c-gris);border:6px solid hsla(0,0%,100%,0)}._spreadNavigator--content[data-v-4f279865]{width:100%;height:100%}._pageCont[data-v-4f279865]{display:flex;flex-flow:row nowrap;width:-moz-max-content;width:max-content}._spreadNavigator--page[data-v-4f279865]{position:relative;flex:1 1 50%}._spreadNavigator--page[data-v-4f279865]  ._pagecontent:after{content:"";position:absolute;inset:0;z-index:1000000;background:hsla(0,0%,100%,.6);transition:all .4s cubic-bezier(.19,1,.22,1);pointer-events:none}._spreadNavigator--page.is--active[data-v-4f279865]{z-index:1}._spreadNavigator--page.is--active[data-v-4f279865]  ._pagecontent:after{opacity:0}._spreadNavigator--page[data-v-4f279865]:not(.is--active){z-index:2}._spreadNavigator--page[data-v-4f279865]:not(.is--active)  ._pagecontent:after{pointer-events:auto;opacity:1}._spreadNavigator--page ._openAdjacentPageBtn[data-v-4f279865]{position:absolute;inset:0;width:100%;height:100%;background:transparent;padding:0}._noPage[data-v-4f279865]{background:rgba(0,0,0,.1)}._sideCont[data-v-4f279865]{width:var(--pagemenu-width);position:absolute;left:0;top:0;z-index:10;height:100%;overflow-x:visible;overflow-y:auto;pointer-events:none}._sideCont[data-v-4f279865]::-webkit-scrollbar{height:18px;width:18px;background-color:transparent}._sideCont[data-v-4f279865]::-webkit-scrollbar-thumb,._sideCont[data-v-4f279865]::-webkit-scrollbar-track{border:6px solid hsla(0,0%,100%,0);border-radius:24px;background-clip:padding-box;-webkit-transition:all .4s;transition:all .4s}._sideCont[data-v-4f279865]::-webkit-scrollbar-track{background-color:transparent}._sideCont[data-v-4f279865]::-webkit-scrollbar-thumb{background-color:var(--c-noir)}._sideCont[data-v-4f279865]::-webkit-scrollbar-thumb:hover{background-color:var(--c-gris);border:6px solid hsla(0,0%,100%,0)}._sideCont>*[data-v-4f279865]{pointer-events:auto}._sideCont>._content[data-v-4f279865]{margin:0 0 calc(var(--spacing)*2) 0}._pagePan[data-v-4f279865]{width:100%;height:100%}',""]),e["default"]=s},70291:function(t,e,i){"use strict";i.r(e);var o=i(8081),n=i.n(o),a=i(23645),r=i.n(a),s=r()(n());s.push([t.id,"._label[data-v-584a6d60]{padding:calc(var(--spacing)/4) calc(var(--spacing)/2);margin:calc(var(--spacing)/4);background:rgba(0,0,0,.06);border-radius:4px}._editBtn[data-v-584a6d60]{color:#fff}",""]),e["default"]=s},72891:function(t,e,i){"use strict";i.r(e);var o=i(8081),n=i.n(o),a=i(23645),r=i.n(a),s=r()(n());s.push([t.id,"._pageMenu[data-v-042fa8da]{margin:2px;margin:calc(var(--spacing)/4);background:var(--panel-color);border:var(--panel-borders);box-shadow:var(--panel-shadows);border-radius:var(--panel-radius);text-align:left}._pageMenu--pane[data-v-042fa8da]{padding:calc(var(--spacing)/2) 0;margin:0 calc(var(--spacing)/2)}._pageMenu--pane[data-v-042fa8da]:not(:last-child){margin-bottom:calc(var(--spacing)/2);border-bottom:1px solid var(--active-color)}._activeModulePreview[data-v-042fa8da]{overflow:hidden;margin:0 auto;background:var(--c-noir);width:100%;height:50px;display:flex;justify-content:center}._mediaList[data-v-042fa8da]{font-size:var(--sl-font-size-x-small);padding:0}._mediaList>*[data-v-042fa8da]{display:flex;flex-flow:row nowrap;align-items:center;gap:calc(var(--spacing)/2);cursor:pointer}._mediaList[data-v-042fa8da]>:hover{background:var(--c-gris_clair)}._mediaList[data-v-042fa8da]>:not(:last-child){border-bottom:2px solid var(--c-gris)}._mediaList>* ._preview[data-v-042fa8da]{position:relative;width:50px;height:50px;flex:0 0 50px}._mediaList>* ._preview[data-v-042fa8da]  img{width:100%;height:100%;position:absolute;-o-object-fit:contain;object-fit:contain}._textExtract[data-v-042fa8da]  .ql-editor{padding-bottom:0}._titleRow[data-v-042fa8da]{display:flex;flex-flow:row wrap;align-items:center;justify-content:space-between}._titleRow button[data-v-042fa8da]{font-size:var(--sl-font-size-large)}",""]),e["default"]=s},11142:function(t,e,i){"use strict";i.r(e);var o=i(8081),n=i.n(o),a=i(23645),r=i.n(a),s=r()(n());s.push([t.id,"._pageSettings[data-v-6793dcf2]{background:#fff;max-width:380px;padding:calc(var(--spacing)*1);margin:0 auto calc(var(--spacing)*1)}",""]),e["default"]=s},90219:function(t,e,i){"use strict";i.r(e);var o=i(8081),n=i.n(o),a=i(23645),r=i.n(a),s=r()(n());s.push([t.id,"._allPages[data-v-4cc62350]{flex-flow:row wrap;justify-content:center;gap:calc(var(--spacing)/1)}._allPages[data-v-4cc62350],._page[data-v-4cc62350]{display:flex;align-items:center}._page[data-v-4cc62350]{flex-flow:column nowrap}._spread[data-v-4cc62350]{display:flex;flex-flow:row nowrap}._preview[data-v-4cc62350]{position:relative;overflow:hidden;box-shadow:0 3px 6px rgba(0,0,0,.16);min-width:2em;min-height:2em;background:hsla(0,0%,100%,.2)}._openPage[data-v-4cc62350]{position:absolute;top:0;left:0;width:100%;height:100%;background:hsla(0,0%,100%,.6)!important;color:#000;opacity:0;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);transition:opacity .4s cubic-bezier(.19,1,.22,1)}._openPage[data-v-4cc62350]:active,._openPage[data-v-4cc62350]:focus,._openPage[data-v-4cc62350]:hover{opacity:1}",""]),e["default"]=s},24189:function(t,e,i){"use strict";i.r(e);var o=i(8081),n=i.n(o),a=i(23645),r=i.n(a),s=r()(n());s.push([t.id,".viewer[data-v-5f912aac]{width:100%;height:100%;cursor:move}.viewer[data-v-5f912aac],.viewport[data-v-5f912aac]{position:relative}",""]),e["default"]=s},25253:function(t,e,i){"use strict";i.r(e);var o=i(8081),n=i.n(o),a=i(23645),r=i.n(a),s=r()(n());s.push([t.id,"._pagecontainer[data-v-799340e8]{width:calc(var(--page-width));height:calc(var(--page-height));padding:0;transform:scale(var(--zoom));transform-origin:0 0;transition:all .4s cubic-bezier(.19,1,.22,1)}.is--preview ._pagecontainer[data-v-799340e8]{width:calc(var(--page-width)*var(--zoom));height:calc(var(--page-height)*var(--zoom));transform-origin:left top;margin:0 auto;padding:0}._pagecontent[data-v-799340e8]{display:block;position:relative;z-index:0;margin:0;width:var(--page-width,100mm);height:var(--page-height,100mm);background:var(--page-color,#fff);overflow:hidden;box-shadow:0 3px 6px rgba(0,0,0,.16),0 3px 6px rgba(0,0,0,.23);transition:background .4s cubic-bezier(.19,1,.22,1)}._singlePage.is--editable ._pagecontent[data-v-799340e8]{overflow:visible}._grid[data-v-799340e8]{position:absolute;top:0;width:100%;height:100%;pointer-events:none;opacity:.6;z-index:-10000;--c-gridlines:#aaa;--c-gridfiveslines:#111}._margins[data-v-799340e8],._pageBorders[data-v-799340e8]{position:absolute;top:0;width:100%;height:100%;pointer-events:none;stroke-width:2px}._margins[data-v-799340e8]{stroke:#cb68fd}._pagination[data-v-799340e8]{position:absolute;right:var(--pagination-right);left:var(--pagination-left);bottom:var(--pagination-bottom);font-weight:500;line-height:.5;font-size:var(--sl-font-size-large)}",""]),e["default"]=s},53226:function(t,e,i){"use strict";i.r(e);var o=i(8081),n=i.n(o),a=i(23645),r=i.n(a),s=r()(n());s.push([t.id,"._switch[data-v-6606ffef]{margin:calc(var(--spacing)*1) 0}",""]),e["default"]=s},73589:function(t,e,i){"use strict";i.r(e);var o=i(8081),n=i.n(o),a=i(23645),r=i.n(a),s=r()(n());s.push([t.id,".yoyoo-ddr{position:absolute}.yoyoo-ddr .resize-handler.tm{left:50%}.yoyoo-ddr .resize-handler.r{top:50%}.yoyoo-ddr .resize-handler.bm{left:50%}.yoyoo-ddr .resize-handler.l{top:50%;cursor:pointer}.yoyoo-ddr .resize-handler,.yoyoo-ddr .rotate-handler{display:none;position:absolute;border:1px solid #607d8b;background:#fff;box-sizing:border-box;border-radius:50%}.yoyoo-ddr .rotate-handler{left:50%;cursor:crosshair}.yoyoo-ddr.active{border:1px dashed #607d8b}.yoyoo-ddr.active>.resize-handler-wrapper>.resize-handler,.yoyoo-ddr.active>.rotate-handler{display:inline-block}.yoyoo-ddr .bl,.yoyoo-ddr .br,.yoyoo-ddr .tl,.yoyoo-ddr .tr{background:#607d8b}",""]),e["default"]=s},13382:function(t,e,i){var o=i(71533);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[t.id,o,""]]),o.locals&&(t.exports=o.locals);var n=i(31982).Z;n("9124acb2",o,!0,{sourceMap:!1,shadowMode:!1})},53316:function(t,e,i){var o=i(39269);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[t.id,o,""]]),o.locals&&(t.exports=o.locals);var n=i(31982).Z;n("736b6b83",o,!0,{sourceMap:!1,shadowMode:!1})},94152:function(t,e,i){var o=i(70988);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[t.id,o,""]]),o.locals&&(t.exports=o.locals);var n=i(31982).Z;n("50df2fd9",o,!0,{sourceMap:!1,shadowMode:!1})},63384:function(t,e,i){var o=i(70291);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[t.id,o,""]]),o.locals&&(t.exports=o.locals);var n=i(31982).Z;n("69cc6562",o,!0,{sourceMap:!1,shadowMode:!1})},88007:function(t,e,i){var o=i(72891);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[t.id,o,""]]),o.locals&&(t.exports=o.locals);var n=i(31982).Z;n("7cfc2fe2",o,!0,{sourceMap:!1,shadowMode:!1})},13992:function(t,e,i){var o=i(11142);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[t.id,o,""]]),o.locals&&(t.exports=o.locals);var n=i(31982).Z;n("40467ff0",o,!0,{sourceMap:!1,shadowMode:!1})},69913:function(t,e,i){var o=i(90219);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[t.id,o,""]]),o.locals&&(t.exports=o.locals);var n=i(31982).Z;n("7a086c70",o,!0,{sourceMap:!1,shadowMode:!1})},32968:function(t,e,i){var o=i(24189);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[t.id,o,""]]),o.locals&&(t.exports=o.locals);var n=i(31982).Z;n("211b4108",o,!0,{sourceMap:!1,shadowMode:!1})},52627:function(t,e,i){var o=i(25253);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[t.id,o,""]]),o.locals&&(t.exports=o.locals);var n=i(31982).Z;n("19bfc455",o,!0,{sourceMap:!1,shadowMode:!1})},12093:function(t,e,i){var o=i(53226);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[t.id,o,""]]),o.locals&&(t.exports=o.locals);var n=i(31982).Z;n("281ef2a3",o,!0,{sourceMap:!1,shadowMode:!1})},52046:function(t,e,i){var o=i(73589);o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[t.id,o,""]]),o.locals&&(t.exports=o.locals);var n=i(31982).Z;n("7060f4ae",o,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=160.js.map