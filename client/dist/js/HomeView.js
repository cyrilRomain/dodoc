(self["webpackChunkapp"]=self["webpackChunkapp"]||[]).push([[32],{1072:function(t,e,s){"use strict";s.r(e),s.d(e,{default:function(){return D}});var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"_homeView"},[s("div",{staticClass:"_homeView--content"},[t.show_settings_modal?s("AdminSettings",{on:{close:function(e){t.show_settings_modal=!1}}}):t._e(),s("h1",{domProps:{innerHTML:t._s(t.name||t.$t("welcome_to_dodoc"))}}),s("p",{domProps:{innerHTML:t._s(t.description||t.$t("admins_edit_text_here"))}}),t.$root.app_infos.contactmail_of_instance?s("p",[t._v(" "+t._s(t.$t("contactmail_of_instance"))+" "),s("a",{attrs:{href:"mailto:"+t.$root.app_infos.contactmail_of_instance,target:"_blank"}},[t._v(" "+t._s(t.$root.app_infos.contactmail_of_instance)+" ")])]):t._e()],1),s("SpacesList"),s("div",{},[s("small",{staticClass:"_versionNumber"},[t.is_admin?s("button",{staticClass:"u-button u-button_bleuvert",attrs:{type:"button"},on:{click:function(e){t.show_settings_modal=!t.show_settings_modal}}},[s("sl-icon",{attrs:{name:"gear-fill"}}),t._v("  "+t._s(t.$t("settings"))+" ")],1):t._e(),t.is_admin?[t._v(" – ")]:t._e(),t._v(" version "+t._s(t.$root.app_infos.version)+" ")],2)])],1)},n=[],i=(s(4916),s(5306),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("BaseModal2",{attrs:{title:t.$t("settings")},on:{close:function(e){return t.$emit("close")}}},[s("div",{},[s("sl-tab-group",[s("sl-tab",{attrs:{slot:"nav",panel:"informations"},slot:"nav"},[t._v(" "+t._s(t.$t("informations"))+" ")]),s("sl-tab",{attrs:{slot:"nav",panel:"access_control"},slot:"nav"},[t._v(" "+t._s(t.$t("access_control"))+" ")]),s("sl-tab",{attrs:{slot:"nav",panel:"storage"},slot:"nav"},[t._v(" "+t._s(t.$t("storage"))+" ")]),s("sl-tab-panel",{attrs:{name:"informations"}},[s("TitleField",{attrs:{field_name:"name_of_instance",label:t.$t("name_of_instance"),instructions:t.$t("name_of_instance_instructions"),content:t.settings.name_of_instance,path:"_admin",tag:"h1",required:!0,minlength:3,maxlength:40,can_edit:t.is_admin}}),s("br"),s("TitleField",{attrs:{field_name:"presentation_of_instance",label:t.$t("presentation_of_instance"),instructions:t.$t("presentation_of_instance_instructions"),content:t.settings.presentation_of_instance,path:"_admin",required:!1,can_edit:t.is_admin}}),s("br"),s("TitleField",{attrs:{field_name:"contactmail_of_instance",label:t.$t("contactmail_of_instance"),instructions:t.$t("contactmail_of_instance_instructions"),content:t.settings.contactmail_of_instance,path:"_admin",required:!1,input_type:"email",can_edit:t.is_admin}}),s("br"),s("DLabel",{attrs:{str:t.$t("logo")}}),s("div",{staticClass:"u-wips"}),s("CoverField",{attrs:{cover:t.settings.logo,path:"_admin"}}),s("br"),s("div",{staticClass:"u-instructions"},[t._v(" "+t._s(t.$t("restart_to_apply"))+" ")])],1),s("sl-tab-panel",{attrs:{name:"access_control"}},[s("TitleField",{attrs:{field_name:"general_password",label:t.$t("general_password"),instructions:t.$t("general_password_instructions"),content:t.settings.general_password,path:"_admin",input_type:"password",required:!1,can_edit:t.is_admin}}),s("br"),s("TitleField",{attrs:{field_name:"signup_password",label:t.$t("signup_password"),instructions:t.$t("signup_password_instructions"),content:t.settings.signup_password,path:"_admin",required:!1,can_edit:t.is_admin}}),s("br"),s("div",{staticClass:"u-instructions"},[t._v(" "+t._s(t.$t("restart_to_apply"))+" ")])],1),s("sl-tab-panel",{attrs:{name:"storage"}},[s("PickNativePath",{attrs:{field_name:"pathToUserContent",label:t.$t("path_to_content"),instructions:t.$t("path_to_content_instructions"),content:t.settings.pathToUserContent,path:"_admin",required:!0,can_edit:t.is_admin&&t.$root.is_electron}}),s("br"),s("div",{staticClass:"u-instructions"},[t._v(" "+t._s(t.$t("restart_to_apply"))+" ")])],1)],1)],1)])}),o=[],r={props:{},components:{},data(){return{path_to_content:void 0,new_path_to_content:void 0,settings:{}}},created(){},async mounted(){this.settings=await this.$api.getSettings(),this.$api.join({room:"_admin"})},beforeDestroy(){this.$api.leave({room:"_admin"})},watch:{},computed:{},methods:{restartDodoc(){this.$api.restartDodoc()},saveNewPathToContent(){}}},c=r,l=s(1001),_=(0,l.Z)(c,i,o,!1,null,"d840ac94",null),p=_.exports,d=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"_spacesList"},[s("div",{staticClass:"u-sameRow"},[s("h2",[t._v("Les espaces")]),t.connected_as?s("button",{staticClass:"u-button u-button_red u-button_small",attrs:{type:"button"},on:{click:function(e){t.show_create_modal=!0}}},[s("svg",{staticStyle:{"enable-background":"new 0 0 168 168"},attrs:{version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 168 168","xml:space":"preserve"}},[s("path",{staticStyle:{fill:"#fc4b60"},attrs:{d:"M24.6,24.4c-32.8,32.8-32.8,86.1,0,119c32.8,32.8,85.9,32.8,118.7,0c32.8-32.8,32.8-85.9,0-118.7\n\t\tC110.5-8.2,57.5-8.2,24.6,24.4z"}}),s("polygon",{staticStyle:{fill:"#ffffff"},attrs:{points:"132.3,73.4 132.3,94.4 94.6,94.4 94.6,132.1 73.6,132.1 73.6,94.4 35.9,94.4 35.9,73.4 \n\t\t73.6,73.4 73.6,35.7 94.6,35.7 94.6,73.4 \t\t"}})]),t._v(" "+t._s(t.$t("create_a_space"))+" ")]):t._e()]),t.show_create_modal?s("CreateSpace",{on:{close:function(e){t.show_create_modal=!1},openNewSpace:t.openNewSpace}}):t._e(),s("div",{staticClass:"_list"},t._l(t.spaces,(function(t){return s("SpacePreview",{key:t.$path,attrs:{space:t}})})),1)],1)},u=[],h=(s(2262),s(4506),s(7658),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"_spacePresentation"},[s("h2",[t._v(" "+t._s(t.space.title)+" ")]),s("router-link",{staticClass:"u-button u-button_bleuvert",attrs:{to:{path:t.createURLFromPath(t.space.$path)}}},[t._v(" "+t._s(t.$t("open"))+" ")])],1)}),m=[],f={props:{space:Object,can_edit:Boolean},components:{},data(){return{}},created(){},mounted(){},beforeDestroy(){},watch:{},computed:{},methods:{}},v=f,g=(s(526),(0,l.Z)(v,h,m,!1,null,"5a58ed8e",null)),w=g.exports,b=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("BaseModal2",{attrs:{title:t.$t("create_a_space")},on:{close:function(e){return t.$emit("close")}}},[s("form",{staticClass:"input-validation-required",on:{submit:function(e){return e.preventDefault(),t.createSpace.apply(null,arguments)}}},[s("DLabel",{attrs:{str:t.$t("title")}}),s("TextInput",{attrs:{content:t.new_space_title,maxlength:40,required:!0},on:{"update:content":function(e){t.new_space_title=e},toggleValidity:function(e){return t.allow_save=e}}}),s("br"),s("div",{},[s("ToggleInput",{attrs:{content:t.new_space_is_invisible,label:t.$t("invisible"),options:{true:t.$t("invisible_status_explanations_spaces"),false:t.$t("visible_status_explanations_spaces")}},on:{"update:content":function(e){t.new_space_is_invisible=e}}})],1),s("br"),s("button",{staticClass:"u-button u-button_bleuvert",attrs:{slot:"footer",type:"submit",loading:t.is_creating_space},slot:"footer"},[t._v(" "+t._s(t.$t("create_and_open"))+" ")]),t.error_msg?[s("br"),s("br"),s("div",{staticClass:"u-errorMsg",domProps:{textContent:t._s(t.error_msg)}})]:t._e()],2)])},$=[],x={props:{},components:{},data(){return{new_space_title:"",new_space_is_invisible:!1,is_creating_space:!1,allow_save:!1,error_msg:""}},created(){},mounted(){},beforeDestroy(){},watch:{},computed:{},methods:{async createSpace(){this.is_creating_space=!0;try{const t=await this.$api.createFolder({path:this.createPath(),additional_meta:{title:this.new_space_title,requested_slug:this.new_space_title,status:"draft",license:"CC",$status:!0===this.new_space_is_invisible?"invisible":"draft",$authors:[this.$api.tokenpath.token_path]}});setTimeout((()=>{this.$emit("openNewSpace",t)}),50)}catch(t){this.error_msg="Error: "+t.message,setTimeout((()=>{this.error_msg=""}),5e3),this.is_creating_space=!1}}}},y=x,C=(0,l.Z)(y,b,$,!1,null,"2152a7fd",null),k=C.exports,S={props:{},components:{SpacePreview:w,CreateSpace:k},data(){return{spaces:void 0,new_space_title:"",path:"spaces",fetch_spaces_error:void 0,show_create_modal:!1}},created(){},async mounted(){this.spaces=await this.$api.getFolders({path:this.path}).catch((t=>{this.fetch_spaces_error=t.response})),this.$api.join({room:this.path})},beforeDestroy(){},watch:{},computed:{},methods:{getSlug(t){return t.split("/").at(-1)},async createSpace(){try{await this.$api.createFolder({path:this.path,additional_meta:{title:this.new_space_title,requested_slug:this.new_space_title,$authors:[this.$api.tokenpath.token_path]}})}catch(t){}},openNewSpace(t){this.show_create_modal=!1;const e=this.createURLFromPath(this.path+"/"+t);this.$router.push(e)}}},M=S,P=(s(9396),(0,l.Z)(M,d,u,!1,null,"66303539",null)),T=P.exports,F={props:{},components:{AdminSettings:p,SpacesList:T},data(){return{show_settings_modal:!1}},computed:{name(){return this.$root.app_infos.name_of_instance},description(){return this.$root.app_infos.presentation_of_instance.replace(/(?:\r\n|\r|\n)/g,"<br />")}},methods:{}},L=F,q=(s(5542),(0,l.Z)(L,a,n,!1,null,null,null)),D=q.exports},3348:function(t,e,s){"use strict";s.r(e);var a=s(8081),n=s.n(a),i=s(3645),o=s.n(i),r=o()(n());r.push([t.id,"._spacePresentation[data-v-5a58ed8e]{width:300px;height:300px}",""]),e["default"]=r},9115:function(t,e,s){"use strict";s.r(e);var a=s(8081),n=s.n(a),i=s(3645),o=s.n(i),r=o()(n());r.push([t.id,"._create[data-v-66303539]{max-width:400px}._spacesList[data-v-66303539]{width:100%}._list[data-v-66303539]{display:flex;flex-flow:row wrap;justify-content:center;gap:calc(var(--spacing)/1);margin:calc(var(--spacing)/1)}._list>*[data-v-66303539]{background:var(--panel-color);border:var(--panel-borders);box-shadow:var(--panel-shadows)}",""]),e["default"]=r},6603:function(t,e,s){"use strict";s.r(e);var a=s(8081),n=s.n(a),i=s(3645),o=s.n(i),r=o()(n());r.push([t.id,"._dodoclogo{max-width:300px}._homeView{padding:var(--spacing);min-height:calc(100vh - 60px);max-height:-webkit-fill-available;align-items:center;padding-bottom:150px}._homeView,._homeView--content{display:flex;flex-flow:column nowrap;justify-content:center}._homeView--content{max-width:600px;width:100%;min-height:60vh;margin:0 auto}._versionNumber{display:block;margin-top:calc(var(--spacing)*4);text-align:center;padding:calc(var(--spacing)/4)}._floatinProjectBtn{position:fixed;bottom:0;left:0;width:100%;padding:10vh 20vw;pointer-events:none;display:flex;justify-content:center}._floatinProjectBtn>*{pointer-events:auto}",""]),e["default"]=r},526:function(t,e,s){var a=s(3348);a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.id,a,""]]),a.locals&&(t.exports=a.locals);var n=s(1982).Z;n("2be21b7c",a,!0,{sourceMap:!1,shadowMode:!1})},9396:function(t,e,s){var a=s(9115);a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.id,a,""]]),a.locals&&(t.exports=a.locals);var n=s(1982).Z;n("d0deb738",a,!0,{sourceMap:!1,shadowMode:!1})},5542:function(t,e,s){var a=s(6603);a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.id,a,""]]),a.locals&&(t.exports=a.locals);var n=s(1982).Z;n("e9fdf072",a,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=HomeView.js.map