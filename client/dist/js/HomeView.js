(self["webpackChunkapp"]=self["webpackChunkapp"]||[]).push([[32],{1989:function(t,e,a){"use strict";a.d(e,{Z:function(){return l}});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"_spacePresentation"},[a("div",{staticClass:"_coverField"},[a("CoverField",{attrs:{context:t.context,cover:t.space.$cover,path:t.space.$path,can_edit:t.can_edit}})],1),a("div",{staticClass:"_titleField"},[a("TitleField",{staticClass:"_title",attrs:{field_name:"title",tag:"h1",content:t.space.title,path:t.space.$path,maxlength:280,can_edit:t.can_edit,instructions:t.$t("project_title_instructions")}})],1),a("div",{staticClass:"_descriptionField"},[a("TitleField",{staticClass:"_description",attrs:{field_name:"description",label:t.$t("description"),content:t.space.description,path:t.space.$path,maxlength:480,can_edit:t.can_edit,instructions:t.$t("project_description_instructions")}})],1),"list"===t.context||"tiny"===t.context?a("div",{staticClass:"_openSpace"},[a("router-link",{attrs:{to:{path:t.createURLFromPath(t.space.$path)}}},[a("div",{staticClass:"_clickZone"})])],1):t._e()])},n=[],i={props:{space:Object,context:String,can_edit:Boolean},components:{},data(){return{}},created(){},mounted(){},beforeDestroy(){},watch:{},computed:{},methods:{}},o=i,r=(a(7463),a(1001)),c=(0,r.Z)(o,s,n,!1,null,"181a50e0",null),l=c.exports},7220:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return P}});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"_homeView"},[a("div",{staticClass:"_homeView--content"},[t.show_settings_modal?a("AdminSettings",{on:{close:function(e){t.show_settings_modal=!1}}}):t._e(),a("h1",{domProps:{innerHTML:t._s(t.name||t.$t("welcome_to_dodoc"))}}),a("p",{domProps:{innerHTML:t._s(t.description||t.$t("admins_edit_text_here"))}}),t.$root.app_infos.contactmail_of_instance?a("p",[t._v(" "+t._s(t.$t("contactmail_of_instance"))+" "),a("a",{attrs:{href:"mailto:"+t.$root.app_infos.contactmail_of_instance,target:"_blank"}},[t._v(" "+t._s(t.$root.app_infos.contactmail_of_instance)+" ")])]):t._e()],1),a("SpacesList"),a("div",{},[a("small",{staticClass:"_versionNumber"},[t.is_admin?a("button",{staticClass:"u-button u-button_bleuvert",attrs:{type:"button"},on:{click:function(e){t.show_settings_modal=!t.show_settings_modal}}},[a("sl-icon",{attrs:{name:"gear-fill"}}),t._v("  "+t._s(t.$t("settings"))+" ")],1):t._e(),t.is_admin?[t._v(" – ")]:t._e(),t._v(" version "+t._s(t.$root.app_infos.version)+" ")],2)])],1)},n=[],i=(a(4916),a(5306),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("BaseModal2",{attrs:{title:t.$t("settings")},on:{close:function(e){return t.$emit("close")}}},[a("div",{},[a("sl-tab-group",[a("sl-tab",{attrs:{slot:"nav",panel:"informations"},slot:"nav"},[t._v(" "+t._s(t.$t("informations"))+" ")]),a("sl-tab",{attrs:{slot:"nav",panel:"access_control"},slot:"nav"},[t._v(" "+t._s(t.$t("access_control"))+" ")]),a("sl-tab",{attrs:{slot:"nav",panel:"storage"},slot:"nav"},[t._v(" "+t._s(t.$t("storage"))+" ")]),a("sl-tab-panel",{attrs:{name:"informations"}},[a("TitleField",{attrs:{field_name:"name_of_instance",label:t.$t("name_of_instance"),instructions:t.$t("name_of_instance_instructions"),content:t.settings.name_of_instance,path:"_admin",tag:"h1",required:!0,minlength:3,maxlength:40,can_edit:t.is_admin}}),a("br"),a("TitleField",{attrs:{field_name:"presentation_of_instance",label:t.$t("presentation_of_instance"),instructions:t.$t("presentation_of_instance_instructions"),content:t.settings.presentation_of_instance,path:"_admin",required:!1,can_edit:t.is_admin}}),a("br"),a("TitleField",{attrs:{field_name:"contactmail_of_instance",label:t.$t("contactmail_of_instance"),instructions:t.$t("contactmail_of_instance_instructions"),content:t.settings.contactmail_of_instance,path:"_admin",required:!1,input_type:"email",can_edit:t.is_admin}}),a("br"),a("DLabel",{attrs:{str:t.$t("logo")}}),a("div",{staticClass:"u-wips"}),a("br"),a("div",{staticClass:"u-instructions"},[t._v(" "+t._s(t.$t("restart_to_apply"))+" ")])],1),a("sl-tab-panel",{attrs:{name:"access_control"}},[a("TitleField",{attrs:{field_name:"general_password",label:t.$t("general_password"),instructions:t.$t("general_password_instructions"),content:t.settings.general_password,path:"_admin",input_type:"password",required:!1,can_edit:t.is_admin}}),a("br"),a("TitleField",{attrs:{field_name:"signup_password",label:t.$t("signup_password"),instructions:t.$t("signup_password_instructions"),content:t.settings.signup_password,path:"_admin",required:!1,can_edit:t.is_admin}}),a("br"),a("div",{staticClass:"u-instructions"},[t._v(" "+t._s(t.$t("restart_to_apply"))+" ")])],1),a("sl-tab-panel",{attrs:{name:"storage"}},[a("PickNativePath",{attrs:{field_name:"pathToUserContent",label:t.$t("path_to_content"),instructions:t.$t("path_to_content_instructions"),content:t.settings.pathToUserContent,path:"_admin",required:!0,can_edit:t.is_admin&&t.$root.is_electron}}),a("br"),a("div",{staticClass:"u-instructions"},[t._v(" "+t._s(t.$t("restart_to_apply"))+" ")])],1)],1)],1)])}),o=[],r={props:{},components:{},data(){return{path_to_content:void 0,new_path_to_content:void 0,settings:{}}},created(){},async mounted(){this.settings=await this.$api.getSettings(),this.$api.join({room:"_admin"})},beforeDestroy(){this.$api.leave({room:"_admin"})},watch:{},computed:{},methods:{restartDodoc(){this.$api.restartDodoc()},saveNewPathToContent(){}}},c=r,l=a(1001),_=(0,l.Z)(c,i,o,!1,null,"25fccfa7",null),p=_.exports,d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"_spacesList"},[a("div",{staticClass:"u-sameRow"},[a("DLabel",{attrs:{str:t.$t("spaces"),tag:"h2",instructions:t.$t("spaces_instr")}}),t.connected_as?a("button",{staticClass:"u-button u-button_red u-button_small",attrs:{type:"button"},on:{click:function(e){t.show_create_modal=!0}}},[a("svg",{staticStyle:{"enable-background":"new 0 0 168 168"},attrs:{version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 168 168","xml:space":"preserve"}},[a("path",{staticStyle:{fill:"#fc4b60"},attrs:{d:"M24.6,24.4c-32.8,32.8-32.8,86.1,0,119c32.8,32.8,85.9,32.8,118.7,0c32.8-32.8,32.8-85.9,0-118.7\n\t\tC110.5-8.2,57.5-8.2,24.6,24.4z"}}),a("polygon",{staticStyle:{fill:"#ffffff"},attrs:{points:"132.3,73.4 132.3,94.4 94.6,94.4 94.6,132.1 73.6,132.1 73.6,94.4 35.9,94.4 35.9,73.4 \n\t\t73.6,73.4 73.6,35.7 94.6,35.7 94.6,73.4 \t\t"}})]),t._v(" "+t._s(t.$t("create"))+" ")]):t._e()],1),t.show_create_modal?a("CreateSpace",{on:{close:function(e){t.show_create_modal=!1},openNewSpace:t.openNewSpace}}):t._e(),a("br"),a("div",{staticClass:"_list"},t._l(t.spaces,(function(t){return a("SpacePresentation",{key:t.$path,attrs:{space:t,context:"list",can_edit:!1}})})),1)],1)},u=[],h=(a(2262),a(4506),a(7658),a(1989)),m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("BaseModal2",{attrs:{title:t.$t("create_a_space")},on:{close:function(e){return t.$emit("close")}}},[a("form",{staticClass:"input-validation-required",on:{submit:function(e){return e.preventDefault(),t.createSpace.apply(null,arguments)}}},[a("DLabel",{attrs:{str:t.$t("title")}}),a("TextInput",{attrs:{content:t.new_space_title,maxlength:40,required:!0},on:{"update:content":function(e){t.new_space_title=e},toggleValidity:function(e){return t.allow_save=e}}}),a("br"),a("div",{},[a("ToggleInput",{attrs:{content:t.new_space_is_invisible,label:t.$t("invisible"),options:{true:t.$t("invisible_status_explanations_spaces"),false:t.$t("visible_status_explanations_spaces")}},on:{"update:content":function(e){t.new_space_is_invisible=e}}})],1),a("br"),a("button",{staticClass:"u-button u-button_bleuvert",attrs:{slot:"footer",type:"submit",loading:t.is_creating_space},slot:"footer"},[t._v(" "+t._s(t.$t("create_and_open"))+" ")]),t.error_msg?[a("br"),a("br"),a("div",{staticClass:"u-errorMsg",domProps:{textContent:t._s(t.error_msg)}})]:t._e()],2)])},f=[],v={props:{},components:{},data(){return{new_space_title:"",new_space_is_invisible:!1,is_creating_space:!1,allow_save:!1,error_msg:""}},created(){},mounted(){},beforeDestroy(){},watch:{},computed:{},methods:{async createSpace(){this.is_creating_space=!0;try{const t=await this.$api.createFolder({path:this.createPath(),additional_meta:{title:this.new_space_title,requested_slug:this.new_space_title,status:"draft",license:"CC",$status:!0===this.new_space_is_invisible?"invisible":"draft",$authors:[this.$api.tokenpath.token_path]}});setTimeout((()=>{this.$emit("openNewSpace",t)}),50)}catch(t){this.error_msg="Error: "+t.message,setTimeout((()=>{this.error_msg=""}),5e3),this.is_creating_space=!1}}}},g=v,w=(0,l.Z)(g,m,f,!1,null,"2152a7fd",null),b=w.exports,$={props:{},components:{SpacePresentation:h.Z,CreateSpace:b},data(){return{spaces:void 0,new_space_title:"",path:"spaces",fetch_spaces_error:void 0,show_create_modal:!1}},created(){},async mounted(){this.spaces=await this.$api.getFolders({path:this.path}).catch((t=>{this.fetch_spaces_error=t.response})),this.$api.join({room:this.path})},beforeDestroy(){this.$api.leave({room:this.path})},watch:{},computed:{},methods:{getSlug(t){return t.split("/").at(-1)},async createSpace(){try{await this.$api.createFolder({path:this.path,additional_meta:{title:this.new_space_title,requested_slug:this.new_space_title,$authors:[this.$api.tokenpath.token_path]}})}catch(t){}},openNewSpace(t){this.show_create_modal=!1;const e=this.createURLFromPath(this.path+"/"+t);this.$router.push(e)}}},x=$,y=(a(5545),(0,l.Z)(x,d,u,!1,null,"4698b237",null)),C=y.exports,S={props:{},components:{AdminSettings:p,SpacesList:C},data(){return{show_settings_modal:!1}},computed:{name(){return this.$root.app_infos.name_of_instance},description(){return this.$root.app_infos.presentation_of_instance.replace(/(?:\r\n|\r|\n)/g,"<br />")}},methods:{}},k=S,F=(a(5542),(0,l.Z)(k,s,n,!1,null,null,null)),P=F.exports},787:function(t,e,a){"use strict";a.r(e);var s=a(8081),n=a.n(s),i=a(3645),o=a.n(i),r=o()(n());r.push([t.id,"._spacePresentation[data-v-181a50e0]{position:relative;display:flex;flex-flow:row nowrap;align-items:center;gap:calc(var(--spacing)*2);background:#fff;overflow:hidden;background:var(--panel-color);box-shadow:var(--panel-shadows);border-radius:var(--panel-radius);margin-bottom:calc(var(--spacing)/2)}._spacePresentation>*[data-v-181a50e0]{flex:1 1 33%}._coverField[data-v-181a50e0]{position:relative;width:120px;aspect-ratio:1/1;flex:0 0 auto}._openSpace[data-v-181a50e0]{display:flex;justify-content:center}._openSpace[data-v-181a50e0],._openSpace ._clickZone[data-v-181a50e0]{position:absolute;top:0;left:0;width:100%;height:100%}",""]),e["default"]=r},9108:function(t,e,a){"use strict";a.r(e);var s=a(8081),n=a.n(s),i=a(3645),o=a.n(i),r=o()(n());r.push([t.id,"._create[data-v-4698b237]{max-width:400px}._spacesList[data-v-4698b237]{width:100%}._list[data-v-4698b237]{margin:0 auto;max-width:var(--max-column-width)}._list>*[data-v-4698b237]{margin:calc(var(--spacing)*1) calc(var(--spacing)*2)}",""]),e["default"]=r},6603:function(t,e,a){"use strict";a.r(e);var s=a(8081),n=a.n(s),i=a(3645),o=a.n(i),r=o()(n());r.push([t.id,"._dodoclogo{max-width:300px}._homeView{min-height:calc(100vh - 60px);max-height:-webkit-fill-available;align-items:center;padding-bottom:150px}._homeView,._homeView--content{display:flex;flex-flow:column nowrap;justify-content:center}._homeView--content{max-width:600px;width:100%;min-height:40vh;margin:0 auto;padding:var(--spacing)}._versionNumber{display:block;margin-top:calc(var(--spacing)*4);text-align:center;padding:calc(var(--spacing)/4)}._floatinProjectBtn{position:fixed;bottom:0;left:0;width:100%;padding:10vh 20vw;pointer-events:none;display:flex;justify-content:center}._floatinProjectBtn>*{pointer-events:auto}",""]),e["default"]=r},7463:function(t,e,a){var s=a(787);s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[t.id,s,""]]),s.locals&&(t.exports=s.locals);var n=a(1982).Z;n("430bc094",s,!0,{sourceMap:!1,shadowMode:!1})},5545:function(t,e,a){var s=a(9108);s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[t.id,s,""]]),s.locals&&(t.exports=s.locals);var n=a(1982).Z;n("705b3b98",s,!0,{sourceMap:!1,shadowMode:!1})},5542:function(t,e,a){var s=a(6603);s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[t.id,s,""]]),s.locals&&(t.exports=s.locals);var n=a(1982).Z;n("e9fdf072",s,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=HomeView.js.map