{"version":3,"file":"js/154.js","mappings":"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","sources":["webpack://app/./src/components/publications/page_by_page/SinglePage.vue?2cd9","webpack://app/./src/components/publications/page_by_page/MoveableItem.vue?adf7","webpack://app/./src/ddr/Vector.js","webpack://app/./src/ddr/Matrix.js","webpack://app/./src/ddr/helper.js","webpack://app/src/ddr/index.vue","webpack://app/./src/ddr/index.vue","webpack://app/./src/ddr/index.vue?bba9","webpack://app/src/components/publications/page_by_page/MoveableItem.vue","webpack://app/./src/components/publications/page_by_page/MoveableItem.vue?79c7","webpack://app/./src/components/publications/page_by_page/MoveableItem.vue","webpack://app/src/components/publications/page_by_page/SinglePage.vue","webpack://app/./src/components/publications/page_by_page/SinglePage.vue?ac6e","webpack://app/./src/components/publications/page_by_page/SinglePage.vue","webpack://app/./src/components/publications/templates/PageTemplate.vue?decf","webpack://app/./src/components/publications/page_by_page/PageSettings.vue?bc18","webpack://app/./src/components/publications/page_by_page/WidthHeightField.vue?3a5b","webpack://app/src/components/publications/page_by_page/WidthHeightField.vue","webpack://app/./src/components/publications/page_by_page/WidthHeightField.vue?f555","webpack://app/./src/components/publications/page_by_page/WidthHeightField.vue","webpack://app/./src/components/publications/page_by_page/SetMargins.vue?e2c6","webpack://app/src/components/publications/page_by_page/SetMargins.vue","webpack://app/./src/components/publications/page_by_page/SetMargins.vue?d40e","webpack://app/./src/components/publications/page_by_page/SetMargins.vue","webpack://app/./src/components/publications/page_by_page/PaginationOption.vue?6b56","webpack://app/src/components/publications/page_by_page/PaginationOption.vue","webpack://app/./src/components/publications/page_by_page/PaginationOption.vue?cd15","webpack://app/./src/components/publications/page_by_page/PaginationOption.vue","webpack://app/src/components/publications/page_by_page/PageSettings.vue","webpack://app/./src/components/publications/page_by_page/PageSettings.vue?f432","webpack://app/./src/components/publications/page_by_page/PageSettings.vue","webpack://app/./src/components/publications/page_by_page/PagesList.vue?933d","webpack://app/./src/components/publications/page_by_page/OpenedPageOrSpread.vue?39f2","webpack://app/./src/components/publications/page_by_page/PageMenu.vue?3130","webpack://app/./src/components/publications/page_by_page/DepthInput.vue?fd6a","webpack://app/src/components/publications/page_by_page/DepthInput.vue","webpack://app/./src/components/publications/page_by_page/DepthInput.vue?fcac","webpack://app/./src/components/publications/page_by_page/DepthInput.vue","webpack://app/./src/components/publications/page_by_page/MoveToPage.vue?36de","webpack://app/src/components/publications/page_by_page/MoveToPage.vue","webpack://app/./src/components/publications/page_by_page/MoveToPage.vue?d3b6","webpack://app/./src/components/publications/page_by_page/MoveToPage.vue","webpack://app/src/components/publications/page_by_page/PageMenu.vue","webpack://app/./src/components/publications/page_by_page/PageMenu.vue?f591","webpack://app/./src/components/publications/page_by_page/PageMenu.vue","webpack://app/./src/components/publications/page_by_page/PanZoom.vue?004b","webpack://app/./node_modules/@panzoom/panzoom/dist/panzoom.es.js","webpack://app/src/components/publications/page_by_page/PanZoom.vue","webpack://app/./src/components/publications/page_by_page/PanZoom.vue?c204","webpack://app/./src/components/publications/page_by_page/PanZoom.vue","webpack://app/src/components/publications/page_by_page/OpenedPageOrSpread.vue","webpack://app/./src/components/publications/page_by_page/OpenedPageOrSpread.vue?b62c","webpack://app/./src/components/publications/page_by_page/OpenedPageOrSpread.vue","webpack://app/src/components/publications/page_by_page/PagesList.vue","webpack://app/./src/components/publications/page_by_page/PagesList.vue?836b","webpack://app/./src/components/publications/page_by_page/PagesList.vue","webpack://app/src/components/publications/templates/PageTemplate.vue","webpack://app/./src/components/publications/templates/PageTemplate.vue?e2e4","webpack://app/./src/components/publications/templates/PageTemplate.vue","webpack://app/./node_modules/yoyoo-ddr/dist/yoyoo-ddr.css","webpack://app/./src/components/publications/page_by_page/MoveableItem.vue?5d05","webpack://app/./src/components/publications/page_by_page/OpenedPageOrSpread.vue?f83e","webpack://app/./src/components/publications/page_by_page/PageMenu.vue?0356","webpack://app/./src/components/publications/page_by_page/PageSettings.vue?c2f6","webpack://app/./src/components/publications/page_by_page/PagesList.vue?cd34","webpack://app/./src/components/publications/page_by_page/SinglePage.vue?94b4","webpack://app/./src/ddr/index.vue?7963","webpack://app/./node_modules/yoyoo-ddr/dist/yoyoo-ddr.css?d541","webpack://app/./src/components/publications/page_by_page/MoveableItem.vue?a769","webpack://app/./src/components/publications/page_by_page/OpenedPageOrSpread.vue?5426","webpack://app/./src/components/publications/page_by_page/PageMenu.vue?cdb7","webpack://app/./src/components/publications/page_by_page/PageSettings.vue?3ca8","webpack://app/./src/components/publications/page_by_page/PagesList.vue?5791","webpack://app/./src/components/publications/page_by_page/SinglePage.vue?dba5","webpack://app/./src/ddr/index.vue?3772"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"_singlePage\",class:{\n    'is--preview': _vm.context === 'list',\n    'is--editable': _vm.can_edit,\n  }},[_c('div',{staticClass:\"_pagecontainer\",style:(_vm.page_styles)},[_c('div',{staticClass:\"_pagecontent\"},[(_vm.can_edit && _vm.show_grid)?_c('svg',{staticClass:\"_grid\",attrs:{\"width\":\"100%\",\"height\":\"100%\",\"xmlns\":\"http://www.w3.org/2000/svg\"}},[_c('defs',[_c('pattern',{attrs:{\"id\":\"gridSmall\",\"width\":_vm.gridstep,\"height\":_vm.gridstep,\"patternUnits\":\"userSpaceOnUse\"}},[_c('path',{attrs:{\"d\":(\"M \" + _vm.gridstep + \" 0 L 0 0 0 \" + _vm.gridstep),\"fill\":\"none\",\"stroke\":\"var(--c-gridlines)\",\"strokeWidth\":\"1\"}})]),_c('pattern',{attrs:{\"id\":\"grid\",\"width\":_vm.gridstep * 5,\"height\":_vm.gridstep * 5,\"patternUnits\":\"userSpaceOnUse\"}},[_c('rect',{attrs:{\"width\":_vm.gridstep * 5,\"height\":_vm.gridstep * 5,\"fill\":\"url(#gridSmall)\"}}),_c('path',{attrs:{\"d\":(\"M \" + (_vm.gridstep * 5) + \" 0 L 0 0 0 \" + (_vm.gridstep * 5)),\"fill\":\"none\",\"stroke\":\"var(--c-gridfiveslines)\",\"strokeWidth\":\"1\"}})])]),_c('rect',{attrs:{\"width\":\"100%\",\"height\":\"100%\",\"fill\":\"url(#grid)\"}})]):_vm._e(),_vm._l((_vm.page_modules),function(publimodule){return _c('MoveableItem',{key:publimodule.$path,staticClass:\"_item\",attrs:{\"publimodule\":publimodule,\"magnification\":_vm.magnification,\"gridstep\":_vm.show_grid && _vm.snap_to_grid ? _vm.gridstep : 1,\"scale\":_vm.scale,\"can_edit\":_vm.can_edit,\"is_active\":_vm.active_module.$path === publimodule.$path}})}),(_vm.can_edit && _vm.l_margins)?_c('svg',{staticClass:\"_margins\",attrs:{\"width\":\"100%\",\"height\":\"100%\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"fill\":\"transparent\"}},[_c('rect',{attrs:{\"x\":_vm.magnify(_vm.l_margins.left),\"y\":_vm.magnify(_vm.l_margins.top),\"width\":_vm.magnify(_vm.page_width - _vm.l_margins.left - _vm.l_margins.right),\"height\":_vm.magnify(_vm.page_height - _vm.l_margins.top - _vm.l_margins.bottom)}})]):_vm._e(),(_vm.pagination && !_vm.hide_pagination && _vm.page_number_corrected > 0)?_c('div',{staticClass:\"_pagination\",style:(_vm.pagination_styles)},[_vm._v(\" \"+_vm._s(_vm.page_number_corrected)+\" \")]):_vm._e(),(_vm.can_edit && _vm.l_margins)?_c('svg',{staticClass:\"_pageBorders\",attrs:{\"width\":\"100%\",\"height\":\"100%\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"fill\":\"transparent\"}},[_c('rect',{attrs:{\"x\":\"0\",\"y\":\"0\",\"width\":_vm.magnify(_vm.page_width),\"height\":_vm.magnify(_vm.page_height),\"stroke\":\"black\"}})]):_vm._e()],2)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('DDR',{key:_vm.component_key,staticClass:\"_moveableItem\",class:{\n    'is--locked': _vm.publimodule.locked === true,\n    'is--editable': _vm.can_edit,\n    'is--active': _vm.can_edit && _vm.is_active,\n    'is--beingEdited': _vm.content_is_edited,\n    'panzoom-exclude': _vm.can_edit,\n  },style:(_vm.module_z_index),attrs:{\"active\":_vm.can_edit &&\n    _vm.is_active &&\n    _vm.publimodule.locked !== true &&\n    _vm.content_is_edited !== true,\"value\":_vm.transform,\"parent\":false /* bind to container */,\"acceptRatio\":_vm.aspect_ratio,\"handlerSize\":15,\"grid\":_vm.grid,\"id\":_vm.publimodule.$path,\"zoom\":_vm.scale},on:{\"dragstart\":_vm.dragStart,\"drag\":_vm.onDrag,\"dragend\":_vm.dragEnd,\"resizestart\":_vm.resizeStart,\"resizeend\":_vm.resizeEnd,\"rotateend\":_vm.rotateEnd}},[_c('span',{staticClass:\"_activator\",on:{\"mousedown\":_vm.setActive,\"dblclick\":_vm.dblClick}},[_c('PublicationModule',{staticClass:\"_moveableItem--content\",style:(_vm.module_styles),attrs:{\"publimodule\":_vm.publimodule,\"can_edit\":_vm.can_edit && _vm.is_active,\"borderRadius\":_vm.turnCMtoPX(_vm.publimodule.border_radius) || 0,\"context\":'page_by_page',\"number_of_max_medias\":1},on:{\"duplicate\":_vm.onDuplicateModule,\"contentIsEdited\":_vm.contentIsEdited,\"contentIsNotEdited\":_vm.contentIsNotEdited}})],1),(_vm.can_edit)?_c('div',{staticClass:\"_unlockBtn\"},[(_vm.publimodule.locked === true)?_c('button',{staticClass:\"u-button u-button_orange u-button_small u-button_round u-colorBlack\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.unlock()}}},[_c('sl-icon',{attrs:{\"name\":\"lock\"}})],1):_vm._e(),(\n        _vm.can_edit &&\n        _vm.is_active &&\n        !_vm.content_is_edited &&\n        (!_vm.publimodule.locked || _vm.publimodule.locked === false)\n      )?_c('button',{staticClass:\"u-button u-button_orange u-button_small u-button_round u-colorBlack\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.lock()}}},[_c('sl-icon',{attrs:{\"name\":\"unlock\"}})],1):_vm._e()]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/* eslint-disable */\nclass Vector {\n  constructor(lst) {\n    this._values = lst;\n  }\n\n  toString() {\n    return `Vector(${this._values.join(\", \")})`;\n  }\n\n  get length() {\n    return this._values.length;\n  }\n\n  dot(vector) {\n    if (vector instanceof Vector && this.length === vector.length) {\n      return this._values\n        .map((item, index) => item * vector._values[index])\n        .reduce((a, b) => a + b);\n    }\n    throw Error(\"The param `vector` must instance of Vector\");\n  }\n\n  get(index) {\n    return this._values[index];\n  }\n}\n\nexport default Vector;\n","/* eslint-disable */\nimport Vector from \"./Vector\";\n\nclass Matrix {\n  constructor(values) {\n    this._values = values;\n  }\n\n  static zeros(shape) {\n    return new Matrix(\n      new Array(shape[0]).fill(null).map(() => new Array(shape[1]).fill(0))\n    );\n  }\n\n  valueOf() {\n    return JSON.parse(JSON.stringify(this._values));\n  }\n\n  toString() {\n    return (\n      \"Matrix ( \" + this._values.map((item) => item.join(\" \")).join(\", \") + \" )\"\n    );\n  }\n\n  rows() {\n    return this._values.length;\n  }\n\n  cols() {\n    return this._values[0].length;\n  }\n\n  rowVector(row) {\n    return new Vector(this._values[row].slice(0));\n  }\n\n  colVector(col) {\n    let v = new Array(this.rows()).fill(0);\n    this._values.forEach((item, index) => {\n      v[index] = item[col];\n    });\n    return new Vector(v);\n  }\n\n  dot(v) {\n    if (v instanceof Vector && this.cols() === v.length) {\n      return new Vector(\n        new Array(v.length).fill(null).map((item, index) => {\n          return this.rowVector(index).dot(v);\n        })\n      );\n    }\n    if (v instanceof Matrix && this.cols() === v.rows()) {\n      let cols = v.cols(),\n        rows = v.rows();\n      let newMatrix = Matrix.zeros([rows, cols]);\n      let v1;\n      for (let i = 0; i < cols; i++) {\n        v1 = this.dot(v.colVector(i));\n        for (let j = 0; j < rows; j++) {\n          newMatrix._values[j][i] = v1.get(j);\n        }\n      }\n      return newMatrix;\n    }\n    throw Error(\"expected a Vector or Matrix but got \" + typeof v);\n  }\n\n  get(row, col) {\n    return this._values[row][col];\n  }\n\n  T() {\n    return new Matrix(\n      new Array(this.cols()).fill(null).map((_, colIndex) => {\n        return new Array(this.rows()).fill(0).map((_, rowIndex) => {\n          return this.get(rowIndex, colIndex);\n        });\n      })\n    );\n  }\n}\n\nexport default Matrix;\n","/* eslint-disable */\nimport Matrix from \"./Matrix\";\n\n// 缩放时基于对角坐标固定缩放\n// 矩形除了4个直角坐标点外，还有每条边的一个中心点坐标，按照数组的顺序从左上顺时针到左中排列\n// 例如：拖拽点为右中，对应的固定点为左中。拖拽点为左上，对应的固定点为右下\nexport const pointMap = {\n  br: 0,\n  bm: 1,\n  bl: 2,\n  l: 3,\n  tl: 4,\n  tm: 5,\n  tr: 6,\n  r: 7,\n};\n\nexport const handlerPointMap = {\n  tl: 0,\n  tm: 1,\n  tr: 2,\n  r: 3,\n  br: 4,\n  bm: 5,\n  bl: 6,\n  l: 7,\n};\n// 计算矩形大小时使用四个直角坐标\nexport const pointMap2 = {\n  br: 0,\n  bm: 0,\n  bl: 2,\n  l: 2,\n  tl: 4,\n  tm: 4,\n  tr: 6,\n  r: 6,\n};\n\nexport const widthMap = {\n  l: 1,\n  r: 1,\n};\nexport const heightMap = {\n  tm: 1,\n  bm: 1,\n};\nexport const tr2bl = {\n  tr: 1,\n  bl: 1,\n  r: 1,\n  l: 1,\n};\n\nexport function deg2rad(deg) {\n  return (deg * Math.PI) / 180;\n}\n\nexport function rad2deg(rad) {\n  return (rad * 180) / Math.PI;\n}\n\n// 获取矩形旋转后在平面上的8个坐标点，从左上角顺时针放到数组里返回\nexport function getPoints({ x, y, width, height, rotation }, zoom) {\n  let a = (rotation * Math.PI) / 180;\n  let wc = (width / 2) * zoom;\n  let hc = (height / 2) * zoom;\n  // 标准的矩阵点乘公式，返回旋转后的坐标\n  let deg = new Matrix([\n    [Math.cos(a), Math.sin(a)],\n    [-Math.sin(a), Math.cos(a)],\n  ]);\n  let rect = new Matrix([\n    [-wc, hc],\n    [0, hc],\n    [wc, hc],\n    [wc, 0],\n    [wc, -hc],\n    [0, -hc],\n    [-wc, -hc],\n    [-wc, 0],\n  ]);\n  return deg\n    .dot(rect.T())\n    .T()\n    .valueOf()\n    .map((item) => {\n      return { x: item[0] + wc + x * zoom, y: -(item[1] - hc) + y * zoom };\n    });\n}\nexport function getBoundingRect(transform) {\n  if (transform.rotation === 0) {\n    return {\n      left: transform.x,\n      top: transform.y,\n      right: transform.x + transform.width,\n      bottom: transform.y + transform.height,\n      width: transform.width,\n      height: transform.height,\n    };\n  }\n  let points = getPoints(transform);\n  let xarray = [],\n    yarray = [];\n  points.forEach((element) => {\n    xarray.push(element.x);\n    yarray.push(element.y);\n  });\n  xarray = xarray.sort((a, b) => a - b);\n  yarray = yarray.sort((a, b) => a - b);\n  let left = xarray[0],\n    right = xarray[xarray.length - 1];\n  let top = yarray[0],\n    bottom = yarray[yarray.length - 1];\n  return {\n    left,\n    right,\n    top,\n    bottom,\n    width: right - left,\n    height: bottom - top,\n  };\n}\n\n// 计算当前矩形的宽高\nexport function getSize({ type, x, y, dis, pressAngle, startAngle }) {\n  let w, h;\n  let currentAngle = rad2deg(Math.atan2(y, x));\n  let rad = deg2rad(pressAngle + currentAngle - startAngle);\n  if (tr2bl[type]) {\n    h = Math.cos(rad) * dis;\n    w = Math.sin(rad) * dis;\n  } else {\n    h = Math.sin(rad) * dis;\n    w = Math.cos(rad) * dis;\n  }\n  return { w, h };\n}\n\nconst cursorMap = [\"nw\", \"n\", \"ne\", \"e\", \"se\", \"s\", \"sw\", \"w\"];\nconst handlerMap = { tl: 0, tm: 1, tr: 2, r: 3, br: 4, bm: 5, bl: 6, l: 7 };\n\nexport function getHandler(type, rotation) {\n  let originIndex = handlerMap[type];\n  let currentIndex = (originIndex + Math.floor(rotation / 45)) % 8;\n  return cursorMap[currentIndex];\n}\n","<script>\n/* eslint-disable */\nimport {\n  getHandler,\n  getPoints,\n  getSize,\n  handlerPointMap,\n  heightMap,\n  pointMap,\n  pointMap2,\n  rad2deg,\n  tr2bl,\n  widthMap,\n} from \"./helper\";\n\nexport default {\n  name: \"ddr\",\n  props: {\n    value: {\n      default: function () {\n        return { x: 0, y: 0, width: 100, height: 100, rotation: 0 };\n      },\n      type: Object,\n    },\n    handlerSize: {\n      type: Number,\n      default: 11,\n    },\n    active: {\n      default: true,\n      type: Boolean,\n    },\n    resizeHandler: {\n      default: function () {\n        return [\"tl\", \"tm\", \"tr\", \"r\", \"br\", \"bm\", \"bl\", \"l\"];\n      },\n      type: Array,\n    },\n    resizable: {\n      default: true,\n      type: Boolean,\n    },\n    rotatable: {\n      default: true,\n      type: Boolean,\n    },\n    draggable: {\n      default: true,\n      type: Boolean,\n    },\n    acceptRatio: {\n      default: false,\n      type: Boolean,\n    },\n    minWidth: {\n      type: Number,\n      default: 1,\n    },\n    minHeight: {\n      type: Number,\n      default: 1,\n    },\n    maxWidth: {\n      type: Number,\n      default: 100000000,\n    },\n    maxHeight: {\n      type: Number,\n      default: 100000000,\n    },\n    parent: {\n      type: Boolean,\n      default: false,\n    },\n    beforeActive: {\n      type: Function,\n      default: () => false,\n    },\n    id: [Number, String],\n    renderContent: Function,\n    grid: {\n      type: Array,\n      default: () => [1, 1],\n    },\n    stop: {\n      default: true,\n      type: Boolean,\n    },\n    prevent: {\n      default: true,\n      type: Boolean,\n    },\n    zoom: {\n      default: 1,\n      type: Number,\n    },\n    axis: {\n      type: String,\n      default: \"xy\", // x | y 不填写则都可以移动，仅移动时生效\n    },\n  },\n  data() {\n    return {\n      transform: Object.assign({}, this.value),\n      currentRatio: 1,\n      isInitialRatio: false,\n      isDragging: false,\n      isResizing: false,\n      isRotating: false,\n      isReadyToDrag: false,\n      isReadyToResize: false,\n      isReadyToRotate: false,\n    };\n  },\n  created() {\n    // 缓存当前位置信息\n    this.localeTransform = { ...this.transform };\n  },\n  watch: {\n    value(t) {\n      this.transform = { ...t };\n    },\n  },\n\n  computed: {\n    rotateHandler() {\n      let size = Math.ceil(this.handlerSize / this.zoom) + \"px\";\n      return `width:${size};height:${size};top:-25px;margin-left:${-Math.floor(\n        this.handlerSize / 2\n      )}px`;\n    },\n    style() {\n      let transform = this.transform;\n      return `left:${transform.x}px;top:${transform.y}px;width:${transform.width}px;height:${transform.height}px;transform:rotate(${transform.rotation}deg)`;\n    },\n  },\n  methods: {\n    handleDefaultEvent(e) {\n      if (this.stop) {\n        e.stopPropagation();\n      }\n      if (this.prevent) {\n        e.preventDefault();\n      }\n    },\n    getNewHandler(type) {\n      let cursor = getHandler(type, this.transform.rotation);\n      let { handlerSize } = this;\n      let props = {};\n      let half = -Math.floor(handlerSize / 2) + \"px\";\n      switch (type) {\n        case \"tl\":\n          props = {\n            top: half,\n            left: half,\n          };\n          break;\n        case \"tm\":\n          props = { top: half, \"margin-left\": half };\n          break;\n        case \"tr\":\n          props = { right: half, top: half };\n          break;\n        case \"r\":\n          props = { right: half, \"margin-top\": half };\n          break;\n        case \"br\":\n          props = { bottom: half, right: half };\n          break;\n        case \"bm\":\n          props = { \"margin-left\": half, bottom: half };\n          break;\n        case \"bl\":\n          props = { left: half, bottom: half };\n          break;\n        case \"l\":\n          props = { \"margin-top\": half, left: half };\n          break;\n      }\n      let result = {\n        cursor: cursor + \"-resize\",\n        width: Math.ceil(handlerSize / this.zoom) + \"px\",\n        height: Math.ceil(handlerSize / this.zoom) + \"px\",\n        ...props,\n      };\n      return Object.keys(result)\n        .map((item) => `${item}:${result[item]}`)\n        .join(\";\");\n    },\n    emitChange() {\n      this.$emit(\"input\", { ...this.transform });\n    },\n    handleMouseDown(event) {\n      if (!this.active && !this.beforeActive(this.id)) return;\n      this.handleDefaultEvent(event);\n      let point = event.touches ? event.touches[0] : event;\n      let { clientX, clientY } = point;\n      this._lastX = clientX;\n      this._lastY = clientY;\n      this._activeTarget = event.target;\n      this._parentRect = this.$refs.wrapper.parentNode.getBoundingClientRect();\n      this._resizeHandler = event.target.dataset.resizetype;\n      this.localeTransform = { ...this.transform };\n      // 如果设置了限制在父元素的边界内移\n      // 计算组件的边界，在移动时进行判断并修正\n      if (this.parent) {\n        let minLeft = 0;\n        let maxLeft = this._parentRect.width / this.zoom - this.transform.width;\n        let minTop = 0;\n        let maxTop =\n          this._parentRect.height / this.zoom - this.transform.height;\n        let maxLeftWidth = this.transform.x + this.transform.width;\n        let maxRightWidth =\n          this._parentRect.width / this.zoom - this.transform.x;\n        let maxTopHeight = this.transform.y + this.transform.height;\n        let maxBottomHeight =\n          this._parentRect.height / this.zoom - this.transform.y;\n        this.bounday = {\n          minLeft,\n          maxLeft,\n          minTop,\n          maxTop,\n          maxLeftWidth,\n          maxRightWidth,\n          maxTopHeight,\n          maxBottomHeight,\n        };\n      }\n      // 添加事件，该事件会在up时移除\n      document.addEventListener(\"mousemove\", this.handleMouseMove, false);\n      document.addEventListener(\"touchmove\", this.handleMouseMove, false);\n      document.addEventListener(\"touchend\", this.handleMouseUp, false);\n      document.addEventListener(\"mouseup\", this.handleMouseUp, false);\n      if (event.target.dataset.type === \"rotate\") {\n        this._handlerType = \"rotate\";\n        this.isReadyToRotate = true;\n        this.handleRotateStart(event);\n        this.$emit(\"rotatestart\", event, this.transform);\n      } else if (this._activeTarget.dataset.resizetype) {\n        this._handlerType = \"resize\";\n        this.isReadyToResize = true;\n        this.handleResizeStart(event);\n        this.$emit(\"resizestart\", event, this.transform);\n      } else {\n        this._handlerType = \"drag\";\n        this.isReadyToDrag = true;\n        this.draggable && this.$emit(\"dragstart\", event, this.transform);\n      }\n    },\n    handleMouseMove(event) {\n      this.handleDefaultEvent(event);\n      let { clientX, clientY } = event.touches ? event.touches[0] : event;\n      this.isReadyToDrag = false;\n      this.isReadyToResize = false;\n      this.isReadyToRotate = false;\n      this._deltaX = clientX - this._lastX;\n      this._deltaY = clientY - this._lastY;\n      this._lastX = clientX;\n      this._lastY = clientY;\n      if (this._handlerType === \"resize\") {\n        this.isResizing = true;\n        this.handleResizeMove(event);\n        this.$emit(\"resize\", event, this.transform);\n      } else if (this._handlerType === \"drag\" && this.draggable) {\n        this.isDragging = true;\n        this.doMove(event);\n        this.$emit(\"drag\", event, this.transform);\n      } else if (this._handlerType === \"rotate\") {\n        this.isRotating = true;\n        this.handleRotateMove(event);\n        this.$emit(\"rotate\", event, this.transform);\n      }\n      this.emitChange();\n    },\n\n    doMove() {\n      let [gridX, gridY] = this.grid;\n      let deltaX = this._deltaX / this.zoom;\n      let deltaY = this._deltaY / this.zoom;\n      let x = (this.localeTransform.x = Math.round(\n        this.localeTransform.x + deltaX\n      ));\n      let y = (this.localeTransform.y = Math.round(\n        this.localeTransform.y + deltaY\n      ));\n\n      // 将当前位置对齐网格，限制在父元素内进行移动\n      // 当deltaX > 0 说明当前移动方向为向右移动，则向下取整。例如：10 12 14 始终取 10\n      // 当deltaY < 0 说明当干移动方向为向左移动，则向上取整。例如：20 19 17 始终取 20\n      if (this.axis.includes(\"x\")) {\n        if (x > this.transform.x) {\n          this.transform.x = this.restrictToLeftOfParent(x - (x % gridX));\n        } else if (x < this.transform.x) {\n          this.transform.x = this.restrictToLeftOfParent(\n            x - ((x % gridX) - gridX)\n          );\n        }\n      }\n\n      if (this.axis.includes(\"y\")) {\n        if (y > this.transform.y) {\n          this.transform.y = this.restrictToTopOfParent(y - (y % gridY));\n        } else if (y < this.transform.y) {\n          this.transform.y = this.restrictToTopOfParent(\n            y - ((y % gridY) - gridY)\n          );\n        }\n      }\n    },\n    restrictToLeftOfParent(x) {\n      if (!this.parent) return x;\n      x = Math.max(this.bounday.minLeft, x);\n      x = Math.min(this.bounday.maxLeft, x);\n      return x;\n    },\n    restrictToTopOfParent(y) {\n      if (!this.parent) return y;\n      y = Math.max(this.bounday.minTop, y);\n      y = Math.min(this.bounday.maxTop, y);\n      return y;\n    },\n    restrictHeight(h, type) {\n      if (!this.parent || this.transform.rotation > 0) return h;\n      if ([\"bl\", \"bm\", \"br\"].includes(type))\n        return Math.min(this.bounday.maxBottomHeight, h);\n      if ([\"tl\", \"tm\", \"tr\"].includes(type))\n        return Math.min(this.bounday.maxTopHeight, h);\n      return h;\n    },\n    restrictWidth(w, type) {\n      if (!this.parent || this.transform.rotation > 0) return w;\n      if ([\"tl\", \"l\", \"bl\"].includes(type))\n        return Math.min(this.bounday.maxLeftWidth, w);\n      if ([\"tr\", \"r\", \"br\"].includes(type))\n        return Math.min(this.bounday.maxRightWidth, w);\n      return w;\n    },\n    handleMouseUp(event) {\n      this.handleDefaultEvent(event);\n      document.removeEventListener(\"mousemove\", this.handleMouseMove, false);\n      document.removeEventListener(\"mouseup\", this.handleMouseUp, false);\n      document.removeEventListener(\"touchmove\", this.handleMouseMove, false);\n      document.removeEventListener(\"touchend\", this.handleMouseUp, false);\n\n      let ev = {\n        drag: \"draggable\",\n        resize: \"resizable\",\n        rotate: \"rotatable\",\n      };\n\n      this.isInitialRatio =\n        this.isDragging =\n        this.isResizing =\n        this.isRotating =\n          false;\n      this.isReadyToDrag = this.isReadyToResize = this.isReadyToRotate = false;\n      this[ev[this._handlerType]] &&\n        this.$emit(this._handlerType + \"end\", event, this.transform);\n    },\n    handleResizeStart(event) {\n      let type = this._resizeHandler;\n      let rect = this.transform;\n      let matrix = getPoints(rect, this.zoom);\n      let pressAngle;\n      // 当前控制点的对角坐标点，该坐标会用来计算新的位置\n      // 例如：bottomRight(右下角) 对应 topLeft(左上角)\n      let opposite = matrix[pointMap[type]];\n      // 与上面的区别是，这里的对角坐标只能是4个直角坐标，用于计算新的宽高\n      // 例如：例如：bottomRight 和 bottom 都对应 topLeft\n      let opp2 = matrix[pointMap2[type]];\n      let { clientX, clientY } = event.touches ? event.touches[0] : event;\n      // issues: https://github.com/zuimeiaj/yoyoo-ddr/issues/34\n      // 在进行缩放时，需要考虑鼠标位置距离拖拽点中心位置的偏移值，否则拖拽时会有抖动\n      let handlerPoint = matrix[handlerPointMap[type]];\n      let offsetX = clientX - handlerPoint.x;\n      let offsetY = clientY - handlerPoint.y;\n\n      let x1 = clientX - opp2.x - offsetX;\n      let y1 = clientY - opp2.y - offsetY;\n      let width = rect.width;\n      let height = rect.height;\n      // 有问题\n      if (tr2bl[type]) {\n        pressAngle = rad2deg(\n          Math.atan2(width, widthMap[type] ? height / 2 : height)\n        );\n      } else {\n        pressAngle = rad2deg(\n          Math.atan2(height, heightMap[type] ? width / 2 : width)\n        );\n      }\n      let startAngle = rad2deg(Math.atan2(y1, x1));\n      this._resizeOpt = {\n        matrix,\n        rect,\n        type,\n        opposite,\n        opp2,\n        pressAngle,\n        startAngle,\n        offsetX,\n        offsetY,\n      };\n    },\n    handleResizeMove(event) {\n      let { clientX, clientY } = event.touches ? event.touches[0] : event;\n      let { opposite, opp2, type, pressAngle, startAngle, offsetX, offsetY } =\n        this._resizeOpt;\n      let x = clientX - opp2.x - offsetX;\n      let y = clientY - opp2.y - offsetY;\n      let dis = Math.hypot(y, x);\n      let ratio = event.shiftKey || this.acceptRatio;\n      let [gridX, gridY] = this.grid;\n      // 锁定纵横比\n      if (!this.isInitialRatio && ratio) {\n        this.currentRatio = this.transform.width / this.transform.height;\n        this.isInitialRatio = true;\n      }\n      if (!ratio) {\n        this.isInitialRatio = false;\n      }\n\n      // 获取新的宽度和高度\n      let { w, h } = getSize({\n        type,\n        dis,\n        x,\n        y,\n        startAngle,\n        pressAngle,\n      });\n      let transform = { ...this.localeTransform };\n\n      // 进行等比例缩放\n      if (this.isInitialRatio) {\n        if (widthMap[type]) h = w / this.currentRatio;\n        else w = h * this.currentRatio;\n      }\n      // 还原到实际尺寸\n      w /= this.zoom;\n      h /= this.zoom;\n      w = Math.min(Math.max(Math.round(w), this.minWidth), this.maxWidth);\n      h = Math.min(Math.max(Math.round(h), this.minHeight), this.maxHeight);\n      // 判断当前控制点是否为宽度缩放还是高度缩放\n      if (widthMap[type] && !ratio) {\n        transform.width = w;\n      } else if (heightMap[type] && !ratio) {\n        transform.height = h;\n      } else {\n        transform.width = w;\n        transform.height = h;\n      }\n\n      let resizeType = this._resizeHandler;\n      // // 限制在网格中移动，原理同拖动\n      if (transform.width % gridX > 0) {\n        if (transform.width > this.localeTransform.width) {\n          // 宽度变大时向下取整\n          transform.width = transform.width - (transform.width % gridX);\n        } else {\n          // 宽度变小时向上取整\n          transform.width =\n            transform.width - ((transform.width % gridX) - gridX);\n        }\n      }\n\n      // 原理同上\n      if (transform.height % gridY > 0) {\n        if (transform.height > this.localeTransform.height) {\n          transform.height = transform.height - (transform.height % gridY);\n        } else {\n          transform.height =\n            transform.height - ((transform.height % gridY) - gridY);\n        }\n      }\n      // 限制在父元素中\n      transform.height = this.restrictHeight(transform.height, resizeType);\n      transform.width = this.restrictWidth(transform.width, resizeType);\n\n      // 根据新的旋转和宽高计算新的位置\n      let matrix = getPoints(transform, this.zoom);\n      let newOpposite = matrix[pointMap[type]];\n      let deltaX = -(newOpposite.x - opposite.x) / this.zoom;\n      let deltaY = -(newOpposite.y - opposite.y) / this.zoom;\n      transform.x = Math.round(transform.x + deltaX);\n      transform.y = Math.round(transform.y + deltaY);\n      this.transform = transform;\n    },\n\n    handleRotateStart(event) {\n      let { clientX, clientY } = event.touches ? event.touches[0] : event;\n      let t = this.$refs.wrapper.getBoundingClientRect();\n      let cx = t.left + t.width / 2;\n      let cy = t.top + t.height / 2;\n      let startAngle = (180 / Math.PI) * Math.atan2(clientY - cy, clientX - cx);\n      let rotation = this.transform.rotation;\n      // 记录旋转的角度和组件的中心点\n      this._rotateOpt = { cx, cy, startAngle, rotation };\n    },\n    handleRotateMove(event) {\n      let { cx, cy, startAngle, rotation } = this._rotateOpt;\n      let { clientX, clientY } = event.touches ? event.touches[0] : event;\n      let x = clientX - cx;\n      let y = clientY - cy;\n      let angle = (180 / Math.PI) * Math.atan2(y, x);\n      // 旋转角度 = 鼠标移动时角度 - 鼠标按下时角度\n      // 旋转后的角度 = 组件按下时角度 + 旋转角度\n      let currentAngle = angle - startAngle;\n      let r = rotation + currentAngle;\n      r = r % 360;\n      r = r < 0 ? r + 360 : r;\n      r = this.roundRotate(r);\n      this.transform.rotation = Math.floor(r);\n    },\n    roundRotate(r) {\n      const round = 5;\n      if (r > 360 - round || r < 0 + round) return 0;\n      if (r > 90 - round && r < 90 + round) return 90;\n      if (r > 180 - round && r < 180 + round) return 180;\n      if (r > 270 - round && r < 270 + round) return 270;\n      return r;\n    },\n    getClassNames() {\n      const ddrClassNames = [\"yoyoo-ddr\"];\n\n      if (this.active) ddrClassNames.push(\"active\");\n      if (this.isDragging) ddrClassNames.push(\"ddr-dragging\");\n      if (this.isResizing) ddrClassNames.push(\"ddr-resizing\");\n      if (this.isRotating) ddrClassNames.push(\"ddr-rotating\");\n      if (this.isReadyToDrag) ddrClassNames.push(\"ddr-ready-drag\");\n      if (this.isReadyToResize) ddrClassNames.push(\"ddr-ready-resize\");\n      if (this.isReadyToRotate) ddrClassNames.push(\"ddr-ready-rotate\");\n      return ddrClassNames;\n    },\n  },\n  render() {\n    return (\n      <div\n        ref=\"wrapper\"\n        style={this.style}\n        class={this.getClassNames()}\n        onTouchstart={this.handleMouseDown}\n        onMousedown={this.handleMouseDown}\n      >\n        {this.renderContent ? this.renderContent(this) : this.$slots.default}\n        {this.resizable && (\n          <div class=\"resize-handler-wrapper\">\n            {this.resizeHandler.map((item) => {\n              return (\n                <span\n                  data-resizetype={item}\n                  key={item}\n                  style={this.getNewHandler(item)}\n                  class={`resize-handler ${item}`}\n                />\n              );\n            })}\n          </div>\n        )}\n        {this.rotatable && (\n          <span\n            style={this.rotateHandler}\n            data-type=\"rotate\"\n            class=\"rotate-handler\"\n          />\n        )}\n      </div>\n    );\n  },\n};\n</script>\n\n<style lang=\"less\">\n.yoyoo-ddr {\n  position: absolute;\n  .resize-handler.tm {\n    left: 50%;\n  }\n  .resize-handler.r {\n    top: 50%;\n  }\n  .resize-handler.bm {\n    left: 50%;\n  }\n  .resize-handler.l {\n    top: 50%;\n    cursor: pointer;\n  }\n\n  .resize-handler,\n  .rotate-handler {\n    display: none;\n    position: absolute;\n    border: 1px solid #607d8b;\n    background: #fff;\n    box-sizing: border-box;\n    border-radius: 50%;\n  }\n  .rotate-handler {\n    left: 50%;\n    cursor: crosshair;\n  }\n  &.active {\n    border: 1px dashed #607d8b;\n    > .resize-handler-wrapper > .resize-handler,\n    > .rotate-handler {\n      display: inline-block;\n    }\n  }\n  .br,\n  .tr,\n  .tl,\n  .bl {\n    background: #607d8b;\n  }\n}\n</style>\n","var render, staticRenderFns\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","<template>\n  <!-- <div class=\"container\"> -->\n  <!-- <div class=\"\" style=\"position: absolute\">\n      {{ transform }}\n    </div> -->\n  <!-- <div class=\"_moveableItem\">\n    <img class=\"\" :src=\"src\" />\n  </div> -->\n  <DDR\n    class=\"_moveableItem\"\n    :class=\"{\n      'is--locked': publimodule.locked === true,\n      'is--editable': can_edit,\n      'is--active': can_edit && is_active,\n      'is--beingEdited': content_is_edited,\n      'panzoom-exclude': can_edit,\n    }\"\n    :active=\"\n      can_edit &&\n      is_active &&\n      publimodule.locked !== true &&\n      content_is_edited !== true\n    \"\n    :key=\"component_key\"\n    :value=\"transform\"\n    :parent=\"false /* bind to container */\"\n    :acceptRatio=\"aspect_ratio\"\n    :handlerSize=\"15\"\n    :grid=\"grid\"\n    :id=\"publimodule.$path\"\n    :zoom=\"scale\"\n    :style=\"module_z_index\"\n    @dragstart=\"dragStart\"\n    @drag=\"onDrag\"\n    @dragend=\"dragEnd\"\n    @resizestart=\"resizeStart\"\n    @resizeend=\"resizeEnd\"\n    @rotateend=\"rotateEnd\"\n  >\n    <span class=\"_activator\" @mousedown=\"setActive\" @dblclick=\"dblClick\">\n      <PublicationModule\n        class=\"_moveableItem--content\"\n        :publimodule=\"publimodule\"\n        :can_edit=\"can_edit && is_active\"\n        :borderRadius=\"turnCMtoPX(publimodule.border_radius) || 0\"\n        :context=\"'page_by_page'\"\n        :number_of_max_medias=\"1\"\n        @duplicate=\"onDuplicateModule\"\n        @contentIsEdited=\"contentIsEdited\"\n        @contentIsNotEdited=\"contentIsNotEdited\"\n        :style=\"module_styles\"\n      />\n    </span>\n    <div class=\"_unlockBtn\" v-if=\"can_edit\">\n      <button\n        type=\"button\"\n        class=\"u-button u-button_orange u-button_small u-button_round u-colorBlack\"\n        v-if=\"publimodule.locked === true\"\n        @click=\"unlock()\"\n      >\n        <sl-icon name=\"lock\" />\n      </button>\n      <button\n        type=\"button\"\n        class=\"u-button u-button_orange u-button_small u-button_round u-colorBlack\"\n        v-if=\"\n          can_edit &&\n          is_active &&\n          !content_is_edited &&\n          (!publimodule.locked || publimodule.locked === false)\n        \"\n        @click=\"lock()\"\n      >\n        <sl-icon name=\"unlock\" />\n        <!-- {{ $t(\"lock\") }} -->\n      </button>\n    </div>\n\n    <!-- <small class=\"_coords\">\n      x={{ publimodule.x }}; y={{ publimodule.y }}; width={{\n        publimodule.width\n      }}; height={{ publimodule.height }}\n    </small> -->\n  </DDR>\n</template>\n<script>\n/* eslint-disable */\nimport DDR from \"@/ddr/index.vue\"; // eslint-disable-line\n// import DDR from \"yoyoo-ddr\";\nimport \"yoyoo-ddr/dist/yoyoo-ddr.css\";\nimport PublicationModule from \"@/components/publications/modules/PublicationModule.vue\";\n\n/* eslint-disable no-unused-vars */\nexport default {\n  name: \"app\",\n  props: {\n    publimodule: Object,\n    can_edit: Boolean,\n    magnification: Number,\n    gridstep: Number,\n    scale: Number,\n    is_active: Boolean,\n  },\n  components: {\n    DDR,\n    PublicationModule,\n  },\n  data() {\n    return {\n      transform: { x: 0, y: 0, width: 300, height: 300, rotation: 0 },\n      component_key: 1,\n      aspect_ratio: true,\n      content_is_edited: false,\n    };\n  },\n  created() {\n    // if (this.publimodule.x)\n    this.setTransformFromPubli();\n    // else debugger;\n    // todo get ratio from linked image, set initial transform based on that\n\n    this.setNewComponentKey();\n  },\n  mounted() {\n    // console.log(`MoveableItem / mounted ${this.publimodule.$path}`);\n\n    this.$eventHub.$on(`module.panTo.${this.publimodule.$path}`, this.panTo);\n    this.$eventHub.$on(\n      `module.enable_edit.${this.module_meta_filename}`,\n      this.setActive\n    );\n  },\n  beforeDestroy() {\n    this.$eventHub.$off(`module.panTo.${this.publimodule.$path}`, this.panTo);\n    this.$eventHub.$off(\n      `module.enable_edit.${this.module_meta_filename}`,\n      this.setActive\n    );\n  },\n  watch: {\n    publimodule: {\n      handler() {\n        // todo change key to re-render component if coordinates were changed and diff from transform (means it was changed on another client)\n        const was_updated = this.setTransformFromPubli();\n        if (was_updated) this.setNewComponentKey();\n      },\n      deep: true,\n    },\n    magnification() {\n      const was_updated = this.setTransformFromPubli();\n      if (was_updated) this.setNewComponentKey();\n    },\n    is_active() {\n      if (!this.is_active) {\n        this.contentIsNotEdited();\n      }\n    },\n  },\n  computed: {\n    module_meta_filename() {\n      return this.publimodule.$path.split(\"/\").at(-1);\n    },\n    grid() {\n      return [this.gridstep, this.gridstep];\n    },\n    module_z_index() {\n      return `\n        z-index: ${this.publimodule.z_index ? this.publimodule.z_index : 0}\n      `;\n    },\n    module_styles() {\n      return {\n        \"--set-fontSize\": (this.publimodule.text_size || 100) + \"%\",\n        \"--set-margins\":\n          (this.turnCMtoPX(this.publimodule.margins) || 0) + \"px\",\n        \"--set-opacity\": this.publimodule.opacity || 1,\n        \"--set-borderRadius\":\n          (this.turnCMtoPX(this.publimodule.border_radius) || 0) + \"px\",\n        \"--set-backgroundColor\":\n          this.publimodule.background_color || \"transparent\",\n        \"--set-outlineColor\": this.publimodule.outline_color || \"black\",\n        \"--set-outlineWidth\":\n          (this.turnCMtoPX(this.publimodule.outline_width) || 0) + \"px\",\n      };\n    },\n  },\n  methods: {\n    setNewComponentKey() {\n      this.component_key = new Date().getTime();\n    },\n    setTransformFromPubli() {\n      let was_updated = false;\n\n      Object.keys(this.transform).map((k) => {\n        if (typeof this.publimodule[k] === \"number\") {\n          if ([\"x\", \"y\", \"width\", \"height\"].includes(k)) {\n            const px = this.turnCMtoPX(this.publimodule[k]);\n            if (this.transform[k] !== px) {\n              this.transform[k] = px;\n              was_updated = true;\n            }\n          } else if (k === \"rotation\") {\n            if (this.transform[k] !== this.publimodule[k]) {\n              this.transform[k] = this.publimodule[k];\n              was_updated = true;\n            }\n          }\n        }\n      });\n      return was_updated;\n      // this.$set(this.transform, k, this.publimodule[k]);\n    },\n    turnCMtoPX(num) {\n      if (!num) return false;\n      return this.roundToDec(num * this.magnification);\n    },\n    turnPXtoCM(num) {\n      return this.roundToDec(num / this.magnification);\n    },\n    contentIsEdited($toolbar) {\n      this.$eventHub.$emit(`module.text_editing_enabled`, $toolbar);\n      this.content_is_edited = true;\n    },\n    contentIsNotEdited() {\n      this.$eventHub.$emit(`module.text_editing_disabled`);\n      this.content_is_edited = false;\n    },\n    roundToDec(num) {\n      return Math.round((num + Number.EPSILON) * 100) / 100;\n    },\n    firstMedia(page_module) {\n      if (!page_module) return false;\n      try {\n        const media_path = page_module.source_medias[0].path;\n        return this.getSourceMedia({\n          source_media_path: media_path,\n        });\n      } catch (err) {\n        return false;\n      }\n    },\n\n    dragStart() {\n      // console.log(\"dragStart\");\n      // this.$eventHub.$emit(`module.dragStart`);\n    },\n    onDrag(event) {\n      // console.log(\"ondrag\");\n      // todo calculate deltaX with start, propagate to other active modules\n      // see https://github.com/zuimeiaj/yoyoo-ddr/blob/edf46aafd86654ab315cfa5b3fc41d68bb7c0273/src/examples/vseditor/plugins/plugin-selection.vue#L120\n      // this.$eventHub.$emit(`module.onDrag`);\n    },\n    dragEnd(event, transform) {\n      if (JSON.stringify(transform) === JSON.stringify(this.transform))\n        return false;\n      if (\n        this.turnPXtoCM(transform.x) === this.turnPXtoCM(this.transform.x) &&\n        this.turnPXtoCM(transform.y) === this.turnPXtoCM(this.transform.y)\n      )\n        return false;\n\n      // this.transform = transform;\n      this.updateTransform(transform);\n\n      event.stopPropagation();\n    },\n    resizeStart(event, transform) {\n      if (\n        event.target.classList.contains(\"br\") ||\n        event.target.classList.contains(\"bl\") ||\n        event.target.classList.contains(\"tl\") ||\n        event.target.classList.contains(\"tr\")\n      )\n        return (this.aspect_ratio = true);\n      return (this.aspect_ratio = false);\n    },\n    resizeEnd(event, transform) {\n      if (JSON.stringify(transform) === JSON.stringify(this.transform))\n        return false;\n\n      // this.transform = transform;\n      this.updateTransform(transform);\n\n      event.stopPropagation();\n    },\n    rotateEnd(event, transform) {\n      if (JSON.stringify(transform) === JSON.stringify(this.transform))\n        return false;\n\n      // this.transform = transform;\n      this.updateTransform(transform);\n\n      event.stopPropagation();\n    },\n    async updateTransform(transform) {\n      let new_meta = JSON.parse(JSON.stringify(transform));\n      Object.keys(new_meta).map((k) => {\n        if (new_meta[k] !== this.transform[k]) {\n          if ([\"x\", \"y\", \"width\", \"height\"].includes(k)) {\n            new_meta[k] = this.turnPXtoCM(new_meta[k]);\n            this.transform[k] = this.turnCMtoPX(new_meta[k]);\n          } else {\n            this.transform[k] = this.turnCMtoPX(this.turnPXtoCM(new_meta[k]));\n          }\n        } else {\n          delete new_meta[k];\n        }\n      });\n\n      await this.updateModuleMeta({\n        new_meta,\n      });\n    },\n    panTo() {\n      this.$eventHub.$emit(`panzoom.panTo`, {\n        x: this.transform.x,\n        y: this.transform.y,\n      });\n    },\n    setActive($event) {\n      if (this.is_active) return false;\n\n      if (this.content_is_edited) return $event.stopPropagation();\n      if (!this.can_edit || this.is_active) return;\n      if (this.publimodule.locked === true) return;\n\n      this.$eventHub.$emit(`module.setActive`, this.publimodule.$path);\n    },\n    async dblClick() {\n      if (!this.is_active) return;\n\n      const first_media = this.firstMedia(this.publimodule);\n      if (!first_media) return;\n\n      if (first_media.$type === \"text\") this.editText();\n      else {\n        // resize height to match ratio\n        const media_ratio = first_media.$infos?.ratio;\n        const height = this.publimodule.width * media_ratio;\n        await this.updateModuleMeta({\n          new_meta: { height },\n        });\n      }\n    },\n    editText() {\n      const meta_filename = this.publimodule.$path.substring(\n        this.publimodule.$path.lastIndexOf(\"/\") + 1\n      );\n      this.$eventHub.$emit(`module.enable_edit.${meta_filename}`);\n    },\n    async lock() {\n      const new_meta = {\n        locked: true,\n      };\n      await this.updateModuleMeta({\n        new_meta,\n      });\n      this.$eventHub.$emit(`module.setActive`, false);\n    },\n    async unlock() {\n      const new_meta = {\n        locked: false,\n      };\n      await this.updateModuleMeta({\n        new_meta,\n      });\n      setTimeout(() => {\n        this.setActive();\n      }, 100);\n    },\n    async updateModuleMeta({ new_meta }) {\n      await this.$api\n        .updateMeta({\n          path: this.publimodule.$path,\n          new_meta,\n        })\n        .catch((err) => {\n          this.$alertify.delay(4000).error(err);\n          throw err;\n        });\n    },\n    onDuplicateModule(meta_filename) {\n      const path =\n        this.publimodule.$path.substring(\n          0,\n          this.publimodule.$path.lastIndexOf(\"/\") + 1\n        ) + meta_filename;\n      setTimeout(() => {\n        this.$eventHub.$emit(`module.setActive`, path);\n      }, 100);\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n._moveableItem {\n  // not all because of rotate\n  // transition-property: left, top, right, bottom;\n  // transition-duration: 0.15s;\n  // transition-timing-function: cubic-bezier(0.19, 1, 0.22, 1);\n\n  &.is--locked {\n    pointer-events: none;\n  }\n  &.is--active {\n    // z-index: 1500;\n  }\n\n  &.is--editable {\n    ::v-deep .u-floatingFsButton {\n      display: none;\n    }\n  }\n  &.is--editable:not(.is--beingEdited):not(.is--locked) {\n    cursor: pointer;\n    cursor: -webkit-grab;\n    cursor: -moz-grab;\n    cursor: grab;\n  }\n\n  &.is--editable:hover:not(.is--locked) {\n    outline: 2px dotted var(--c-noir);\n  }\n\n  &.is--beingEdited {\n    outline: 2px dotted var(--c-orange) !important;\n\n    ::v-deep {\n      // ._collaborativeEditor .ql-editor {\n      //   background: linear-gradient(rgba(255, 255, 255, 0.6) 55%, transparent);\n      //   padding-bottom: 250px;\n      // }\n    }\n  }\n\n  &.yoyoo-ddr:not(.is--beingEdited) {\n    &.active {\n      border: none;\n      outline: 2px dotted var(--c-orange) !important;\n\n      ::v-deep {\n        .bl,\n        .br,\n        .tl,\n        .tr {\n          background: var(--c-orange);\n        }\n      }\n    }\n    &.ddr-dragging {\n      cursor: -webkit-grabbing;\n      cursor: -moz-grabbing;\n      cursor: dragging;\n\n      // transition-property: left, top, right, bottom;\n      // transition-duration: 0.05s;\n      // transition-timing-function: cubic-bezier(0.19, 1, 0.22, 1);\n    }\n  }\n}\n\n._moveableItem--content {\n  height: 100%;\n  padding: 0;\n  transition: all 0.2s cubic-bezier(0.19, 1, 0.22, 1);\n\n  ::v-deep ._content {\n    height: 100%;\n    overflow: hidden;\n\n    ._moduleMosaic,\n    ._mediaGrid,\n    ._mediaGrid--item,\n    ._mediaContent {\n      height: 100%;\n    }\n    ._mediaContent--image {\n      position: absolute;\n      width: 100%;\n      height: 100%;\n      object-fit: var(--object-fit, cover);\n      object-position: center;\n    }\n    .plyr__poster {\n      background-size: var(--object-fit, cover);\n      background-position: center;\n      background-color: transparent;\n    }\n    .plyr--video,\n    .plyr__video-wrapper {\n      background-color: transparent;\n    }\n\n    .plyr__video-wrapper video {\n      object-fit: var(--object-fit, cover);\n      object-position: center;\n    }\n    .plyr--video {\n      min-width: 50px;\n    }\n  }\n}\n\n// custom props\n._moveableItem ::v-deep {\n  ._publicationModule:not(.is--shape) {\n    // border-radius: var(--set-borderRadius);\n    // overflow: hidden;\n    // outline-color: var(--set-outlineColor);\n    // outline-width: var(--set-outlineWidth);\n    // outline-style: solid;\n\n    .ql-editor {\n      font-size: var(--set-fontSize);\n    }\n    .ql-editor,\n    ._mediaContent--image,\n    ._mediaContent[data-filetype=\"video\"],\n    ._mediaContent[data-filetype=\"url\"],\n    ._mediaContent[data-filetype=\"audio\"] {\n      padding: var(--set-margins);\n      opacity: var(--set-opacity);\n      aspect-ratio: unset;\n\n      border-radius: var(--set-borderRadius);\n      overflow: hidden;\n\n      background: var(--set-backgroundColor);\n      border-color: var(--set-outlineColor);\n      border-width: var(--set-outlineWidth);\n      border-style: solid;\n    }\n  }\n\n  ._publicationModule.is--shape {\n    padding: var(--set-margins);\n    opacity: var(--set-opacity);\n\n    fill: var(--set-backgroundColor);\n    stroke: var(--set-outlineColor);\n    stroke-width: var(--set-outlineWidth);\n  }\n}\n\n._moveableItem.is--editable:not(.is--beingEdited):not(.is--locked) ._activator {\n  &::after {\n    content: \"\";\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background-color: var(--c-orange_clair);\n    opacity: 0;\n\n    transition: opacity 0.4s cubic-bezier(0.19, 1, 0.22, 1);\n  }\n\n  &:hover {\n    &::after {\n      opacity: 0.15;\n    }\n  }\n}\n._coords {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  background: white;\n  margin: calc(var(--spacing) * 1);\n  // padding: calc(var(--spacing) * 1);\n}\n\n._unlockBtn {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  pointer-events: none;\n  padding: calc(var(--spacing) / 2);\n\n  display: flex;\n  justify-content: flex-start;\n\n  > * {\n    // background: white;\n    pointer-events: auto;\n  }\n}\n</style>\n","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37[0].rules[0].use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./MoveableItem.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37[0].rules[0].use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./MoveableItem.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MoveableItem.vue?vue&type=template&id=07f6c52b&scoped=true&\"\nimport script from \"./MoveableItem.vue?vue&type=script&lang=js&\"\nexport * from \"./MoveableItem.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MoveableItem.vue?vue&type=style&index=0&id=07f6c52b&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"07f6c52b\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div\n    class=\"_singlePage\"\n    :class=\"{\n      'is--preview': context === 'list',\n      'is--editable': can_edit,\n    }\"\n  >\n    <div class=\"_pagecontainer\" :style=\"page_styles\">\n      <div class=\"_pagecontent\">\n        <svg\n          v-if=\"can_edit && show_grid\"\n          class=\"_grid\"\n          width=\"100%\"\n          height=\"100%\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n        >\n          <defs>\n            <pattern\n              id=\"gridSmall\"\n              :width=\"gridstep\"\n              :height=\"gridstep\"\n              patternUnits=\"userSpaceOnUse\"\n            >\n              <path\n                :d=\"`M ${gridstep} 0 L 0 0 0 ${gridstep}`\"\n                fill=\"none\"\n                stroke=\"var(--c-gridlines)\"\n                strokeWidth=\"1\"\n              />\n            </pattern>\n            <pattern\n              id=\"grid\"\n              :width=\"gridstep * 5\"\n              :height=\"gridstep * 5\"\n              patternUnits=\"userSpaceOnUse\"\n            >\n              <rect\n                :width=\"gridstep * 5\"\n                :height=\"gridstep * 5\"\n                fill=\"url(#gridSmall)\"\n              ></rect>\n              <path\n                :d=\"`M ${gridstep * 5} 0 L 0 0 0 ${gridstep * 5}`\"\n                fill=\"none\"\n                stroke=\"var(--c-gridfiveslines)\"\n                strokeWidth=\"1\"\n              />\n            </pattern>\n          </defs>\n          <rect width=\"100%\" height=\"100%\" fill=\"url(#grid)\"></rect>\n        </svg>\n\n        <MoveableItem\n          class=\"_item\"\n          v-for=\"publimodule in page_modules\"\n          :key=\"publimodule.$path\"\n          :publimodule=\"publimodule\"\n          :magnification=\"magnification\"\n          :gridstep=\"show_grid && snap_to_grid ? gridstep : 1\"\n          :scale=\"scale\"\n          :can_edit=\"can_edit\"\n          :is_active=\"active_module.$path === publimodule.$path\"\n        />\n\n        <svg\n          v-if=\"can_edit && l_margins\"\n          class=\"_margins\"\n          width=\"100%\"\n          height=\"100%\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n          fill=\"transparent\"\n        >\n          <rect\n            :x=\"magnify(l_margins.left)\"\n            :y=\"magnify(l_margins.top)\"\n            :width=\"magnify(page_width - l_margins.left - l_margins.right)\"\n            :height=\"magnify(page_height - l_margins.top - l_margins.bottom)\"\n          />\n        </svg>\n\n        <div\n          class=\"_pagination\"\n          v-if=\"pagination && !hide_pagination && page_number_corrected > 0\"\n          :style=\"pagination_styles\"\n        >\n          {{ page_number_corrected }}\n        </div>\n\n        <svg\n          v-if=\"can_edit && l_margins\"\n          class=\"_pageBorders\"\n          width=\"100%\"\n          height=\"100%\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n          fill=\"transparent\"\n        >\n          <rect\n            x=\"0\"\n            y=\"0\"\n            :width=\"magnify(page_width)\"\n            :height=\"magnify(page_height)\"\n            stroke=\"black\"\n          />\n\n          <!-- white overlay on everything outside the page -->\n          <!-- <rect\n            :x=\"-1000\"\n            :y=\"-1000\"\n            :width=\"magnify(page_width) / zoom\"\n            :height=\"magnify(page_height) / zoom\"\n            stroke=\"black\"\n            fill=\"rgba(255,255,255,.7)\"\n            mask=\"url(#globeOuterOnly)\"\n          /> -->\n\n          <!-- <defs>\n            <mask id=\"globeOuterOnly\">\n              <rect\n                :x=\"(-1 * magnify(page_width)) / zoom\"\n                :y=\"(-1 * magnify(page_height)) / zoom\"\n                :width=\"magnify(page_width) / zoom\"\n                :height=\"magnify(page_height) / zoom\"\n                fill=\"white\"\n              />\n              <rect\n                x=\"0\"\n                y=\"0\"\n                :width=\"magnify(page_width)\"\n                :height=\"magnify(page_height)\"\n                fill=\"black\"\n              />\n            </mask>\n          </defs> -->\n        </svg>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\nimport MoveableItem from \"@/components/publications/page_by_page/MoveableItem.vue\";\n\nexport default {\n  props: {\n    context: String,\n    page_modules: Array,\n    page_width: Number,\n    page_height: Number,\n    page_color: String,\n    hide_pagination: Boolean,\n    zoom: { type: Number, default: 1 },\n    scale: { type: Number, default: 1 },\n    show_grid: { type: Boolean, default: false },\n    snap_to_grid: { type: Boolean, default: false },\n    gridstep_in_cm: Number,\n    margins: Object,\n    page_number: Number,\n    pagination: [Boolean, Object],\n    active_module: [Boolean, Object],\n    page_is_left: Boolean,\n    can_edit: Boolean,\n  },\n  components: {\n    MoveableItem,\n  },\n  data() {\n    return {};\n  },\n  created() {},\n  mounted() {},\n  beforeDestroy() {},\n  watch: {},\n  computed: {\n    l_margins() {\n      if (Object.keys(this.margins).length === 0) return false;\n      if (this.page_is_left === true)\n        return {\n          left: this.margins.right,\n          right: this.margins.left,\n          top: this.margins.top,\n          bottom: this.margins.bottom,\n        };\n      else return this.margins;\n    },\n    gridstep() {\n      if (!this.gridstep_in_cm) return 0;\n      return this.magnify(this.gridstep_in_cm);\n    },\n    magnification() {\n      return this.$root.page_magnification;\n    },\n    page_styles() {\n      const props = {};\n\n      if (this.page_width && this.page_height) {\n        props[\"--page-width\"] = `${this.magnify(this.page_width)}px`;\n        props[\"--page-height\"] = `${this.magnify(this.page_height)}px`;\n      }\n\n      props[\"--zoom\"] = this.zoom;\n      props[\"--page-color\"] = this.page_color || \"#fff\";\n\n      return props;\n    },\n    page_number_corrected() {\n      return this.page_number - this.pagination.pagination_start_on_page;\n    },\n    pagination_styles() {\n      const props = {};\n\n      if (this.page_is_left === true) {\n        props[\"--pagination-left\"] = `${this.magnify(this.pagination.right)}px`;\n      } else {\n        props[\"--pagination-right\"] = `${this.magnify(\n          this.pagination.right\n        )}px`;\n      }\n\n      props[\"--pagination-bottom\"] = `${this.magnify(\n        this.pagination.bottom\n      )}px`;\n\n      return props;\n    },\n  },\n  methods: {\n    magnify(m) {\n      return m * this.magnification;\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n._singlePage {\n  // padding: calc(var(--spacing) * 1);\n}\n\n._pagecontainer {\n  width: calc(var(--page-width));\n  height: calc(var(--page-height));\n  padding: 0;\n  // margin: calc(var(--spacing) * 4);\n\n  transform: scale(var(--zoom));\n  transform-origin: 0 0;\n\n  transition: all 0.4s cubic-bezier(0.19, 1, 0.22, 1);\n\n  .is--preview & {\n    width: calc(var(--page-width) * var(--zoom));\n    height: calc(var(--page-height) * var(--zoom));\n\n    transform-origin: left top;\n    margin: 0 auto;\n    padding: 0;\n  }\n}\n\n._pagecontent {\n  display: block;\n  position: relative;\n  z-index: 0;\n\n  margin: 0 auto;\n  width: var(--page-width, 10cm);\n  height: var(--page-height, 10cm);\n  background: var(--page-color, white);\n\n  overflow: hidden;\n  box-shadow: 0 3px 6px rgba(0, 0, 0, 0.16), 0 3px 6px rgba(0, 0, 0, 0.23);\n\n  transition: background 0.4s cubic-bezier(0.19, 1, 0.22, 1);\n\n  ._singlePage.is--editable & {\n    overflow: visible;\n  }\n}\n\n._item {\n  // position: absolute;\n}\n\n._grid {\n  position: absolute;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n  opacity: 0.6;\n\n  z-index: -10000;\n\n  --c-gridlines: #aaa;\n  --c-gridfiveslines: #111;\n}\n._pageBorders {\n  position: absolute;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n  stroke-width: 2px;\n}\n._margins {\n  position: absolute;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n\n  stroke-width: 2px;\n  stroke: hsl(280, 97%, 70%);\n}\n\n._pagination {\n  position: absolute;\n  right: var(--pagination-right);\n  left: var(--pagination-left);\n  bottom: var(--pagination-bottom);\n  font-weight: 500;\n  line-height: 0.5;\n  font-size: var(--sl-font-size-large);\n}\n</style>\n","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37[0].rules[0].use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SinglePage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37[0].rules[0].use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SinglePage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SinglePage.vue?vue&type=template&id=88ba45a0&scoped=true&\"\nimport script from \"./SinglePage.vue?vue&type=script&lang=js&\"\nexport * from \"./SinglePage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SinglePage.vue?vue&type=style&index=0&id=88ba45a0&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"88ba45a0\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"_pageTemplate\"},[(_vm.can_edit)?_c('RadioSwitch',{attrs:{\"content\":_vm.current_view,\"options\":[\n      {\n        label: _vm.$t('settings'),\n        value: 'settings',\n      },\n      {\n        label:\n          _vm.publication.page_spreads === true\n            ? _vm.$t('list_of_spreads')\n            : _vm.$t('list_of_pages'),\n        value: 'pages',\n      } ]},on:{\"update:content\":function($event){_vm.current_view=$event}}}):_vm._e(),_c('br'),(_vm.current_view === 'settings' && _vm.can_edit)?_c('PageSettings',{attrs:{\"publication\":_vm.publication}}):_c('PagesList',{attrs:{\"publication\":_vm.publication,\"page_opened_id\":_vm.page_opened_id,\"can_edit\":_vm.can_edit},on:{\"togglePage\":function($event){return _vm.$emit('togglePage', $event)},\"closePublication\":function($event){return _vm.$emit('closePublication')}}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"_pageSettings\"},[_c('WidthHeightField',{attrs:{\"publication\":_vm.publication}}),_c('br'),_c('ToggleField',{attrs:{\"label\":_vm.$t('page_spreads'),\"field_name\":'page_spreads',\"content\":_vm.publication.page_spreads,\"path\":_vm.publication.$path,\"can_edit\":true}}),_c('br'),_c('SetMargins',{attrs:{\"publication\":_vm.publication,\"is_spread\":_vm.publication.page_spreads === true}}),_c('br'),_c('PaginationOption',{attrs:{\"publication\":_vm.publication,\"is_spread\":_vm.publication.page_spreads === true}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"_widthHeightField\"},[_c('fieldset',[_c('legend',{staticClass:\"u-label\"},[_vm._v(_vm._s(_vm.$t(\"format\")))]),_c('select',{attrs:{\"disabled\":!_vm.edit_mode},domProps:{\"value\":_vm.predefined_format_from_width},on:{\"change\":_vm.setSizeFromFormat}},_vm._l((_vm.format_options),function(option){return _c('option',{key:option.key,domProps:{\"value\":option.key,\"textContent\":_vm._s(option.text)}})}),0),_c('br'),_c('div',{staticClass:\"u-sameRow\"},[_c('div',{},[_c('DLabel',{attrs:{\"str\":_vm.$t('width')}}),_c('div',{staticClass:\"u-inputGroup\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.new_page_width),expression:\"new_page_width\",modifiers:{\"number\":true}}],attrs:{\"type\":\"number\",\"disabled\":!_vm.edit_mode},domProps:{\"value\":(_vm.new_page_width)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.new_page_width=_vm._n($event.target.value)},\"blur\":function($event){return _vm.$forceUpdate()}}}),_c('span',{staticClass:\"u-suffix\"},[_vm._v(\"cm\")])])],1),_c('div',{},[_c('DLabel',{attrs:{\"str\":_vm.$t('height')}}),_c('div',{staticClass:\"u-inputGroup\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.new_page_height),expression:\"new_page_height\",modifiers:{\"number\":true}}],attrs:{\"type\":\"number\",\"disabled\":!_vm.edit_mode},domProps:{\"value\":(_vm.new_page_height)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.new_page_height=_vm._n($event.target.value)},\"blur\":function($event){return _vm.$forceUpdate()}}}),_c('span',{staticClass:\"u-suffix\"},[_vm._v(\"cm\")])])],1)]),_c('div',{staticClass:\"u-instructions\"},[_c('small',[_vm._v(_vm._s(_vm.$t(\"format_instructions\")))])]),_c('br'),(_vm.can_edit && !_vm.edit_mode)?_c('EditBtn',{on:{\"click\":_vm.enableEditMode}}):_vm._e(),(_vm.edit_mode)?_c('div',{staticClass:\"_footer\"},[_c('SaveCancelButtons',{staticClass:\"_scb\",attrs:{\"is_saving\":_vm.is_saving},on:{\"save\":_vm.updateSize,\"cancel\":_vm.cancel}})],1):_vm._e()],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"_widthHeightField\">\n    <fieldset>\n      <legend class=\"u-label\">{{ $t(\"format\") }}</legend>\n\n      <select\n        @change=\"setSizeFromFormat\"\n        :value=\"predefined_format_from_width\"\n        :disabled=\"!edit_mode\"\n      >\n        <option\n          v-for=\"option in format_options\"\n          :key=\"option.key\"\n          :value=\"option.key\"\n          v-text=\"option.text\"\n        />\n      </select>\n\n      <br />\n\n      <div class=\"u-sameRow\">\n        <div class=\"\">\n          <DLabel :str=\"$t('width')\" />\n          <div class=\"u-inputGroup\">\n            <input\n              type=\"number\"\n              :disabled=\"!edit_mode\"\n              v-model.number=\"new_page_width\"\n            />\n            <span class=\"u-suffix\">cm</span>\n          </div>\n        </div>\n        <div class=\"\">\n          <DLabel :str=\"$t('height')\" />\n          <div class=\"u-inputGroup\">\n            <input\n              type=\"number\"\n              :disabled=\"!edit_mode\"\n              v-model.number=\"new_page_height\"\n            />\n            <span class=\"u-suffix\">cm</span>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"u-instructions\">\n        <small>{{ $t(\"format_instructions\") }}</small>\n      </div>\n\n      <br />\n\n      <EditBtn v-if=\"can_edit && !edit_mode\" @click=\"enableEditMode\" />\n\n      <div class=\"_footer\" v-if=\"edit_mode\">\n        <SaveCancelButtons\n          class=\"_scb\"\n          :is_saving=\"is_saving\"\n          @save=\"updateSize\"\n          @cancel=\"cancel\"\n        />\n      </div>\n    </fieldset>\n  </div>\n</template>\n<script>\nexport default {\n  props: {\n    publication: Object,\n  },\n  components: {},\n  data() {\n    return {\n      edit_mode: false,\n      is_saving: false,\n      can_edit: true,\n\n      new_page_width: this.publication.page_width,\n      new_page_height: this.publication.page_height,\n\n      format_options: [\n        {\n          key: \"A4_portrait\",\n          text: this.$t(\"A4_portrait\"),\n          width: 21,\n          height: 29.7,\n          // instruction: this.$t(\"A4_portrait_explanations\"),\n        },\n        {\n          key: \"A4_landscape\",\n          text: this.$t(\"A4_landscape\"),\n          width: 29.7,\n          height: 21,\n          // instruction: this.$t(\"A4_landscape_explanations\"),\n        },\n        {\n          key: \"A5_portrait\",\n          text: this.$t(\"A5_portrait\"),\n          width: 14.8,\n          height: 21,\n          // instruction: this.$t(\"A5_portrait_explanations\"),\n        },\n        {\n          key: \"A5_landscape\",\n          text: this.$t(\"A5_landscape\"),\n          width: 21,\n          height: 14.8,\n          // instruction: this.$t(\"A5_landscape_explanations\"),\n        },\n        {\n          key: \"custom\",\n          text: this.$t(\"custom\"),\n          // instruction: this.$t(\"custom_format_explanations\"),\n        },\n      ],\n    };\n  },\n  created() {},\n  mounted() {},\n  beforeDestroy() {},\n  watch: {},\n  computed: {\n    predefined_format_from_width() {\n      const format = this.format_options.find(\n        (f) =>\n          f.width === this.new_page_width && f.height === this.new_page_height\n      );\n\n      if (format) return format.key;\n\n      return \"custom\";\n    },\n  },\n  methods: {\n    enableEditMode() {\n      this.edit_mode = true;\n    },\n    setSizeFromFormat($event) {\n      const key = $event.target.value;\n      if (key === \"custom\") return;\n\n      const format = this.format_options.find((f) => f.key === key);\n\n      this.new_page_width = format.width;\n      this.new_page_height = format.height;\n    },\n    cancel() {\n      this.edit_mode = false;\n      this.is_saving = false;\n      this.new_content = this.content;\n\n      this.$nextTick(() => {\n        // this.content = \"\";\n        // this.$nextTick(() => {\n        // this.content = this.new_content;\n        // });\n      });\n      // todo interrupt updateMeta\n    },\n    async updateSize() {\n      this.is_saving = true;\n\n      try {\n        const new_meta = {\n          page_width: this.new_page_width,\n          page_height: this.new_page_height,\n        };\n        await this.$api.updateMeta({\n          path: this.publication.$path,\n          new_meta,\n        });\n\n        this.edit_mode = false;\n        this.is_saving = false;\n      } catch (e) {\n        this.is_saving = false;\n        this.edit_mode = false;\n\n        this.$alertify\n          .closeLogOnClick(true)\n          .delay(4000)\n          .error(this.$t(\"notifications.couldntbesaved\"));\n        this.$alertify.closeLogOnClick(true).error(e.response.data);\n      }\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped></style>\n","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37[0].rules[0].use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./WidthHeightField.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37[0].rules[0].use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./WidthHeightField.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./WidthHeightField.vue?vue&type=template&id=2fe86789&scoped=true&\"\nimport script from \"./WidthHeightField.vue?vue&type=script&lang=js&\"\nexport * from \"./WidthHeightField.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2fe86789\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('fieldset',[_c('legend',{staticClass:\"u-label\"},[_vm._v(_vm._s(_vm.$t(\"margins\")))]),_c('div',{staticClass:\"u-instructions\"},[_c('small',[_vm._v(_vm._s(_vm.$t(\"margins_instructions\")))])]),_c('br'),_c('div',{staticClass:\"u-sameRow\"},[_c('div',{},[_c('DLabel',{attrs:{\"str\":_vm.$t('top')}}),_c('div',{staticClass:\"u-inputGroup\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.top),expression:\"top\",modifiers:{\"number\":true}}],attrs:{\"type\":\"number\",\"disabled\":!_vm.edit_mode},domProps:{\"value\":(_vm.top)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.top=_vm._n($event.target.value)},\"blur\":function($event){return _vm.$forceUpdate()}}}),_c('span',{staticClass:\"u-suffix\"},[_vm._v(\"cm\")])])],1),_c('div',{},[_c('DLabel',{attrs:{\"str\":_vm.$t('bottom')}}),_c('div',{staticClass:\"u-inputGroup\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.bottom),expression:\"bottom\",modifiers:{\"number\":true}}],attrs:{\"type\":\"number\",\"disabled\":!_vm.edit_mode},domProps:{\"value\":(_vm.bottom)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.bottom=_vm._n($event.target.value)},\"blur\":function($event){return _vm.$forceUpdate()}}}),_c('span',{staticClass:\"u-suffix\"},[_vm._v(\"cm\")])])],1)]),_c('br'),_c('div',{staticClass:\"u-sameRow\"},[_c('div',{},[_c('DLabel',{attrs:{\"str\":_vm.is_spread ? _vm.$t('margins_inside') : _vm.$t('left')}}),_c('div',{staticClass:\"u-inputGroup\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.left),expression:\"left\",modifiers:{\"number\":true}}],attrs:{\"type\":\"number\",\"disabled\":!_vm.edit_mode},domProps:{\"value\":(_vm.left)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.left=_vm._n($event.target.value)},\"blur\":function($event){return _vm.$forceUpdate()}}}),_c('span',{staticClass:\"u-suffix\"},[_vm._v(\"cm\")])])],1),_c('br'),_c('div',{},[_c('DLabel',{attrs:{\"str\":_vm.is_spread ? _vm.$t('margins_outside') : _vm.$t('right')}}),_c('div',{staticClass:\"u-inputGroup\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.right),expression:\"right\",modifiers:{\"number\":true}}],attrs:{\"type\":\"number\",\"disabled\":!_vm.edit_mode},domProps:{\"value\":(_vm.right)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.right=_vm._n($event.target.value)},\"blur\":function($event){return _vm.$forceUpdate()}}}),_c('span',{staticClass:\"u-suffix\"},[_vm._v(\"cm\")])])],1)]),_c('br'),(_vm.can_edit && !_vm.edit_mode)?_c('EditBtn',{on:{\"click\":_vm.enableEditMode}}):_vm._e(),(_vm.edit_mode)?_c('div',{staticClass:\"_footer\"},[_c('SaveCancelButtons',{staticClass:\"_scb\",attrs:{\"is_saving\":_vm.is_saving},on:{\"save\":_vm.updateMargins,\"cancel\":_vm.cancel}})],1):_vm._e()],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <fieldset>\n      <legend class=\"u-label\">{{ $t(\"margins\") }}</legend>\n      <div class=\"u-instructions\">\n        <small>{{ $t(\"margins_instructions\") }}</small>\n      </div>\n\n      <br />\n\n      <div class=\"u-sameRow\">\n        <div class=\"\">\n          <DLabel :str=\"$t('top')\" />\n          <div class=\"u-inputGroup\">\n            <input type=\"number\" v-model.number=\"top\" :disabled=\"!edit_mode\" />\n            <span class=\"u-suffix\">cm</span>\n          </div>\n        </div>\n        <div class=\"\">\n          <DLabel :str=\"$t('bottom')\" />\n          <div class=\"u-inputGroup\">\n            <input\n              type=\"number\"\n              v-model.number=\"bottom\"\n              :disabled=\"!edit_mode\"\n            />\n            <span class=\"u-suffix\">cm</span>\n          </div>\n        </div>\n      </div>\n      <br />\n      <div class=\"u-sameRow\">\n        <div class=\"\">\n          <DLabel :str=\"is_spread ? $t('margins_inside') : $t('left')\" />\n          <div class=\"u-inputGroup\">\n            <input type=\"number\" v-model.number=\"left\" :disabled=\"!edit_mode\" />\n            <span class=\"u-suffix\">cm</span>\n          </div>\n        </div>\n        <br />\n        <div class=\"\">\n          <DLabel :str=\"is_spread ? $t('margins_outside') : $t('right')\" />\n          <div class=\"u-inputGroup\">\n            <input\n              type=\"number\"\n              v-model.number=\"right\"\n              :disabled=\"!edit_mode\"\n            />\n            <span class=\"u-suffix\">cm</span>\n          </div>\n        </div>\n      </div>\n\n      <br />\n      <EditBtn v-if=\"can_edit && !edit_mode\" @click=\"enableEditMode\" />\n\n      <div class=\"_footer\" v-if=\"edit_mode\">\n        <SaveCancelButtons\n          class=\"_scb\"\n          :is_saving=\"is_saving\"\n          @save=\"updateMargins\"\n          @cancel=\"cancel\"\n        />\n      </div>\n    </fieldset>\n  </div>\n</template>\n<script>\nexport default {\n  props: {\n    publication: Object,\n    is_spread: Boolean,\n  },\n  components: {},\n  data() {\n    return {\n      edit_mode: false,\n      is_saving: false,\n      can_edit: true,\n\n      top: this.publication.page_margin_top || 0,\n      bottom: this.publication.page_margin_bottom || 0,\n      left: this.publication.page_margin_left || 0,\n      right: this.publication.page_margin_right || 0,\n    };\n  },\n  created() {},\n  mounted() {},\n  beforeDestroy() {},\n  watch: {},\n  computed: {},\n  methods: {\n    enableEditMode() {\n      this.edit_mode = true;\n    },\n    cancel() {\n      this.edit_mode = false;\n      this.is_saving = false;\n      // todo interrupt updateMeta\n    },\n    async updateMargins() {\n      this.is_saving = true;\n\n      try {\n        const new_meta = {\n          page_margin_top: this.top,\n          page_margin_bottom: this.bottom,\n          page_margin_left: this.left,\n          page_margin_right: this.right,\n        };\n        await this.$api.updateMeta({\n          path: this.publication.$path,\n          new_meta,\n        });\n\n        this.edit_mode = false;\n        this.is_saving = false;\n      } catch (e) {\n        this.is_saving = false;\n        this.edit_mode = false;\n\n        this.$alertify\n          .closeLogOnClick(true)\n          .delay(4000)\n          .error(this.$t(\"notifications.couldntbesaved\"));\n        this.$alertify.closeLogOnClick(true).error(e.response.data);\n      }\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped></style>\n","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37[0].rules[0].use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SetMargins.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37[0].rules[0].use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SetMargins.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SetMargins.vue?vue&type=template&id=1d1dac2f&scoped=true&\"\nimport script from \"./SetMargins.vue?vue&type=script&lang=js&\"\nexport * from \"./SetMargins.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1d1dac2f\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('fieldset',[_c('legend',{staticClass:\"u-label\"},[_vm._v(_vm._s(_vm.$t(\"pagination\")))]),_c('div',{staticClass:\"u-instructions\"},[_c('small',[_vm._v(_vm._s(_vm.$t(\"pagination_instructions\")))]),(_vm.is_spread)?_c('small',[_vm._v(\" \"+_vm._s(_vm.$t(\"pagination_instructions_spread\")))]):_vm._e()]),_c('div',{staticClass:\"u-sameRow\"},[_c('ToggleInput',{attrs:{\"content\":_vm.enable_pagination,\"label\":_vm.$t('enable'),\"disabled\":!_vm.edit_mode},on:{\"update:content\":function($event){_vm.enable_pagination=$event}}})],1),_c('br'),_c('div',{},[_c('DLabel',{attrs:{\"str\":_vm.$t('pagn_starts_on_page')}}),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.pagn_starts_on_page),expression:\"pagn_starts_on_page\",modifiers:{\"number\":true}}],attrs:{\"type\":\"number\",\"disabled\":!_vm.edit_mode},domProps:{\"value\":(_vm.pagn_starts_on_page)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.pagn_starts_on_page=_vm._n($event.target.value)},\"blur\":function($event){return _vm.$forceUpdate()}}})],1),_c('br'),_c('div',{staticClass:\"u-sameRow\"},[_c('div',{},[_c('DLabel',{attrs:{\"str\":_vm.is_spread ? _vm.$t('distance_to_outside') : _vm.$t('distance_to_right')}}),_c('div',{staticClass:\"u-inputGroup\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.right),expression:\"right\",modifiers:{\"number\":true}}],attrs:{\"type\":\"number\",\"disabled\":!_vm.edit_mode},domProps:{\"value\":(_vm.right)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.right=_vm._n($event.target.value)},\"blur\":function($event){return _vm.$forceUpdate()}}}),_c('span',{staticClass:\"u-suffix\"},[_vm._v(\"cm\")])])],1),_c('div',{},[_c('DLabel',{attrs:{\"str\":_vm.$t('distance_to_bottom')}}),_c('div',{staticClass:\"u-inputGroup\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.bottom),expression:\"bottom\",modifiers:{\"number\":true}}],attrs:{\"type\":\"number\",\"disabled\":!_vm.edit_mode},domProps:{\"value\":(_vm.bottom)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.bottom=_vm._n($event.target.value)},\"blur\":function($event){return _vm.$forceUpdate()}}}),_c('span',{staticClass:\"u-suffix\"},[_vm._v(\"cm\")])])],1)]),_c('br'),(_vm.can_edit && !_vm.edit_mode)?_c('EditBtn',{on:{\"click\":_vm.enableEditMode}}):_vm._e(),(_vm.edit_mode)?_c('div',{staticClass:\"_footer\"},[_c('SaveCancelButtons',{staticClass:\"_scb\",attrs:{\"is_saving\":_vm.is_saving},on:{\"save\":_vm.updatePagination,\"cancel\":_vm.cancel}})],1):_vm._e()],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <fieldset>\n      <legend class=\"u-label\">{{ $t(\"pagination\") }}</legend>\n      <div class=\"u-instructions\">\n        <small>{{ $t(\"pagination_instructions\") }}</small>\n        <small v-if=\"is_spread\"\n          >&#32;{{ $t(\"pagination_instructions_spread\") }}</small\n        >\n      </div>\n\n      <div class=\"u-sameRow\">\n        <ToggleInput\n          :content.sync=\"enable_pagination\"\n          :label=\"$t('enable')\"\n          :disabled=\"!edit_mode\"\n        />\n      </div>\n      <br />\n\n      <div class=\"\">\n        <DLabel :str=\"$t('pagn_starts_on_page')\" />\n        <input\n          type=\"number\"\n          v-model.number=\"pagn_starts_on_page\"\n          :disabled=\"!edit_mode\"\n        />\n      </div>\n\n      <br />\n      <div class=\"u-sameRow\">\n        <div class=\"\">\n          <DLabel\n            :str=\"\n              is_spread ? $t('distance_to_outside') : $t('distance_to_right')\n            \"\n          />\n          <div class=\"u-inputGroup\">\n            <input\n              type=\"number\"\n              v-model.number=\"right\"\n              :disabled=\"!edit_mode\"\n            />\n            <span class=\"u-suffix\">cm</span>\n          </div>\n        </div>\n        <div class=\"\">\n          <DLabel :str=\"$t('distance_to_bottom')\" />\n          <div class=\"u-inputGroup\">\n            <input\n              type=\"number\"\n              v-model.number=\"bottom\"\n              :disabled=\"!edit_mode\"\n            />\n            <span class=\"u-suffix\">cm</span>\n          </div>\n        </div>\n      </div>\n\n      <br />\n      <EditBtn v-if=\"can_edit && !edit_mode\" @click=\"enableEditMode\" />\n\n      <div class=\"_footer\" v-if=\"edit_mode\">\n        <SaveCancelButtons\n          class=\"_scb\"\n          :is_saving=\"is_saving\"\n          @save=\"updatePagination\"\n          @cancel=\"cancel\"\n        />\n      </div>\n    </fieldset>\n  </div>\n</template>\n<script>\nexport default {\n  props: {\n    publication: Object,\n    is_spread: Boolean,\n  },\n  components: {},\n  data() {\n    return {\n      edit_mode: false,\n      is_saving: false,\n      can_edit: true,\n\n      enable_pagination: this.publication.enable_pagination || false,\n      pagn_starts_on_page: this.publication.pagn_starts_on_page || 1,\n      right: this.publication.pagn_right || 2,\n      bottom: this.publication.pagn_bottom || 2,\n    };\n  },\n  created() {},\n  mounted() {},\n  beforeDestroy() {},\n  watch: {},\n  computed: {},\n  methods: {\n    enableEditMode() {\n      this.edit_mode = true;\n    },\n    cancel() {\n      this.edit_mode = false;\n      this.is_saving = false;\n      this.enable_pagination = this.publication.enable_pagination;\n      this.pagn_starts_on_page = this.publication.pagn_starts_on_page;\n      this.right = this.publication.pagn_right || 2;\n      this.bottom = this.publication.pagn_bottom || 2;\n    },\n    async updatePagination() {\n      this.is_saving = true;\n\n      try {\n        const new_meta = {\n          enable_pagination: this.enable_pagination,\n          pagn_starts_on_page: this.pagn_starts_on_page,\n          pagn_right: this.right,\n          pagn_bottom: this.bottom,\n        };\n        await this.$api.updateMeta({\n          path: this.publication.$path,\n          new_meta,\n        });\n\n        this.edit_mode = false;\n        this.is_saving = false;\n      } catch (e) {\n        this.is_saving = false;\n        this.edit_mode = false;\n\n        this.$alertify\n          .closeLogOnClick(true)\n          .delay(4000)\n          .error(this.$t(\"notifications.couldntbesaved\"));\n        this.$alertify.closeLogOnClick(true).error(e.response.data);\n      }\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped></style>\n","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37[0].rules[0].use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PaginationOption.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37[0].rules[0].use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PaginationOption.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PaginationOption.vue?vue&type=template&id=054221c2&scoped=true&\"\nimport script from \"./PaginationOption.vue?vue&type=script&lang=js&\"\nexport * from \"./PaginationOption.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"054221c2\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"_pageSettings\">\n    <WidthHeightField :publication=\"publication\" />\n\n    <br />\n\n    <ToggleField\n      :label=\"$t('page_spreads')\"\n      :field_name=\"'page_spreads'\"\n      :content=\"publication.page_spreads\"\n      :path=\"publication.$path\"\n      :can_edit=\"true\"\n    />\n\n    <br />\n\n    <SetMargins\n      :publication=\"publication\"\n      :is_spread=\"publication.page_spreads === true\"\n    />\n\n    <br />\n\n    <PaginationOption\n      :publication=\"publication\"\n      :is_spread=\"publication.page_spreads === true\"\n    />\n  </div>\n</template>\n<script>\nimport WidthHeightField from \"@/components/publications/page_by_page/WidthHeightField.vue\";\nimport SetMargins from \"@/components/publications/page_by_page/SetMargins.vue\";\nimport PaginationOption from \"@/components/publications/page_by_page/PaginationOption.vue\";\n\nexport default {\n  props: {\n    publication: Object,\n  },\n  components: {\n    WidthHeightField,\n    SetMargins,\n    PaginationOption,\n  },\n  data() {\n    return {};\n  },\n  created() {},\n  mounted() {},\n  beforeDestroy() {},\n  watch: {},\n  computed: {},\n  methods: {},\n};\n</script>\n<style lang=\"scss\" scoped>\n._pageSettings {\n  background: white;\n\n  max-width: 380px;\n  padding: calc(var(--spacing) * 1);\n  margin: 0 auto calc(var(--spacing) * 1);\n}\n</style>\n","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37[0].rules[0].use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PageSettings.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37[0].rules[0].use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PageSettings.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PageSettings.vue?vue&type=template&id=6793dcf2&scoped=true&\"\nimport script from \"./PageSettings.vue?vue&type=script&lang=js&\"\nexport * from \"./PageSettings.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PageSettings.vue?vue&type=style&index=0&id=6793dcf2&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6793dcf2\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('transition',{attrs:{\"name\":\"slideup\"}},[(!_vm.page_opened_id)?_c('transition-group',{key:\"allpages\",staticClass:\"_allPages\",attrs:{\"tag\":\"div\",\"name\":\"listComplete\"}},[(!_vm.is_spread)?_vm._l((_vm.pages),function(page,index){return _c('div',{key:'page-' + page.id,staticClass:\"_page\"},[_c('div',{staticClass:\"_preview\"},[_c('SinglePage',{attrs:{\"context\":'list',\"zoom\":_vm.page_preview_zoom,\"page_modules\":_vm.getModulesForPage({ modules: _vm.modules, page_id: page.id }),\"page_width\":_vm.publication.page_width,\"page_height\":_vm.publication.page_height,\"page_color\":page.page_color,\"can_edit\":false}}),_c('button',{staticClass:\"u-button _openPage\",attrs:{\"type\":\"button\"},domProps:{\"innerHTML\":_vm._s(_vm.$t('open'))},on:{\"click\":function($event){return _vm.$emit('togglePage', page.id)}}})],1),_c('div',{staticClass:\"_label\"},[_c('b',{},[_vm._v(\" \"+_vm._s(_vm.$t(\"page\"))+\" \")]),_c('SelectField',{key:'page-' + index,attrs:{\"content\":index + 1,\"can_edit\":_vm.can_edit,\"options\":_vm.all_pages_in_select},on:{\"update\":function($event){return _vm.movePage({\n                  old_position: index,\n                  new_position: $event - 1,\n                })}}}),(_vm.can_edit)?_c('RemoveMenu',{on:{\"remove\":function($event){return _vm.removePage(page.id)}}}):_vm._e()],1)])}):_vm._l((_vm.spreads),function(spread,index){return _c('div',{key:'spread-' + index,staticClass:\"_spread\"},_vm._l((spread),function(page,iindex){return _c('div',{key:page ? page.id : iindex},[(page && page.id)?[_c('div',{staticClass:\"_preview\"},[_c('SinglePage',{attrs:{\"context\":'list',\"zoom\":_vm.page_preview_zoom,\"page_modules\":_vm.getModulesForPage({ modules: _vm.modules, page_id: page.id }),\"page_width\":_vm.publication.page_width,\"page_height\":_vm.publication.page_height,\"page_color\":page.page_color,\"page_number\":index * 2 + iindex,\"pagination\":_vm.pagination,\"hide_pagination\":page.hide_pagination === true,\"page_is_left\":iindex === 0,\"can_edit\":false}}),_c('button',{staticClass:\"u-button _openPage\",attrs:{\"type\":\"button\"},domProps:{\"innerHTML\":_vm._s(_vm.$t('open'))},on:{\"click\":function($event){return _vm.$emit('togglePage', page.id)}}})],1),_c('div',{staticClass:\"_label\"},[_c('b',[_vm._v(_vm._s(_vm.$t(\"page\")))]),_c('SelectField',{key:'page-' + index * 2 + iindex,attrs:{\"content\":index * 2 + iindex,\"can_edit\":_vm.can_edit,\"options\":_vm.all_pages_in_select},on:{\"update\":function($event){return _vm.movePage({\n                      old_position: index * 2 + iindex - 1,\n                      new_position: $event - 1,\n                    })}}}),(_vm.can_edit)?_c('RemoveMenu',{on:{\"remove\":function($event){return _vm.removePage(page.id)}}}):_vm._e()],1)]:_vm._e()],2)}),0)}),(_vm.can_edit)?_c('button',{key:\"createPage\",staticClass:\"u-button u-button_bleuvert\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.createPage}},[_vm._v(\" \"+_vm._s(_vm.$t(\"create_page\"))+\" \")]):_vm._e()],2):_c('OpenedPageOrSpread',{key:\"openedpage\",attrs:{\"page_opened_id\":_vm.page_opened_id,\"publication_title\":_vm.publication.title,\"publication_path\":_vm.publication.$path,\"pages\":_vm.pages,\"spreads\":_vm.spreads,\"modules\":_vm.modules,\"is_spread\":_vm.is_spread,\"page_width\":_vm.publication.page_width,\"page_height\":_vm.publication.page_height,\"margins\":_vm.margins,\"pagination\":_vm.pagination,\"can_edit\":_vm.can_edit},on:{\"togglePage\":function($event){return _vm.$emit('togglePage', $event)},\"updatePageOptions\":_vm.updatePageOptions,\"closePublication\":function($event){return _vm.$emit('closePublication')}}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"_openedPage\",class:{\n    'is--editable': _vm.can_edit,\n  }},[_c('transition',{attrs:{\"name\":\"fade_fast\",\"mode\":\"out-in\"}},[_c('div',{key:_vm.is_spread\n          ? 'spread-' + JSON.stringify(_vm.active_spread.map(function (s) { return s.id; }))\n          : 'page-' + _vm.page_opened_id,staticClass:\"_spreadNavigator\"},[_c('div',{staticClass:\"_spreadNavigator--content\",on:{\"click\":function($event){if($event.target !== $event.currentTarget){ return null; }return _vm.setActiveModule(false)}}},[_c('div',{staticClass:\"_sideCont\"},[_c('div',{staticClass:\"u-breadcrumb _breadcrumb\"},[_c('div',[_c('button',{staticClass:\"u-buttonLink\",attrs:{\"type\":\"button\"},domProps:{\"textContent\":_vm._s(_vm.publication_title)},on:{\"click\":function($event){return _vm.setPageActive(false)}}})]),_c('sl-icon',{attrs:{\"name\":\"arrow-right-short\",\"label\":\"\"}}),_c('div',[_vm._v(\" \"+_vm._s(_vm.$t(\"page\"))+\" \"+_vm._s(_vm.active_page_number + 1)+\" \")])],1),_c('div',{staticClass:\"_content\"},[_c('PageMenu',{attrs:{\"can_edit\":_vm.can_edit,\"pages\":_vm.pages,\"active_page_number\":_vm.active_page_number,\"active_spread_index\":_vm.active_spread_index,\"scale\":_vm.scale,\"show_grid\":_vm.show_grid,\"snap_to_grid\":_vm.snap_to_grid,\"gridstep_in_cm\":_vm.gridstep_in_cm,\"page_color\":_vm.current_page.page_color,\"pagination\":_vm.pagination,\"publication_path\":_vm.publication_path,\"page_opened_id\":_vm.page_opened_id,\"page_modules\":_vm.getModulesForPage({ modules: _vm.modules, page_id: _vm.page_opened_id }),\"active_module\":_vm.active_module},on:{\"update:show_grid\":function($event){_vm.show_grid=$event},\"update:snap_to_grid\":function($event){_vm.snap_to_grid=$event},\"update:gridstep_in_cm\":function($event){_vm.gridstep_in_cm=$event},\"updatePageOptions\":function($event){return _vm.$emit('updatePageOptions', $event)},\"update:scale\":function($event){_vm.scale = $event},\"prevPage\":function($event){return _vm.prevPage()},\"nextPage\":function($event){return _vm.nextPage()}}})],1)]),_c('div',{staticClass:\"_pagePan\"},[_c('PanZoom',{attrs:{\"scale\":_vm.scale,\"page_opened_id\":_vm.page_opened_id},on:{\"update:scale\":function($event){_vm.scale=$event}}},[_c('div',{staticClass:\"_pageCont\"},[(!_vm.is_spread)?_c('SinglePage',{staticClass:\"_spreadNavigator--page is--active\",attrs:{\"context\":'full',\"page_modules\":_vm.getModulesForPage({ modules: _vm.modules, page_id: _vm.page_opened_id }),\"page_width\":_vm.page_width,\"page_height\":_vm.page_height,\"page_color\":_vm.current_page.page_color,\"scale\":_vm.scale,\"show_grid\":_vm.show_grid,\"snap_to_grid\":_vm.snap_to_grid,\"gridstep_in_cm\":_vm.gridstep_in_cm,\"margins\":_vm.margins,\"page_number\":_vm.active_page_number,\"pagination\":_vm.pagination,\"hide_pagination\":_vm.current_page.hide_pagination === true,\"active_module\":_vm.active_module,\"can_edit\":_vm.can_edit},on:{\"close\":function($event){return _vm.setPageActive(false)}}}):_vm._l((_vm.active_spread),function(page,index){return _c('div',{key:page.id ? page.id : index,staticClass:\"_spreadNavigator--page\",class:{\n                  'is--active': page.id === _vm.page_opened_id,\n                },on:{\"click\":function($event){if($event.target !== $event.currentTarget){ return null; }return _vm.setActiveModule(false)}}},[(page)?[_c('SinglePage',{attrs:{\"context\":'full',\"page_modules\":_vm.getModulesForPage({ modules: _vm.modules, page_id: page.id }),\"page_width\":_vm.page_width,\"page_height\":_vm.page_height,\"page_color\":page.page_color,\"scale\":_vm.scale,\"show_grid\":_vm.show_grid,\"snap_to_grid\":_vm.snap_to_grid,\"gridstep_in_cm\":_vm.gridstep_in_cm,\"margins\":_vm.margins,\"page_number\":_vm.active_spread_index * 2 + index,\"pagination\":_vm.pagination,\"hide_pagination\":_vm.current_page.hide_pagination === true,\"active_module\":_vm.active_module,\"page_is_left\":index === 0,\"can_edit\":_vm.can_edit && page.id === _vm.page_opened_id},on:{\"close\":function($event){return _vm.setPageActive(false)}}}),(page.id !== _vm.page_opened_id)?[_c('button',{staticClass:\"_openAdjacentPageBtn panzoom-exclude\",attrs:{\"type\":\"button\"},on:{\"mousedown\":function($event){if($event.target !== $event.currentTarget){ return null; }return _vm.setPageActive(page.id)}}})]:_vm._e()]:_c('div',{staticClass:\"_noPage\"})],2)})],2)])],1)])])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"_pageMenu\"},[_c('div',{staticClass:\"_pageMenu--pane\"},[_c('div',{staticClass:\"u-spacingBottom _titleRow\"},[_c('div',[_c('button',{staticClass:\"u-button u-button_transparent\",attrs:{\"type\":\"button\",\"disabled\":_vm.active_page_number <= 0},on:{\"click\":function($event){return _vm.$emit('prevPage')}}},[_c('sl-icon',{attrs:{\"name\":\"arrow-left-circle\"}})],1)]),_c('div',[_c('transition',{attrs:{\"name\":\"fade_fast\",\"mode\":\"out-in\"}},[_c('b',{key:_vm.active_page_number},[_vm._v(_vm._s(_vm.$t(\"page\"))+\" \"+_vm._s(_vm.active_page_number + 1))])]),(_vm.active_spread_index !== false)?_c('transition',{attrs:{\"name\":\"fade_fast\",\"mode\":\"out-in\"}},[_c('span',{key:_vm.active_spread_index},[(_vm.active_page_number === 0)?[_vm._v(\" (\"+_vm._s(_vm.$t(\"cover\"))+\") \")]:[_vm._v(\" (\"+_vm._s(_vm.$t(\"spread\").toLowerCase())+\" \"+_vm._s(_vm.active_spread_index)+\") \")]],2)]):_vm._e()],1),_c('div',[_c('button',{staticClass:\"u-button u-button_transparent\",attrs:{\"type\":\"button\",\"disabled\":_vm.active_page_number >= _vm.pages.length - 1},on:{\"click\":function($event){return _vm.$emit('nextPage')}}},[_c('sl-icon',{attrs:{\"name\":\"arrow-right-circle\"}})],1)])]),_c('div',{staticClass:\"_scale\"},[_c('RangeValueInput',{staticClass:\"u-spacingBottom\",attrs:{\"label\":_vm.$t('scale'),\"value\":Math.round(_vm.scale * 100),\"min\":25,\"max\":200,\"step\":1,\"ticks\":[25, 50, 100, 200],\"default_value\":100,\"suffix\":'%'},on:{\"save\":function($event){return _vm.$emit('update:scale', $event / 100)}}})],1)]),(_vm.can_edit)?[_c('transition',{attrs:{\"name\":\"fade_fast\",\"mode\":\"out-in\"}},[(!_vm.has_editor_toolbar && !_vm.active_module)?_c('div',{key:'page_options-' + _vm.active_page_number},[_c('div',{staticClass:\"_pageMenu--pane\"},[_c('div',{staticClass:\"u-spacingBottom\"},[_c('DLabel',{attrs:{\"str\":_vm.$t('add_on_page')}}),_c('ModuleCreator',{attrs:{\"publication_path\":_vm.publication_path,\"addtl_meta\":_vm.new_module_meta,\"context\":'page_by_page',\"show_shapes\":true,\"is_collapsed\":false},on:{\"addModule\":_vm.enableModuleEdit}})],1),(_vm.can_edit)?_c('div',{},[(_vm.can_edit)?_c('ToggledSection',{staticClass:\"u-spacingBottom\",attrs:{\"label\":_vm.$t('show_grid'),\"content\":_vm.show_grid},on:{\"update:content\":function($event){return _vm.$emit('update:show_grid', $event)}}},[_c('RangeValueInput',{attrs:{\"label\":_vm.$t('gridstep'),\"value\":_vm.gridstep_in_cm * 10,\"min\":1,\"max\":20,\"step\":1,\"ticks\":[1, 5, 10, 15, 20],\"default_value\":10,\"suffix\":'mm'},on:{\"save\":function($event){return _vm.$emit('update:gridstep_in_cm', $event / 10)}}}),_c('ToggleInput',{staticClass:\"u-spacingBottom\",attrs:{\"content\":_vm.snap_to_grid,\"label\":_vm.$t('snap_to_grid')},on:{\"update:content\":function($event){return _vm.$emit('update:snap_to_grid', $event)}}})],1):_vm._e()],1):_vm._e(),(_vm.can_edit)?_c('div',{},[_c('ColorInput',{staticClass:\"u-spacingBottom\",attrs:{\"label\":_vm.$t('page_color'),\"value\":_vm.page_color},on:{\"save\":function($event){return _vm.$emit('updatePageOptions', {\n                  page_number: _vm.active_page_number,\n                  value: { page_color: $event },\n                })}}}),(_vm.has_pagination)?_c('ToggleInput',{staticClass:\"u-spacingBottom\",attrs:{\"content\":_vm.hide_pagination,\"label\":_vm.$t('hide_pagination')},on:{\"update:content\":function($event){return _vm.$emit('updatePageOptions', {\n                  page_number: _vm.active_page_number,\n                  value: { hide_pagination: $event },\n                })}}}):_vm._e()],1):_vm._e()]),_c('div',{staticClass:\"_pageMenu--pane\"},[_c('DLabel',{attrs:{\"str\":_vm.$t('list_of_medias'),\"instructions\":_vm.$t('list_of_medias_instr')}}),_c('div',{staticClass:\"u-spacingBottom\"},[(_vm.can_edit)?_c('button',{staticClass:\"u-buttonLink\",attrs:{\"type\":\"button\",\"disabled\":_vm.page_modules.length === 0},on:{\"click\":function($event){_vm.show_all_medias = !_vm.show_all_medias}}},[_c('sl-icon',{attrs:{\"name\":\"collection\"}}),(!_vm.show_all_medias)?[_vm._v(\" \"+_vm._s(_vm.$t(\"show\"))+\" \")]:[_vm._v(\" \"+_vm._s(_vm.$t(\"hide\"))+\" \")]],2):_vm._e()]),(_vm.show_all_medias)?_c('div',{staticClass:\"_mediaList\"},_vm._l((_vm.page_modules),function(page_module){return _c('div',{key:page_module.$path,on:{\"click\":function($event){return _vm.setActive(page_module.$path)}}},[(_vm.firstMedia(page_module))?_c('MediaContent',{staticClass:\"_preview\",attrs:{\"file\":_vm.firstMedia(page_module),\"resolution\":180,\"context\":'preview'}}):_vm._e(),_c('DateField',{attrs:{\"title\":_vm.$t('date_uploaded'),\"date\":page_module.$date_uploaded}})],1)}),0):_vm._e()],1)]):(!_vm.has_editor_toolbar && _vm.active_module)?_c('div',{key:'media-' + _vm.active_module.$path,staticClass:\"_pageMenu--pane\"},[_c('DLabel',{attrs:{\"str\":_vm.$t('media'),\"instructions\":_vm.$t('active_media_instr')}}),(_vm.active_module.module_type === 'mosaic')?_c('MediaContent',{staticClass:\"_activeModulePreview\",attrs:{\"file\":_vm.firstMedia(_vm.active_module),\"resolution\":180,\"context\":'preview'}}):(_vm.active_module.module_type === 'text')?_c('span',{staticClass:\"u-textEllipsis _textExtract\"},[_c('CollaborativeEditor2',{ref:\"textBloc\",attrs:{\"path\":_vm.firstMedia(_vm.active_module).$path,\"content\":_vm.firstMedia(_vm.active_module).$content,\"can_edit\":false}})],1):_c('span',[_vm._v(\" \"+_vm._s(_vm.$t(_vm.active_module.module_type))+\" \")]),_c('div',{staticClass:\"u-mediaOptions\"},[_c('MoveToPage',{attrs:{\"pages\":_vm.pages,\"current_page_id\":_vm.pages[_vm.active_page_number].id},on:{\"submit\":function($event){_vm.updateMediaPubliMeta({ page_id: $event });\n              _vm.setActive(false);}}}),_c('div',{},[_c('button',{staticClass:\"u-buttonLink\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.duplicateModule}},[_c('sl-icon',{attrs:{\"name\":\"file-plus\"}}),_vm._v(\" \"+_vm._s(_vm.$t(\"duplicate\"))+\" \")],1)]),_c('div',{},[(_vm.active_module.locked === true)?_c('button',{staticClass:\"u-buttonLink\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.updateMediaPubliMeta({ locked: false })}}},[_c('sl-icon',{attrs:{\"name\":\"unlock\"}}),_vm._v(\" \"+_vm._s(_vm.$t(\"unlock\"))+\" \")],1):_c('button',{staticClass:\"u-buttonLink\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.updateMediaPubliMeta({ locked: true })}}},[_c('sl-icon',{attrs:{\"name\":\"lock\"}}),_vm._v(\" \"+_vm._s(_vm.$t(\"lock\"))+\" \")],1)]),_c('div',{},[_c('button',{staticClass:\"u-buttonLink\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.setActive(false)}}},[_c('sl-icon',{attrs:{\"name\":\"dash-square-dotted\"}}),_vm._v(\" \"+_vm._s(_vm.$t(\"unselect\"))+\" \")],1)]),_c('RemoveMenu',{ref:\"removeMenu\",attrs:{\"remove_text\":_vm.$t('withdraw_from_page')},on:{\"remove\":_vm.removeModule}})],1),_c('div',{staticClass:\"u-sameRow\"},[_c('NumberInput',{staticClass:\"u-spacingBottom\",attrs:{\"label\":_vm.$t('position') + '→',\"value\":_vm.active_module.x,\"suffix\":'cm'},on:{\"save\":function($event){return _vm.updateMediaPubliMeta({ x: $event })}}}),_c('NumberInput',{staticClass:\"u-spacingBottom\",attrs:{\"label\":_vm.$t('position') + '↓',\"value\":_vm.active_module.y,\"suffix\":'cm'},on:{\"save\":function($event){return _vm.updateMediaPubliMeta({ y: $event })}}})],1),_c('div',{staticClass:\"u-sameRow\"},[_c('NumberInput',{staticClass:\"u-spacingBottom\",attrs:{\"label\":_vm.$t('width') + '↔',\"value\":_vm.active_module.width,\"min\":0,\"suffix\":'cm'},on:{\"save\":function($event){return _vm.updateMediaPubliMeta({ width: $event })}}}),_c('NumberInput',{staticClass:\"u-spacingBottom\",attrs:{\"label\":_vm.$t('height') + '↕',\"value\":_vm.active_module.height,\"min\":0,\"suffix\":'cm'},on:{\"save\":function($event){return _vm.updateMediaPubliMeta({ height: $event })}}})],1),_c('RangeValueInput',{staticClass:\"u-spacingBottom\",attrs:{\"label\":_vm.$t('angle'),\"value\":_vm.active_module.rotation,\"min\":0,\"max\":360,\"step\":1,\"ticks\":[0, 90, 180, 270, 360],\"default_value\":0,\"suffix\":'°'},on:{\"save\":function($event){return _vm.updateMediaPubliMeta({ rotation: $event })}}}),(_vm.firstMedia(_vm.active_module).$type === 'text')?_c('RangeValueInput',{staticClass:\"u-spacingBottom\",attrs:{\"label\":_vm.$t('text_size'),\"value\":_vm.active_module.text_size,\"min\":1,\"max\":400,\"step\":1,\"ticks\":[1, 100, 200, 300, 400],\"default_value\":100,\"suffix\":'%'},on:{\"save\":function($event){return _vm.updateMediaPubliMeta({ text_size: $event })}}}):_vm._e(),_c('RangeValueInput',{staticClass:\"u-spacingBottom\",attrs:{\"label\":_vm.$t('margins'),\"value\":_vm.active_module.margins * 10,\"min\":0,\"max\":50,\"step\":1,\"default_value\":0,\"suffix\":'mm'},on:{\"save\":function($event){return _vm.updateMediaPubliMeta({ margins: $event / 10 })}}}),(\n            _vm.active_module.module_type !== 'ellipsis' &&\n            _vm.active_module.module_type !== 'text'\n          )?_c('RangeValueInput',{staticClass:\"u-spacingBottom\",attrs:{\"label\":_vm.$t('border_radius'),\"value\":_vm.active_module.border_radius * 10,\"min\":0,\"max\":50,\"step\":1,\"default_value\":0,\"suffix\":'mm'},on:{\"save\":function($event){return _vm.updateMediaPubliMeta({ border_radius: $event / 10 })}}}):_vm._e(),_c('RangeValueInput',{staticClass:\"u-spacingBottom\",attrs:{\"label\":_vm.$t('opacity'),\"value\":Math.round(_vm.active_module.opacity * 100),\"min\":1,\"max\":100,\"step\":1,\"ticks\":[1, 100],\"default_value\":100,\"suffix\":'%'},on:{\"save\":function($event){return _vm.updateMediaPubliMeta({ opacity: $event / 100 })}}}),_c('ColorInput',{staticClass:\"u-spacingBottom\",attrs:{\"label\":_vm.$t('background_color'),\"value\":_vm.active_module.background_color,\"default_value\":_vm.is_shape ? 'transparent' : ''},on:{\"save\":function($event){return _vm.updateMediaPubliMeta({ background_color: $event })}}}),_c('RangeValueInput',{staticClass:\"u-spacingBottom\",attrs:{\"label\":_vm.$t('outline_width'),\"value\":_vm.active_module.outline_width * 10,\"min\":0,\"max\":20,\"step\":1,\"ticks\":[0, 10, 20],\"default_value\":0,\"suffix\":'mm'},on:{\"save\":function($event){return _vm.updateMediaPubliMeta({ outline_width: $event / 10 })}}}),(_vm.active_module.outline_width > 0)?_c('ColorInput',{staticClass:\"u-spacingBottom\",attrs:{\"label\":_vm.$t('outline_color'),\"value\":_vm.active_module.outline_color,\"default_value\":'#000000'},on:{\"save\":function($event){return _vm.updateMediaPubliMeta({ outline_color: $event })}}}):_vm._e(),_c('DepthInput',{staticClass:\"u-spacingBottom\",attrs:{\"label\":_vm.$t('z_index'),\"value\":_vm.active_module.z_index,\"page_modules\":_vm.page_modules},on:{\"save\":function($event){return _vm.updateMediaPubliMeta({ z_index: $event })}}})],1):_vm._e()]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.has_editor_toolbar),expression:\"has_editor_toolbar\"}],key:'text-toolbar-' + _vm.active_page_number,staticClass:\"_pageMenu--pane\"},[_c('div',{ref:\"editor_toolbar\",staticClass:\"_editorToolbar\"}),_c('RangeValueInput',{staticClass:\"u-spacingBottom\",attrs:{\"label\":_vm.$t('text_size'),\"value\":_vm.active_module.text_size,\"min\":1,\"max\":400,\"step\":1,\"ticks\":[1, 100, 200, 300, 400],\"default_value\":100,\"suffix\":'%'},on:{\"save\":function($event){return _vm.updateMediaPubliMeta({ text_size: $event })}}})],1)]:_vm._e()],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"_depthInput\"},[(_vm.label)?_c('DLabel',{attrs:{\"str\":_vm.label,\"for\":_vm.label}}):_vm._e(),_c('div',{staticClass:\"u-sameRow\"},[_c('button',{staticClass:\"u-button u-button_black\",attrs:{\"type\":\"button\",\"disabled\":_vm.value === _vm.max_z_index},on:{\"click\":_vm.moveToFront}},[_c('sl-icon',{attrs:{\"name\":\"front\",\"label\":_vm.$t('move_to_front')}}),_vm._v(\" \"+_vm._s(_vm.$t(\"move_to_front\"))+\" \")],1),_c('button',{staticClass:\"u-button u-button_black\",attrs:{\"type\":\"button\",\"disabled\":_vm.value === _vm.min_z_index},on:{\"click\":_vm.moveToBack}},[_c('sl-icon',{attrs:{\"name\":\"back\",\"label\":_vm.$t('move_to_back')}}),_vm._v(\" \"+_vm._s(_vm.$t(\"move_to_back\"))+\" \")],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"_depthInput\">\n    <DLabel v-if=\"label\" :str=\"label\" :for=\"label\" />\n    <!-- {{ list_all_z_index }} <br />\n    min_z_index = {{ min_z_index }} <br />\n    max_z_index = {{ max_z_index }} <br />\n    value = {{ value }}\n -->\n    <div class=\"u-sameRow\">\n      <button\n        type=\"button\"\n        class=\"u-button u-button_black\"\n        @click=\"moveToFront\"\n        :disabled=\"value === max_z_index\"\n      >\n        <sl-icon name=\"front\" :label=\"$t('move_to_front')\" />\n        {{ $t(\"move_to_front\") }}\n      </button>\n      <button\n        type=\"button\"\n        class=\"u-button u-button_black\"\n        @click=\"moveToBack\"\n        :disabled=\"value === min_z_index\"\n      >\n        <sl-icon name=\"back\" :label=\"$t('move_to_back')\" />\n        {{ $t(\"move_to_back\") }}\n      </button>\n    </div>\n  </div>\n</template>\n<script>\nexport default {\n  props: {\n    label: String,\n    value: Number,\n    page_modules: Array,\n  },\n  components: {},\n  data() {\n    return {};\n  },\n  created() {},\n  mounted() {},\n  beforeDestroy() {},\n  watch: {},\n  computed: {\n    list_all_z_index() {\n      return this.page_modules.map((pm) => pm.z_index || 0);\n    },\n    max_z_index() {\n      return Math.max(...this.list_all_z_index);\n    },\n    min_z_index() {\n      return Math.min(...this.list_all_z_index);\n    },\n  },\n  methods: {\n    moveToBack() {\n      this.$emit(\"save\", this.min_z_index - 1);\n    },\n    moveToFront() {\n      this.$emit(\"save\", this.max_z_index + 1);\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped></style>\n","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37[0].rules[0].use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./DepthInput.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37[0].rules[0].use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./DepthInput.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DepthInput.vue?vue&type=template&id=952a845c&scoped=true&\"\nimport script from \"./DepthInput.vue?vue&type=script&lang=js&\"\nexport * from \"./DepthInput.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"952a845c\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('button',{staticClass:\"u-buttonLink\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){_vm.show_confirm_move = true}}},[_c('sl-icon',{attrs:{\"name\":\"arrow-left-right\"}}),_vm._v(\" \"+_vm._s(_vm.$t(\"move_to_page\"))+\" \")],1),(_vm.show_confirm_move)?_c('BaseModal2',{attrs:{\"title\":_vm.$t('move_to_page')},on:{\"close\":function($event){_vm.show_confirm_move = false}}},[_c('div',{},[_c('SelectField2',{attrs:{\"value\":_vm.current_page_id,\"options\":_vm.all_pages_in_select,\"can_edit\":true,\"hide_validation\":true},on:{\"change\":_vm.setNewPage}})],1),_c('div',{staticClass:\"u-sameRow\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('button',{staticClass:\"u-buttonLink\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){_vm.show_confirm_move = false}}},[_vm._v(\" \"+_vm._s(_vm.$t(\"cancel\"))+\" \")]),_c('button',{staticClass:\"u-button u-button_red\",attrs:{\"type\":\"button\",\"autofocus\":\"\",\"disabled\":!_vm.page_id_to_move_to || _vm.page_id_to_move_to === _vm.current_page_id},on:{\"click\":_vm.submit}},[_vm._v(\" \"+_vm._s(_vm.$t(\"move\"))+\" \")])])]):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <button\n      type=\"button\"\n      class=\"u-buttonLink\"\n      @click=\"show_confirm_move = true\"\n    >\n      <sl-icon name=\"arrow-left-right\" />\n      {{ $t(\"move_to_page\") }}\n    </button>\n\n    <BaseModal2\n      v-if=\"show_confirm_move\"\n      :title=\"$t('move_to_page')\"\n      @close=\"show_confirm_move = false\"\n    >\n      <div class=\"\">\n        <SelectField2\n          :value=\"current_page_id\"\n          :options=\"all_pages_in_select\"\n          :can_edit=\"true\"\n          :hide_validation=\"true\"\n          @change=\"setNewPage\"\n        />\n      </div>\n      <div class=\"u-sameRow\" slot=\"footer\">\n        <button\n          type=\"button\"\n          class=\"u-buttonLink\"\n          @click=\"show_confirm_move = false\"\n        >\n          {{ $t(\"cancel\") }}\n        </button>\n        <button\n          class=\"u-button u-button_red\"\n          type=\"button\"\n          autofocus\n          :disabled=\"\n            !page_id_to_move_to || page_id_to_move_to === current_page_id\n          \"\n          @click=\"submit\"\n        >\n          {{ $t(\"move\") }}\n        </button>\n      </div>\n    </BaseModal2>\n  </div>\n</template>\n<script>\nexport default {\n  props: {\n    pages: Array,\n    current_page_id: String,\n  },\n  components: {},\n  data() {\n    return {\n      show_confirm_move: false,\n\n      page_id_to_move_to: undefined,\n    };\n  },\n  created() {},\n  mounted() {},\n  beforeDestroy() {},\n  watch: {},\n  computed: {\n    all_pages_in_select() {\n      return this.pages.map((page, index) => ({\n        key: page.id,\n        text: index + 1,\n      }));\n    },\n  },\n  methods: {\n    setNewPage(new_page_id) {\n      this.page_id_to_move_to = new_page_id;\n    },\n    submit() {\n      this.$emit(\"submit\", this.page_id_to_move_to);\n      this.show_confirm_move = false;\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped></style>\n","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37[0].rules[0].use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./MoveToPage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37[0].rules[0].use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./MoveToPage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MoveToPage.vue?vue&type=template&id=42602880&scoped=true&\"\nimport script from \"./MoveToPage.vue?vue&type=script&lang=js&\"\nexport * from \"./MoveToPage.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"42602880\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"_pageMenu\">\n    <div class=\"_pageMenu--pane\">\n      <div class=\"u-spacingBottom _titleRow\">\n        <div>\n          <button\n            type=\"button\"\n            class=\"u-button u-button_transparent\"\n            @click=\"$emit('prevPage')\"\n            :disabled=\"active_page_number <= 0\"\n          >\n            <sl-icon name=\"arrow-left-circle\" />\n          </button>\n        </div>\n        <div>\n          <transition name=\"fade_fast\" mode=\"out-in\">\n            <b :key=\"active_page_number\"\n              >{{ $t(\"page\") }} {{ active_page_number + 1 }}</b\n            >\n          </transition>\n          <transition\n            v-if=\"active_spread_index !== false\"\n            name=\"fade_fast\"\n            mode=\"out-in\"\n          >\n            <span :key=\"active_spread_index\">\n              <template v-if=\"active_page_number === 0\">\n                ({{ $t(\"cover\") }})\n              </template>\n              <template v-else>\n                ({{ $t(\"spread\").toLowerCase() }} {{ active_spread_index }})\n              </template>\n            </span>\n          </transition>\n        </div>\n        <div>\n          <button\n            type=\"button\"\n            class=\"u-button u-button_transparent\"\n            @click=\"$emit('nextPage')\"\n            :disabled=\"active_page_number >= pages.length - 1\"\n          >\n            <sl-icon name=\"arrow-right-circle\" />\n          </button>\n        </div>\n      </div>\n\n      <div class=\"_scale\">\n        <RangeValueInput\n          class=\"u-spacingBottom\"\n          :label=\"$t('scale')\"\n          :value=\"Math.round(scale * 100)\"\n          :min=\"25\"\n          :max=\"200\"\n          :step=\"1\"\n          :ticks=\"[25, 50, 100, 200]\"\n          :default_value=\"100\"\n          :suffix=\"'%'\"\n          @save=\"$emit('update:scale', $event / 100)\"\n        />\n      </div>\n    </div>\n\n    <template v-if=\"can_edit\">\n      <transition name=\"fade_fast\" mode=\"out-in\">\n        <div\n          v-if=\"!has_editor_toolbar && !active_module\"\n          :key=\"'page_options-' + active_page_number\"\n        >\n          <div class=\"_pageMenu--pane\">\n            <div class=\"u-spacingBottom\">\n              <DLabel :str=\"$t('add_on_page')\" />\n              <ModuleCreator\n                :publication_path=\"publication_path\"\n                :addtl_meta=\"new_module_meta\"\n                :context=\"'page_by_page'\"\n                :show_shapes=\"true\"\n                :is_collapsed=\"false\"\n                @addModule=\"enableModuleEdit\"\n              />\n            </div>\n\n            <div class=\"\" v-if=\"can_edit\">\n              <ToggledSection\n                v-if=\"can_edit\"\n                class=\"u-spacingBottom\"\n                :label=\"$t('show_grid')\"\n                :content=\"show_grid\"\n                @update:content=\"$emit('update:show_grid', $event)\"\n              >\n                <RangeValueInput\n                  :label=\"$t('gridstep')\"\n                  :value=\"gridstep_in_cm * 10\"\n                  :min=\"1\"\n                  :max=\"20\"\n                  :step=\"1\"\n                  :ticks=\"[1, 5, 10, 15, 20]\"\n                  :default_value=\"10\"\n                  :suffix=\"'mm'\"\n                  @save=\"$emit('update:gridstep_in_cm', $event / 10)\"\n                />\n\n                <ToggleInput\n                  class=\"u-spacingBottom\"\n                  :content=\"snap_to_grid\"\n                  :label=\"$t('snap_to_grid')\"\n                  @update:content=\"$emit('update:snap_to_grid', $event)\"\n                />\n              </ToggledSection>\n            </div>\n            <div class=\"\" v-if=\"can_edit\">\n              <ColorInput\n                class=\"u-spacingBottom\"\n                :label=\"$t('page_color')\"\n                :value=\"page_color\"\n                @save=\"\n                  $emit('updatePageOptions', {\n                    page_number: active_page_number,\n                    value: { page_color: $event },\n                  })\n                \"\n              />\n\n              <ToggleInput\n                v-if=\"has_pagination\"\n                class=\"u-spacingBottom\"\n                :content=\"hide_pagination\"\n                :label=\"$t('hide_pagination')\"\n                @update:content=\"\n                  $emit('updatePageOptions', {\n                    page_number: active_page_number,\n                    value: { hide_pagination: $event },\n                  })\n                \"\n              />\n            </div>\n          </div>\n\n          <div class=\"_pageMenu--pane\">\n            <DLabel\n              :str=\"$t('list_of_medias')\"\n              :instructions=\"$t('list_of_medias_instr')\"\n            />\n            <div class=\"u-spacingBottom\">\n              <button\n                type=\"button\"\n                class=\"u-buttonLink\"\n                :disabled=\"page_modules.length === 0\"\n                v-if=\"can_edit\"\n                @click=\"show_all_medias = !show_all_medias\"\n              >\n                <sl-icon name=\"collection\" />\n                <template v-if=\"!show_all_medias\">\n                  {{ $t(\"show\") }}\n                </template>\n                <template v-else>\n                  {{ $t(\"hide\") }}\n                </template>\n              </button>\n            </div>\n            <div class=\"_mediaList\" v-if=\"show_all_medias\">\n              <div\n                v-for=\"page_module in page_modules\"\n                :key=\"page_module.$path\"\n                @click=\"setActive(page_module.$path)\"\n              >\n                <MediaContent\n                  class=\"_preview\"\n                  v-if=\"firstMedia(page_module)\"\n                  :file=\"firstMedia(page_module)\"\n                  :resolution=\"180\"\n                  :context=\"'preview'\"\n                />\n\n                <DateField\n                  class=\"\"\n                  :title=\"$t('date_uploaded')\"\n                  :date=\"page_module.$date_uploaded\"\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div\n          v-else-if=\"!has_editor_toolbar && active_module\"\n          class=\"_pageMenu--pane\"\n          :key=\"'media-' + active_module.$path\"\n        >\n          <DLabel :str=\"$t('media')\" :instructions=\"$t('active_media_instr')\" />\n\n          <MediaContent\n            class=\"_activeModulePreview\"\n            v-if=\"active_module.module_type === 'mosaic'\"\n            :file=\"firstMedia(active_module)\"\n            :resolution=\"180\"\n            :context=\"'preview'\"\n          />\n          <span\n            v-else-if=\"active_module.module_type === 'text'\"\n            class=\"u-textEllipsis _textExtract\"\n          >\n            <CollaborativeEditor2\n              ref=\"textBloc\"\n              :path=\"firstMedia(active_module).$path\"\n              :content=\"firstMedia(active_module).$content\"\n              :can_edit=\"false\"\n            />\n          </span>\n          <span v-else>\n            {{ $t(active_module.module_type) }}\n          </span>\n\n          <div class=\"u-mediaOptions\">\n            <MoveToPage\n              :pages=\"pages\"\n              :current_page_id=\"pages[active_page_number].id\"\n              @submit=\"\n                updateMediaPubliMeta({ page_id: $event });\n                setActive(false);\n              \"\n            />\n            <div class=\"\">\n              <button\n                type=\"button\"\n                class=\"u-buttonLink\"\n                @click=\"duplicateModule\"\n              >\n                <sl-icon name=\"file-plus\" />\n\n                {{ $t(\"duplicate\") }}\n              </button>\n            </div>\n            <div class=\"\">\n              <button\n                type=\"button\"\n                class=\"u-buttonLink\"\n                v-if=\"active_module.locked === true\"\n                @click=\"updateMediaPubliMeta({ locked: false })\"\n              >\n                <sl-icon name=\"unlock\" />\n                {{ $t(\"unlock\") }}\n              </button>\n              <button\n                type=\"button\"\n                class=\"u-buttonLink\"\n                v-else\n                @click=\"updateMediaPubliMeta({ locked: true })\"\n              >\n                <sl-icon name=\"lock\" />\n                {{ $t(\"lock\") }}\n              </button>\n            </div>\n            <div class=\"\">\n              <button\n                type=\"button\"\n                class=\"u-buttonLink\"\n                @click=\"setActive(false)\"\n              >\n                <sl-icon name=\"dash-square-dotted\" />\n                {{ $t(\"unselect\") }}\n              </button>\n            </div>\n            <RemoveMenu\n              ref=\"removeMenu\"\n              :remove_text=\"$t('withdraw_from_page')\"\n              @remove=\"removeModule\"\n            />\n          </div>\n\n          <div class=\"u-sameRow\">\n            <NumberInput\n              class=\"u-spacingBottom\"\n              :label=\"$t('position') + '→'\"\n              :value=\"active_module.x\"\n              :suffix=\"'cm'\"\n              @save=\"updateMediaPubliMeta({ x: $event })\"\n            />\n            <NumberInput\n              class=\"u-spacingBottom\"\n              :label=\"$t('position') + '↓'\"\n              :value=\"active_module.y\"\n              :suffix=\"'cm'\"\n              @save=\"updateMediaPubliMeta({ y: $event })\"\n            />\n          </div>\n\n          <div class=\"u-sameRow\">\n            <NumberInput\n              class=\"u-spacingBottom\"\n              :label=\"$t('width') + '↔'\"\n              :value=\"active_module.width\"\n              :min=\"0\"\n              :suffix=\"'cm'\"\n              @save=\"updateMediaPubliMeta({ width: $event })\"\n            />\n            <NumberInput\n              class=\"u-spacingBottom\"\n              :label=\"$t('height') + '↕'\"\n              :value=\"active_module.height\"\n              :min=\"0\"\n              :suffix=\"'cm'\"\n              @save=\"updateMediaPubliMeta({ height: $event })\"\n            />\n          </div>\n          <RangeValueInput\n            class=\"u-spacingBottom\"\n            :label=\"$t('angle')\"\n            :value=\"active_module.rotation\"\n            :min=\"0\"\n            :max=\"360\"\n            :step=\"1\"\n            :ticks=\"[0, 90, 180, 270, 360]\"\n            :default_value=\"0\"\n            :suffix=\"'°'\"\n            @save=\"updateMediaPubliMeta({ rotation: $event })\"\n          />\n          <RangeValueInput\n            v-if=\"firstMedia(active_module).$type === 'text'\"\n            class=\"u-spacingBottom\"\n            :label=\"$t('text_size')\"\n            :value=\"active_module.text_size\"\n            :min=\"1\"\n            :max=\"400\"\n            :step=\"1\"\n            :ticks=\"[1, 100, 200, 300, 400]\"\n            :default_value=\"100\"\n            :suffix=\"'%'\"\n            @save=\"updateMediaPubliMeta({ text_size: $event })\"\n          />\n          <RangeValueInput\n            class=\"u-spacingBottom\"\n            :label=\"$t('margins')\"\n            :value=\"active_module.margins * 10\"\n            :min=\"0\"\n            :max=\"50\"\n            :step=\"1\"\n            :default_value=\"0\"\n            :suffix=\"'mm'\"\n            @save=\"updateMediaPubliMeta({ margins: $event / 10 })\"\n          />\n\n          <RangeValueInput\n            v-if=\"\n              active_module.module_type !== 'ellipsis' &&\n              active_module.module_type !== 'text'\n            \"\n            class=\"u-spacingBottom\"\n            :label=\"$t('border_radius')\"\n            :value=\"active_module.border_radius * 10\"\n            :min=\"0\"\n            :max=\"50\"\n            :step=\"1\"\n            :default_value=\"0\"\n            :suffix=\"'mm'\"\n            @save=\"updateMediaPubliMeta({ border_radius: $event / 10 })\"\n          />\n\n          <RangeValueInput\n            class=\"u-spacingBottom\"\n            :label=\"$t('opacity')\"\n            :value=\"Math.round(active_module.opacity * 100)\"\n            :min=\"1\"\n            :max=\"100\"\n            :step=\"1\"\n            :ticks=\"[1, 100]\"\n            :default_value=\"100\"\n            :suffix=\"'%'\"\n            @save=\"updateMediaPubliMeta({ opacity: $event / 100 })\"\n          />\n          <ColorInput\n            class=\"u-spacingBottom\"\n            :label=\"$t('background_color')\"\n            :value=\"active_module.background_color\"\n            :default_value=\"is_shape ? 'transparent' : ''\"\n            @save=\"updateMediaPubliMeta({ background_color: $event })\"\n          />\n\n          <RangeValueInput\n            class=\"u-spacingBottom\"\n            :label=\"$t('outline_width')\"\n            :value=\"active_module.outline_width * 10\"\n            :min=\"0\"\n            :max=\"20\"\n            :step=\"1\"\n            :ticks=\"[0, 10, 20]\"\n            :default_value=\"0\"\n            :suffix=\"'mm'\"\n            @save=\"updateMediaPubliMeta({ outline_width: $event / 10 })\"\n          />\n          <ColorInput\n            v-if=\"active_module.outline_width > 0\"\n            class=\"u-spacingBottom\"\n            :label=\"$t('outline_color')\"\n            :value=\"active_module.outline_color\"\n            :default_value=\"'#000000'\"\n            @save=\"updateMediaPubliMeta({ outline_color: $event })\"\n          />\n\n          <DepthInput\n            class=\"u-spacingBottom\"\n            :label=\"$t('z_index')\"\n            :value=\"active_module.z_index\"\n            :page_modules=\"page_modules\"\n            @save=\"updateMediaPubliMeta({ z_index: $event })\"\n          />\n        </div>\n      </transition>\n      <div\n        v-show=\"has_editor_toolbar\"\n        class=\"_pageMenu--pane\"\n        :key=\"'text-toolbar-' + active_page_number\"\n      >\n        <div ref=\"editor_toolbar\" class=\"_editorToolbar\" />\n\n        <RangeValueInput\n          class=\"u-spacingBottom\"\n          :label=\"$t('text_size')\"\n          :value=\"active_module.text_size\"\n          :min=\"1\"\n          :max=\"400\"\n          :step=\"1\"\n          :ticks=\"[1, 100, 200, 300, 400]\"\n          :default_value=\"100\"\n          :suffix=\"'%'\"\n          @save=\"updateMediaPubliMeta({ text_size: $event })\"\n        />\n      </div>\n    </template>\n  </div>\n</template>\n<script>\nimport ModuleCreator from \"@/components/publications/modules/ModuleCreator.vue\";\nimport DepthInput from \"@/components/publications/page_by_page/DepthInput.vue\";\nimport MoveToPage from \"@/components/publications/page_by_page/MoveToPage.vue\";\n\n// const throttle = (fn, wait) => {\n//   let throttled = false;\n//   return function (...args) {\n//     if (!throttled) {\n//       fn.apply(this, args);\n//       throttled = true;\n//       setTimeout(() => {\n//         throttled = false;\n//       }, wait);\n//     }\n//   };\n// };\nexport default {\n  props: {\n    can_edit: Boolean,\n    pages: Array,\n    active_page_number: Number,\n    active_spread_index: [Boolean, Number],\n    scale: Number,\n    show_grid: Boolean,\n    snap_to_grid: Boolean,\n    gridstep_in_cm: Number,\n    page_color: String,\n    pagination: [Boolean, Object],\n    publication_path: String,\n    page_modules: Array,\n    page_opened_id: String,\n    active_module: [Boolean, Object],\n  },\n  components: {\n    DepthInput,\n    ModuleCreator,\n    MoveToPage,\n  },\n  data() {\n    return {\n      show_page_options: false,\n      show_all_medias: false,\n      has_editor_toolbar: false,\n    };\n  },\n  created() {},\n  mounted() {\n    this.$eventHub.$on(`module.text_editing_enabled`, this.displayToolbar);\n    this.$eventHub.$on(`module.text_editing_disabled`, this.removeToolbar);\n    this.$eventHub.$on(`module.open_remove_modal`, this.openRemoveModal);\n  },\n  beforeDestroy() {\n    this.$eventHub.$off(`module.moveToolbar`, this.displayToolbar);\n    this.$eventHub.$off(`module.text_editing_disabled`, this.removeToolbar);\n    this.$eventHub.$off(`module.open_remove_modal`, this.openRemoveModal);\n  },\n  watch: {},\n  computed: {\n    module_meta_filename() {\n      return this.active_module.$path.substring(\n        this.active_module.$path.lastIndexOf(\"/\") + 1\n      );\n    },\n    is_shape() {\n      return (\n        this.active_module &&\n        [\"ellipsis\", \"line\", \"arrow\", \"rectangle\"].includes(\n          this.active_module.module_type\n        )\n      );\n    },\n    has_pagination() {\n      return (\n        this.active_page_number - this.pagination.pagination_start_on_page >= 0\n      );\n    },\n    hide_pagination() {\n      return this.pages[this.active_page_number].hide_pagination === true;\n    },\n    new_module_meta() {\n      const z_index =\n        Math.max(...this.page_modules.map((pm) => pm.z_index || 0)) + 1;\n\n      return {\n        page_id: this.page_opened_id,\n        x: this.gridstep_in_cm,\n        y: this.gridstep_in_cm,\n        width: this.$root.default_new_module_width,\n        height: this.$root.default_new_module_height,\n        rotation: 0,\n        margins: 0,\n        opacity: 1,\n        outline_width: 0,\n        z_index,\n      };\n    },\n  },\n  methods: {\n    firstMedia(page_module) {\n      if (!page_module) return false;\n      try {\n        const media_path = page_module.source_medias[0].path;\n        return this.getSourceMedia({\n          source_media_path: media_path,\n        });\n      } catch (err) {\n        return false;\n      }\n    },\n    displayToolbar(node) {\n      this.has_editor_toolbar = true;\n      this.$nextTick(() => {\n        if (this.$refs.editor_toolbar) this.$refs.editor_toolbar.append(node);\n      });\n\n      // this.$nextTick(() => {\n      // });\n    },\n    removeToolbar() {\n      // if (this.$refs.editor_toolbar) this.$refs.editor_toolbar.innerHTML = \"\";\n      this.has_editor_toolbar = false;\n    },\n    openRemoveModal() {\n      this.$refs.removeMenu.show_confirm_delete = true;\n    },\n    enableModuleEdit({ meta_filename }) {\n      setTimeout(() => {\n        this.$eventHub.$emit(`module.enable_edit.${meta_filename}`);\n      }, 150);\n    },\n    changeModulePage() {\n      this.$eventHub.$emit(`module.move.${this.module_meta_filename}`);\n    },\n    duplicateModule() {\n      this.$eventHub.$emit(`module.duplicate.${this.module_meta_filename}`);\n    },\n    removeModule() {\n      this.$eventHub.$emit(`module.remove.${this.module_meta_filename}`);\n      this.$eventHub.$emit(`module.setActive`, false);\n    },\n    setActive(path) {\n      this.$eventHub.$emit(`module.setActive`, path);\n      this.$nextTick(() => {\n        this.$eventHub.$emit(`module.panTo.${path}`);\n      });\n    },\n    async updateMediaPubliMeta(val) {\n      if (!this.active_module) return;\n\n      await this.$api\n        .updateMeta({\n          path: this.active_module.$path,\n          new_meta: val,\n        })\n        .catch((err) => {\n          this.$alertify.delay(4000).error(err);\n          throw err;\n        });\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n._pageMenu {\n  text-align: left;\n}\n._pageMenu--pane {\n  padding: calc(var(--spacing) / 2);\n  background: var(--panel-color);\n  border: var(--panel-borders);\n  box-shadow: var(--panel-shadows);\n  border-radius: var(--panel-radius);\n\n  margin-bottom: calc(var(--spacing) / 2);\n}\n\n// ::v-deep ._moduleCreator {\n//   margin: 0;\n// }\n._activeModulePreview {\n  overflow: hidden;\n  margin: 0 auto;\n  background: var(--c-noir);\n  width: 100%;\n  height: 50px;\n\n  display: flex;\n  justify-content: center;\n}\n\n._mediaList {\n  font-size: var(--sl-font-size-x-small);\n  padding: 0;\n\n  > * {\n    display: flex;\n    flex-flow: row nowrap;\n    align-items: center;\n    gap: calc(var(--spacing) / 2);\n    cursor: pointer;\n\n    &:hover {\n      background: var(--c-gris_clair);\n    }\n\n    &:not(:last-child) {\n      border-bottom: 2px solid var(--c-gris);\n    }\n\n    ._preview {\n      position: relative;\n      width: 50px;\n      height: 50px;\n      flex: 0 0 50px;\n\n      ::v-deep img {\n        width: 100%;\n        height: 100%;\n        position: absolute;\n        object-fit: contain;\n      }\n    }\n  }\n}\n\n._scale {\n  // position: absolute;\n  // bottom: 0;\n  // left: 0;\n  // width: 100%;\n}\n._textExtract {\n  ::v-deep {\n    .ql-editor {\n      padding-bottom: 0;\n    }\n  }\n}\n\n._titleRow {\n  display: flex;\n  flex-flow: row wrap;\n  align-items: center;\n  justify-content: space-between;\n\n  button {\n    font-size: var(--sl-font-size-large);\n  }\n}\n</style>\n","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37[0].rules[0].use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PageMenu.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37[0].rules[0].use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PageMenu.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PageMenu.vue?vue&type=template&id=39ef7758&scoped=true&\"\nimport script from \"./PageMenu.vue?vue&type=script&lang=js&\"\nexport * from \"./PageMenu.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PageMenu.vue?vue&type=style&index=0&id=39ef7758&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"39ef7758\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{},[_vm._t(\"default\")],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/**\n* Panzoom for panning and zooming elements using CSS transforms\n* Copyright Timmy Willison and other contributors\n* https://github.com/timmywil/panzoom/blob/main/MIT-License.txt\n*/\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\n\n/* eslint-disable no-var */\nif (typeof window !== 'undefined') {\n  // Support: IE11 only\n  if (window.NodeList && !NodeList.prototype.forEach) {\n    NodeList.prototype.forEach = Array.prototype.forEach;\n  }\n  // Support: IE11 only\n  // CustomEvent is an object instead of a constructor\n  if (typeof window.CustomEvent !== 'function') {\n    window.CustomEvent = function CustomEvent(event, params) {\n      params = params || { bubbles: false, cancelable: false, detail: null };\n      var evt = document.createEvent('CustomEvent');\n      evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\n      return evt\n    };\n  }\n}\n\n/**\r\n * Utilites for working with multiple pointer events\r\n */\r\nfunction findEventIndex(pointers, event) {\r\n    var i = pointers.length;\r\n    while (i--) {\r\n        if (pointers[i].pointerId === event.pointerId) {\r\n            return i;\r\n        }\r\n    }\r\n    return -1;\r\n}\r\nfunction addPointer(pointers, event) {\r\n    var i;\r\n    // Add touches if applicable\r\n    if (event.touches) {\r\n        i = 0;\r\n        for (var _i = 0, _a = event.touches; _i < _a.length; _i++) {\r\n            var touch = _a[_i];\r\n            touch.pointerId = i++;\r\n            addPointer(pointers, touch);\r\n        }\r\n        return;\r\n    }\r\n    i = findEventIndex(pointers, event);\r\n    // Update if already present\r\n    if (i > -1) {\r\n        pointers.splice(i, 1);\r\n    }\r\n    pointers.push(event);\r\n}\r\nfunction removePointer(pointers, event) {\r\n    // Add touches if applicable\r\n    if (event.touches) {\r\n        // Remove all touches\r\n        while (pointers.length) {\r\n            pointers.pop();\r\n        }\r\n        return;\r\n    }\r\n    var i = findEventIndex(pointers, event);\r\n    if (i > -1) {\r\n        pointers.splice(i, 1);\r\n    }\r\n}\r\n/**\r\n * Calculates a center point between\r\n * the given pointer events, for panning\r\n * with multiple pointers.\r\n */\r\nfunction getMiddle(pointers) {\r\n    // Copy to avoid changing by reference\r\n    pointers = pointers.slice(0);\r\n    var event1 = pointers.pop();\r\n    var event2;\r\n    while ((event2 = pointers.pop())) {\r\n        event1 = {\r\n            clientX: (event2.clientX - event1.clientX) / 2 + event1.clientX,\r\n            clientY: (event2.clientY - event1.clientY) / 2 + event1.clientY\r\n        };\r\n    }\r\n    return event1;\r\n}\r\n/**\r\n * Calculates the distance between two points\r\n * for pinch zooming.\r\n * Limits to the first 2\r\n */\r\nfunction getDistance(pointers) {\r\n    if (pointers.length < 2) {\r\n        return 0;\r\n    }\r\n    var event1 = pointers[0];\r\n    var event2 = pointers[1];\r\n    return Math.sqrt(Math.pow(Math.abs(event2.clientX - event1.clientX), 2) +\r\n        Math.pow(Math.abs(event2.clientY - event1.clientY), 2));\r\n}\n\nvar events = {\r\n    down: 'mousedown',\r\n    move: 'mousemove',\r\n    up: 'mouseup mouseleave'\r\n};\r\nif (typeof window !== 'undefined') {\r\n    if (typeof window.PointerEvent === 'function') {\r\n        events = {\r\n            down: 'pointerdown',\r\n            move: 'pointermove',\r\n            up: 'pointerup pointerleave pointercancel'\r\n        };\r\n    }\r\n    else if (typeof window.TouchEvent === 'function') {\r\n        events = {\r\n            down: 'touchstart',\r\n            move: 'touchmove',\r\n            up: 'touchend touchcancel'\r\n        };\r\n    }\r\n}\r\nfunction onPointer(event, elem, handler, eventOpts) {\r\n    events[event].split(' ').forEach(function (name) {\r\n        elem.addEventListener(name, handler, eventOpts);\r\n    });\r\n}\r\nfunction destroyPointer(event, elem, handler) {\r\n    events[event].split(' ').forEach(function (name) {\r\n        elem.removeEventListener(name, handler);\r\n    });\r\n}\n\nvar isIE = typeof document !== 'undefined' && !!document.documentMode;\r\n/**\r\n * Lazy creation of a CSS style declaration\r\n */\r\nvar divStyle;\r\nfunction createStyle() {\r\n    if (divStyle) {\r\n        return divStyle;\r\n    }\r\n    return (divStyle = document.createElement('div').style);\r\n}\r\n/**\r\n * Proper prefixing for cross-browser compatibility\r\n */\r\nvar prefixes = ['webkit', 'moz', 'ms'];\r\nvar prefixCache = {};\r\nfunction getPrefixedName(name) {\r\n    if (prefixCache[name]) {\r\n        return prefixCache[name];\r\n    }\r\n    var divStyle = createStyle();\r\n    if (name in divStyle) {\r\n        return (prefixCache[name] = name);\r\n    }\r\n    var capName = name[0].toUpperCase() + name.slice(1);\r\n    var i = prefixes.length;\r\n    while (i--) {\r\n        var prefixedName = \"\".concat(prefixes[i]).concat(capName);\r\n        if (prefixedName in divStyle) {\r\n            return (prefixCache[name] = prefixedName);\r\n        }\r\n    }\r\n}\r\n/**\r\n * Gets a style value expected to be a number\r\n */\r\nfunction getCSSNum(name, style) {\r\n    return parseFloat(style[getPrefixedName(name)]) || 0;\r\n}\r\nfunction getBoxStyle(elem, name, style) {\r\n    if (style === void 0) { style = window.getComputedStyle(elem); }\r\n    // Support: FF 68+\r\n    // Firefox requires specificity for border\r\n    var suffix = name === 'border' ? 'Width' : '';\r\n    return {\r\n        left: getCSSNum(\"\".concat(name, \"Left\").concat(suffix), style),\r\n        right: getCSSNum(\"\".concat(name, \"Right\").concat(suffix), style),\r\n        top: getCSSNum(\"\".concat(name, \"Top\").concat(suffix), style),\r\n        bottom: getCSSNum(\"\".concat(name, \"Bottom\").concat(suffix), style)\r\n    };\r\n}\r\n/**\r\n * Set a style using the properly prefixed name\r\n */\r\nfunction setStyle(elem, name, value) {\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    elem.style[getPrefixedName(name)] = value;\r\n}\r\n/**\r\n * Constructs the transition from panzoom options\r\n * and takes care of prefixing the transition and transform\r\n */\r\nfunction setTransition(elem, options) {\r\n    var transform = getPrefixedName('transform');\r\n    setStyle(elem, 'transition', \"\".concat(transform, \" \").concat(options.duration, \"ms \").concat(options.easing));\r\n}\r\n/**\r\n * Set the transform using the proper prefix\r\n *\r\n * Override the transform setter.\r\n * This is exposed mostly so the user could\r\n * set other parts of a transform\r\n * aside from scale and translate.\r\n * Default is defined in src/css.ts.\r\n *\r\n * ```js\r\n * // This example always sets a rotation\r\n * // when setting the scale and translation\r\n * const panzoom = Panzoom(elem, {\r\n *   setTransform: (elem, { scale, x, y }) => {\r\n *     panzoom.setStyle('transform', `rotate(0.5turn) scale(${scale}) translate(${x}px, ${y}px)`)\r\n *   }\r\n * })\r\n * ```\r\n */\r\nfunction setTransform(elem, _a, _options) {\r\n    var x = _a.x, y = _a.y, scale = _a.scale, isSVG = _a.isSVG;\r\n    setStyle(elem, 'transform', \"scale(\".concat(scale, \") translate(\").concat(x, \"px, \").concat(y, \"px)\"));\r\n    if (isSVG && isIE) {\r\n        var matrixValue = window.getComputedStyle(elem).getPropertyValue('transform');\r\n        elem.setAttribute('transform', matrixValue);\r\n    }\r\n}\r\n/**\r\n * Dimensions used in containment and focal point zooming\r\n */\r\nfunction getDimensions(elem) {\r\n    var parent = elem.parentNode;\r\n    var style = window.getComputedStyle(elem);\r\n    var parentStyle = window.getComputedStyle(parent);\r\n    var rectElem = elem.getBoundingClientRect();\r\n    var rectParent = parent.getBoundingClientRect();\r\n    return {\r\n        elem: {\r\n            style: style,\r\n            width: rectElem.width,\r\n            height: rectElem.height,\r\n            top: rectElem.top,\r\n            bottom: rectElem.bottom,\r\n            left: rectElem.left,\r\n            right: rectElem.right,\r\n            margin: getBoxStyle(elem, 'margin', style),\r\n            border: getBoxStyle(elem, 'border', style)\r\n        },\r\n        parent: {\r\n            style: parentStyle,\r\n            width: rectParent.width,\r\n            height: rectParent.height,\r\n            top: rectParent.top,\r\n            bottom: rectParent.bottom,\r\n            left: rectParent.left,\r\n            right: rectParent.right,\r\n            padding: getBoxStyle(parent, 'padding', parentStyle),\r\n            border: getBoxStyle(parent, 'border', parentStyle)\r\n        }\r\n    };\r\n}\n\n/**\r\n * Determine if an element is attached to the DOM\r\n * Panzoom requires this so events work properly\r\n */\r\nfunction isAttached(elem) {\r\n    var doc = elem.ownerDocument;\r\n    var parent = elem.parentNode;\r\n    return (doc &&\r\n        parent &&\r\n        doc.nodeType === 9 &&\r\n        parent.nodeType === 1 &&\r\n        doc.documentElement.contains(parent));\r\n}\n\nfunction getClass(elem) {\r\n    return (elem.getAttribute('class') || '').trim();\r\n}\r\nfunction hasClass(elem, className) {\r\n    return elem.nodeType === 1 && \" \".concat(getClass(elem), \" \").indexOf(\" \".concat(className, \" \")) > -1;\r\n}\r\nfunction isExcluded(elem, options) {\r\n    for (var cur = elem; cur != null; cur = cur.parentNode) {\r\n        if (hasClass(cur, options.excludeClass) || options.exclude.indexOf(cur) > -1) {\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\n\n/**\r\n * Determine if an element is SVG by checking the namespace\r\n * Exception: the <svg> element itself should be treated like HTML\r\n */\r\nvar rsvg = /^http:[\\w\\.\\/]+svg$/;\r\nfunction isSVGElement(elem) {\r\n    return rsvg.test(elem.namespaceURI) && elem.nodeName.toLowerCase() !== 'svg';\r\n}\n\nfunction shallowClone(obj) {\r\n    var clone = {};\r\n    for (var key in obj) {\r\n        if (obj.hasOwnProperty(key)) {\r\n            clone[key] = obj[key];\r\n        }\r\n    }\r\n    return clone;\r\n}\n\nvar defaultOptions = {\r\n    animate: false,\r\n    canvas: false,\r\n    cursor: 'move',\r\n    disablePan: false,\r\n    disableZoom: false,\r\n    disableXAxis: false,\r\n    disableYAxis: false,\r\n    duration: 200,\r\n    easing: 'ease-in-out',\r\n    exclude: [],\r\n    excludeClass: 'panzoom-exclude',\r\n    handleStartEvent: function (e) {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n    },\r\n    maxScale: 4,\r\n    minScale: 0.125,\r\n    overflow: 'hidden',\r\n    panOnlyWhenZoomed: false,\r\n    pinchAndPan: false,\r\n    relative: false,\r\n    setTransform: setTransform,\r\n    startX: 0,\r\n    startY: 0,\r\n    startScale: 1,\r\n    step: 0.3,\r\n    touchAction: 'none'\r\n};\r\nfunction Panzoom(elem, options) {\r\n    if (!elem) {\r\n        throw new Error('Panzoom requires an element as an argument');\r\n    }\r\n    if (elem.nodeType !== 1) {\r\n        throw new Error('Panzoom requires an element with a nodeType of 1');\r\n    }\r\n    if (!isAttached(elem)) {\r\n        throw new Error('Panzoom should be called on elements that have been attached to the DOM');\r\n    }\r\n    options = __assign(__assign({}, defaultOptions), options);\r\n    var isSVG = isSVGElement(elem);\r\n    var parent = elem.parentNode;\r\n    // Set parent styles\r\n    parent.style.overflow = options.overflow;\r\n    parent.style.userSelect = 'none';\r\n    // This is important for mobile to\r\n    // prevent scrolling while panning\r\n    parent.style.touchAction = options.touchAction;\r\n    (options.canvas ? parent : elem).style.cursor = options.cursor;\r\n    // Set element styles\r\n    elem.style.userSelect = 'none';\r\n    elem.style.touchAction = options.touchAction;\r\n    // The default for HTML is '50% 50%'\r\n    // The default for SVG is '0 0'\r\n    // SVG can't be changed in IE\r\n    setStyle(elem, 'transformOrigin', typeof options.origin === 'string' ? options.origin : isSVG ? '0 0' : '50% 50%');\r\n    function resetStyle() {\r\n        parent.style.overflow = '';\r\n        parent.style.userSelect = '';\r\n        parent.style.touchAction = '';\r\n        parent.style.cursor = '';\r\n        elem.style.cursor = '';\r\n        elem.style.userSelect = '';\r\n        elem.style.touchAction = '';\r\n        setStyle(elem, 'transformOrigin', '');\r\n    }\r\n    function setOptions(opts) {\r\n        if (opts === void 0) { opts = {}; }\r\n        for (var key in opts) {\r\n            if (opts.hasOwnProperty(key)) {\r\n                options[key] = opts[key];\r\n            }\r\n        }\r\n        // Handle option side-effects\r\n        if (opts.hasOwnProperty('cursor') || opts.hasOwnProperty('canvas')) {\r\n            parent.style.cursor = elem.style.cursor = '';\r\n            (options.canvas ? parent : elem).style.cursor = options.cursor;\r\n        }\r\n        if (opts.hasOwnProperty('overflow')) {\r\n            parent.style.overflow = opts.overflow;\r\n        }\r\n        if (opts.hasOwnProperty('touchAction')) {\r\n            parent.style.touchAction = opts.touchAction;\r\n            elem.style.touchAction = opts.touchAction;\r\n        }\r\n    }\r\n    var x = 0;\r\n    var y = 0;\r\n    var scale = 1;\r\n    var isPanning = false;\r\n    zoom(options.startScale, { animate: false, force: true });\r\n    // Wait for scale to update\r\n    // for accurate dimensions\r\n    // to constrain initial values\r\n    setTimeout(function () {\r\n        pan(options.startX, options.startY, { animate: false, force: true });\r\n    });\r\n    function trigger(eventName, detail, opts) {\r\n        if (opts.silent) {\r\n            return;\r\n        }\r\n        var event = new CustomEvent(eventName, { detail: detail });\r\n        elem.dispatchEvent(event);\r\n    }\r\n    function setTransformWithEvent(eventName, opts, originalEvent) {\r\n        var value = { x: x, y: y, scale: scale, isSVG: isSVG, originalEvent: originalEvent };\r\n        requestAnimationFrame(function () {\r\n            if (typeof opts.animate === 'boolean') {\r\n                if (opts.animate) {\r\n                    setTransition(elem, opts);\r\n                }\r\n                else {\r\n                    setStyle(elem, 'transition', 'none');\r\n                }\r\n            }\r\n            opts.setTransform(elem, value, opts);\r\n            trigger(eventName, value, opts);\r\n            trigger('panzoomchange', value, opts);\r\n        });\r\n        return value;\r\n    }\r\n    function constrainXY(toX, toY, toScale, panOptions) {\r\n        var opts = __assign(__assign({}, options), panOptions);\r\n        var result = { x: x, y: y, opts: opts };\r\n        if (!opts.force && (opts.disablePan || (opts.panOnlyWhenZoomed && scale === opts.startScale))) {\r\n            return result;\r\n        }\r\n        toX = parseFloat(toX);\r\n        toY = parseFloat(toY);\r\n        if (!opts.disableXAxis) {\r\n            result.x = (opts.relative ? x : 0) + toX;\r\n        }\r\n        if (!opts.disableYAxis) {\r\n            result.y = (opts.relative ? y : 0) + toY;\r\n        }\r\n        if (opts.contain) {\r\n            var dims = getDimensions(elem);\r\n            var realWidth = dims.elem.width / scale;\r\n            var realHeight = dims.elem.height / scale;\r\n            var scaledWidth = realWidth * toScale;\r\n            var scaledHeight = realHeight * toScale;\r\n            var diffHorizontal = (scaledWidth - realWidth) / 2;\r\n            var diffVertical = (scaledHeight - realHeight) / 2;\r\n            if (opts.contain === 'inside') {\r\n                var minX = (-dims.elem.margin.left - dims.parent.padding.left + diffHorizontal) / toScale;\r\n                var maxX = (dims.parent.width -\r\n                    scaledWidth -\r\n                    dims.parent.padding.left -\r\n                    dims.elem.margin.left -\r\n                    dims.parent.border.left -\r\n                    dims.parent.border.right +\r\n                    diffHorizontal) /\r\n                    toScale;\r\n                result.x = Math.max(Math.min(result.x, maxX), minX);\r\n                var minY = (-dims.elem.margin.top - dims.parent.padding.top + diffVertical) / toScale;\r\n                var maxY = (dims.parent.height -\r\n                    scaledHeight -\r\n                    dims.parent.padding.top -\r\n                    dims.elem.margin.top -\r\n                    dims.parent.border.top -\r\n                    dims.parent.border.bottom +\r\n                    diffVertical) /\r\n                    toScale;\r\n                result.y = Math.max(Math.min(result.y, maxY), minY);\r\n            }\r\n            else if (opts.contain === 'outside') {\r\n                var minX = (-(scaledWidth - dims.parent.width) -\r\n                    dims.parent.padding.left -\r\n                    dims.parent.border.left -\r\n                    dims.parent.border.right +\r\n                    diffHorizontal) /\r\n                    toScale;\r\n                var maxX = (diffHorizontal - dims.parent.padding.left) / toScale;\r\n                result.x = Math.max(Math.min(result.x, maxX), minX);\r\n                var minY = (-(scaledHeight - dims.parent.height) -\r\n                    dims.parent.padding.top -\r\n                    dims.parent.border.top -\r\n                    dims.parent.border.bottom +\r\n                    diffVertical) /\r\n                    toScale;\r\n                var maxY = (diffVertical - dims.parent.padding.top) / toScale;\r\n                result.y = Math.max(Math.min(result.y, maxY), minY);\r\n            }\r\n        }\r\n        if (opts.roundPixels) {\r\n            result.x = Math.round(result.x);\r\n            result.y = Math.round(result.y);\r\n        }\r\n        return result;\r\n    }\r\n    function constrainScale(toScale, zoomOptions) {\r\n        var opts = __assign(__assign({}, options), zoomOptions);\r\n        var result = { scale: scale, opts: opts };\r\n        if (!opts.force && opts.disableZoom) {\r\n            return result;\r\n        }\r\n        var minScale = options.minScale;\r\n        var maxScale = options.maxScale;\r\n        if (opts.contain) {\r\n            var dims = getDimensions(elem);\r\n            var elemWidth = dims.elem.width / scale;\r\n            var elemHeight = dims.elem.height / scale;\r\n            if (elemWidth > 1 && elemHeight > 1) {\r\n                var parentWidth = dims.parent.width - dims.parent.border.left - dims.parent.border.right;\r\n                var parentHeight = dims.parent.height - dims.parent.border.top - dims.parent.border.bottom;\r\n                var elemScaledWidth = parentWidth / elemWidth;\r\n                var elemScaledHeight = parentHeight / elemHeight;\r\n                if (options.contain === 'inside') {\r\n                    maxScale = Math.min(maxScale, elemScaledWidth, elemScaledHeight);\r\n                }\r\n                else if (options.contain === 'outside') {\r\n                    minScale = Math.max(minScale, elemScaledWidth, elemScaledHeight);\r\n                }\r\n            }\r\n        }\r\n        result.scale = Math.min(Math.max(toScale, minScale), maxScale);\r\n        return result;\r\n    }\r\n    function pan(toX, toY, panOptions, originalEvent) {\r\n        var result = constrainXY(toX, toY, scale, panOptions);\r\n        // Only try to set if the result is somehow different\r\n        if (x !== result.x || y !== result.y) {\r\n            x = result.x;\r\n            y = result.y;\r\n            return setTransformWithEvent('panzoompan', result.opts, originalEvent);\r\n        }\r\n        return { x: x, y: y, scale: scale, isSVG: isSVG, originalEvent: originalEvent };\r\n    }\r\n    function zoom(toScale, zoomOptions, originalEvent) {\r\n        var result = constrainScale(toScale, zoomOptions);\r\n        var opts = result.opts;\r\n        if (!opts.force && opts.disableZoom) {\r\n            return;\r\n        }\r\n        toScale = result.scale;\r\n        var toX = x;\r\n        var toY = y;\r\n        if (opts.focal) {\r\n            // The difference between the point after the scale and the point before the scale\r\n            // plus the current translation after the scale\r\n            // neutralized to no scale (as the transform scale will apply to the translation)\r\n            var focal = opts.focal;\r\n            toX = (focal.x / toScale - focal.x / scale + x * toScale) / toScale;\r\n            toY = (focal.y / toScale - focal.y / scale + y * toScale) / toScale;\r\n        }\r\n        var panResult = constrainXY(toX, toY, toScale, { relative: false, force: true });\r\n        x = panResult.x;\r\n        y = panResult.y;\r\n        scale = toScale;\r\n        return setTransformWithEvent('panzoomzoom', opts, originalEvent);\r\n    }\r\n    function zoomInOut(isIn, zoomOptions) {\r\n        var opts = __assign(__assign(__assign({}, options), { animate: true }), zoomOptions);\r\n        return zoom(scale * Math.exp((isIn ? 1 : -1) * opts.step), opts);\r\n    }\r\n    function zoomIn(zoomOptions) {\r\n        return zoomInOut(true, zoomOptions);\r\n    }\r\n    function zoomOut(zoomOptions) {\r\n        return zoomInOut(false, zoomOptions);\r\n    }\r\n    function zoomToPoint(toScale, point, zoomOptions, originalEvent) {\r\n        var dims = getDimensions(elem);\r\n        // Instead of thinking of operating on the panzoom element,\r\n        // think of operating on the area inside the panzoom\r\n        // element's parent\r\n        // Subtract padding and border\r\n        var effectiveArea = {\r\n            width: dims.parent.width -\r\n                dims.parent.padding.left -\r\n                dims.parent.padding.right -\r\n                dims.parent.border.left -\r\n                dims.parent.border.right,\r\n            height: dims.parent.height -\r\n                dims.parent.padding.top -\r\n                dims.parent.padding.bottom -\r\n                dims.parent.border.top -\r\n                dims.parent.border.bottom\r\n        };\r\n        // Adjust the clientX/clientY to ignore the area\r\n        // outside the effective area\r\n        var clientX = point.clientX -\r\n            dims.parent.left -\r\n            dims.parent.padding.left -\r\n            dims.parent.border.left -\r\n            dims.elem.margin.left;\r\n        var clientY = point.clientY -\r\n            dims.parent.top -\r\n            dims.parent.padding.top -\r\n            dims.parent.border.top -\r\n            dims.elem.margin.top;\r\n        // Adjust the clientX/clientY for HTML elements,\r\n        // because they have a transform-origin of 50% 50%\r\n        if (!isSVG) {\r\n            clientX -= dims.elem.width / scale / 2;\r\n            clientY -= dims.elem.height / scale / 2;\r\n        }\r\n        // Convert the mouse point from it's position over the\r\n        // effective area before the scale to the position\r\n        // over the effective area after the scale.\r\n        var focal = {\r\n            x: (clientX / effectiveArea.width) * (effectiveArea.width * toScale),\r\n            y: (clientY / effectiveArea.height) * (effectiveArea.height * toScale)\r\n        };\r\n        return zoom(toScale, __assign(__assign({}, zoomOptions), { animate: false, focal: focal }), originalEvent);\r\n    }\r\n    function zoomWithWheel(event, zoomOptions) {\r\n        // Need to prevent the default here\r\n        // or it conflicts with regular page scroll\r\n        event.preventDefault();\r\n        var opts = __assign(__assign(__assign({}, options), zoomOptions), { animate: false });\r\n        // Normalize to deltaX in case shift modifier is used on Mac\r\n        var delta = event.deltaY === 0 && event.deltaX ? event.deltaX : event.deltaY;\r\n        var wheel = delta < 0 ? 1 : -1;\r\n        var toScale = constrainScale(scale * Math.exp((wheel * opts.step) / 3), opts).scale;\r\n        return zoomToPoint(toScale, event, opts, event);\r\n    }\r\n    function reset(resetOptions) {\r\n        var opts = __assign(__assign(__assign({}, options), { animate: true, force: true }), resetOptions);\r\n        scale = constrainScale(opts.startScale, opts).scale;\r\n        var panResult = constrainXY(opts.startX, opts.startY, scale, opts);\r\n        x = panResult.x;\r\n        y = panResult.y;\r\n        return setTransformWithEvent('panzoomreset', opts);\r\n    }\r\n    var origX;\r\n    var origY;\r\n    var startClientX;\r\n    var startClientY;\r\n    var startScale;\r\n    var startDistance;\r\n    var pointers = [];\r\n    function handleDown(event) {\r\n        // Don't handle this event if the target is excluded\r\n        if (isExcluded(event.target, options)) {\r\n            return;\r\n        }\r\n        addPointer(pointers, event);\r\n        isPanning = true;\r\n        options.handleStartEvent(event);\r\n        origX = x;\r\n        origY = y;\r\n        trigger('panzoomstart', { x: x, y: y, scale: scale, isSVG: isSVG, originalEvent: event }, options);\r\n        // This works whether there are multiple\r\n        // pointers or not\r\n        var point = getMiddle(pointers);\r\n        startClientX = point.clientX;\r\n        startClientY = point.clientY;\r\n        startScale = scale;\r\n        startDistance = getDistance(pointers);\r\n    }\r\n    function handleMove(event) {\r\n        if (!isPanning ||\r\n            origX === undefined ||\r\n            origY === undefined ||\r\n            startClientX === undefined ||\r\n            startClientY === undefined) {\r\n            return;\r\n        }\r\n        addPointer(pointers, event);\r\n        var current = getMiddle(pointers);\r\n        var hasMultiple = pointers.length > 1;\r\n        var toScale = scale;\r\n        if (hasMultiple) {\r\n            // A startDistance of 0 means\r\n            // that there weren't 2 pointers\r\n            // handled on start\r\n            if (startDistance === 0) {\r\n                startDistance = getDistance(pointers);\r\n            }\r\n            // Use the distance between the first 2 pointers\r\n            // to determine the current scale\r\n            var diff = getDistance(pointers) - startDistance;\r\n            toScale = constrainScale((diff * options.step) / 80 + startScale).scale;\r\n            zoomToPoint(toScale, current, { animate: false }, event);\r\n        }\r\n        // Pan during pinch if pinchAndPan is true.\r\n        // Note: some calculations may be off because the zoom\r\n        // above has not yet rendered. However, the behavior\r\n        // was removed before the new scale was used in the following\r\n        // pan calculation.\r\n        // See https://github.com/timmywil/panzoom/issues/512\r\n        // and https://github.com/timmywil/panzoom/issues/606\r\n        if (!hasMultiple || options.pinchAndPan) {\r\n            pan(origX + (current.clientX - startClientX) / toScale, origY + (current.clientY - startClientY) / toScale, {\r\n                animate: false\r\n            }, event);\r\n        }\r\n    }\r\n    function handleUp(event) {\r\n        // Don't call panzoomend when panning with 2 touches\r\n        // until both touches end\r\n        if (pointers.length === 1) {\r\n            trigger('panzoomend', { x: x, y: y, scale: scale, isSVG: isSVG, originalEvent: event }, options);\r\n        }\r\n        // Note: don't remove all pointers\r\n        // Can restart without having to reinitiate all of them\r\n        // Remove the pointer regardless of the isPanning state\r\n        removePointer(pointers, event);\r\n        if (!isPanning) {\r\n            return;\r\n        }\r\n        isPanning = false;\r\n        origX = origY = startClientX = startClientY = undefined;\r\n    }\r\n    var bound = false;\r\n    function bind() {\r\n        if (bound) {\r\n            return;\r\n        }\r\n        bound = true;\r\n        onPointer('down', options.canvas ? parent : elem, handleDown);\r\n        onPointer('move', document, handleMove, { passive: true });\r\n        onPointer('up', document, handleUp, { passive: true });\r\n    }\r\n    function destroy() {\r\n        bound = false;\r\n        destroyPointer('down', options.canvas ? parent : elem, handleDown);\r\n        destroyPointer('move', document, handleMove);\r\n        destroyPointer('up', document, handleUp);\r\n    }\r\n    if (!options.noBind) {\r\n        bind();\r\n    }\r\n    return {\r\n        bind: bind,\r\n        destroy: destroy,\r\n        eventNames: events,\r\n        getPan: function () { return ({ x: x, y: y }); },\r\n        getScale: function () { return scale; },\r\n        getOptions: function () { return shallowClone(options); },\r\n        handleDown: handleDown,\r\n        handleMove: handleMove,\r\n        handleUp: handleUp,\r\n        pan: pan,\r\n        reset: reset,\r\n        resetStyle: resetStyle,\r\n        setOptions: setOptions,\r\n        setStyle: function (name, value) { return setStyle(elem, name, value); },\r\n        zoom: zoom,\r\n        zoomIn: zoomIn,\r\n        zoomOut: zoomOut,\r\n        zoomToPoint: zoomToPoint,\r\n        zoomWithWheel: zoomWithWheel\r\n    };\r\n}\r\nPanzoom.defaultOptions = defaultOptions;\n\nexport { Panzoom as default };\n","<template>\n  <div class=\"\">\n    <slot />\n  </div>\n</template>\n<script>\nimport Panzoom from \"@panzoom/panzoom\";\n\nexport default {\n  props: {\n    scale: Number,\n    page_opened_id: String,\n  },\n  components: {},\n  data() {\n    return {\n      panzoom: undefined,\n      debounce_zoom: undefined,\n    };\n  },\n  created() {},\n  async mounted() {\n    /* eslint-disable */\n    this.$nextTick(() => {\n      this.init();\n    });\n  },\n  beforeDestroy() {\n    this.$eventHub.$off(`panzoom.panTo`, this.panTo);\n  },\n  watch: {\n    scale() {\n      this.updateScale(this.scale);\n    },\n    page_opened_id: {\n      handler() {\n        this.$nextTick(() => {\n          const { left, top } = this.getActivePagePos();\n          this.panzoom.pan(left, top, { animate: true });\n        });\n      },\n    },\n  },\n  computed: {},\n  methods: {\n    init() {\n      const { left, top } = this.getActivePagePos();\n\n      this.panzoom = Panzoom(this.$el, {\n        maxScale: 5,\n        step: 0.05,\n        canvas: true,\n        startScale: this.scale,\n        startX: left,\n        startY: top,\n      });\n\n      this.$el.addEventListener(\"wheel\", (e) => {\n        if (!e.ctrlKey) return;\n        this.panzoom.zoomWithWheel(e);\n      });\n      this.$el.addEventListener(\"panzoomzoom\", this.panzoomzoom);\n      this.$el.addEventListener(\"panzoomstart\", this.panzoomstart);\n      this.$el.addEventListener(\"panzoomend\", this.panzoomend);\n\n      this.$eventHub.$on(`panzoom.panTo`, this.panTo);\n    },\n    getActivePagePos() {\n      // const top = this.$el.querySelector(\n      //   \"._spreadNavigator--page.is--active\"\n      // ).offsetTop;\n      const el_left = this.$el.querySelector(\n        \"._spreadNavigator--page.is--active\"\n      ).offsetLeft;\n      const menu_width = document.querySelector(\"._sideCont\").offsetWidth;\n\n      // 43 is height of sidecont breadcrumb\n      const distance_to_corner = 43 * 2;\n\n      const left = -el_left + menu_width + distance_to_corner;\n      const top = distance_to_corner;\n\n      // console.log(\"pan_left \" + left + \"- pan_top \" + top);\n\n      return { left, top };\n    },\n    panTo({ x, y }) {\n      // console.log(`panto ${x} - ${y}`);\n      this.panzoom.pan(-x + 280, -y, { animate: true });\n    },\n    panzoomzoom($event) {\n      if (this.debounce_zoom) clearTimeout(this.debounce_zoom);\n\n      this.debounce_zoom = setTimeout(async () => {\n        if ($event.detail.scale !== this.scale)\n          this.$emit(\"update:scale\", $event.detail.scale);\n      }, 500);\n    },\n    panzoomstart($event) {\n      this.start_pan_x = $event.detail.x;\n      this.start_pan_y = $event.detail.y;\n    },\n    panzoomend($event) {\n      $event.stopPropagation();\n\n      const min_pan_distance = 10;\n      const calcPanDist = (a, b) => Math.abs(a - b) < 10;\n\n      if (\n        calcPanDist(this.start_pan_x, $event.detail.x) &&\n        calcPanDist(this.start_pan_y, $event.detail.y)\n      )\n        this.disableActiveModule();\n    },\n    updateScale(scale) {\n      if (scale !== this.panzoom.getScale()) {\n        this.panzoom.zoom(scale, { animate: true });\n      }\n    },\n    disableActiveModule() {\n      this.$eventHub.$emit(\"module.setActive\", false);\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped></style>\n","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37[0].rules[0].use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PanZoom.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37[0].rules[0].use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PanZoom.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PanZoom.vue?vue&type=template&id=5ffc9c00&scoped=true&\"\nimport script from \"./PanZoom.vue?vue&type=script&lang=js&\"\nexport * from \"./PanZoom.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5ffc9c00\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div\n    class=\"_openedPage\"\n    :class=\"{\n      'is--editable': can_edit,\n    }\"\n  >\n    <transition name=\"fade_fast\" mode=\"out-in\">\n      <div\n        :key=\"\n          is_spread\n            ? 'spread-' + JSON.stringify(active_spread.map((s) => s.id))\n            : 'page-' + page_opened_id\n        \"\n        class=\"_spreadNavigator\"\n      >\n        <div\n          class=\"_spreadNavigator--content\"\n          @click.self=\"setActiveModule(false)\"\n        >\n          <div class=\"_sideCont\">\n            <div class=\"u-breadcrumb _breadcrumb\">\n              <div>\n                <button\n                  type=\"button\"\n                  class=\"u-buttonLink\"\n                  @click=\"setPageActive(false)\"\n                  v-text=\"publication_title\"\n                />\n              </div>\n              <sl-icon name=\"arrow-right-short\" label=\"\" />\n              <div>\n                <!-- <span v-if=\"is_spread\">\n                  {{ $t(\"spread\") }} {{ active_spread_index }}\n                </span>\n                <span v-else> -->\n                {{ $t(\"page\") }} {{ active_page_number + 1 }}\n                <!-- </span> -->\n              </div>\n            </div>\n            <div class=\"_content\">\n              <PageMenu\n                :can_edit=\"can_edit\"\n                :pages=\"pages\"\n                :active_page_number=\"active_page_number\"\n                :active_spread_index=\"active_spread_index\"\n                :scale=\"scale\"\n                :show_grid.sync=\"show_grid\"\n                :snap_to_grid.sync=\"snap_to_grid\"\n                :gridstep_in_cm.sync=\"gridstep_in_cm\"\n                :page_color=\"current_page.page_color\"\n                :pagination=\"pagination\"\n                :publication_path=\"publication_path\"\n                :page_opened_id=\"page_opened_id\"\n                :page_modules=\"\n                  getModulesForPage({ modules, page_id: page_opened_id })\n                \"\n                :active_module=\"active_module\"\n                @updatePageOptions=\"$emit('updatePageOptions', $event)\"\n                @update:scale=\"scale = $event\"\n                @prevPage=\"prevPage()\"\n                @nextPage=\"nextPage()\"\n              />\n            </div>\n          </div>\n          <div class=\"_pagePan\">\n            <PanZoom :scale.sync=\"scale\" :page_opened_id=\"page_opened_id\">\n              <div class=\"_pageCont\">\n                <SinglePage\n                  v-if=\"!is_spread\"\n                  class=\"_spreadNavigator--page is--active\"\n                  :context=\"'full'\"\n                  :page_modules=\"\n                    getModulesForPage({ modules, page_id: page_opened_id })\n                  \"\n                  :page_width=\"page_width\"\n                  :page_height=\"page_height\"\n                  :page_color=\"current_page.page_color\"\n                  :scale=\"scale\"\n                  :show_grid=\"show_grid\"\n                  :snap_to_grid=\"snap_to_grid\"\n                  :gridstep_in_cm=\"gridstep_in_cm\"\n                  :margins=\"margins\"\n                  :page_number=\"active_page_number\"\n                  :pagination=\"pagination\"\n                  :hide_pagination=\"current_page.hide_pagination === true\"\n                  :active_module=\"active_module\"\n                  :can_edit=\"can_edit\"\n                  @close=\"setPageActive(false)\"\n                />\n\n                <div\n                  v-else\n                  v-for=\"(page, index) in active_spread\"\n                  :key=\"page.id ? page.id : index\"\n                  class=\"_spreadNavigator--page\"\n                  :class=\"{\n                    'is--active': page.id === page_opened_id,\n                  }\"\n                  @click.self=\"setActiveModule(false)\"\n                >\n                  <template v-if=\"page\">\n                    <SinglePage\n                      :context=\"'full'\"\n                      :page_modules=\"\n                        getModulesForPage({ modules, page_id: page.id })\n                      \"\n                      :page_width=\"page_width\"\n                      :page_height=\"page_height\"\n                      :page_color=\"page.page_color\"\n                      :scale=\"scale\"\n                      :show_grid=\"show_grid\"\n                      :snap_to_grid=\"snap_to_grid\"\n                      :gridstep_in_cm=\"gridstep_in_cm\"\n                      :margins=\"margins\"\n                      :page_number=\"active_spread_index * 2 + index\"\n                      :pagination=\"pagination\"\n                      :hide_pagination=\"current_page.hide_pagination === true\"\n                      :active_module=\"active_module\"\n                      :page_is_left=\"index === 0\"\n                      :can_edit=\"can_edit && page.id === page_opened_id\"\n                      @close=\"setPageActive(false)\"\n                    />\n                    <template v-if=\"page.id !== page_opened_id\">\n                      <button\n                        type=\"button\"\n                        class=\"_openAdjacentPageBtn panzoom-exclude\"\n                        @mousedown.self=\"setPageActive(page.id)\"\n                      />\n                    </template>\n                  </template>\n                  <div v-else class=\"_noPage\" />\n                </div>\n              </div>\n            </PanZoom>\n          </div>\n        </div>\n      </div>\n    </transition>\n  </div>\n</template>\n<script>\nimport PageMenu from \"@/components/publications/page_by_page/PageMenu.vue\";\nimport SinglePage from \"@/components/publications/page_by_page/SinglePage.vue\";\nimport PanZoom from \"@/components/publications/page_by_page/PanZoom.vue\";\n\nexport default {\n  props: {\n    page_opened_id: String,\n    publication_path: String,\n    publication_title: String,\n    pages: Array,\n    spreads: [Boolean, Array],\n    modules: Array,\n    is_spread: Boolean,\n    page_width: Number,\n    page_height: Number,\n    margins: Object,\n    pagination: [Boolean, Object],\n    can_edit: Boolean,\n  },\n  components: {\n    PageMenu,\n    SinglePage,\n    PanZoom,\n  },\n  data() {\n    return {\n      scale: 1,\n\n      show_grid: true,\n      snap_to_grid: false,\n      gridstep_in_cm: 0.5,\n\n      active_module_path: false,\n    };\n  },\n  created() {\n    this.$eventHub.$on(`module.setActive`, this.setActiveModule);\n    document.addEventListener(\"keydown\", this.keyPressed);\n  },\n  mounted() {},\n  beforeDestroy() {\n    this.$eventHub.$off(`module.setActive`, this.setActiveModule);\n    document.removeEventListener(\"keydown\", this.keyPressed);\n  },\n  watch: {\n    page_opened_id() {\n      this.$nextTick(() => {\n        // const active_page = this.$el.querySelector(\n        //   \"._spreadNavigator--page.is--active\"\n        // );\n        // todo replace with panzoom\n        // if (active_page)\n        // if (this.$el.scrollIntoViewIfNeeded)\n        //   active_page.scrollIntoViewIfNeeded({\n        //     behavior: \"smooth\",\n        //     block: \"nearest\",\n        //     inline: \"center\",\n        //   });\n        // else\n        //   active_page.scrollIntoView({\n        //     behavior: \"smooth\",\n        //     block: \"nearest\",\n        //     inline: \"center\",\n        //   });\n      });\n    },\n  },\n  computed: {\n    active_module() {\n      if (!this.active_module_path) return false;\n\n      return this.modules.find((m) => m.$path === this.active_module_path);\n    },\n    active_module_meta_filename() {\n      return this.active_module.$path.substring(\n        this.active_module.$path.lastIndexOf(\"/\") + 1\n      );\n    },\n    active_page_number() {\n      return this.pages.findIndex((p) => p.id === this.page_opened_id);\n    },\n    current_page() {\n      return this.pages.find((p) => p.id === this.page_opened_id);\n    },\n    previous_page() {\n      return this.pages[this.active_page_number - 1];\n    },\n    next_page() {\n      return this.pages[this.active_page_number + 1];\n    },\n    active_spread() {\n      return this.spreads[this.active_spread_index];\n    },\n    active_spread_index() {\n      return (\n        this.is_spread &&\n        this.spreads.findIndex((pages) =>\n          pages.find((p) => p && p.id === this.page_opened_id)\n        )\n      );\n    },\n  },\n  methods: {\n    keyPressed(event) {\n      if (\n        this.$root.modal_is_opened ||\n        event.target.tagName.toLowerCase() === \"input\" ||\n        event.target.tagName.toLowerCase() === \"textarea\" ||\n        event.target.className.includes(\"ql-editor\") ||\n        event.target.hasAttribute(\"contenteditable\")\n      )\n        return;\n\n      let action = \"\";\n      // let detail = \"\";\n\n      if (event.key === \"Backspace\" || event.key === \"Delete\") {\n        action = \"remove\";\n        this.$eventHub.$emit(`module.open_remove_modal`);\n      }\n      // else if (event.key === \"ArrowUp\") {\n      //   action = \"move\";\n      //   detail = { x: 0, y: -1 };\n      // } else if (event.key === \"ArrowDown\") {\n      //   action = \"move\";\n      //   detail = { x: 0, y: 1 };\n      // } else if (event.key === \"ArrowLeft\") {\n      //   action = \"move\";\n      //   detail = { x: -1, y: 0 };\n      // } else if (event.key === \"ArrowRight\") {\n      //   action = \"move\";\n      //   detail = { x: 1, y: 0 };\n      // }\n\n      if (action) event.preventDefault();\n\n      // this.$eventHub.$emit(\"publication.selected.triggerAction\", {\n      //   action,\n      //   detail,\n      // });\n    },\n    setActiveModule(path) {\n      this.active_module_path = path;\n    },\n    prevPage() {\n      const new_index = this.active_page_number - 1;\n      this.setPageActive(this.pages[new_index].id);\n    },\n    nextPage() {\n      const new_index = this.active_page_number + 1;\n      this.setPageActive(this.pages[new_index].id);\n    },\n    setPageActive(id) {\n      this.setActiveModule(false);\n      this.$emit(\"togglePage\", id);\n    },\n    prevSpread() {\n      const prev_spread = this.spreads[this.active_spread_index - 1];\n      const prev_spread_first_page = prev_spread[1].id;\n      this.setPageActive(prev_spread_first_page);\n    },\n    nextSpread() {\n      const next_spread = this.spreads[this.active_spread_index + 1];\n      const next_spread_first_page = next_spread[0].id;\n      this.setPageActive(next_spread_first_page);\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n._openedPage {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 10;\n\n  text-align: center;\n\n  display: flex;\n  flex-flow: column nowrap;\n\n  background: var(--c-bodybg);\n  --pagemenu-width: 280px;\n\n  &.is--editable {\n    background: var(--color-publish);\n  }\n\n  > ._topMenu {\n    flex: 0 0 auto;\n  }\n\n  > ._spreadNavigator {\n    flex: 1 1 auto;\n  }\n}\n._navBar {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  height: auto;\n  width: 100%;\n  z-index: 12;\n  overflow: hidden;\n\n  display: flex;\n  flex-flow: row nowrap;\n  justify-content: space-between;\n  pointer-events: none;\n\n  button {\n    pointer-events: auto;\n    display: flex;\n    align-items: center;\n    margin: calc(var(--spacing) / 2);\n    padding: calc(var(--spacing) / 2);\n    gap: 1px;\n    background: rgba(255, 255, 255, 0.4);\n    backdrop-filter: blur(12px);\n    border-radius: 4px;\n  }\n}\n\n._breadcrumb {\n  padding: calc(var(--spacing) / 1);\n}\n._topMenu {\n  position: relative;\n  z-index: 10;\n  padding: 0 calc(var(--spacing) * 1);\n}\n._topMenu--content {\n  background: white;\n  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.2);\n\n  padding: calc(var(--spacing) / 2) calc(var(--spacing) * 1);\n  display: flex;\n  flex-flow: row wrap;\n  justify-content: space-between;\n  align-items: center;\n}\n\n._spreadNavigator {\n  overflow: hidden;\n  width: 100%;\n  height: 100%;\n\n  @include scrollbar(8px, 5px, 6px);\n}\n\n._spreadNavigator--menu {\n}\n\n._spreadNavigator--content {\n  // padding-left: var(--pagemenu-width);\n\n  width: 100%;\n  height: 100%;\n  // padding: calc(var(--spacing) * 1);\n}\n._pageCont {\n  display: flex;\n  flex-flow: row nowrap;\n  width: max-content;\n\n  // border: 1px solid black;\n}\n\n._spreadNavigator--page {\n  position: relative;\n  flex: 1 1 50%;\n  // padding: calc(var(--spacing) * 4);\n\n  ::v-deep {\n    ._pagecontent {\n      &::after {\n        content: \"\";\n        position: absolute;\n        inset: 0;\n        z-index: 1000000;\n        background: rgba(255, 255, 255, 0.6);\n        transition: all 0.4s cubic-bezier(0.19, 1, 0.22, 1);\n        pointer-events: none;\n        // backdrop-filter: blur(2px);\n      }\n    }\n  }\n  &.is--active {\n    z-index: 1;\n\n    ::v-deep {\n      ._pagecontent {\n        &::after {\n          opacity: 0;\n        }\n      }\n    }\n  }\n  &:not(.is--active) {\n    // opacity: 0.8;\n\n    ::v-deep {\n      ._pagecontent {\n        // overflow: hidden;\n        &::after {\n          pointer-events: auto;\n          opacity: 1;\n        }\n      }\n    }\n  }\n\n  ._openAdjacentPageBtn {\n    position: absolute;\n    inset: 0;\n    width: 100%;\n    height: 100%;\n    background: transparent;\n    padding: 0;\n\n    &:hover,\n    &:focus {\n      // background: rgba(255, 255, 255, 0.2);\n    }\n  }\n}\n\n._noPage {\n  background: rgba(0, 0, 0, 0.1);\n}\n\n._sideCont {\n  width: var(--pagemenu-width);\n\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 10;\n  max-height: 100%;\n  // padding-right: calc(var(--spacing) / 2);\n  overflow: auto;\n  // pointer-events: none;\n  @include scrollbar(8px, 5px, 6px);\n\n  > * {\n    // pointer-events: auto;\n\n    &._content {\n      margin: 0 calc(var(--spacing) / 2) calc(var(--spacing) * 2);\n    }\n  }\n}\n._pagePan {\n  width: 100%;\n  height: 100%;\n}\n</style>\n","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37[0].rules[0].use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./OpenedPageOrSpread.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37[0].rules[0].use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./OpenedPageOrSpread.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./OpenedPageOrSpread.vue?vue&type=template&id=2a066ec5&scoped=true&\"\nimport script from \"./OpenedPageOrSpread.vue?vue&type=script&lang=js&\"\nexport * from \"./OpenedPageOrSpread.vue?vue&type=script&lang=js&\"\nimport style0 from \"./OpenedPageOrSpread.vue?vue&type=style&index=0&id=2a066ec5&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2a066ec5\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div>\n    <transition name=\"slideup\">\n      <transition-group\n        v-if=\"!page_opened_id\"\n        tag=\"div\"\n        name=\"listComplete\"\n        class=\"_allPages\"\n        key=\"allpages\"\n      >\n        <template v-if=\"!is_spread\">\n          <div\n            class=\"_page\"\n            v-for=\"(page, index) in pages\"\n            :key=\"'page-' + page.id\"\n          >\n            <div class=\"_preview\">\n              <SinglePage\n                :context=\"'list'\"\n                :zoom=\"page_preview_zoom\"\n                :page_modules=\"getModulesForPage({ modules, page_id: page.id })\"\n                :page_width=\"publication.page_width\"\n                :page_height=\"publication.page_height\"\n                :page_color=\"page.page_color\"\n                :can_edit=\"false\"\n              />\n              <button\n                type=\"button\"\n                class=\"u-button _openPage\"\n                @click=\"$emit('togglePage', page.id)\"\n                v-html=\"$t('open')\"\n              />\n            </div>\n            <div class=\"_label\">\n              <b class=\"\">\n                {{ $t(\"page\") }}\n              </b>\n              <SelectField\n                :key=\"'page-' + index\"\n                :content=\"index + 1\"\n                :can_edit=\"can_edit\"\n                :options=\"all_pages_in_select\"\n                @update=\"\n                  movePage({\n                    old_position: index,\n                    new_position: $event - 1,\n                  })\n                \"\n              />\n              <RemoveMenu v-if=\"can_edit\" @remove=\"removePage(page.id)\" />\n            </div>\n          </div>\n        </template>\n        <template v-else>\n          <div\n            class=\"_spread\"\n            v-for=\"(spread, index) in spreads\"\n            :key=\"'spread-' + index\"\n          >\n            <div\n              class=\"\"\n              v-for=\"(page, iindex) in spread\"\n              :key=\"page ? page.id : iindex\"\n            >\n              <template v-if=\"page && page.id\">\n                <div class=\"_preview\">\n                  <SinglePage\n                    :context=\"'list'\"\n                    :zoom=\"page_preview_zoom\"\n                    :page_modules=\"\n                      getModulesForPage({ modules, page_id: page.id })\n                    \"\n                    :page_width=\"publication.page_width\"\n                    :page_height=\"publication.page_height\"\n                    :page_color=\"page.page_color\"\n                    :page_number=\"index * 2 + iindex\"\n                    :pagination=\"pagination\"\n                    :hide_pagination=\"page.hide_pagination === true\"\n                    :page_is_left=\"iindex === 0\"\n                    :can_edit=\"false\"\n                  />\n                  <button\n                    type=\"button\"\n                    class=\"u-button _openPage\"\n                    @click=\"$emit('togglePage', page.id)\"\n                    v-html=\"$t('open')\"\n                  />\n                  <!-- <div v-else>No preview</div> -->\n                </div>\n                <div class=\"_label\">\n                  <b>{{ $t(\"page\") }}</b>\n                  <SelectField\n                    :key=\"'page-' + index * 2 + iindex\"\n                    :content=\"index * 2 + iindex\"\n                    :can_edit=\"can_edit\"\n                    :options=\"all_pages_in_select\"\n                    @update=\"\n                      movePage({\n                        old_position: index * 2 + iindex - 1,\n                        new_position: $event - 1,\n                      })\n                    \"\n                  />\n                  <RemoveMenu v-if=\"can_edit\" @remove=\"removePage(page.id)\" />\n                </div>\n              </template>\n            </div>\n          </div>\n        </template>\n        <button\n          type=\"button\"\n          class=\"u-button u-button_bleuvert\"\n          @click=\"createPage\"\n          v-if=\"can_edit\"\n          key=\"createPage\"\n        >\n          {{ $t(\"create_page\") }}\n        </button>\n      </transition-group>\n\n      <OpenedPageOrSpread\n        v-else\n        key=\"openedpage\"\n        :page_opened_id=\"page_opened_id\"\n        :publication_title=\"publication.title\"\n        :publication_path=\"publication.$path\"\n        :pages=\"pages\"\n        :spreads=\"spreads\"\n        :modules=\"modules\"\n        :is_spread=\"is_spread\"\n        :page_width=\"publication.page_width\"\n        :page_height=\"publication.page_height\"\n        :margins=\"margins\"\n        :pagination=\"pagination\"\n        :can_edit=\"can_edit\"\n        @togglePage=\"$emit('togglePage', $event)\"\n        @updatePageOptions=\"updatePageOptions\"\n        @closePublication=\"$emit('closePublication')\"\n      />\n    </transition>\n  </div>\n</template>\n<script>\nimport SinglePage from \"@/components/publications/page_by_page/SinglePage.vue\";\nimport OpenedPageOrSpread from \"@/components/publications/page_by_page/OpenedPageOrSpread.vue\";\n\nexport default {\n  props: {\n    publication: Object,\n    page_opened_id: String,\n    can_edit: Boolean,\n  },\n  components: {\n    SinglePage,\n    OpenedPageOrSpread,\n  },\n  data() {\n    return {};\n  },\n  created() {},\n  mounted() {},\n  beforeDestroy() {},\n  watch: {},\n  computed: {\n    pages() {\n      return this.publication.pages;\n    },\n    modules() {\n      return this.publication.$files || [];\n    },\n    is_spread() {\n      return this.publication.page_spreads === true;\n    },\n    all_pages_in_select() {\n      return new Array(this.pages.length)\n        .fill(null)\n        .map((i, index) => ({ key: index + 1, text: index + 1 }));\n    },\n    page_preview_zoom() {\n      return this.calculateZoomToFit({\n        width: this.publication.page_width,\n        height: this.publication.page_height,\n        desired_largest_dimension: 200,\n      });\n    },\n    spreads() {\n      if (!this.is_spread) return false;\n      return this.makeSpread({\n        pages: this.pages,\n      });\n    },\n    margins() {\n      return {\n        left: this.publication.page_margin_left || 0,\n        right: this.publication.page_margin_right || 0,\n        top: this.publication.page_margin_top || 0,\n        bottom: this.publication.page_margin_bottom || 0,\n      };\n    },\n    pagination() {\n      return this.setPaginationFromPublication(this.publication);\n    },\n  },\n  methods: {\n    createPage() {\n      const new_page_id = (\n        Math.random().toString(36) + \"00000000000000000\"\n      ).slice(2, 2 + 6);\n\n      let pages = this.publication.pages ? this.publication.pages.slice() : [];\n\n      pages.push({\n        id: new_page_id,\n        page_color: \"white\",\n      });\n\n      this.updatePubliMeta({\n        pages,\n      });\n    },\n    removePage(id) {\n      let pages = this.publication.pages.slice();\n      pages = pages.filter((p) => p.id !== id);\n      this.updatePubliMeta({\n        pages,\n      });\n    },\n    movePage({ old_position, new_position }) {\n      old_position;\n      new_position;\n\n      let pages = this.publication.pages.slice();\n\n      function array_move(arr, old_index, new_index) {\n        if (new_index >= arr.length) {\n          var k = new_index - arr.length + 1;\n          while (k--) {\n            arr.push(undefined);\n          }\n        }\n        arr.splice(new_index, 0, arr.splice(old_index, 1)[0]);\n        return arr; // for testing\n      }\n\n      array_move(pages, old_position, new_position);\n\n      this.updatePubliMeta({\n        pages,\n      });\n    },\n    async updatePageOptions({ page_number, value }) {\n      let pages = this.publication.pages.slice();\n      Object.assign(pages[page_number], value);\n      this.updatePubliMeta({\n        pages,\n      });\n    },\n    async updatePubliMeta(new_meta) {\n      return await this.$api.updateMeta({\n        path: this.publication.$path,\n        new_meta,\n      });\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n._allPages {\n  display: flex;\n  flex-flow: row wrap;\n  justify-content: center;\n  align-items: center;\n  gap: calc(var(--spacing) / 1);\n}\n\n._page {\n  display: flex;\n  flex-flow: column nowrap;\n  align-items: center;\n  // position: relative;\n  // background: white;\n  // box-shadow: 0 3px 6px rgba(0, 0, 0, 0.16), 0 3px 6px rgba(0, 0, 0, 0.23);\n  // width: 210px;\n  // height: 297px;\n}\n._spread {\n  display: flex;\n  flex-flow: row nowrap;\n}\n._preview {\n  position: relative;\n  overflow: hidden;\n  box-shadow: 0 3px 6px rgba(0, 0, 0, 0.06);\n  min-width: 2em;\n  min-height: 2em;\n  background: rgba(255, 255, 255, 0.2);\n}\n._label {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: calc(var(--spacing) / 4);\n  padding: calc(var(--spacing) / 4) calc(var(--spacing) / 8);\n  margin: calc(var(--spacing) / 8);\n  background: rgba(0, 0, 0, 0.06);\n  border-radius: 4px;\n}\n\n._openPage {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(255, 255, 255, 0.6);\n  color: black;\n  opacity: 0;\n  backdrop-filter: blur(5px);\n\n  transition: opacity 0.4s cubic-bezier(0.19, 1, 0.22, 1);\n\n  &:hover,\n  &:focus,\n  &:active {\n    opacity: 1;\n  }\n}\n</style>\n","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37[0].rules[0].use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PagesList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37[0].rules[0].use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PagesList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PagesList.vue?vue&type=template&id=39bbafc9&scoped=true&\"\nimport script from \"./PagesList.vue?vue&type=script&lang=js&\"\nexport * from \"./PagesList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PagesList.vue?vue&type=style&index=0&id=39bbafc9&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"39bbafc9\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"_pageTemplate\">\n    <RadioSwitch\n      v-if=\"can_edit\"\n      :content.sync=\"current_view\"\n      :options=\"[\n        {\n          label: $t('settings'),\n          value: 'settings',\n        },\n        {\n          label:\n            publication.page_spreads === true\n              ? $t('list_of_spreads')\n              : $t('list_of_pages'),\n          value: 'pages',\n        },\n      ]\"\n    />\n\n    <br />\n\n    <PageSettings\n      v-if=\"current_view === 'settings' && can_edit\"\n      :publication=\"publication\"\n    />\n    <PagesList\n      v-else\n      :publication=\"publication\"\n      :page_opened_id=\"page_opened_id\"\n      :can_edit=\"can_edit\"\n      @togglePage=\"$emit('togglePage', $event)\"\n      @closePublication=\"$emit('closePublication')\"\n    />\n  </div>\n</template>\n<script>\nimport PageSettings from \"@/components/publications/page_by_page/PageSettings.vue\";\nimport PagesList from \"@/components/publications/page_by_page/PagesList.vue\";\n\nexport default {\n  props: {\n    publication: Object,\n    page_opened_id: String,\n    can_edit: Boolean,\n  },\n  components: {\n    PageSettings,\n    PagesList,\n  },\n  data() {\n    return {\n      current_view: \"pages\",\n    };\n  },\n  created() {},\n  mounted() {},\n  beforeDestroy() {},\n  watch: {},\n  computed: {},\n  methods: {},\n};\n</script>\n<style lang=\"scss\" scoped></style>\n","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37[0].rules[0].use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PageTemplate.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-37[0].rules[0].use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PageTemplate.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PageTemplate.vue?vue&type=template&id=a5ce3770&scoped=true&\"\nimport script from \"./PageTemplate.vue?vue&type=script&lang=js&\"\nexport * from \"./PageTemplate.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a5ce3770\",\n  null\n  \n)\n\nexport default component.exports","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".yoyoo-ddr{position:absolute}.yoyoo-ddr .resize-handler.tm{left:50%}.yoyoo-ddr .resize-handler.r{top:50%}.yoyoo-ddr .resize-handler.bm{left:50%}.yoyoo-ddr .resize-handler.l{top:50%;cursor:pointer}.yoyoo-ddr .resize-handler,.yoyoo-ddr .rotate-handler{display:none;position:absolute;border:1px solid #607d8b;background:#fff;-webkit-box-sizing:border-box;box-sizing:border-box;border-radius:50%}.yoyoo-ddr .rotate-handler{left:50%;cursor:crosshair}.yoyoo-ddr.active{border:1px dashed #607d8b}.yoyoo-ddr.active>.resize-handler-wrapper>.resize-handler,.yoyoo-ddr.active>.rotate-handler{display:inline-block}.yoyoo-ddr .bl,.yoyoo-ddr .br,.yoyoo-ddr .tl,.yoyoo-ddr .tr{background:#607d8b}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"._moveableItem.is--locked[data-v-07f6c52b]{pointer-events:none}._moveableItem.is--editable[data-v-07f6c52b]  .u-floatingFsButton{display:none}._moveableItem.is--editable[data-v-07f6c52b]:not(.is--beingEdited):not(.is--locked){cursor:pointer;cursor:grab}._moveableItem.is--editable[data-v-07f6c52b]:hover:not(.is--locked){outline:2px dotted var(--c-noir)}._moveableItem.is--beingEdited[data-v-07f6c52b]{outline:2px dotted var(--c-orange)!important}._moveableItem.yoyoo-ddr:not(.is--beingEdited).active[data-v-07f6c52b]{border:none;outline:2px dotted var(--c-orange)!important}._moveableItem.yoyoo-ddr:not(.is--beingEdited).active[data-v-07f6c52b]  .bl,._moveableItem.yoyoo-ddr:not(.is--beingEdited).active[data-v-07f6c52b]  .br,._moveableItem.yoyoo-ddr:not(.is--beingEdited).active[data-v-07f6c52b]  .tl,._moveableItem.yoyoo-ddr:not(.is--beingEdited).active[data-v-07f6c52b]  .tr{background:var(--c-orange)}._moveableItem.yoyoo-ddr:not(.is--beingEdited).ddr-dragging[data-v-07f6c52b]{cursor:-moz-grabbing;cursor:dragging}._moveableItem--content[data-v-07f6c52b]{height:100%;padding:0;transition:all .2s cubic-bezier(.19,1,.22,1)}._moveableItem--content[data-v-07f6c52b]  ._content{height:100%;overflow:hidden}._moveableItem--content[data-v-07f6c52b]  ._content ._mediaContent,._moveableItem--content[data-v-07f6c52b]  ._content ._mediaGrid,._moveableItem--content[data-v-07f6c52b]  ._content ._mediaGrid--item,._moveableItem--content[data-v-07f6c52b]  ._content ._moduleMosaic{height:100%}._moveableItem--content[data-v-07f6c52b]  ._content ._mediaContent--image{position:absolute;width:100%;height:100%;-o-object-fit:var(--object-fit,cover);object-fit:var(--object-fit,cover);-o-object-position:center;object-position:center}._moveableItem--content[data-v-07f6c52b]  ._content .plyr__poster{background-size:var(--object-fit,cover);background-position:50%;background-color:transparent}._moveableItem--content[data-v-07f6c52b]  ._content .plyr--video,._moveableItem--content[data-v-07f6c52b]  ._content .plyr__video-wrapper{background-color:transparent}._moveableItem--content[data-v-07f6c52b]  ._content .plyr__video-wrapper video{-o-object-fit:var(--object-fit,cover);object-fit:var(--object-fit,cover);-o-object-position:center;object-position:center}._moveableItem--content[data-v-07f6c52b]  ._content .plyr--video{min-width:50px}._moveableItem[data-v-07f6c52b]  ._publicationModule:not(.is--shape) .ql-editor{font-size:var(--set-fontSize)}._moveableItem[data-v-07f6c52b]  ._publicationModule:not(.is--shape) ._mediaContent--image,._moveableItem[data-v-07f6c52b]  ._publicationModule:not(.is--shape) ._mediaContent[data-filetype=audio],._moveableItem[data-v-07f6c52b]  ._publicationModule:not(.is--shape) ._mediaContent[data-filetype=url],._moveableItem[data-v-07f6c52b]  ._publicationModule:not(.is--shape) ._mediaContent[data-filetype=video],._moveableItem[data-v-07f6c52b]  ._publicationModule:not(.is--shape) .ql-editor{padding:var(--set-margins);opacity:var(--set-opacity);aspect-ratio:unset;border-radius:var(--set-borderRadius);overflow:hidden;background:var(--set-backgroundColor);border-color:var(--set-outlineColor);border-width:var(--set-outlineWidth);border-style:solid}._moveableItem[data-v-07f6c52b]  ._publicationModule.is--shape{padding:var(--set-margins);opacity:var(--set-opacity);fill:var(--set-backgroundColor);stroke:var(--set-outlineColor);stroke-width:var(--set-outlineWidth)}._moveableItem.is--editable:not(.is--beingEdited):not(.is--locked) ._activator[data-v-07f6c52b]:after{content:\\\"\\\";position:absolute;top:0;left:0;width:100%;height:100%;background-color:var(--c-orange_clair);opacity:0;transition:opacity .4s cubic-bezier(.19,1,.22,1)}._moveableItem.is--editable:not(.is--beingEdited):not(.is--locked) ._activator[data-v-07f6c52b]:hover:after{opacity:.15}._coords[data-v-07f6c52b]{bottom:0;background:#fff;margin:calc(var(--spacing)*1)}._coords[data-v-07f6c52b],._unlockBtn[data-v-07f6c52b]{position:absolute;left:0}._unlockBtn[data-v-07f6c52b]{top:0;width:100%;pointer-events:none;padding:calc(var(--spacing)/2);display:flex;justify-content:flex-start}._unlockBtn>*[data-v-07f6c52b]{pointer-events:auto}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"._openedPage[data-v-2a066ec5]{position:absolute;top:0;left:0;width:100%;height:100%;z-index:10;text-align:center;display:flex;flex-flow:column nowrap;background:var(--c-bodybg);--pagemenu-width:280px}._openedPage.is--editable[data-v-2a066ec5]{background:var(--color-publish)}._openedPage>._topMenu[data-v-2a066ec5]{flex:0 0 auto}._openedPage>._spreadNavigator[data-v-2a066ec5]{flex:1 1 auto}._navBar[data-v-2a066ec5]{position:absolute;bottom:0;left:0;height:auto;width:100%;z-index:12;overflow:hidden;display:flex;flex-flow:row nowrap;justify-content:space-between;pointer-events:none}._navBar button[data-v-2a066ec5]{pointer-events:auto;display:flex;align-items:center;margin:calc(var(--spacing)/2);padding:calc(var(--spacing)/2);gap:1px;background:hsla(0,0%,100%,.4);-webkit-backdrop-filter:blur(12px);backdrop-filter:blur(12px);border-radius:4px}._breadcrumb[data-v-2a066ec5]{padding:calc(var(--spacing)/1)}._topMenu[data-v-2a066ec5]{position:relative;z-index:10;padding:0 calc(var(--spacing)*1)}._topMenu--content[data-v-2a066ec5]{background:#fff;box-shadow:0 1px 4px rgba(0,0,0,.2);padding:calc(var(--spacing)/2) calc(var(--spacing)*1);display:flex;flex-flow:row wrap;justify-content:space-between;align-items:center}._spreadNavigator[data-v-2a066ec5]{overflow:hidden;width:100%;height:100%}._spreadNavigator[data-v-2a066ec5]::-webkit-scrollbar{height:18px;width:18px;background-color:transparent}._spreadNavigator[data-v-2a066ec5]::-webkit-scrollbar-thumb,._spreadNavigator[data-v-2a066ec5]::-webkit-scrollbar-track{border:6px solid hsla(0,0%,100%,0);border-radius:24px;background-clip:padding-box;-webkit-transition:all .4s;transition:all .4s}._spreadNavigator[data-v-2a066ec5]::-webkit-scrollbar-track{background-color:transparent}._spreadNavigator[data-v-2a066ec5]::-webkit-scrollbar-thumb{background-color:var(--c-noir)}._spreadNavigator[data-v-2a066ec5]::-webkit-scrollbar-thumb:hover{background-color:var(--c-gris);border:6px solid hsla(0,0%,100%,0)}._spreadNavigator--content[data-v-2a066ec5]{width:100%;height:100%}._pageCont[data-v-2a066ec5]{display:flex;flex-flow:row nowrap;width:-moz-max-content;width:max-content}._spreadNavigator--page[data-v-2a066ec5]{position:relative;flex:1 1 50%}._spreadNavigator--page[data-v-2a066ec5]  ._pagecontent:after{content:\\\"\\\";position:absolute;inset:0;z-index:1000000;background:hsla(0,0%,100%,.6);transition:all .4s cubic-bezier(.19,1,.22,1);pointer-events:none}._spreadNavigator--page.is--active[data-v-2a066ec5]{z-index:1}._spreadNavigator--page.is--active[data-v-2a066ec5]  ._pagecontent:after{opacity:0}._spreadNavigator--page[data-v-2a066ec5]:not(.is--active)  ._pagecontent:after{pointer-events:auto;opacity:1}._spreadNavigator--page ._openAdjacentPageBtn[data-v-2a066ec5]{position:absolute;inset:0;width:100%;height:100%;background:transparent;padding:0}._noPage[data-v-2a066ec5]{background:rgba(0,0,0,.1)}._sideCont[data-v-2a066ec5]{width:var(--pagemenu-width);position:absolute;left:0;top:0;z-index:10;max-height:100%;overflow:auto}._sideCont[data-v-2a066ec5]::-webkit-scrollbar{height:18px;width:18px;background-color:transparent}._sideCont[data-v-2a066ec5]::-webkit-scrollbar-thumb,._sideCont[data-v-2a066ec5]::-webkit-scrollbar-track{border:6px solid hsla(0,0%,100%,0);border-radius:24px;background-clip:padding-box;-webkit-transition:all .4s;transition:all .4s}._sideCont[data-v-2a066ec5]::-webkit-scrollbar-track{background-color:transparent}._sideCont[data-v-2a066ec5]::-webkit-scrollbar-thumb{background-color:var(--c-noir)}._sideCont[data-v-2a066ec5]::-webkit-scrollbar-thumb:hover{background-color:var(--c-gris);border:6px solid hsla(0,0%,100%,0)}._sideCont>._content[data-v-2a066ec5]{margin:0 calc(var(--spacing)/2) calc(var(--spacing)*2)}._pagePan[data-v-2a066ec5]{width:100%;height:100%}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"._pageMenu[data-v-39ef7758]{text-align:left}._pageMenu--pane[data-v-39ef7758]{padding:calc(var(--spacing)/2);background:var(--panel-color);border:var(--panel-borders);box-shadow:var(--panel-shadows);border-radius:var(--panel-radius);margin-bottom:calc(var(--spacing)/2)}._activeModulePreview[data-v-39ef7758]{overflow:hidden;margin:0 auto;background:var(--c-noir);width:100%;height:50px;display:flex;justify-content:center}._mediaList[data-v-39ef7758]{font-size:var(--sl-font-size-x-small);padding:0}._mediaList>*[data-v-39ef7758]{display:flex;flex-flow:row nowrap;align-items:center;gap:calc(var(--spacing)/2);cursor:pointer}._mediaList[data-v-39ef7758]>:hover{background:var(--c-gris_clair)}._mediaList[data-v-39ef7758]>:not(:last-child){border-bottom:2px solid var(--c-gris)}._mediaList>* ._preview[data-v-39ef7758]{position:relative;width:50px;height:50px;flex:0 0 50px}._mediaList>* ._preview[data-v-39ef7758]  img{width:100%;height:100%;position:absolute;-o-object-fit:contain;object-fit:contain}._textExtract[data-v-39ef7758]  .ql-editor{padding-bottom:0}._titleRow[data-v-39ef7758]{display:flex;flex-flow:row wrap;align-items:center;justify-content:space-between}._titleRow button[data-v-39ef7758]{font-size:var(--sl-font-size-large)}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"._pageSettings[data-v-6793dcf2]{background:#fff;max-width:380px;padding:calc(var(--spacing)*1);margin:0 auto calc(var(--spacing)*1)}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"._allPages[data-v-39bbafc9]{flex-flow:row wrap;justify-content:center;gap:calc(var(--spacing)/1)}._allPages[data-v-39bbafc9],._page[data-v-39bbafc9]{display:flex;align-items:center}._page[data-v-39bbafc9]{flex-flow:column nowrap}._spread[data-v-39bbafc9]{display:flex;flex-flow:row nowrap}._preview[data-v-39bbafc9]{position:relative;overflow:hidden;box-shadow:0 3px 6px rgba(0,0,0,.06);min-width:2em;min-height:2em;background:hsla(0,0%,100%,.2)}._label[data-v-39bbafc9]{display:flex;justify-content:center;align-items:center;gap:calc(var(--spacing)/4);padding:calc(var(--spacing)/4) calc(var(--spacing)/8);margin:calc(var(--spacing)/8);background:rgba(0,0,0,.06);border-radius:4px}._openPage[data-v-39bbafc9]{position:absolute;top:0;left:0;width:100%;height:100%;background:hsla(0,0%,100%,.6);color:#000;opacity:0;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);transition:opacity .4s cubic-bezier(.19,1,.22,1)}._openPage[data-v-39bbafc9]:active,._openPage[data-v-39bbafc9]:focus,._openPage[data-v-39bbafc9]:hover{opacity:1}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"._pagecontainer[data-v-88ba45a0]{width:calc(var(--page-width));height:calc(var(--page-height));padding:0;transform:scale(var(--zoom));transform-origin:0 0;transition:all .4s cubic-bezier(.19,1,.22,1)}.is--preview ._pagecontainer[data-v-88ba45a0]{width:calc(var(--page-width)*var(--zoom));height:calc(var(--page-height)*var(--zoom));transform-origin:left top;margin:0 auto;padding:0}._pagecontent[data-v-88ba45a0]{display:block;position:relative;z-index:0;margin:0 auto;width:var(--page-width,10cm);height:var(--page-height,10cm);background:var(--page-color,#fff);overflow:hidden;box-shadow:0 3px 6px rgba(0,0,0,.16),0 3px 6px rgba(0,0,0,.23);transition:background .4s cubic-bezier(.19,1,.22,1)}._singlePage.is--editable ._pagecontent[data-v-88ba45a0]{overflow:visible}._grid[data-v-88ba45a0]{position:absolute;top:0;width:100%;height:100%;pointer-events:none;opacity:.6;z-index:-10000;--c-gridlines:#aaa;--c-gridfiveslines:#111}._margins[data-v-88ba45a0],._pageBorders[data-v-88ba45a0]{position:absolute;top:0;width:100%;height:100%;pointer-events:none;stroke-width:2px}._margins[data-v-88ba45a0]{stroke:#cb68fd}._pagination[data-v-88ba45a0]{position:absolute;right:var(--pagination-right);left:var(--pagination-left);bottom:var(--pagination-bottom);font-weight:500;line-height:.5;font-size:var(--sl-font-size-large)}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".yoyoo-ddr{position:absolute}.yoyoo-ddr .resize-handler.tm{left:50%}.yoyoo-ddr .resize-handler.r{top:50%}.yoyoo-ddr .resize-handler.bm{left:50%}.yoyoo-ddr .resize-handler.l{top:50%;cursor:pointer}.yoyoo-ddr .resize-handler,.yoyoo-ddr .rotate-handler{display:none;position:absolute;border:1px solid #607d8b;background:#fff;box-sizing:border-box;border-radius:50%}.yoyoo-ddr .rotate-handler{left:50%;cursor:crosshair}.yoyoo-ddr.active{border:1px dashed #607d8b}.yoyoo-ddr.active>.resize-handler-wrapper>.resize-handler,.yoyoo-ddr.active>.rotate-handler{display:inline-block}.yoyoo-ddr .bl,.yoyoo-ddr .br,.yoyoo-ddr .tl,.yoyoo-ddr .tr{background:#607d8b}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../css-loader/dist/cjs.js??clonedRuleSet-11[0].rules[0].use[1]!../../postcss-loader/dist/cjs.js??clonedRuleSet-11[0].rules[0].use[2]!../../postcss-loader/dist/cjs.js??clonedRuleSet-11[0].rules[0].use[3]!./yoyoo-ddr.css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"9124acb2\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[2]!../../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[3]!../../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[4]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./MoveableItem.vue?vue&type=style&index=0&id=07f6c52b&lang=scss&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"5bbe52d6\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[2]!../../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[3]!../../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[4]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./OpenedPageOrSpread.vue?vue&type=style&index=0&id=2a066ec5&lang=scss&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"092e2610\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[2]!../../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[3]!../../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[4]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PageMenu.vue?vue&type=style&index=0&id=39ef7758&lang=scss&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"c0b7fc78\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[2]!../../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[3]!../../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[4]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PageSettings.vue?vue&type=style&index=0&id=6793dcf2&lang=scss&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"40467ff0\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[2]!../../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[3]!../../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[4]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PagesList.vue?vue&type=style&index=0&id=39bbafc9&lang=scss&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"242b40cb\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[1]!../../../../node_modules/@vue/vue-loader-v15/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[2]!../../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[3]!../../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-19[0].rules[0].use[4]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SinglePage.vue?vue&type=style&index=0&id=88ba45a0&lang=scss&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"62061f5e\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js??clonedRuleSet-29[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-29[0].rules[0].use[2]!../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-29[0].rules[0].use[3]!../../node_modules/less-loader/dist/cjs.js??clonedRuleSet-29[0].rules[0].use[4]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=less&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"7060f4ae\", content, true, {\"sourceMap\":false,\"shadowMode\":false});"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","class","context","can_edit","style","show_grid","attrs","gridstep","_e","_l","publimodule","key","$path","magnification","snap_to_grid","scale","active_module","l_margins","magnify","left","top","page_width","right","page_height","bottom","pagination","hide_pagination","page_number_corrected","_v","_s","staticRenderFns","component_key","locked","is_active","content_is_edited","transform","aspect_ratio","grid","on","dragStart","onDrag","dragEnd","resizeStart","resizeEnd","rotateEnd","setActive","dblClick","turnCMtoPX","border_radius","onDuplicateModule","contentIsEdited","contentIsNotEdited","$event","unlock","lock","Vector","constructor","lst","_values","toString","join","length","dot","vector","map","item","index","reduce","a","b","Error","get","Matrix","values","static","shape","Array","fill","valueOf","JSON","parse","stringify","rows","cols","rowVector","row","slice","colVector","col","v","forEach","v1","newMatrix","zeros","i","j","T","_","colIndex","rowIndex","pointMap","br","bm","bl","l","tl","tm","tr","r","handlerPointMap","pointMap2","widthMap","heightMap","tr2bl","deg2rad","deg","Math","PI","rad2deg","rad","getPoints","x","y","width","height","rotation","zoom","wc","hc","cos","sin","rect","getSize","type","dis","pressAngle","startAngle","w","h","currentAngle","atan2","cursorMap","handlerMap","getHandler","originIndex","currentIndex","floor","name","props","value","default","handlerSize","active","resizeHandler","resizable","rotatable","draggable","acceptRatio","minWidth","minHeight","maxWidth","maxHeight","parent","beforeActive","id","renderContent","stop","prevent","axis","data","currentRatio","isInitialRatio","isDragging","isResizing","isRotating","isReadyToDrag","isReadyToResize","isReadyToRotate","created","watch","computed","rotateHandler","methods","handleDefaultEvent","e","getNewHandler","cursor","emitChange","handleMouseDown","clientX","clientY","minLeft","maxLeft","minTop","maxTop","maxLeftWidth","maxRightWidth","maxTopHeight","maxBottomHeight","document","handleMouseMove","doMove","restrictToLeftOfParent","restrictToTopOfParent","restrictHeight","restrictWidth","handleMouseUp","drag","resize","rotate","handleResizeStart","matrix","opposite","opp2","offsetX","offsetY","handleResizeMove","handleRotateStart","cx","cy","handleRotateMove","roundRotate","getClassNames","component","components","DDR","PublicationModule","mounted","beforeDestroy","handler","deep","module_meta_filename","module_z_index","z_index","module_styles","setNewComponentKey","setTransformFromPubli","Object","was_updated","turnPXtoCM","roundToDec","firstMedia","source_media_path","event","new_meta","panTo","editText","setTimeout","updateMeta","path","catch","page_modules","page_color","gridstep_in_cm","margins","page_number","page_is_left","MoveableItem","page_styles","pagination_styles","current_view","label","$t","publication","page_spreads","page_opened_id","$emit","edit_mode","domProps","predefined_format_from_width","setSizeFromFormat","option","text","directives","rawName","expression","modifiers","target","composing","new_page_width","_n","$forceUpdate","new_page_height","enableEditMode","is_saving","updateSize","cancel","format_options","f","closeLogOnClick","delay","error","is_spread","updateMargins","page_margin_top","page_margin_bottom","page_margin_left","page_margin_right","enable_pagination","pagn_starts_on_page","updatePagination","pagn_right","pagn_bottom","WidthHeightField","SetMargins","PaginationOption","title","pages","spreads","modules","updatePageOptions","spread","page","iindex","page_preview_zoom","getModulesForPage","page_id","all_pages_in_select","movePage","old_position","new_position","removePage","createPage","active_spread","s","currentTarget","setActiveModule","publication_title","setPageActive","active_page_number","active_spread_index","current_page","publication_path","prevPage","nextPage","toLowerCase","round","has_editor_toolbar","module_type","ref","$content","updateMediaPubliMeta","duplicateModule","removeModule","$type","text_size","opacity","background_color","is_shape","outline_width","outline_color","new_module_meta","enableModuleEdit","show_all_medias","page_module","$date_uploaded","max_z_index","moveToFront","min_z_index","moveToBack","list_all_z_index","show_confirm_move","current_page_id","setNewPage","slot","page_id_to_move_to","submit","DepthInput","ModuleCreator","MoveToPage","show_page_options","has_pagination","displayToolbar","removeToolbar","openRemoveModal","meta_filename","changeModulePage","_t","__assign","assign","t","n","arguments","p","prototype","hasOwnProperty","call","apply","findEventIndex","pointers","pointerId","addPointer","touches","_i","_a","touch","splice","push","removePointer","pop","getMiddle","event2","event1","getDistance","sqrt","pow","abs","window","NodeList","CustomEvent","params","bubbles","cancelable","detail","evt","createEvent","initCustomEvent","events","down","move","up","onPointer","elem","eventOpts","split","addEventListener","destroyPointer","removeEventListener","PointerEvent","TouchEvent","divStyle","isIE","documentMode","createStyle","createElement","prefixes","prefixCache","getPrefixedName","capName","toUpperCase","prefixedName","concat","getCSSNum","parseFloat","getBoxStyle","getComputedStyle","suffix","setStyle","setTransition","options","duration","easing","setTransform","_options","isSVG","matrixValue","getPropertyValue","setAttribute","getDimensions","parentNode","parentStyle","rectElem","getBoundingClientRect","rectParent","margin","border","padding","isAttached","doc","ownerDocument","nodeType","documentElement","contains","getClass","getAttribute","trim","hasClass","className","indexOf","isExcluded","cur","excludeClass","exclude","rsvg","isSVGElement","test","namespaceURI","nodeName","shallowClone","obj","clone","defaultOptions","animate","canvas","disablePan","disableZoom","disableXAxis","disableYAxis","handleStartEvent","preventDefault","stopPropagation","maxScale","minScale","overflow","panOnlyWhenZoomed","pinchAndPan","relative","startX","startY","startScale","step","touchAction","Panzoom","resetStyle","userSelect","setOptions","opts","origin","origX","origY","startClientX","startClientY","startDistance","isPanning","trigger","eventName","silent","dispatchEvent","setTransformWithEvent","originalEvent","requestAnimationFrame","constrainXY","toX","toY","toScale","panOptions","result","force","contain","dims","realWidth","realHeight","scaledWidth","scaledHeight","diffHorizontal","diffVertical","minX","maxX","max","min","minY","maxY","roundPixels","constrainScale","zoomOptions","elemWidth","elemHeight","parentWidth","parentHeight","elemScaledWidth","elemScaledHeight","pan","focal","panResult","zoomInOut","isIn","exp","zoomIn","zoomOut","zoomToPoint","point","effectiveArea","zoomWithWheel","delta","deltaY","deltaX","wheel","reset","resetOptions","handleDown","handleMove","undefined","current","hasMultiple","diff","handleUp","bound","bind","passive","destroy","noBind","eventNames","getPan","getScale","getOptions","panzoom","debounce_zoom","init","getActivePagePos","panzoomzoom","panzoomstart","panzoomend","calcPanDist","updateScale","disableActiveModule","PageMenu","SinglePage","PanZoom","active_module_path","active_module_meta_filename","previous_page","next_page","keyPressed","action","prevSpread","nextSpread","OpenedPageOrSpread","desired_largest_dimension","arr","array_move","PageSettings","PagesList","___CSS_LOADER_EXPORT___","module","content","__esModule","locals","exports","add"],"sourceRoot":""}